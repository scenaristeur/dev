{"version":3,"file":"js/942.f23c179c.js","mappings":"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","sources":["webpack://dev/./src/components/worlds/PhysicWorld.vue?025d","webpack://dev/./node_modules/three/examples/jsm/deprecated/Geometry.js","webpack://dev/../../src/deprecated/face3.ts","webpack://dev/./node_modules/three/examples/jsm/loaders/SVGLoader.js","webpack://dev/../../src/csg/_directGeometry.ts","webpack://dev/../../src/csg/_fromGeometry.ts","webpack://dev/../../src/plugins/transform.ts","webpack://dev/../../src/csg/index.ts","webpack://dev/./node_modules/three/examples/jsm/libs/fflate.module.js","webpack://dev/./node_modules/three/examples/jsm/curves/NURBSUtils.js","webpack://dev/./node_modules/three/examples/jsm/curves/NURBSCurve.js","webpack://dev/./node_modules/three/examples/jsm/loaders/FBXLoader.js","webpack://dev/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://dev/../../src/plugins/loaders.ts","webpack://dev/../../src/plugins/lights.ts","webpack://dev/../src/extendedMesh.ts","webpack://dev/../src/logger.ts","webpack://dev/../src/defaultMaterial.ts","webpack://dev/../src/factories.ts","webpack://dev/../../src/plugins/heightmap.ts","webpack://dev/../../src/plugins/warpSpeed.ts","webpack://dev/../../src/plugins/mixers.ts","webpack://dev/./node_modules/three/examples/jsm/objects/Reflector.js","webpack://dev/./node_modules/three/examples/jsm/objects/Refractor.js","webpack://dev/./node_modules/three/examples/jsm/objects/Water2.js","webpack://dev/../../src/plugins/water.ts","webpack://dev/../../src/plugins/misc.ts","webpack://dev/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://dev/./node_modules/three/examples/jsm/webxr/VRButton.js","webpack://dev/./node_modules/three/examples/jsm/libs/motion-controllers.module.js","webpack://dev/./node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","webpack://dev/../../src/plugins/webxr.ts","webpack://dev/../../src/plugins/haveSomeFun.ts","webpack://dev/../../src/plugins/cameras.ts","webpack://dev/../src/scene3d.ts","webpack://dev/../src/physicsBody.ts","webpack://dev/../src/shapes.ts","webpack://dev/../src/constraints.ts","webpack://dev/../src/torusShape.ts","webpack://dev/../src/collisionEvents.ts","webpack://dev/../src/debugDrawer.ts","webpack://dev/./node_modules/three/examples/jsm/math/ConvexHull.js","webpack://dev/./node_modules/three/examples/jsm/geometries/ConvexGeometry.js","webpack://dev/../src/convexObjectBreaker.ts","webpack://dev/../src/wasmLoader.ts","webpack://dev/../src/physicsLoader.ts","webpack://dev/../src/applyMixins.ts","webpack://dev/../../src/raycaster/closestRayResultCallback.ts","webpack://dev/../../src/raycaster/allHitsRayResultCallback.ts","webpack://dev/../../src/raycaster/raycaster.ts","webpack://dev/../src/physics.ts","webpack://dev/../src/core.ts","webpack://dev/../src/version.ts","webpack://dev/../src/index.ts","webpack://dev/../src/project.ts","webpack://dev/../src/eventMatrix.ts","webpack://dev/../../src/flat/_misc.ts","webpack://dev/./node_modules/three/examples/jsm/shaders/DotScreenShader.js","webpack://dev/./node_modules/three/examples/jsm/libs/stats.module.js","webpack://dev/./src/components/worlds/physic/MainScene.js","webpack://dev/src/components/worlds/PhysicWorld.vue","webpack://dev/./src/components/worlds/PhysicWorld.vue?11e9","webpack://dev/./src/components/worlds/PhysicWorld.vue","webpack://dev/../src/three-to-ammo.js","webpack://dev/./node_modules/matter-js/build/matter.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" Physic World \"),_c('div',{staticClass:\"home\",attrs:{\"id\":\"myCanvas\"}})])}]\n\nexport { render, staticRenderFns }","import {\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tEventDispatcher,\n\tFloat32BufferAttribute,\n\tMatrix3,\n\tMatrix4,\n\tMathUtils,\n\tObject3D,\n\tSphere,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _m1 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\n\nclass Geometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Geometry';\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\tthis.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = false;\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.lineDistancesNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tfromBufferGeometry( geometry ) {\n\n\t\tconst scope = this;\n\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\n\t\tconst attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst position = attributes.position;\n\t\tconst normal = attributes.normal;\n\t\tconst color = attributes.color;\n\t\tconst uv = attributes.uv;\n\t\tconst uv2 = attributes.uv2;\n\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\n\n\t\t\tif ( color !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone()\n\t\t\t];\n\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\n\t\t\t];\n\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uv !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uv2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\n\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tconst center = this.boundingSphere.center;\n\t\tconst radius = this.boundingSphere.radius;\n\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tconst matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeFaceNormals() {\n\n\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals( areaWeighted = true ) {\n\n\t\tconst vertices = new Array( this.vertices.length );\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t}\n\n\tcomputeFlatVertexNormals() {\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t}\n\n\tcomputeMorphNormals() {\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tconst tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tconst faceNormal = new Vector3();\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t}\n\n\tmerge( geometry, matrix, materialIndexOffset = 0 ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet normalMatrix;\n\t\tconst vertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = vertices2[ i ];\n\n\t\t\tconst vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tconst face = faces2[ i ];\n\t\t\tlet normal, color;\n\t\t\tconst faceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tconst faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tmergeMesh( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t}\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices( precisionPoints = 4 ) {\n\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tconst unique = [], changes = [];\n\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst v = this.vertices[ i ];\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tconst faceIndicesToRemove = [];\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tconst indices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tconst idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tconst diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsortFacesByMaterialIndex() {\n\n\t\tconst faces = this.faces;\n\t\tconst length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tlet newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tconst vertices = [];\n\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst normals = [];\n\t\tconst normalsHash = {};\n\t\tconst colors = [];\n\t\tconst colorsHash = {};\n\t\tconst uvs = [];\n\t\tconst uvsHash = {};\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tconst hasMaterial = true;\n\t\t\tconst hasFaceUv = false; // deprecated\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tlet faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tconst vertices = source.vertices;\n\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tconst colors = source.colors;\n\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tconst faces = source.faces;\n\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphTargets = source.morphTargets;\n\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tconst morphNormals = source.morphNormals;\n\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tconst morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tconst destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tconst skinWeights = source.skinWeights;\n\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tconst skinIndices = source.skinIndices;\n\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tconst lineDistances = source.lineDistances;\n\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoBufferGeometry() {\n\n\t\tconst geometry = new DirectGeometry().fromGeometry( this );\n\n\t\tconst buffergeometry = new BufferGeometry();\n\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tbuffergeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tbuffergeometry.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tbuffergeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tbuffergeometry.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tbuffergeometry.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tbuffergeometry.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( const name in geometry.morphTargets ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ i ];\n\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tbuffergeometry.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tbuffergeometry.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tbuffergeometry.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tbuffergeometry.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tbuffergeometry.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t}\n\n\tapplyMatrix( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tstatic createBufferGeometryFromObject( object ) {\n\n\t\tlet buffergeometry = new BufferGeometry();\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tbuffergeometry.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tbuffergeometry.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tbuffergeometry.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tbuffergeometry.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tbuffergeometry.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tbuffergeometry = geometry.toBufferGeometry();\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n}\n\nGeometry.prototype.isGeometry = true;\n\nclass DirectGeometry {\n\n\tconstructor() {\n\n\t\tthis.vertices = [];\n\t\tthis.normals = [];\n\t\tthis.colors = [];\n\t\tthis.uvs = [];\n\t\tthis.uvs2 = [];\n\n\t\tthis.groups = [];\n\n\t\tthis.morphTargets = {};\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\t// this.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tcomputeGroups( geometry ) {\n\n\t\tconst groups = [];\n\n\t\tlet group, i;\n\t\tlet materialIndex = undefined;\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n\tfromGeometry( geometry ) {\n\n\t\tconst faces = geometry.faces;\n\t\tconst vertices = geometry.vertices;\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tconst morphTargets = geometry.morphTargets;\n\t\tconst morphTargetsLength = morphTargets.length;\n\n\t\tlet morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tconst morphNormals = geometry.morphNormals;\n\t\tconst morphNormalsLength = morphNormals.length;\n\n\t\tlet morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tconst skinIndices = geometry.skinIndices;\n\t\tconst skinWeights = geometry.skinWeights;\n\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Face3 {\n\n\tconstructor( a, b, c, normal, color, materialIndex = 0 ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\t\tthis.color = ( color && color.isColor ) ? color : new Color();\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\t\tthis.materialIndex = materialIndex;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Face3, Geometry };\n",null,"import {\n\tBox2,\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tLoader,\n\tMatrix3,\n\tPath,\n\tShape,\n\tShapePath,\n\tShapeUtils,\n\tVector2,\n\tVector3\n} from 'three';\n\nclass SVGLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\t// Default dots per inch\n\t\tthis.defaultDPI = 90;\n\n\t\t// Accepted units: 'mm', 'cm', 'in', 'pt', 'pc', 'px'\n\t\tthis.defaultUnit = 'px';\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst scope = this;\n\n\t\tfunction parseNode( node, style ) {\n\n\t\t\tif ( node.nodeType !== 1 ) return;\n\n\t\t\tconst transform = getNodeTransform( node );\n\n\t\t\tlet traverseChildNodes = true;\n\n\t\t\tlet path = null;\n\n\t\t\tswitch ( node.nodeName ) {\n\n\t\t\t\tcase 'svg':\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'style':\n\t\t\t\t\tparseCSSStylesheet( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'g':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'path':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tif ( node.hasAttribute( 'd' ) ) path = parsePathNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rect':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseRectNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygon':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolygonNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polyline':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolylineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'circle':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseCircleNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ellipse':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseEllipseNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'line':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseLineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'defs':\n\t\t\t\t\ttraverseChildNodes = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\n\t\t\t\t\tconst href = node.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) || '';\n\t\t\t\t\tconst usedNodeId = href.substring( 1 );\n\t\t\t\t\tconst usedNode = node.viewportElement.getElementById( usedNodeId );\n\t\t\t\t\tif ( usedNode ) {\n\n\t\t\t\t\t\tparseNode( usedNode, style );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'SVGLoader: \\'use node\\' references non-existent node id: ' + usedNodeId );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log( node );\n\n\t\t\t}\n\n\t\t\tif ( path ) {\n\n\t\t\t\tif ( style.fill !== undefined && style.fill !== 'none' ) {\n\n\t\t\t\t\tpath.color.setStyle( style.fill );\n\n\t\t\t\t}\n\n\t\t\t\ttransformPath( path, currentTransform );\n\n\t\t\t\tpaths.push( path );\n\n\t\t\t\tpath.userData = { node: node, style: style };\n\n\t\t\t}\n\n\t\t\tif ( traverseChildNodes ) {\n\n\t\t\t\tconst nodes = node.childNodes;\n\n\t\t\t\tfor ( let i = 0; i < nodes.length; i ++ ) {\n\n\t\t\t\t\tparseNode( nodes[ i ], style );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( transform ) {\n\n\t\t\t\ttransformStack.pop();\n\n\t\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\t\tcurrentTransform.copy( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parsePathNode( node ) {\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tconst point = new Vector2();\n\t\t\tconst control = new Vector2();\n\n\t\t\tconst firstPoint = new Vector2();\n\t\t\tlet isFirstPoint = true;\n\t\t\tlet doSetFirstPoint = false;\n\n\t\t\tconst d = node.getAttribute( 'd' );\n\n\t\t\t// console.log( d );\n\n\t\t\tconst commands = d.match( /[a-df-z][^a-df-z]*/ig );\n\n\t\t\tfor ( let i = 0, l = commands.length; i < l; i ++ ) {\n\n\t\t\t\tconst command = commands[ i ];\n\n\t\t\t\tconst type = command.charAt( 0 );\n\t\t\t\tconst data = command.substr( 1 ).trim();\n\n\t\t\t\tif ( isFirstPoint === true ) {\n\n\t\t\t\t\tdoSetFirstPoint = true;\n\t\t\t\t\tisFirstPoint = false;\n\n\t\t\t\t}\n\n\t\t\t\tlet numbers;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'M':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'H':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'V':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'L':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'C':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 4 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'S':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'T':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if start point == end point\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == point.x && numbers[ j + 6 ] == point.y ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'h':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 4 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = point.y + numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'a':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if no displacement\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == 0 && numbers[ j + 6 ] == 0 ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\tcase 'z':\n\t\t\t\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\t\t\t\tif ( path.currentPath.curves.length > 0 ) {\n\n\t\t\t\t\t\t\t// Reset point to beginning of Path\n\t\t\t\t\t\t\tpoint.copy( firstPoint );\n\t\t\t\t\t\t\tpath.currentPath.currentPoint.copy( point );\n\t\t\t\t\t\t\tisFirstPoint = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( command );\n\n\t\t\t\t}\n\n\t\t\t\t// console.log( type, parseFloats( data ), parseFloats( data ).length  )\n\n\t\t\t\tdoSetFirstPoint = false;\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCSSStylesheet( node ) {\n\n\t\t\tif ( ! node.sheet || ! node.sheet.cssRules || ! node.sheet.cssRules.length ) return;\n\n\t\t\tfor ( let i = 0; i < node.sheet.cssRules.length; i ++ ) {\n\n\t\t\t\tconst stylesheet = node.sheet.cssRules[ i ];\n\n\t\t\t\tif ( stylesheet.type !== 1 ) continue;\n\n\t\t\t\tconst selectorList = stylesheet.selectorText\n\t\t\t\t\t.split( /,/gm )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let j = 0; j < selectorList.length; j ++ ) {\n\n\t\t\t\t\t// Remove empty rules\n\t\t\t\t\tconst definitions = Object.fromEntries(\n\t\t\t\t\t\tObject.entries( stylesheet.style ).filter( ( [ , v ] ) => v !== '' )\n\t\t\t\t\t);\n\n\t\t\t\t\tstylesheets[ selectorList[ j ] ] = Object.assign(\n\t\t\t\t\t\tstylesheets[ selectorList[ j ] ] || {},\n\t\t\t\t\t\tdefinitions\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\t\t * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\n\t\t * From\n\t\t * rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\t * To\n\t\t * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\n\t\t */\n\n\t\tfunction parseArcCommand( path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end ) {\n\n\t\t\tif ( rx == 0 || ry == 0 ) {\n\n\t\t\t\t// draw a line if either of the radii == 0\n\t\t\t\tpath.lineTo( end.x, end.y );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tx_axis_rotation = x_axis_rotation * Math.PI / 180;\n\n\t\t\t// Ensure radii are positive\n\t\t\trx = Math.abs( rx );\n\t\t\try = Math.abs( ry );\n\n\t\t\t// Compute (x1', y1')\n\t\t\tconst dx2 = ( start.x - end.x ) / 2.0;\n\t\t\tconst dy2 = ( start.y - end.y ) / 2.0;\n\t\t\tconst x1p = Math.cos( x_axis_rotation ) * dx2 + Math.sin( x_axis_rotation ) * dy2;\n\t\t\tconst y1p = - Math.sin( x_axis_rotation ) * dx2 + Math.cos( x_axis_rotation ) * dy2;\n\n\t\t\t// Compute (cx', cy')\n\t\t\tlet rxs = rx * rx;\n\t\t\tlet rys = ry * ry;\n\t\t\tconst x1ps = x1p * x1p;\n\t\t\tconst y1ps = y1p * y1p;\n\n\t\t\t// Ensure radii are large enough\n\t\t\tconst cr = x1ps / rxs + y1ps / rys;\n\n\t\t\tif ( cr > 1 ) {\n\n\t\t\t\t// scale up rx,ry equally so cr == 1\n\t\t\t\tconst s = Math.sqrt( cr );\n\t\t\t\trx = s * rx;\n\t\t\t\try = s * ry;\n\t\t\t\trxs = rx * rx;\n\t\t\t\trys = ry * ry;\n\n\t\t\t}\n\n\t\t\tconst dq = ( rxs * y1ps + rys * x1ps );\n\t\t\tconst pq = ( rxs * rys - dq ) / dq;\n\t\t\tlet q = Math.sqrt( Math.max( 0, pq ) );\n\t\t\tif ( large_arc_flag === sweep_flag ) q = - q;\n\t\t\tconst cxp = q * rx * y1p / ry;\n\t\t\tconst cyp = - q * ry * x1p / rx;\n\n\t\t\t// Step 3: Compute (cx, cy) from (cx', cy')\n\t\t\tconst cx = Math.cos( x_axis_rotation ) * cxp - Math.sin( x_axis_rotation ) * cyp + ( start.x + end.x ) / 2;\n\t\t\tconst cy = Math.sin( x_axis_rotation ) * cxp + Math.cos( x_axis_rotation ) * cyp + ( start.y + end.y ) / 2;\n\n\t\t\t// Step 4: Compute 1 and \n\t\t\tconst theta = svgAngle( 1, 0, ( x1p - cxp ) / rx, ( y1p - cyp ) / ry );\n\t\t\tconst delta = svgAngle( ( x1p - cxp ) / rx, ( y1p - cyp ) / ry, ( - x1p - cxp ) / rx, ( - y1p - cyp ) / ry ) % ( Math.PI * 2 );\n\n\t\t\tpath.currentPath.absellipse( cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation );\n\n\t\t}\n\n\t\tfunction svgAngle( ux, uy, vx, vy ) {\n\n\t\t\tconst dot = ux * vx + uy * vy;\n\t\t\tconst len = Math.sqrt( ux * ux + uy * uy ) * Math.sqrt( vx * vx + vy * vy );\n\t\t\tlet ang = Math.acos( Math.max( - 1, Math.min( 1, dot / len ) ) ); // floating point precision, slightly over values appear\n\t\t\tif ( ( ux * vy - uy * vx ) < 0 ) ang = - ang;\n\t\t\treturn ang;\n\n\t\t}\n\n\t\t/*\n\t\t* According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\n\t\t* rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\n\t\t*/\n\t\tfunction parseRectNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'x' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'y' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || node.getAttribute( 'ry' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst w = parseFloatWithUnits( node.getAttribute( 'width' ) );\n\t\t\tconst h = parseFloatWithUnits( node.getAttribute( 'height' ) );\n\n\t\t\t// Ellipse arc to Bezier approximation Coefficient (Inversed). See:\n\t\t\t// https://spencermortensen.com/articles/bezier-circle/\n\t\t\tconst bci = 1 - 0.551915024494;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\t// top left\n\t\t\tpath.moveTo( x + rx, y );\n\n\t\t\t// top right\n\t\t\tpath.lineTo( x + w - rx, y );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry * bci,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom right\n\t\t\tpath.lineTo( x + w, y + h - ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx + w - rx,\n\t\t\t\t\ty + h\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom left\n\t\t\tpath.lineTo( x + rx, y + h );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// back to top left\n\t\t\tpath.lineTo( x, y + ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo( x, y + ry * bci, x + rx * bci, y, x + rx, y );\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolygonNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolylineNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCircleNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst r = parseFloatWithUnits( node.getAttribute( 'r' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absarc( x, y, r, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseEllipseNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absellipse( x, y, rx, ry, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseLineNode( node ) {\n\n\t\t\tconst x1 = parseFloatWithUnits( node.getAttribute( 'x1' ) || 0 );\n\t\t\tconst y1 = parseFloatWithUnits( node.getAttribute( 'y1' ) || 0 );\n\t\t\tconst x2 = parseFloatWithUnits( node.getAttribute( 'x2' ) || 0 );\n\t\t\tconst y2 = parseFloatWithUnits( node.getAttribute( 'y2' ) || 0 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.moveTo( x1, y1 );\n\t\t\tpath.lineTo( x2, y2 );\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction parseStyle( node, style ) {\n\n\t\t\tstyle = Object.assign( {}, style ); // clone style\n\n\t\t\tlet stylesheetStyles = {};\n\n\t\t\tif ( node.hasAttribute( 'class' ) ) {\n\n\t\t\t\tconst classSelectors = node.getAttribute( 'class' )\n\t\t\t\t\t.split( /\\s/ )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let i = 0; i < classSelectors.length; i ++ ) {\n\n\t\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '.' + classSelectors[ i ] ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'id' ) ) {\n\n\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '#' + node.getAttribute( 'id' ) ] );\n\n\t\t\t}\n\n\t\t\tfunction addStyle( svgName, jsName, adjustFunction ) {\n\n\t\t\t\tif ( adjustFunction === undefined ) adjustFunction = function copy( v ) {\n\n\t\t\t\t\tif ( v.startsWith( 'url' ) ) console.warn( 'SVGLoader: url access in attributes is not implemented.' );\n\n\t\t\t\t\treturn v;\n\n\t\t\t\t};\n\n\t\t\t\tif ( node.hasAttribute( svgName ) ) style[ jsName ] = adjustFunction( node.getAttribute( svgName ) );\n\t\t\t\tif ( stylesheetStyles[ svgName ] ) style[ jsName ] = adjustFunction( stylesheetStyles[ svgName ] );\n\t\t\t\tif ( node.style && node.style[ svgName ] !== '' ) style[ jsName ] = adjustFunction( node.style[ svgName ] );\n\n\t\t\t}\n\n\t\t\tfunction clamp( v ) {\n\n\t\t\t\treturn Math.max( 0, Math.min( 1, parseFloatWithUnits( v ) ) );\n\n\t\t\t}\n\n\t\t\tfunction positive( v ) {\n\n\t\t\t\treturn Math.max( 0, parseFloatWithUnits( v ) );\n\n\t\t\t}\n\n\t\t\taddStyle( 'fill', 'fill' );\n\t\t\taddStyle( 'fill-opacity', 'fillOpacity', clamp );\n\t\t\taddStyle( 'fill-rule', 'fillRule' );\n\t\t\taddStyle( 'opacity', 'opacity', clamp );\n\t\t\taddStyle( 'stroke', 'stroke' );\n\t\t\taddStyle( 'stroke-opacity', 'strokeOpacity', clamp );\n\t\t\taddStyle( 'stroke-width', 'strokeWidth', positive );\n\t\t\taddStyle( 'stroke-linejoin', 'strokeLineJoin' );\n\t\t\taddStyle( 'stroke-linecap', 'strokeLineCap' );\n\t\t\taddStyle( 'stroke-miterlimit', 'strokeMiterLimit', positive );\n\t\t\taddStyle( 'visibility', 'visibility' );\n\n\t\t\treturn style;\n\n\t\t}\n\n\t\t// http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\n\n\t\tfunction getReflection( a, b ) {\n\n\t\t\treturn a - ( b - a );\n\n\t\t}\n\n\t\t// from https://github.com/ppvg/svg-numbers (MIT License)\n\n\t\tfunction parseFloats( input, flags, stride ) {\n\n\t\t\tif ( typeof input !== 'string' ) {\n\n\t\t\t\tthrow new TypeError( 'Invalid input: ' + typeof input );\n\n\t\t\t}\n\n\t\t\t// Character groups\n\t\t\tconst RE = {\n\t\t\t\tSEPARATOR: /[ \\t\\r\\n\\,.\\-+]/,\n\t\t\t\tWHITESPACE: /[ \\t\\r\\n]/,\n\t\t\t\tDIGIT: /[\\d]/,\n\t\t\t\tSIGN: /[-+]/,\n\t\t\t\tPOINT: /\\./,\n\t\t\t\tCOMMA: /,/,\n\t\t\t\tEXP: /e/i,\n\t\t\t\tFLAGS: /[01]/\n\t\t\t};\n\n\t\t\t// States\n\t\t\tconst SEP = 0;\n\t\t\tconst INT = 1;\n\t\t\tconst FLOAT = 2;\n\t\t\tconst EXP = 3;\n\n\t\t\tlet state = SEP;\n\t\t\tlet seenComma = true;\n\t\t\tlet number = '', exponent = '';\n\t\t\tconst result = [];\n\n\t\t\tfunction throwSyntaxError( current, i, partial ) {\n\n\t\t\t\tconst error = new SyntaxError( 'Unexpected character \"' + current + '\" at index ' + i + '.' );\n\t\t\t\terror.partial = partial;\n\t\t\t\tthrow error;\n\n\t\t\t}\n\n\t\t\tfunction newNumber() {\n\n\t\t\t\tif ( number !== '' ) {\n\n\t\t\t\t\tif ( exponent === '' ) result.push( Number( number ) );\n\t\t\t\t\telse result.push( Number( number ) * Math.pow( 10, Number( exponent ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tnumber = '';\n\t\t\t\texponent = '';\n\n\t\t\t}\n\n\t\t\tlet current;\n\t\t\tconst length = input.length;\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tcurrent = input[ i ];\n\n\t\t\t\t// check for flags\n\t\t\t\tif ( Array.isArray( flags ) && flags.includes( result.length % stride ) && RE.FLAGS.test( current ) ) {\n\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// parse until next number\n\t\t\t\tif ( state === SEP ) {\n\n\t\t\t\t\t// eat whitespace\n\t\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// start new number\n\t\t\t\t\tif ( RE.DIGIT.test( current ) || RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tstate = INT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double commas (e.g. \"1, , 2\")\n\t\t\t\t\tif ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\t\tif ( seenComma ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseenComma = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse integer part\n\t\t\t\tif ( state === INT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double signs (\"-+1\"), but not on sign as separator (\"-1-2\")\n\t\t\t\t\tif ( RE.SIGN.test( current )\n\t\t\t\t\t\t\t&& number.length === 1\n\t\t\t\t\t\t\t&& RE.SIGN.test( number[ 0 ] ) ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse decimal part\n\t\t\t\tif ( state === FLOAT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double decimal points (e.g. \"1..2\")\n\t\t\t\t\tif ( RE.POINT.test( current ) && number[ number.length - 1 ] === '.' ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse exponent part\n\t\t\t\tif ( state === EXP ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tif ( exponent === '' ) {\n\n\t\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( exponent.length === 1 && RE.SIGN.test( exponent ) ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// end of number\n\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = false;\n\n\t\t\t\t} else if ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = true;\n\n\t\t\t\t} else if ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else if ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add the last number found (if any)\n\t\t\tnewNumber();\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\t// Units\n\n\t\tconst units = [ 'mm', 'cm', 'in', 'pt', 'pc', 'px' ];\n\n\t\t// Conversion: [ fromUnit ][ toUnit ] (-1 means dpi dependent)\n\t\tconst unitConversion = {\n\n\t\t\t'mm': {\n\t\t\t\t'mm': 1,\n\t\t\t\t'cm': 0.1,\n\t\t\t\t'in': 1 / 25.4,\n\t\t\t\t'pt': 72 / 25.4,\n\t\t\t\t'pc': 6 / 25.4,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'cm': {\n\t\t\t\t'mm': 10,\n\t\t\t\t'cm': 1,\n\t\t\t\t'in': 1 / 2.54,\n\t\t\t\t'pt': 72 / 2.54,\n\t\t\t\t'pc': 6 / 2.54,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'in': {\n\t\t\t\t'mm': 25.4,\n\t\t\t\t'cm': 2.54,\n\t\t\t\t'in': 1,\n\t\t\t\t'pt': 72,\n\t\t\t\t'pc': 6,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pt': {\n\t\t\t\t'mm': 25.4 / 72,\n\t\t\t\t'cm': 2.54 / 72,\n\t\t\t\t'in': 1 / 72,\n\t\t\t\t'pt': 1,\n\t\t\t\t'pc': 6 / 72,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pc': {\n\t\t\t\t'mm': 25.4 / 6,\n\t\t\t\t'cm': 2.54 / 6,\n\t\t\t\t'in': 1 / 6,\n\t\t\t\t'pt': 72 / 6,\n\t\t\t\t'pc': 1,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'px': {\n\t\t\t\t'px': 1\n\t\t\t}\n\n\t\t};\n\n\t\tfunction parseFloatWithUnits( string ) {\n\n\t\t\tlet theUnit = 'px';\n\n\t\t\tif ( typeof string === 'string' || string instanceof String ) {\n\n\t\t\t\tfor ( let i = 0, n = units.length; i < n; i ++ ) {\n\n\t\t\t\t\tconst u = units[ i ];\n\n\t\t\t\t\tif ( string.endsWith( u ) ) {\n\n\t\t\t\t\t\ttheUnit = u;\n\t\t\t\t\t\tstring = string.substring( 0, string.length - u.length );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlet scale = undefined;\n\n\t\t\tif ( theUnit === 'px' && scope.defaultUnit !== 'px' ) {\n\n\t\t\t\t// Conversion scale from  pixels to inches, then to default units\n\n\t\t\t\tscale = unitConversion[ 'in' ][ scope.defaultUnit ] / scope.defaultDPI;\n\n\t\t\t} else {\n\n\t\t\t\tscale = unitConversion[ theUnit ][ scope.defaultUnit ];\n\n\t\t\t\tif ( scale < 0 ) {\n\n\t\t\t\t\t// Conversion scale to pixels\n\n\t\t\t\t\tscale = unitConversion[ theUnit ][ 'in' ] * scope.defaultDPI;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn scale * parseFloat( string );\n\n\t\t}\n\n\t\t// Transforms\n\n\t\tfunction getNodeTransform( node ) {\n\n\t\t\tif ( ! ( node.hasAttribute( 'transform' ) || ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) ) ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst transform = parseNodeTransform( node );\n\n\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\ttransform.premultiply( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t}\n\n\t\t\tcurrentTransform.copy( transform );\n\t\t\ttransformStack.push( transform );\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction parseNodeTransform( node ) {\n\n\t\t\tconst transform = new Matrix3();\n\t\t\tconst currentTransform = tempTransform0;\n\n\t\t\tif ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) {\n\n\t\t\t\tconst tx = parseFloatWithUnits( node.getAttribute( 'x' ) );\n\t\t\t\tconst ty = parseFloatWithUnits( node.getAttribute( 'y' ) );\n\n\t\t\t\ttransform.translate( tx, ty );\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'transform' ) ) {\n\n\t\t\t\tconst transformsTexts = node.getAttribute( 'transform' ).split( ')' );\n\n\t\t\t\tfor ( let tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex -- ) {\n\n\t\t\t\t\tconst transformText = transformsTexts[ tIndex ].trim();\n\n\t\t\t\t\tif ( transformText === '' ) continue;\n\n\t\t\t\t\tconst openParPos = transformText.indexOf( '(' );\n\t\t\t\t\tconst closeParPos = transformText.length;\n\n\t\t\t\t\tif ( openParPos > 0 && openParPos < closeParPos ) {\n\n\t\t\t\t\t\tconst transformType = transformText.substr( 0, openParPos );\n\n\t\t\t\t\t\tconst array = parseFloats( transformText.substr( openParPos + 1, closeParPos - openParPos - 1 ) );\n\n\t\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t\t\tswitch ( transformType ) {\n\n\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst tx = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet ty = tx;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tty = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.translate( tx, ty );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tlet angle = 0;\n\t\t\t\t\t\t\t\t\tlet cx = 0;\n\t\t\t\t\t\t\t\t\tlet cy = 0;\n\n\t\t\t\t\t\t\t\t\t// Angle\n\t\t\t\t\t\t\t\t\tangle = - array[ 0 ] * Math.PI / 180;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 3 ) {\n\n\t\t\t\t\t\t\t\t\t\t// Center x, y\n\t\t\t\t\t\t\t\t\t\tcx = array[ 1 ];\n\t\t\t\t\t\t\t\t\t\tcy = array[ 2 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Rotate around center (cx, cy)\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( - cx, - cy );\n\t\t\t\t\t\t\t\t\ttempTransform2.identity().rotate( angle );\n\t\t\t\t\t\t\t\t\ttempTransform3.multiplyMatrices( tempTransform2, tempTransform1 );\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( cx, cy );\n\t\t\t\t\t\t\t\t\tcurrentTransform.multiplyMatrices( tempTransform1, tempTransform3 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst scaleX = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet scaleY = scaleX;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tscaleY = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.scale( scaleX, scaleY );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewX':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, Math.tan( array[ 0 ] * Math.PI / 180 ), 0,\n\t\t\t\t\t\t\t\t\t\t0, 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewY':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, 0, 0,\n\t\t\t\t\t\t\t\t\t\tMath.tan( array[ 0 ] * Math.PI / 180 ), 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif ( array.length === 6 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\tarray[ 0 ], array[ 2 ], array[ 4 ],\n\t\t\t\t\t\t\t\t\t\tarray[ 1 ], array[ 3 ], array[ 5 ],\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttransform.premultiply( currentTransform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction transformPath( path, m ) {\n\n\t\t\tfunction transfVec2( v2 ) {\n\n\t\t\t\ttempV3.set( v2.x, v2.y, 1 ).applyMatrix3( m );\n\n\t\t\t\tv2.set( tempV3.x, tempV3.y );\n\n\t\t\t}\n\n\t\t\tconst isRotated = isTransformRotated( m );\n\n\t\t\tconst subPaths = path.subPaths;\n\n\t\t\tfor ( let i = 0, n = subPaths.length; i < n; i ++ ) {\n\n\t\t\t\tconst subPath = subPaths[ i ];\n\t\t\t\tconst curves = subPath.curves;\n\n\t\t\t\tfor ( let j = 0; j < curves.length; j ++ ) {\n\n\t\t\t\t\tconst curve = curves[ j ];\n\n\t\t\t\t\tif ( curve.isLineCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isCubicBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\t\t\t\t\t\ttransfVec2( curve.v3 );\n\n\t\t\t\t\t} else if ( curve.isQuadraticBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isEllipseCurve ) {\n\n\t\t\t\t\t\tif ( isRotated ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttempV2.set( curve.aX, curve.aY );\n\t\t\t\t\t\ttransfVec2( tempV2 );\n\t\t\t\t\t\tcurve.aX = tempV2.x;\n\t\t\t\t\t\tcurve.aY = tempV2.y;\n\n\t\t\t\t\t\tcurve.xRadius *= getTransformScaleX( m );\n\t\t\t\t\t\tcurve.yRadius *= getTransformScaleY( m );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isTransformRotated( m ) {\n\n\t\t\treturn m.elements[ 1 ] !== 0 || m.elements[ 3 ] !== 0;\n\n\t\t}\n\n\t\tfunction getTransformScaleX( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] );\n\n\t\t}\n\n\t\tfunction getTransformScaleY( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 3 ] * te[ 3 ] + te[ 4 ] * te[ 4 ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst paths = [];\n\t\tconst stylesheets = {};\n\n\t\tconst transformStack = [];\n\n\t\tconst tempTransform0 = new Matrix3();\n\t\tconst tempTransform1 = new Matrix3();\n\t\tconst tempTransform2 = new Matrix3();\n\t\tconst tempTransform3 = new Matrix3();\n\t\tconst tempV2 = new Vector2();\n\t\tconst tempV3 = new Vector3();\n\n\t\tconst currentTransform = new Matrix3();\n\n\t\tconst xml = new DOMParser().parseFromString( text, 'image/svg+xml' ); // application/xml\n\n\t\tparseNode( xml.documentElement, {\n\t\t\tfill: '#000',\n\t\t\tfillOpacity: 1,\n\t\t\tstrokeOpacity: 1,\n\t\t\tstrokeWidth: 1,\n\t\t\tstrokeLineJoin: 'miter',\n\t\t\tstrokeLineCap: 'butt',\n\t\t\tstrokeMiterLimit: 4\n\t\t} );\n\n\t\tconst data = { paths: paths, xml: xml.documentElement };\n\n\t\t// console.log( paths );\n\t\treturn data;\n\n\t}\n\n\tstatic createShapes( shapePath ) {\n\n\t\t// Param shapePath: a shapepath as returned by the parse function of this class\n\t\t// Returns Shape object\n\n\t\tconst BIGNUMBER = 999999999;\n\n\t\tconst IntersectionLocationType = {\n\t\t\tORIGIN: 0,\n\t\t\tDESTINATION: 1,\n\t\t\tBETWEEN: 2,\n\t\t\tLEFT: 3,\n\t\t\tRIGHT: 4,\n\t\t\tBEHIND: 5,\n\t\t\tBEYOND: 6\n\t\t};\n\n\t\tconst classifyResult = {\n\t\t\tloc: IntersectionLocationType.ORIGIN,\n\t\t\tt: 0\n\t\t};\n\n\t\tfunction findEdgeIntersection( a0, a1, b0, b1 ) {\n\n\t\t\tconst x1 = a0.x;\n\t\t\tconst x2 = a1.x;\n\t\t\tconst x3 = b0.x;\n\t\t\tconst x4 = b1.x;\n\t\t\tconst y1 = a0.y;\n\t\t\tconst y2 = a1.y;\n\t\t\tconst y3 = b0.y;\n\t\t\tconst y4 = b1.y;\n\t\t\tconst nom1 = ( x4 - x3 ) * ( y1 - y3 ) - ( y4 - y3 ) * ( x1 - x3 );\n\t\t\tconst nom2 = ( x2 - x1 ) * ( y1 - y3 ) - ( y2 - y1 ) * ( x1 - x3 );\n\t\t\tconst denom = ( y4 - y3 ) * ( x2 - x1 ) - ( x4 - x3 ) * ( y2 - y1 );\n\t\t\tconst t1 = nom1 / denom;\n\t\t\tconst t2 = nom2 / denom;\n\n\t\t\tif ( ( ( denom === 0 ) && ( nom1 !== 0 ) ) || ( t1 <= 0 ) || ( t1 >= 1 ) || ( t2 < 0 ) || ( t2 > 1 ) ) {\n\n\t\t\t\t//1. lines are parallel or edges don't intersect\n\n\t\t\t\treturn null;\n\n\t\t\t} else if ( ( nom1 === 0 ) && ( denom === 0 ) ) {\n\n\t\t\t\t//2. lines are colinear\n\n\t\t\t\t//check if endpoints of edge2 (b0-b1) lies on edge1 (a0-a1)\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\t\t\t\t\t//find position of this endpoints relatively to edge1\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t} else if ( classifyResult.loc == IntersectionLocationType.BETWEEN ) {\n\n\t\t\t\t\t\tconst x = + ( ( x1 + classifyResult.t * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\tconst y = + ( ( y1 + classifyResult.t * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\treturn { x: x, y: y, t: classifyResult.t, };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t} else {\n\n\t\t\t\t//3. edges intersect\n\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst x = + ( ( x1 + t1 * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\tconst y = + ( ( y1 + t1 * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\treturn { x: x, y: y, t: t1 };\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction classifyPoint( p, edgeStart, edgeEnd ) {\n\n\t\t\tconst ax = edgeEnd.x - edgeStart.x;\n\t\t\tconst ay = edgeEnd.y - edgeStart.y;\n\t\t\tconst bx = p.x - edgeStart.x;\n\t\t\tconst by = p.y - edgeStart.y;\n\t\t\tconst sa = ax * by - bx * ay;\n\n\t\t\tif ( ( p.x === edgeStart.x ) && ( p.y === edgeStart.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.ORIGIN;\n\t\t\t\tclassifyResult.t = 0;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( p.x === edgeEnd.x ) && ( p.y === edgeEnd.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.DESTINATION;\n\t\t\t\tclassifyResult.t = 1;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa < - Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.LEFT;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa > Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.RIGHT;\n\t\t\t\treturn;\n\n\n\t\t\t}\n\n\t\t\tif ( ( ( ax * bx ) < 0 ) || ( ( ay * by ) < 0 ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEHIND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( Math.sqrt( ax * ax + ay * ay ) ) < ( Math.sqrt( bx * bx + by * by ) ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEYOND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet t;\n\n\t\t\tif ( ax !== 0 ) {\n\n\t\t\t\tt = bx / ax;\n\n\t\t\t} else {\n\n\t\t\t\tt = by / ay;\n\n\t\t\t}\n\n\t\t\tclassifyResult.loc = IntersectionLocationType.BETWEEN;\n\t\t\tclassifyResult.t = t;\n\n\t\t}\n\n\t\tfunction getIntersections( path1, path2 ) {\n\n\t\t\tconst intersectionsRaw = [];\n\t\t\tconst intersections = [];\n\n\t\t\tfor ( let index = 1; index < path1.length; index ++ ) {\n\n\t\t\t\tconst path1EdgeStart = path1[ index - 1 ];\n\t\t\t\tconst path1EdgeEnd = path1[ index ];\n\n\t\t\t\tfor ( let index2 = 1; index2 < path2.length; index2 ++ ) {\n\n\t\t\t\t\tconst path2EdgeStart = path2[ index2 - 1 ];\n\t\t\t\t\tconst path2EdgeEnd = path2[ index2 ];\n\n\t\t\t\t\tconst intersection = findEdgeIntersection( path1EdgeStart, path1EdgeEnd, path2EdgeStart, path2EdgeEnd );\n\n\t\t\t\t\tif ( intersection !== null && intersectionsRaw.find( i => i.t <= intersection.t + Number.EPSILON && i.t >= intersection.t - Number.EPSILON ) === undefined ) {\n\n\t\t\t\t\t\tintersectionsRaw.push( intersection );\n\t\t\t\t\t\tintersections.push( new Vector2( intersection.x, intersection.y ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn intersections;\n\n\t\t}\n\n\t\tfunction getScanlineIntersections( scanline, boundingBox, paths ) {\n\n\t\t\tconst center = new Vector2();\n\t\t\tboundingBox.getCenter( center );\n\n\t\t\tconst allIntersections = [];\n\n\t\t\tpaths.forEach( path => {\n\n\t\t\t\t// check if the center of the bounding box is in the bounding box of the paths.\n\t\t\t\t// this is a pruning method to limit the search of intersections in paths that can't envelop of the current path.\n\t\t\t\t// if a path envelops another path. The center of that oter path, has to be inside the bounding box of the enveloping path.\n\t\t\t\tif ( path.boundingBox.containsPoint( center ) ) {\n\n\t\t\t\t\tconst intersections = getIntersections( scanline, path.points );\n\n\t\t\t\t\tintersections.forEach( p => {\n\n\t\t\t\t\t\tallIntersections.push( { identifier: path.identifier, isCW: path.isCW, point: p } );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tallIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\treturn allIntersections;\n\n\t\t}\n\n\t\tfunction isHoleTo( simplePath, allPaths, scanlineMinX, scanlineMaxX, _fillRule ) {\n\n\t\t\tif ( _fillRule === null || _fillRule === undefined || _fillRule === '' ) {\n\n\t\t\t\t_fillRule = 'nonzero';\n\n\t\t\t}\n\n\t\t\tconst centerBoundingBox = new Vector2();\n\t\t\tsimplePath.boundingBox.getCenter( centerBoundingBox );\n\n\t\t\tconst scanline = [ new Vector2( scanlineMinX, centerBoundingBox.y ), new Vector2( scanlineMaxX, centerBoundingBox.y ) ];\n\n\t\t\tconst scanlineIntersections = getScanlineIntersections( scanline, simplePath.boundingBox, allPaths );\n\n\t\t\tscanlineIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\tconst baseIntersections = [];\n\t\t\tconst otherIntersections = [];\n\n\t\t\tscanlineIntersections.forEach( i => {\n\n\t\t\t\tif ( i.identifier === simplePath.identifier ) {\n\n\t\t\t\t\tbaseIntersections.push( i );\n\n\t\t\t\t} else {\n\n\t\t\t\t\totherIntersections.push( i );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tconst firstXOfPath = baseIntersections[ 0 ].point.x;\n\n\t\t\t// build up the path hierarchy\n\t\t\tconst stack = [];\n\t\t\tlet i = 0;\n\n\t\t\twhile ( i < otherIntersections.length && otherIntersections[ i ].point.x < firstXOfPath ) {\n\n\t\t\t\tif ( stack.length > 0 && stack[ stack.length - 1 ] === otherIntersections[ i ].identifier ) {\n\n\t\t\t\t\tstack.pop();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstack.push( otherIntersections[ i ].identifier );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t\tstack.push( simplePath.identifier );\n\n\t\t\tif ( _fillRule === 'evenodd' ) {\n\n\t\t\t\tconst isHole = stack.length % 2 === 0 ? true : false;\n\t\t\t\tconst isHoleFor = stack[ stack.length - 2 ];\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else if ( _fillRule === 'nonzero' ) {\n\n\t\t\t\t// check if path is a hole by counting the amount of paths with alternating rotations it has to cross.\n\t\t\t\tlet isHole = true;\n\t\t\t\tlet isHoleFor = null;\n\t\t\t\tlet lastCWValue = null;\n\n\t\t\t\tfor ( let i = 0; i < stack.length; i ++ ) {\n\n\t\t\t\t\tconst identifier = stack[ i ];\n\t\t\t\t\tif ( isHole ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = false;\n\t\t\t\t\t\tisHoleFor = identifier;\n\n\t\t\t\t\t} else if ( lastCWValue !== allPaths[ identifier ].isCW ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'fill-rule: \"' + _fillRule + '\" is currently not implemented.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check for self intersecting paths\n\t\t// TODO\n\n\t\t// check intersecting paths\n\t\t// TODO\n\n\t\t// prepare paths for hole detection\n\t\tlet identifier = 0;\n\n\t\tlet scanlineMinX = BIGNUMBER;\n\t\tlet scanlineMaxX = - BIGNUMBER;\n\n\t\tlet simplePaths = shapePath.subPaths.map( p => {\n\n\t\t\tconst points = p.getPoints();\n\t\t\tlet maxY = - BIGNUMBER;\n\t\t\tlet minY = BIGNUMBER;\n\t\t\tlet maxX = - BIGNUMBER;\n\t\t\tlet minX = BIGNUMBER;\n\n\t      \t//points.forEach(p => p.y *= -1);\n\n\t\t\tfor ( let i = 0; i < points.length; i ++ ) {\n\n\t\t\t\tconst p = points[ i ];\n\n\t\t\t\tif ( p.y > maxY ) {\n\n\t\t\t\t\tmaxY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.y < minY ) {\n\n\t\t\t\t\tminY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x > maxX ) {\n\n\t\t\t\t\tmaxX = p.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x < minX ) {\n\n\t\t\t\t\tminX = p.x;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\t\t\tif ( scanlineMaxX <= maxX ) {\n\n\t\t\t\tscanlineMaxX = maxX + 1;\n\n\t\t\t}\n\n\t\t\tif ( scanlineMinX >= minX ) {\n\n\t\t\t\tscanlineMinX = minX - 1;\n\n\t\t\t}\n\n\t\t\treturn { curves: p.curves, points: points, isCW: ShapeUtils.isClockWise( points ), identifier: identifier ++, boundingBox: new Box2( new Vector2( minX, minY ), new Vector2( maxX, maxY ) ) };\n\n\t\t} );\n\n\t\tsimplePaths = simplePaths.filter( sp => sp.points.length > 1 );\n\n\t\t// check if path is solid or a hole\n\t\tconst isAHole = simplePaths.map( p => isHoleTo( p, simplePaths, scanlineMinX, scanlineMaxX, shapePath.userData.style.fillRule ) );\n\n\n\t\tconst shapesToReturn = [];\n\t\tsimplePaths.forEach( p => {\n\n\t\t\tconst amIAHole = isAHole[ p.identifier ];\n\n\t\t\tif ( ! amIAHole.isHole ) {\n\n\t\t\t\tconst shape = new Shape();\n\t\t\t\tshape.curves = p.curves;\n\t\t\t\tconst holes = isAHole.filter( h => h.isHole && h.for === p.identifier );\n\t\t\t\tholes.forEach( h => {\n\n\t\t\t\t\tconst hole = simplePaths[ h.identifier ];\n\t\t\t\t\tconst path = new Path();\n\t\t\t\t\tpath.curves = hole.curves;\n\t\t\t\t\tshape.holes.push( path );\n\n\t\t\t\t} );\n\t\t\t\tshapesToReturn.push( shape );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn shapesToReturn;\n\n\t}\n\n\tstatic getStrokeStyle( width, color, lineJoin, lineCap, miterLimit ) {\n\n\t\t// Param width: Stroke width\n\t\t// Param color: As returned by THREE.Color.getStyle()\n\t\t// Param lineJoin: One of \"round\", \"bevel\", \"miter\" or \"miter-limit\"\n\t\t// Param lineCap: One of \"round\", \"square\" or \"butt\"\n\t\t// Param miterLimit: Maximum join length, in multiples of the \"width\" parameter (join is truncated if it exceeds that distance)\n\t\t// Returns style object\n\n\t\twidth = width !== undefined ? width : 1;\n\t\tcolor = color !== undefined ? color : '#000';\n\t\tlineJoin = lineJoin !== undefined ? lineJoin : 'miter';\n\t\tlineCap = lineCap !== undefined ? lineCap : 'butt';\n\t\tmiterLimit = miterLimit !== undefined ? miterLimit : 4;\n\n\t\treturn {\n\t\t\tstrokeColor: color,\n\t\t\tstrokeWidth: width,\n\t\t\tstrokeLineJoin: lineJoin,\n\t\t\tstrokeLineCap: lineCap,\n\t\t\tstrokeMiterLimit: miterLimit\n\t\t};\n\n\t}\n\n\tstatic pointsToStroke( points, style, arcDivisions, minDistance ) {\n\n\t\t// Generates a stroke with some witdh around the given path.\n\t\t// The path can be open or closed (last point equals to first point)\n\t\t// Param points: Array of Vector2D (the path). Minimum 2 points.\n\t\t// Param style: Object with SVG properties as returned by SVGLoader.getStrokeStyle(), or SVGLoader.parse() in the path.userData.style object\n\t\t// Params arcDivisions: Arc divisions for round joins and endcaps. (Optional)\n\t\t// Param minDistance: Points closer to this distance will be merged. (Optional)\n\t\t// Returns BufferGeometry with stroke triangles (In plane z = 0). UV coordinates are generated ('u' along path. 'v' across it, from left to right)\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tif ( SVGLoader.pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs ) === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tgeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\treturn geometry;\n\n\t}\n\n\tstatic pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs, vertexOffset ) {\n\n\t\t// This function can be called to update existing arrays or buffers.\n\t\t// Accepts same parameters as pointsToStroke, plus the buffers and optional offset.\n\t\t// Param vertexOffset: Offset vertices to start writing in the buffers (3 elements/vertex for vertices and normals, and 2 elements/vertex for uvs)\n\t\t// Returns number of written vertices / normals / uvs pairs\n\t\t// if 'vertices' parameter is undefined no triangles will be generated, but the returned vertices count will still be valid (useful to preallocate the buffers)\n\t\t// 'normals' and 'uvs' buffers are optional\n\n\t\tconst tempV2_1 = new Vector2();\n\t\tconst tempV2_2 = new Vector2();\n\t\tconst tempV2_3 = new Vector2();\n\t\tconst tempV2_4 = new Vector2();\n\t\tconst tempV2_5 = new Vector2();\n\t\tconst tempV2_6 = new Vector2();\n\t\tconst tempV2_7 = new Vector2();\n\t\tconst lastPointL = new Vector2();\n\t\tconst lastPointR = new Vector2();\n\t\tconst point0L = new Vector2();\n\t\tconst point0R = new Vector2();\n\t\tconst currentPointL = new Vector2();\n\t\tconst currentPointR = new Vector2();\n\t\tconst nextPointL = new Vector2();\n\t\tconst nextPointR = new Vector2();\n\t\tconst innerPoint = new Vector2();\n\t\tconst outerPoint = new Vector2();\n\n\t\tarcDivisions = arcDivisions !== undefined ? arcDivisions : 12;\n\t\tminDistance = minDistance !== undefined ? minDistance : 0.001;\n\t\tvertexOffset = vertexOffset !== undefined ? vertexOffset : 0;\n\n\t\t// First ensure there are no duplicated points\n\t\tpoints = removeDuplicatedPoints( points );\n\n\t\tconst numPoints = points.length;\n\n\t\tif ( numPoints < 2 ) return 0;\n\n\t\tconst isClosed = points[ 0 ].equals( points[ numPoints - 1 ] );\n\n\t\tlet currentPoint;\n\t\tlet previousPoint = points[ 0 ];\n\t\tlet nextPoint;\n\n\t\tconst strokeWidth2 = style.strokeWidth / 2;\n\n\t\tconst deltaU = 1 / ( numPoints - 1 );\n\t\tlet u0 = 0, u1;\n\n\t\tlet innerSideModified;\n\t\tlet joinIsOnLeftSide;\n\t\tlet isMiter;\n\t\tlet initialJoinIsOnLeftSide = false;\n\n\t\tlet numVertices = 0;\n\t\tlet currentCoordinate = vertexOffset * 3;\n\t\tlet currentCoordinateUV = vertexOffset * 2;\n\n\t\t// Get initial left and right stroke points\n\t\tgetNormal( points[ 0 ], points[ 1 ], tempV2_1 ).multiplyScalar( strokeWidth2 );\n\t\tlastPointL.copy( points[ 0 ] ).sub( tempV2_1 );\n\t\tlastPointR.copy( points[ 0 ] ).add( tempV2_1 );\n\t\tpoint0L.copy( lastPointL );\n\t\tpoint0R.copy( lastPointR );\n\n\t\tfor ( let iPoint = 1; iPoint < numPoints; iPoint ++ ) {\n\n\t\t\tcurrentPoint = points[ iPoint ];\n\n\t\t\t// Get next point\n\t\t\tif ( iPoint === numPoints - 1 ) {\n\n\t\t\t\tif ( isClosed ) {\n\n\t\t\t\t\t// Skip duplicated initial point\n\t\t\t\t\tnextPoint = points[ 1 ];\n\n\t\t\t\t} else nextPoint = undefined;\n\n\t\t\t} else {\n\n\t\t\t\tnextPoint = points[ iPoint + 1 ];\n\n\t\t\t}\n\n\t\t\t// Normal of previous segment in tempV2_1\n\t\t\tconst normal1 = tempV2_1;\n\t\t\tgetNormal( previousPoint, currentPoint, normal1 );\n\n\t\t\ttempV2_3.copy( normal1 ).multiplyScalar( strokeWidth2 );\n\t\t\tcurrentPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\tcurrentPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\tu1 = u0 + deltaU;\n\n\t\t\tinnerSideModified = false;\n\n\t\t\tif ( nextPoint !== undefined ) {\n\n\t\t\t\t// Normal of next segment in tempV2_2\n\t\t\t\tgetNormal( currentPoint, nextPoint, tempV2_2 );\n\n\t\t\t\ttempV2_3.copy( tempV2_2 ).multiplyScalar( strokeWidth2 );\n\t\t\t\tnextPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\t\tnextPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\t\tjoinIsOnLeftSide = true;\n\t\t\t\ttempV2_3.subVectors( nextPoint, previousPoint );\n\t\t\t\tif ( normal1.dot( tempV2_3 ) < 0 ) {\n\n\t\t\t\t\tjoinIsOnLeftSide = false;\n\n\t\t\t\t}\n\n\t\t\t\tif ( iPoint === 1 ) initialJoinIsOnLeftSide = joinIsOnLeftSide;\n\n\t\t\t\ttempV2_3.subVectors( nextPoint, currentPoint );\n\t\t\t\ttempV2_3.normalize();\n\t\t\t\tconst dot = Math.abs( normal1.dot( tempV2_3 ) );\n\n\t\t\t\t// If path is straight, don't create join\n\t\t\t\tif ( dot !== 0 ) {\n\n\t\t\t\t\t// Compute inner and outer segment intersections\n\t\t\t\t\tconst miterSide = strokeWidth2 / dot;\n\t\t\t\t\ttempV2_3.multiplyScalar( - miterSide );\n\t\t\t\t\ttempV2_4.subVectors( currentPoint, previousPoint );\n\t\t\t\t\ttempV2_5.copy( tempV2_4 ).setLength( miterSide ).add( tempV2_3 );\n\t\t\t\t\tinnerPoint.copy( tempV2_5 ).negate();\n\t\t\t\t\tconst miterLength2 = tempV2_5.length();\n\t\t\t\t\tconst segmentLengthPrev = tempV2_4.length();\n\t\t\t\t\ttempV2_4.divideScalar( segmentLengthPrev );\n\t\t\t\t\ttempV2_6.subVectors( nextPoint, currentPoint );\n\t\t\t\t\tconst segmentLengthNext = tempV2_6.length();\n\t\t\t\t\ttempV2_6.divideScalar( segmentLengthNext );\n\t\t\t\t\t// Check that previous and next segments doesn't overlap with the innerPoint of intersection\n\t\t\t\t\tif ( tempV2_4.dot( innerPoint ) < segmentLengthPrev && tempV2_6.dot( innerPoint ) < segmentLengthNext ) {\n\n\t\t\t\t\t\tinnerSideModified = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\touterPoint.copy( tempV2_5 ).add( currentPoint );\n\t\t\t\t\tinnerPoint.add( currentPoint );\n\n\t\t\t\t\tisMiter = false;\n\n\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\tnextPointR.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointR.copy( innerPoint );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tnextPointL.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointL.copy( innerPoint );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// The segment triangles are generated here if there was overlapping\n\n\t\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch ( style.strokeLineJoin ) {\n\n\t\t\t\t\t\tcase 'bevel':\n\n\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'round':\n\n\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t// Join triangles\n\n\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, currentPointL, nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, nextPointR, currentPointR, u1, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'miter':\n\t\t\t\t\t\tcase 'miter-clip':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tconst miterFraction = ( strokeWidth2 * style.strokeMiterLimit ) / miterLength2;\n\n\t\t\t\t\t\t\tif ( miterFraction < 1 ) {\n\n\t\t\t\t\t\t\t\t// The join miter length exceeds the miter limit\n\n\t\t\t\t\t\t\t\tif ( style.strokeLineJoin !== 'miter-clip' ) {\n\n\t\t\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t\t\t// Miter-clip join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointL ).multiplyScalar( miterFraction ).add( currentPointL );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointL ).multiplyScalar( miterFraction ).add( nextPointL );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointR ).multiplyScalar( miterFraction ).add( currentPointR );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointR ).multiplyScalar( miterFraction ).add( nextPointR );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Miter join segment triangles\n\n\t\t\t\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\t\t\t\t// Optimized segment + join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\tnextPointL.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tnextPointR.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Add extra miter join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisMiter = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// The segment triangles are generated here when two consecutive points are collinear\n\n\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// The segment triangles are generated here if it is the ending segment\n\n\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t}\n\n\t\t\tif ( ! isClosed && iPoint === numPoints - 1 ) {\n\n\t\t\t\t// Start line endcap\n\t\t\t\taddCapGeometry( points[ 0 ], point0L, point0R, joinIsOnLeftSide, true, u0 );\n\n\t\t\t}\n\n\t\t\t// Increment loop variables\n\n\t\t\tu0 = u1;\n\n\t\t\tpreviousPoint = currentPoint;\n\n\t\t\tlastPointL.copy( nextPointL );\n\t\t\tlastPointR.copy( nextPointR );\n\n\t\t}\n\n\t\tif ( ! isClosed ) {\n\n\t\t\t// Ending line endcap\n\t\t\taddCapGeometry( currentPoint, currentPointL, currentPointR, joinIsOnLeftSide, false, u1 );\n\n\t\t} else if ( innerSideModified && vertices ) {\n\n\t\t\t// Modify path first segment vertices to adjust to the segments inner and outer intersections\n\n\t\t\tlet lastOuter = outerPoint;\n\t\t\tlet lastInner = innerPoint;\n\n\t\t\tif ( initialJoinIsOnLeftSide !== joinIsOnLeftSide ) {\n\n\t\t\t\tlastOuter = innerPoint;\n\t\t\t\tlastInner = outerPoint;\n\n\t\t\t}\n\n\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\tif ( isMiter || initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 0 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 1 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( isMiter || ! initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 1 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn numVertices;\n\n\t\t// -- End of algorithm\n\n\t\t// -- Functions\n\n\t\tfunction getNormal( p1, p2, result ) {\n\n\t\t\tresult.subVectors( p2, p1 );\n\t\t\treturn result.set( - result.y, result.x ).normalize();\n\n\t\t}\n\n\t\tfunction addVertex( position, u, v ) {\n\n\t\t\tif ( vertices ) {\n\n\t\t\t\tvertices[ currentCoordinate ] = position.x;\n\t\t\t\tvertices[ currentCoordinate + 1 ] = position.y;\n\t\t\t\tvertices[ currentCoordinate + 2 ] = 0;\n\n\t\t\t\tif ( normals ) {\n\n\t\t\t\t\tnormals[ currentCoordinate ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 1 ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 2 ] = 1;\n\n\t\t\t\t}\n\n\t\t\t\tcurrentCoordinate += 3;\n\n\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\tuvs[ currentCoordinateUV ] = u;\n\t\t\t\t\tuvs[ currentCoordinateUV + 1 ] = v;\n\n\t\t\t\t\tcurrentCoordinateUV += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnumVertices += 3;\n\n\t\t}\n\n\t\tfunction makeCircularSector( center, p1, p2, u, v ) {\n\n\t\t\t// param p1, p2: Points in the circle arc.\n\t\t\t// p1 and p2 are in clockwise direction.\n\n\t\t\ttempV2_1.copy( p1 ).sub( center ).normalize();\n\t\t\ttempV2_2.copy( p2 ).sub( center ).normalize();\n\n\t\t\tlet angle = Math.PI;\n\t\t\tconst dot = tempV2_1.dot( tempV2_2 );\n\t\t\tif ( Math.abs( dot ) < 1 ) angle = Math.abs( Math.acos( dot ) );\n\n\t\t\tangle /= arcDivisions;\n\n\t\t\ttempV2_3.copy( p1 );\n\n\t\t\tfor ( let i = 0, il = arcDivisions - 1; i < il; i ++ ) {\n\n\t\t\t\ttempV2_4.copy( tempV2_3 ).rotateAround( center, angle );\n\n\t\t\t\taddVertex( tempV2_3, u, v );\n\t\t\t\taddVertex( tempV2_4, u, v );\n\t\t\t\taddVertex( center, u, 0.5 );\n\n\t\t\t\ttempV2_3.copy( tempV2_4 );\n\n\t\t\t}\n\n\t\t\taddVertex( tempV2_4, u, v );\n\t\t\taddVertex( p2, u, v );\n\t\t\taddVertex( center, u, 0.5 );\n\n\t\t}\n\n\t\tfunction makeSegmentTriangles() {\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( currentPointL, u1, 1 );\n\t\t\taddVertex( currentPointR, u1, 0 );\n\n\t\t}\n\n\t\tfunction makeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t// Optimized segment + bevel triangles\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bevel join triangle. The segment triangles are done in the main loop\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( nextPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointR, u0, 1 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( nextPointR, u0, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addCapGeometry( center, p1, p2, joinIsOnLeftSide, start, u ) {\n\n\t\t\t// param center: End point of the path\n\t\t\t// param p1, p2: Left and right cap points\n\n\t\t\tswitch ( style.strokeLineCap ) {\n\n\t\t\t\tcase 'round':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\tmakeCircularSector( center, p2, p1, u, 0.5 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmakeCircularSector( center, p1, p2, u, 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'square':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p1, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 3 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p2, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\tconst vl = vertices.length;\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'butt':\n\t\t\t\tdefault:\n\n\t\t\t\t\t// Nothing to do here\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction removeDuplicatedPoints( points ) {\n\n\t\t\t// Creates a new array if necessary with duplicated points removed.\n\t\t\t// This does not remove duplicated initial and ending points of a closed path.\n\n\t\t\tlet dupPoints = false;\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) < minDistance ) {\n\n\t\t\t\t\tdupPoints = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! dupPoints ) return points;\n\n\t\t\tconst newPoints = [];\n\t\t\tnewPoints.push( points[ 0 ] );\n\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) >= minDistance ) {\n\n\t\t\t\t\tnewPoints.push( points[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewPoints.push( points[ points.length - 1 ] );\n\n\t\t\treturn newPoints;\n\n\t\t}\n\n\t}\n\n\n}\n\nexport { SVGLoader };\n",null,null,null,null,"/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.6.9\n*/\n\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar durl = function (c) { return URL.createObjectURL(new Blob([c], { type: 'text/javascript' })); };\nvar cwk = function (u) { return new Worker(u); };\ntry {\n    URL.revokeObjectURL(durl(''));\n}\ncatch (e) {\n    // We're in Deno or a very old browser\n    durl = function (c) { return 'data:application/javascript;charset=UTF-8,' + encodeURI(c); };\n    // If Deno, this is necessary; if not, this changes nothing\n    cwk = function (u) { return new Worker(u, { type: 'module' }); };\n}\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = cwk(ch2[id] || (ch2[id] = durl(c)));\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) | 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    if (!sl || (st && !st.l && sl < 5))\n        return buf || new u8(0);\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [et, 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            // deopt when i > s - 3 - at end, deopt acceptable\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst && pos & 7)\n            pos = wfblk(w, pos + 1, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return ((d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) | (d[l - 1] << 24)) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = this.p.length > 3 ? gzs(this.p) : 4;\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return [r, slc(d, i - 1)];\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    throw 'invalid utf-8 data';\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            throw 'stream finished';\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\n        if (final) {\n            if (np.length)\n                throw 'invalid utf-8 data';\n            this.p = null;\n        }\n        else\n            this.p = np;\n        this.ondata(ch, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        if (this.d)\n            throw 'stream finished';\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td)\n        return td.decode(dat);\n    else {\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\n        if (ext.length)\n            throw 'invalid utf-8 data';\n        return out;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                throw 'extra field too long';\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\n    if (c != null) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback - add to ZIP archive before pushing';\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (this.d & 2)\n            throw 'stream finished';\n        var f = strToU8(file.filename), fl = f.length;\n        var com = file.comment, o = com && strToU8(com);\n        var u = fl != file.filename.length || (o && (com.length != o.length));\n        var hl = fl + exfl(file.extra) + 30;\n        if (fl > 65535)\n            throw 'filename too long';\n        var header = new u8(hl);\n        wzh(header, 0, file, f, u);\n        var chks = [header];\n        var pAll = function () {\n            for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\n                var chk = chks_1[_i];\n                _this_1.ondata(null, chk, false);\n            }\n            chks = [];\n        };\n        var tr = this.d;\n        this.d = 0;\n        var ind = this.u.length;\n        var uf = mrg(file, {\n            f: f,\n            u: u,\n            o: o,\n            t: function () {\n                if (file.terminate)\n                    file.terminate();\n            },\n            r: function () {\n                pAll();\n                if (tr) {\n                    var nxt = _this_1.u[ind + 1];\n                    if (nxt)\n                        nxt.r();\n                    else\n                        _this_1.d = 1;\n                }\n                tr = 1;\n            }\n        });\n        var cl = 0;\n        file.ondata = function (err, dat, final) {\n            if (err) {\n                _this_1.ondata(err, dat, final);\n                _this_1.terminate();\n            }\n            else {\n                cl += dat.length;\n                chks.push(dat);\n                if (final) {\n                    var dd = new u8(16);\n                    wbytes(dd, 0, 0x8074B50);\n                    wbytes(dd, 4, file.crc);\n                    wbytes(dd, 8, cl);\n                    wbytes(dd, 12, file.size);\n                    chks.push(dd);\n                    uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\n                    if (tr)\n                        uf.r();\n                    tr = 1;\n                }\n                else if (tr)\n                    pAll();\n            }\n        };\n        this.u.push(uf);\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            if (this.d & 1)\n                throw 'stream finishing';\n            throw 'stream finished';\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl('filename too long', null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            throw 'filename too long';\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, data, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this_1 = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this_1.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this_1.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        if (!this.onfile)\n            throw 'no callback';\n        if (!this.p)\n            throw 'stream finished';\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_2 = [];\n                        this_1.k.unshift(chks_2);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    throw 'no callback';\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this_1.o[cmp_1];\n                                    if (!ctr)\n                                        throw 'unknown compression type ' + cmp_1;\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\n                                        var dat = chks_3[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this_1.k[0] == chks_2 && _this_1.c)\n                                        _this_1.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                throw 'invalid zip file';\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50) {\n            cb('invalid zip file', null);\n            return;\n        }\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_3 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_3(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import {\n\tVector3,\n\tVector4\n} from 'three';\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\n/*\nFinds knot vector span.\n\np : degree\nu : parametric value\nU : knot vector\n\nreturns the span\n*/\nfunction findSpan( p, u, U ) {\n\n\tconst n = U.length - p - 1;\n\n\tif ( u >= U[ n ] ) {\n\n\t\treturn n - 1;\n\n\t}\n\n\tif ( u <= U[ p ] ) {\n\n\t\treturn p;\n\n\t}\n\n\tlet low = p;\n\tlet high = n;\n\tlet mid = Math.floor( ( low + high ) / 2 );\n\n\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\tif ( u < U[ mid ] ) {\n\n\t\t\thigh = mid;\n\n\t\t} else {\n\n\t\t\tlow = mid;\n\n\t\t}\n\n\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t}\n\n\treturn mid;\n\n}\n\n\n/*\nCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nU    : knot vector\n\nreturns array[p+1] with basis functions values.\n*/\nfunction calcBasisFunctions( span, u, p, U ) {\n\n\tconst N = [];\n\tconst left = [];\n\tconst right = [];\n\tN[ 0 ] = 1.0;\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tconst temp = N[ r ] / ( rv + lv );\n\t\t\tN[ r ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tN[ j ] = saved;\n\n\t}\n\n\treturn N;\n\n}\n\n\n/*\nCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\np : degree of B-Spline\nU : knot vector\nP : control points (x, y, z, w)\nu : parametric point\n\nreturns point for given u\n*/\nfunction calcBSplinePoint( p, U, P, u ) {\n\n\tconst span = findSpan( p, u, U );\n\tconst N = calcBasisFunctions( span, u, p, U );\n\tconst C = new Vector4( 0, 0, 0, 0 );\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tconst point = P[ span - p + j ];\n\t\tconst Nj = N[ j ];\n\t\tconst wNj = point.w * Nj;\n\t\tC.x += point.x * wNj;\n\t\tC.y += point.y * wNj;\n\t\tC.z += point.z * wNj;\n\t\tC.w += point.w * Nj;\n\n\t}\n\n\treturn C;\n\n}\n\n\n/*\nCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nn    : number of derivatives to calculate\nU    : knot vector\n\nreturns array[n+1][p+1] with basis functions derivatives\n*/\nfunction calcBasisFunctionDerivatives( span, u, p, n, U ) {\n\n\tconst zeroArr = [];\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tzeroArr[ i ] = 0.0;\n\n\tconst ders = [];\n\n\tfor ( let i = 0; i <= n; ++ i )\n\t\tders[ i ] = zeroArr.slice( 0 );\n\n\tconst ndu = [];\n\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\tndu[ 0 ][ 0 ] = 1.0;\n\n\tconst left = zeroArr.slice( 0 );\n\tconst right = zeroArr.slice( 0 );\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\tconst temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tndu[ j ][ j ] = saved;\n\n\t}\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t}\n\n\tfor ( let r = 0; r <= p; ++ r ) {\n\n\t\tlet s1 = 0;\n\t\tlet s2 = 1;\n\n\t\tconst a = [];\n\t\tfor ( let i = 0; i <= p; ++ i ) {\n\n\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t}\n\n\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\t\tlet d = 0.0;\n\t\t\tconst rk = r - k;\n\t\t\tconst pk = p - k;\n\n\t\t\tif ( r >= k ) {\n\n\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t}\n\n\t\t\tconst j1 = ( rk >= - 1 ) ? 1 : - rk;\n\t\t\tconst j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\tfor ( let j = j1; j <= j2; ++ j ) {\n\n\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t}\n\n\t\t\tif ( r <= pk ) {\n\n\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t}\n\n\t\t\tders[ k ][ r ] = d;\n\n\t\t\tconst j = s1;\n\t\t\ts1 = s2;\n\t\t\ts2 = j;\n\n\t\t}\n\n\t}\n\n\tlet r = p;\n\n\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ k ][ j ] *= r;\n\n\t\t}\n\n\t\tr *= p - k;\n\n\t}\n\n\treturn ders;\n\n}\n\n\n/*\n\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points\n\tu  : Parametric points\n\tnd : number of derivatives\n\n\treturns array[d+1] with derivatives\n\t*/\nfunction calcBSplineDerivatives( p, U, P, u, nd ) {\n\n\tconst du = nd < p ? nd : p;\n\tconst CK = [];\n\tconst span = findSpan( p, u, U );\n\tconst nders = calcBasisFunctionDerivatives( span, u, p, du, U );\n\tconst Pw = [];\n\n\tfor ( let i = 0; i < P.length; ++ i ) {\n\n\t\tconst point = P[ i ].clone();\n\t\tconst w = point.w;\n\n\t\tpoint.x *= w;\n\t\tpoint.y *= w;\n\t\tpoint.z *= w;\n\n\t\tPw[ i ] = point;\n\n\t}\n\n\tfor ( let k = 0; k <= du; ++ k ) {\n\n\t\tconst point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = point;\n\n\t}\n\n\tfor ( let k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\tCK[ k ] = new Vector4( 0, 0, 0 );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate \"K over I\"\n\nreturns k!/(i!(k-i)!)\n*/\nfunction calcKoverI( k, i ) {\n\n\tlet nom = 1;\n\n\tfor ( let j = 2; j <= k; ++ j ) {\n\n\t\tnom *= j;\n\n\t}\n\n\tlet denom = 1;\n\n\tfor ( let j = 2; j <= i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\tfor ( let j = 2; j <= k - i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\treturn nom / denom;\n\n}\n\n\n/*\nCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\nPders : result of function calcBSplineDerivatives\n\nreturns array with derivatives for rational curve.\n*/\nfunction calcRationalCurveDerivatives( Pders ) {\n\n\tconst nd = Pders.length;\n\tconst Aders = [];\n\tconst wders = [];\n\n\tfor ( let i = 0; i < nd; ++ i ) {\n\n\t\tconst point = Pders[ i ];\n\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\n\t\twders[ i ] = point.w;\n\n\t}\n\n\tconst CK = [];\n\n\tfor ( let k = 0; k < nd; ++ k ) {\n\n\t\tconst v = Aders[ k ].clone();\n\n\t\tfor ( let i = 1; i <= k; ++ i ) {\n\n\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\np  : degree\nU  : knot vector\nP  : control points in homogeneous space\nu  : parametric points\nnd : number of derivatives\n\nreturns array with derivatives.\n*/\nfunction calcNURBSDerivatives( p, U, P, u, nd ) {\n\n\tconst Pders = calcBSplineDerivatives( p, U, P, u, nd );\n\treturn calcRationalCurveDerivatives( Pders );\n\n}\n\n\n/*\nCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\np1, p2 : degrees of B-Spline surface\nU1, U2 : knot vectors\nP      : control points (x, y, z, w)\nu, v   : parametric values\n\nreturns point for given (u, v)\n*/\nfunction calcSurfacePoint( p, q, U, V, P, u, v, target ) {\n\n\tconst uspan = findSpan( p, u, U );\n\tconst vspan = findSpan( q, v, V );\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\n\tconst temp = [];\n\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\ttemp[ l ] = new Vector4( 0, 0, 0, 0 );\n\t\tfor ( let k = 0; k <= p; ++ k ) {\n\n\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ].clone();\n\t\t\tconst w = point.w;\n\t\t\tpoint.x *= w;\n\t\t\tpoint.y *= w;\n\t\t\tpoint.z *= w;\n\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t}\n\n\t}\n\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\n\n\t}\n\n\tSw.divideScalar( Sw.w );\n\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n}\n\n\n\nexport {\n\tfindSpan,\n\tcalcBasisFunctions,\n\tcalcBSplinePoint,\n\tcalcBasisFunctionDerivatives,\n\tcalcBSplineDerivatives,\n\tcalcKoverI,\n\tcalcRationalCurveDerivatives,\n\tcalcNURBSDerivatives,\n\tcalcSurfacePoint,\n};\n","import {\n\tCurve,\n\tVector3,\n\tVector4\n} from 'three';\nimport * as NURBSUtils from '../curves/NURBSUtils.js';\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nclass NURBSCurve extends Curve {\n\n\tconstructor(\n\t\tdegree,\n\t\tknots /* array of reals */,\n\t\tcontrolPoints /* array of Vector(2|3|4) */,\n\t\tstartKnot /* index in knots */,\n\t\tendKnot /* index in knots */\n\t) {\n\n\t\tsuper();\n\n\t\tthis.degree = degree;\n\t\tthis.knots = knots;\n\t\tthis.controlPoints = [];\n\t\t// Used by periodic NURBS to remove hidden spans\n\t\tthis.startKnot = startKnot || 0;\n\t\tthis.endKnot = endKnot || ( this.knots.length - 1 );\n\n\t\tfor ( let i = 0; i < controlPoints.length; ++ i ) {\n\n\t\t\t// ensure Vector4 for control points\n\t\t\tconst point = controlPoints[ i ];\n\t\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\n\n\t\t}\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t\t// following results in (wx, wy, wz, w) homogeneous point\n\t\tconst hpoint = NURBSUtils.calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\t\tif ( hpoint.w !== 1.0 ) {\n\n\t\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\t\thpoint.divideScalar( hpoint.w );\n\n\t\t}\n\n\t\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\tconst tangent = optionalTarget;\n\n\t\tconst u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\t\tconst ders = NURBSUtils.calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\t\ttangent.copy( ders[ 1 ] ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n}\n\nexport { NURBSCurve };\n","import {\n\tAmbientLight,\n\tAnimationClip,\n\tBone,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tEquirectangularReflectionMapping,\n\tEuler,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLine,\n\tLineBasicMaterial,\n\tLoader,\n\tLoaderUtils,\n\tMathUtils,\n\tMatrix3,\n\tMatrix4,\n\tMesh,\n\tMeshLambertMaterial,\n\tMeshPhongMaterial,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tUint16BufferAttribute,\n\tVector3,\n\tVector4,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\nimport * as fflate from '../libs/fflate.module.js';\nimport { NURBSCurve } from '../curves/NURBSCurve.js';\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * Binary format specification:\n *\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nlet fbxTree;\nlet connections;\nlet sceneGraph;\n\nclass FBXLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( FBXBuffer, path ) {\n\n\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t} else {\n\n\t\t\tconst FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t}\n\n\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t}\n\n\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t}\n\n\t\t// console.log( fbxTree );\n\n\t\tconst textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t}\n\n}\n\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\nclass FBXTreeParser {\n\n\tconstructor( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tparse() {\n\n\t\tconnections = this.parseConnections();\n\n\t\tconst images = this.parseImages();\n\t\tconst textures = this.parseTextures( images );\n\t\tconst materials = this.parseMaterials( textures );\n\t\tconst deformers = this.parseDeformers();\n\t\tconst geometryMap = new GeometryParser().parse( deformers );\n\n\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\treturn sceneGraph;\n\n\t}\n\n\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t// and details the connection type\n\tparseConnections() {\n\n\t\tconst connectionMap = new Map();\n\n\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\tconst rawConnections = fbxTree.Connections.connections;\n\n\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\tconst fromID = rawConnection[ 0 ];\n\t\t\t\tconst toID = rawConnection[ 1 ];\n\t\t\t\tconst relationship = rawConnection[ 2 ];\n\n\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn connectionMap;\n\n\t}\n\n\t// Parse FBXTree.Objects.Video for embedded image data\n\t// These images are connected to textures in FBXTree.Objects.Textures\n\t// via FBXTree.Connections.\n\tparseImages() {\n\n\t\tconst images = {};\n\t\tconst blobs = {};\n\n\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\tconst videoNodes = fbxTree.Objects.Video;\n\n\t\t\tfor ( const nodeID in videoNodes ) {\n\n\t\t\t\tconst videoNode = videoNodes[ nodeID ];\n\n\t\t\t\tconst id = parseInt( nodeID );\n\n\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\tconst arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\tconst base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\tconst image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( const id in images ) {\n\n\t\t\tconst filename = images[ id ];\n\n\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\t// Parse embedded image data in FBXTree.Video.Content\n\tparseImage( videoNode ) {\n\n\t\tconst content = videoNode.Content;\n\t\tconst fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\tconst extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\tlet type;\n\n\t\tswitch ( extension ) {\n\n\t\t\tcase 'bmp':\n\n\t\t\t\ttype = 'image/bmp';\n\t\t\t\tbreak;\n\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\n\t\t\t\ttype = 'image/jpeg';\n\t\t\t\tbreak;\n\n\t\t\tcase 'png':\n\n\t\t\t\ttype = 'image/png';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tif':\n\n\t\t\t\ttype = 'image/tiff';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tga':\n\n\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t}\n\n\t\t\t\ttype = 'image/tga';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t} else { // Binary Format\n\n\t\t\tconst array = new Uint8Array( content );\n\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t}\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Texture\n\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t// to images in FBXTree.Objects.Video\n\tparseTextures( images ) {\n\n\t\tconst textureMap = new Map();\n\n\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\tconst textureNodes = fbxTree.Objects.Texture;\n\t\t\tfor ( const nodeID in textureNodes ) {\n\n\t\t\t\tconst texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textureMap;\n\n\t}\n\n\t// Parse individual node in FBXTree.Objects.Texture\n\tparseTexture( textureNode, images ) {\n\n\t\tconst texture = this.loadTexture( textureNode, images );\n\n\t\ttexture.ID = textureNode.id;\n\n\t\ttexture.name = textureNode.attrName;\n\n\t\tconst wrapModeU = textureNode.WrapModeU;\n\t\tconst wrapModeV = textureNode.WrapModeV;\n\n\t\tconst valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\tconst valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t// 0: repeat(default), 1: clamp\n\n\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\tconst values = textureNode.Scaling.value;\n\n\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\tloadTexture( textureNode, images ) {\n\n\t\tlet fileName;\n\n\t\tconst currentPath = this.textureLoader.path;\n\n\t\tconst children = connections.get( textureNode.id ).children;\n\n\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet texture;\n\n\t\tconst extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\tif ( extension === 'tga' ) {\n\n\t\t\tconst loader = this.manager.getHandler( '.tga' );\n\n\t\t\tif ( loader === null ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\ttexture = new Texture();\n\n\t\t\t} else {\n\n\t\t\t\tloader.setPath( this.textureLoader.path );\n\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t}\n\n\t\t} else if ( extension === 'psd' ) {\n\n\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\ttexture = new Texture();\n\n\t\t} else {\n\n\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t}\n\n\t\tthis.textureLoader.setPath( currentPath );\n\n\t\treturn texture;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Material\n\tparseMaterials( textureMap ) {\n\n\t\tconst materialMap = new Map();\n\n\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\tconst materialNodes = fbxTree.Objects.Material;\n\n\t\t\tfor ( const nodeID in materialNodes ) {\n\n\t\t\t\tconst material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materialMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Material\n\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t// FBX format currently only supports Lambert and Phong shading models\n\tparseMaterial( materialNode, textureMap ) {\n\n\t\tconst ID = materialNode.id;\n\t\tconst name = materialNode.attrName;\n\t\tlet type = materialNode.ShadingModel;\n\n\t\t// Case where FBX wraps shading model in property object.\n\t\tif ( typeof type === 'object' ) {\n\n\t\t\ttype = type.value;\n\n\t\t}\n\n\t\t// Ignore unused materials which don't have any connections.\n\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\tconst parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\tlet material;\n\n\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\tcase 'phong':\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\t\t\tcase 'lambert':\n\t\t\t\tmaterial = new MeshLambertMaterial();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tmaterial.setValues( parameters );\n\t\tmaterial.name = name;\n\n\t\treturn material;\n\n\t}\n\n\t// Parse FBX material and return parameters suitable for a three.js material\n\t// Also parse the texture map and return any textures associated with the material\n\tparseParameters( materialNode, textureMap, ID ) {\n\n\t\tconst parameters = {};\n\n\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Diffuse ) {\n\n\t\t\tparameters.color = new Color().fromArray( materialNode.Diffuse.value );\n\n\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\tparameters.color = new Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t}\n\n\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Emissive ) {\n\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.Emissive.value );\n\n\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t}\n\n\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t}\n\n\t\tif ( materialNode.Opacity ) {\n\n\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t}\n\n\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\tparameters.transparent = true;\n\n\t\t}\n\n\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Shininess ) {\n\n\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t}\n\n\t\tif ( materialNode.Specular ) {\n\n\t\t\tparameters.specular = new Color().fromArray( materialNode.Specular.value );\n\n\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\tparameters.specular = new Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t}\n\n\t\tconst scope = this;\n\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\tconst type = child.relationship;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'Bump':\n\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DiffuseColor':\n\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.map !== undefined ) {\n\n\t\t\t\t\t\tparameters.map.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.emissiveMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NormalMap':\n\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.envMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\n\t\t\t\t\t\tparameters.envMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.specularMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.specularMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'TransparentColor':\n\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientColor':\n\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn parameters;\n\n\t}\n\n\t// get a texture from the textureMap for use by a material.\n\tgetTexture( textureMap, id ) {\n\n\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t}\n\n\t\treturn textureMap.get( id );\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Deformer\n\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\tparseDeformers() {\n\n\t\tconst skeletons = {};\n\t\tconst morphTargets = {};\n\n\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\tconst DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\tfor ( const nodeID in DeformerNodes ) {\n\n\t\t\t\tconst deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\tconst skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\tconst morphTarget = {\n\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t};\n\n\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tskeletons: skeletons,\n\t\t\tmorphTargets: morphTargets,\n\n\t\t};\n\n\t}\n\n\t// Parse single nodes in FBXTree.Objects.Deformer\n\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t// Each skin node represents a skeleton and each cluster node represents a bone\n\tparseSkeleton( relationships, deformerNodes ) {\n\n\t\tconst rawBones = [];\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst boneNode = deformerNodes[ child.ID ];\n\n\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\tconst rawBone = {\n\n\t\t\t\tID: child.ID,\n\t\t\t\tindices: [],\n\t\t\t\tweights: [],\n\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t};\n\n\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t}\n\n\t\t\trawBones.push( rawBone );\n\n\t\t} );\n\n\t\treturn {\n\n\t\t\trawBones: rawBones,\n\t\t\tbones: []\n\n\t\t};\n\n\t}\n\n\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\tparseMorphTargets( relationships, deformerNodes ) {\n\n\t\tconst rawMorphTargets = [];\n\n\t\tfor ( let i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\tconst child = relationships.children[ i ];\n\n\t\t\tconst morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\tconst rawMorphTarget = {\n\n\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\tid: morphTargetNode.id,\n\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t};\n\n\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t} )[ 0 ].ID;\n\n\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t}\n\n\t\treturn rawMorphTargets;\n\n\t}\n\n\t// create the main Group() to be returned by the loader\n\tparseScene( deformers, geometryMap, materialMap ) {\n\n\t\tsceneGraph = new Group();\n\n\t\tconst modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tconst scope = this;\n\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\tconst modelNode = modelNodes[ model.ID ];\n\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\tconst parentConnections = connections.get( model.ID ).parents;\n\n\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\tconst parent = modelMap.get( connection.ID );\n\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t} );\n\n\t\t\tif ( model.parent === null ) {\n\n\t\t\t\tsceneGraph.add( model );\n\n\t\t\t}\n\n\n\t\t} );\n\n\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\tthis.createAmbientLight();\n\n\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\tif ( node.parent ) {\n\n\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\n\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n\n\t\t\t\t}\n\n\t\t\t\tconst transform = generateTransform( node.userData.transformData );\n\n\t\t\t\tnode.applyMatrix4( transform );\n\t\t\t\tnode.updateWorldMatrix();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst animations = new AnimationParser().parse();\n\n\t\t// if all the models where already combined in a single group, just return that\n\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t}\n\n\t\tsceneGraph.animations = animations;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.Model\n\tparseModels( skeletons, geometryMap, materialMap ) {\n\n\t\tconst modelMap = new Map();\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tfor ( const nodeID in modelNodes ) {\n\n\t\t\tconst id = parseInt( nodeID );\n\t\t\tconst node = modelNodes[ nodeID ];\n\t\t\tconst relationships = connections.get( id );\n\n\t\t\tlet model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\tif ( ! model ) {\n\n\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\tmodel = new Bone();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Null':\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmodel = new Group();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\n\n\t\t\t\tmodel.ID = id;\n\n\t\t\t}\n\n\t\t\tthis.getTransformData( model, node );\n\t\t\tmodelMap.set( id, model );\n\n\t\t}\n\n\t\treturn modelMap;\n\n\t}\n\n\tbuildSkeleton( relationships, skeletons, id, name ) {\n\n\t\tlet bone = null;\n\n\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\tfor ( const ID in skeletons ) {\n\n\t\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\tconst subBone = bone;\n\t\t\t\t\t\tbone = new Bone();\n\n\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\n\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn bone;\n\n\t}\n\n\t// create a PerspectiveCamera or OrthographicCamera\n\tcreateCamera( relationships ) {\n\n\t\tlet model;\n\t\tlet cameraAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tcameraAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type = 0;\n\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\ttype = 1;\n\n\t\t\t}\n\n\t\t\tlet nearClippingPlane = 1;\n\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t}\n\n\t\t\tlet farClippingPlane = 1000;\n\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t}\n\n\n\t\t\tlet width = window.innerWidth;\n\t\t\tlet height = window.innerHeight;\n\n\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t}\n\n\t\t\tconst aspect = width / height;\n\n\t\t\tlet fov = 45;\n\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t}\n\n\t\t\tconst focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Perspective\n\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\tmodel = new OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\t// Create a DirectionalLight, PointLight or SpotLight\n\tcreateLight( relationships ) {\n\n\t\tlet model;\n\t\tlet lightAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tlightAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( lightAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type;\n\n\t\t\t// LightType can be undefined for Point lights\n\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\ttype = 0;\n\n\t\t\t} else {\n\n\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t}\n\n\t\t\tlet color = 0xffffff;\n\n\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\tcolor = new Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t}\n\n\t\t\tlet intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t// light disabled\n\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\tintensity = 0;\n\n\t\t\t}\n\n\t\t\tlet distance = 0;\n\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\tdistance = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\tconst decay = 1;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Point\n\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Directional\n\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // Spot\n\t\t\t\t\tlet angle = Math.PI / 3;\n\n\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet penumbra = 0;\n\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\tmodel = new PointLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\tmodel.castShadow = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateMesh( relationships, geometryMap, materialMap ) {\n\n\t\tlet model;\n\t\tlet geometry = null;\n\t\tlet material = null;\n\t\tconst materials = [];\n\n\t\t// get geometry and materials(s) from connections\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t}\n\n\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( materials.length > 1 ) {\n\n\t\t\tmaterial = materials;\n\n\t\t} else if ( materials.length > 0 ) {\n\n\t\t\tmaterial = materials[ 0 ];\n\n\t\t} else {\n\n\t\t\tmaterial = new MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\tmaterials.push( material );\n\n\t\t}\n\n\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\tmodel = new SkinnedMesh( geometry, material );\n\t\t\tmodel.normalizeSkinWeights();\n\n\t\t} else {\n\n\t\t\tmodel = new Mesh( geometry, material );\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateCurve( relationships, geometryMap ) {\n\n\t\tconst geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\treturn geo;\n\n\t\t}, null );\n\n\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\tconst material = new LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\treturn new Line( geometry, material );\n\n\t}\n\n\t// parse the model node for transform data\n\tgetTransformData( model, modelNode ) {\n\n\t\tconst transformData = {};\n\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\telse transformData.eulerOrder = 'ZYX';\n\n\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\tmodel.userData.transformData = transformData;\n\n\t}\n\n\tsetLookAtProperties( model, modelNode ) {\n\n\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\tconst children = connections.get( model.ID ).children;\n\n\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\tconst lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\tconst pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tbindSkeleton( skeletons, geometryMap, modelMap ) {\n\n\t\tconst bindMatrices = this.parsePoseNodes();\n\n\t\tfor ( const ID in skeletons ) {\n\n\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\tconst parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\tconst geoID = parent.ID;\n\t\t\t\t\tconst geoRelationships = connections.get( geoID );\n\n\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\tconst model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tparsePoseNodes() {\n\n\t\tconst bindMatrices = {};\n\n\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\tconst BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\tfor ( const nodeID in BindPoseNode ) {\n\n\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' && BindPoseNode[ nodeID ].NbPoseNodes > 0 ) {\n\n\t\t\t\t\tconst poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bindMatrices;\n\n\t}\n\n\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\tcreateAmbientLight() {\n\n\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\tconst ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\tconst r = ambientColor[ 0 ];\n\t\t\tconst g = ambientColor[ 1 ];\n\t\t\tconst b = ambientColor[ 2 ];\n\n\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\tconst color = new Color( r, g, b );\n\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse Geometry data from FBXTree and return map of BufferGeometries\nclass GeometryParser {\n\n\t// Parse nodes in FBXTree.Objects.Geometry\n\tparse( deformers ) {\n\n\t\tconst geometryMap = new Map();\n\n\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\tconst geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\tfor ( const nodeID in geoNodes ) {\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\tconst geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometryMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Geometry\n\tparseGeometry( relationships, geoNode, deformers ) {\n\n\t\tswitch ( geoNode.attrType ) {\n\n\t\t\tcase 'Mesh':\n\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\tbreak;\n\n\t\t\tcase 'NurbsCurve':\n\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\tparseMeshGeometry( relationships, geoNode, deformers ) {\n\n\t\tconst skeletons = deformers.skeletons;\n\t\tconst morphTargets = [];\n\n\t\tconst modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t} );\n\n\t\t// don't create geometry if it is not associated with any models\n\t\tif ( modelNodes.length === 0 ) return;\n\n\t\tconst skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\treturn skeleton;\n\n\t\t}, null );\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Assume one model and get the preRotation from that\n\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\tconst modelNode = modelNodes[ 0 ];\n\n\t\tconst transformData = {};\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\tconst transform = generateTransform( transformData );\n\n\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t}\n\n\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\tgenGeometry( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\tconst geo = new BufferGeometry();\n\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\tconst geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\tconst buffers = this.genBuffers( geoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t}\n\n\t\tif ( skeleton ) {\n\n\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t// used later to bind the skeleton to the model\n\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t}\n\n\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( preTransform );\n\n\t\t\tconst normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\n\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t}\n\n\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\tlet name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t// the first uv buffer is just called 'uv'\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tname = 'uv';\n\n\t\t\t}\n\n\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t} );\n\n\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\tlet prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\tlet startIndex = 0;\n\n\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\tconst lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\tconst lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t// using one of them\n\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\treturn geo;\n\n\t}\n\n\tparseGeoNode( geoNode, skeleton ) {\n\n\t\tconst geoInfo = {};\n\n\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\tgeoInfo.uv = [];\n\n\t\t\tlet i = 0;\n\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeoInfo.weightTable = {};\n\n\t\tif ( skeleton !== null ) {\n\n\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geoInfo;\n\n\t}\n\n\tgenBuffers( geoInfo ) {\n\n\t\tconst buffers = {\n\t\t\tvertex: [],\n\t\t\tnormal: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\t\t\tmaterialIndex: [],\n\t\t\tvertexWeights: [],\n\t\t\tweightsIndices: [],\n\t\t};\n\n\t\tlet polygonIndex = 0;\n\t\tlet faceLength = 0;\n\t\tlet displayedWeightsWarning = false;\n\n\t\t// these will hold data for a single face\n\t\tlet facePositionIndexes = [];\n\t\tlet faceNormals = [];\n\t\tlet faceColors = [];\n\t\tlet faceUVs = [];\n\t\tlet faceWeights = [];\n\t\tlet faceWeightIndices = [];\n\n\t\tconst scope = this;\n\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\tlet materialIndex;\n\t\t\tlet endOfFace = false;\n\n\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t// A cube with quad faces looks like this:\n\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t//  }\n\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\tendOfFace = true;\n\n\t\t\t}\n\n\t\t\tlet weightIndices = [];\n\t\t\tlet weights = [];\n\n\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t} );\n\n\n\t\t\t\t}\n\n\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\tconst Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\tlet currentWeight = weight;\n\t\t\t\t\t\tlet currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\tconst tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\tweights = Weight;\n\n\t\t\t\t}\n\n\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tmaterialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfaceLength ++;\n\n\t\t\tif ( endOfFace ) {\n\n\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\tpolygonIndex ++;\n\t\t\t\tfaceLength = 0;\n\n\t\t\t\t// reset arrays for the next face\n\t\t\t\tfacePositionIndexes = [];\n\t\t\t\tfaceNormals = [];\n\t\t\t\tfaceColors = [];\n\t\t\t\tfaceUVs = [];\n\t\t\t\tfaceWeights = [];\n\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn buffers;\n\n\t}\n\n\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\tgenFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\tfor ( let i = 2; i < faceLength; i ++ ) {\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\taddMorphTargets( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\tif ( morphTargets.length === 0 ) return;\n\n\t\tparentGeo.morphTargetsRelative = true;\n\n\t\tparentGeo.morphAttributes.position = [];\n\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\tconst scope = this;\n\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tconst morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\tgenMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\tconst vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\tconst morphPositionsSparse = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\tconst indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\tconst length = parentGeo.attributes.position.count * 3;\n\t\tconst morphPositions = new Float32Array( length );\n\n\t\tfor ( let i = 0; i < indices.length; i ++ ) {\n\n\t\t\tconst morphIndex = indices[ i ] * 3;\n\n\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t}\n\n\t\t// TODO: add morph normal support\n\t\tconst morphGeoInfo = {\n\t\t\tvertexIndices: vertexIndices,\n\t\t\tvertexPositions: morphPositions,\n\n\t\t};\n\n\t\tconst morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t}\n\n\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\tparseNormals( NormalNode ) {\n\n\t\tconst mappingType = NormalNode.MappingInformationType;\n\t\tconst referenceType = NormalNode.ReferenceInformationType;\n\t\tconst buffer = NormalNode.Normals.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 3,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\tparseUVs( UVNode ) {\n\n\t\tconst mappingType = UVNode.MappingInformationType;\n\t\tconst referenceType = UVNode.ReferenceInformationType;\n\t\tconst buffer = UVNode.UV.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 2,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\tparseVertexColors( ColorNode ) {\n\n\t\tconst mappingType = ColorNode.MappingInformationType;\n\t\tconst referenceType = ColorNode.ReferenceInformationType;\n\t\tconst buffer = ColorNode.Colors.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 4,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\tparseMaterialIndices( MaterialNode ) {\n\n\t\tconst mappingType = MaterialNode.MappingInformationType;\n\t\tconst referenceType = MaterialNode.ReferenceInformationType;\n\n\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: [ 0 ],\n\t\t\t\tindices: [ 0 ],\n\t\t\t\tmappingType: 'AllSame',\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t}\n\n\t\tconst materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t// for conforming with the other functions we've written for other data.\n\t\tconst materialIndices = [];\n\n\t\tfor ( let i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\tmaterialIndices.push( i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 1,\n\t\t\tbuffer: materialIndexBuffer,\n\t\t\tindices: materialIndices,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\tparseNurbsGeometry( geoNode ) {\n\n\t\tif ( NURBSCurve === undefined ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst order = parseInt( geoNode.Order );\n\n\t\tif ( isNaN( order ) ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst degree = order - 1;\n\n\t\tconst knots = geoNode.KnotVector.a;\n\t\tconst controlPoints = [];\n\t\tconst pointsValues = geoNode.Points.a;\n\n\t\tfor ( let i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\n\n\t\t}\n\n\t\tlet startKnot, endKnot;\n\n\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\tstartKnot = degree;\n\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\tfor ( let i = 0; i < degree; ++ i ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\tconst points = curve.getPoints( controlPoints.length * 12 );\n\n\t\treturn new BufferGeometry().setFromPoints( points );\n\n\t}\n\n}\n\n// parse animation data from FBXTree\nclass AnimationParser {\n\n\t// take raw animation clips and turn them into three.js animation clips\n\tparse() {\n\n\t\tconst animationClips = [];\n\n\t\tconst rawClips = this.parseClips();\n\n\t\tif ( rawClips !== undefined ) {\n\n\t\t\tfor ( const key in rawClips ) {\n\n\t\t\t\tconst rawClip = rawClips[ key ];\n\n\t\t\t\tconst clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animationClips;\n\n\t}\n\n\tparseClips() {\n\n\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t// if this is undefined we can safely assume there are no animations\n\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\tconst curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\tconst layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\tconst rawClips = this.parseAnimStacks( layersMap );\n\n\t\treturn rawClips;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t// and is referenced by an AnimationLayer\n\tparseAnimationCurveNodes() {\n\n\t\tconst rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\tconst curveNodesMap = new Map();\n\n\t\tfor ( const nodeID in rawCurveNodes ) {\n\n\t\t\tconst rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\tconst curveNode = {\n\n\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\tcurves: {},\n\n\t\t\t\t};\n\n\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn curveNodesMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t// axis ( e.g. times and values of x rotation)\n\tparseAnimationCurves( curveNodesMap ) {\n\n\t\tconst rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t// clearly, this should be optimised to\n\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\tfor ( const nodeID in rawCurves ) {\n\n\t\t\tconst animationCurve = {\n\n\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t};\n\n\t\t\tconst relationships = connections.get( animationCurve.id );\n\n\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\tconst animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\tconst animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\tparseAnimationLayers( curveNodesMap ) {\n\n\t\tconst rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\tconst layersMap = new Map();\n\n\t\tfor ( const nodeID in rawLayers ) {\n\n\t\t\tconst layerCurveNodes = [];\n\n\t\t\tconst connection = connections.get( parseInt( nodeID ) );\n\n\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\tconst children = connection.children;\n\n\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\tconst curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\tconst geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\tconst modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn layersMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t// hierarchy. Each Stack node will be used to create a AnimationClip\n\tparseAnimStacks( layersMap ) {\n\n\t\tconst rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t// connect the stacks (clips) up to the layers\n\t\tconst rawClips = {};\n\n\t\tfor ( const nodeID in rawStacks ) {\n\n\t\t\tconst children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t}\n\n\t\t\tconst layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\tlayer: layer,\n\n\t\t\t};\n\n\t\t}\n\n\t\treturn rawClips;\n\n\t}\n\n\taddClip( rawClip ) {\n\n\t\tlet tracks = [];\n\n\t\tconst scope = this;\n\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t} );\n\n\t\treturn new AnimationClip( rawClip.name, - 1, tracks );\n\n\t}\n\n\tgenerateTracks( rawTracks ) {\n\n\t\tconst tracks = [];\n\n\t\tlet initialPosition = new Vector3();\n\t\tlet initialRotation = new Quaternion();\n\t\tlet initialScale = new Vector3();\n\n\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\tinitialPosition = initialPosition.toArray();\n\t\tinitialRotation = new Euler().setFromQuaternion( initialRotation, rawTracks.eulerOrder ).toArray();\n\t\tinitialScale = initialScale.toArray();\n\n\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\tconst positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\tconst rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\tconst scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\tconst morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\tgenerateVectorTrack( modelName, curves, initialValue, type ) {\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t}\n\n\tgenerateRotationTrack( modelName, curves, initialValue, preRotation, postRotation, eulerOrder ) {\n\n\t\tif ( curves.x !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.x );\n\t\t\tcurves.x.values = curves.x.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tif ( curves.y !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.y );\n\t\t\tcurves.y.values = curves.y.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tif ( curves.z !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.z );\n\t\t\tcurves.z.values = curves.z.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\tif ( preRotation !== undefined ) {\n\n\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\n\t\t\tpreRotation.push( eulerOrder );\n\n\t\t\tpreRotation = new Euler().fromArray( preRotation );\n\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\n\n\t\t}\n\n\t\tif ( postRotation !== undefined ) {\n\n\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\n\t\t\tpostRotation.push( eulerOrder );\n\n\t\t\tpostRotation = new Euler().fromArray( postRotation );\n\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\n\n\t\t}\n\n\t\tconst quaternion = new Quaternion();\n\t\tconst euler = new Euler();\n\n\t\tconst quaternionValues = [];\n\n\t\tfor ( let i = 0; i < values.length; i += 3 ) {\n\n\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\n\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t}\n\n\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t}\n\n\tgenerateMorphTrack( rawTracks ) {\n\n\t\tconst curves = rawTracks.DeformPercent.curves.morph;\n\t\tconst values = curves.values.map( function ( val ) {\n\n\t\t\treturn val / 100;\n\n\t\t} );\n\n\t\tconst morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t}\n\n\t// For all animated objects, times are defined separately for each axis\n\t// Here we'll combine the times into one sorted array without duplicates\n\tgetTimesForAllAxes( curves ) {\n\n\t\tlet times = [];\n\n\t\t// first join together the times for each axis, if defined\n\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t// then sort them\n\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\treturn a - b;\n\n\t\t} );\n\n\t\t// and remove duplicates\n\t\tif ( times.length > 1 ) {\n\n\t\t\tlet targetIndex = 1;\n\t\t\tlet lastValue = times[ 0 ];\n\t\t\tfor ( let i = 1; i < times.length; i ++ ) {\n\n\t\t\t\tconst currentValue = times[ i ];\n\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t}\n\n\t\treturn times;\n\n\t}\n\n\tgetKeyframeTrackValues( times, curves, initialValue ) {\n\n\t\tconst prevValue = initialValue;\n\n\t\tconst values = [];\n\n\t\tlet xIndex = - 1;\n\t\tlet yIndex = - 1;\n\t\tlet zIndex = - 1;\n\n\t\ttimes.forEach( function ( time ) {\n\n\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t// if there is an x value defined for this frame, use that\n\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\tconst xValue = curves.x.values[ xIndex ];\n\t\t\t\tvalues.push( xValue );\n\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\tconst yValue = curves.y.values[ yIndex ];\n\t\t\t\tvalues.push( yValue );\n\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\tconst zValue = curves.z.values[ zIndex ];\n\t\t\t\tvalues.push( zValue );\n\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn values;\n\n\t}\n\n\t// Rotations are defined as Euler angles which can have values  of any size\n\t// These will be converted to quaternions which don't support values greater than\n\t// PI, so we'll interpolate large rotations\n\tinterpolateRotations( curve ) {\n\n\t\tfor ( let i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\tconst initialValue = curve.values[ i - 1 ];\n\t\t\tconst valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\tconst absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\tconst numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\tconst step = valuesSpan / numSubIntervals;\n\t\t\t\tlet nextValue = initialValue + step;\n\n\t\t\t\tconst initialTime = curve.times[ i - 1 ];\n\t\t\t\tconst timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\tconst interval = timeSpan / numSubIntervals;\n\t\t\t\tlet nextTime = initialTime + interval;\n\n\t\t\t\tconst interpolatedTimes = [];\n\t\t\t\tconst interpolatedValues = [];\n\n\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\tnextValue += step;\n\n\t\t\t\t}\n\n\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse an FBX file in ASCII format\nclass TextParser {\n\n\tgetPrevNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t}\n\n\tgetCurrentNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t}\n\n\tgetCurrentProp() {\n\n\t\treturn this.currentProp;\n\n\t}\n\n\tpushStack( node ) {\n\n\t\tthis.nodeStack.push( node );\n\t\tthis.currentIndent += 1;\n\n\t}\n\n\tpopStack() {\n\n\t\tthis.nodeStack.pop();\n\t\tthis.currentIndent -= 1;\n\n\t}\n\n\tsetCurrentProp( val, name ) {\n\n\t\tthis.currentProp = val;\n\t\tthis.currentPropName = name;\n\n\t}\n\n\tparse( text ) {\n\n\t\tthis.currentIndent = 0;\n\n\t\tthis.allNodes = new FBXTree();\n\t\tthis.nodeStack = [];\n\t\tthis.currentProp = [];\n\t\tthis.currentPropName = '';\n\n\t\tconst scope = this;\n\n\t\tconst split = text.split( /[\\r\\n]+/ );\n\n\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\tconst matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\tconst matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\tconst matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\tconst matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\tconst matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\tif ( matchBeginning ) {\n\n\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\tscope.popStack();\n\n\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.allNodes;\n\n\t}\n\n\tparseNodeBegin( line, property ) {\n\n\t\tconst nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\tconst nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t} );\n\n\t\tconst node = { name: nodeName };\n\t\tconst attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\t// a top node\n\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t} else { // a subnode\n\n\t\t\t// if the subnode already exists, append it\n\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\tthis.pushStack( node );\n\n\t}\n\n\tparseNodeAttr( attrs ) {\n\n\t\tlet id = attrs[ 0 ];\n\n\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet name = '', type = '';\n\n\t\tif ( attrs.length > 1 ) {\n\n\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\ttype = attrs[ 2 ];\n\n\t\t}\n\n\t\treturn { id: id, name: name, type: type };\n\n\t}\n\n\tparseNodeProperty( line, property, contentLine ) {\n\n\t\tlet propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\tlet propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t//\tContent: ,\n\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t}\n\n\t\tconst currentNode = this.getCurrentNode();\n\t\tconst parentName = currentNode.name;\n\n\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Connections\n\t\tif ( propName === 'C' ) {\n\n\t\t\tconst connProps = propValue.split( ',' ).slice( 1 );\n\t\t\tconst from = parseInt( connProps[ 0 ] );\n\t\t\tconst to = parseInt( connProps[ 1 ] );\n\n\t\t\tlet rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t} );\n\n\t\t\tpropName = 'connections';\n\t\t\tpropValue = [ from, to ];\n\t\t\tappend( propValue, rest );\n\n\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Node\n\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t// connections\n\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t} else {\n\n\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\telse currentNode.a = propValue;\n\n\t\t}\n\n\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t}\n\n\t}\n\n\tparseNodePropertyContinued( line ) {\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\tcurrentNode.a += line;\n\n\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t// so convert the string to an array\n\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t}\n\n\t}\n\n\t// parse \"Property70\"\n\tparseNodeSpecialProperty( line, propName, propValue ) {\n\n\t\t// split this\n\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t// into array like below\n\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\tconst props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t} );\n\n\t\tconst innerPropName = props[ 0 ];\n\t\tconst innerPropType1 = props[ 1 ];\n\t\tconst innerPropType2 = props[ 2 ];\n\t\tconst innerPropFlag = props[ 3 ];\n\t\tlet innerPropValue = props[ 4 ];\n\n\t\t// cast values where needed, otherwise leave as strings\n\t\tswitch ( innerPropType1 ) {\n\n\t\t\tcase 'int':\n\t\t\tcase 'enum':\n\t\t\tcase 'bool':\n\t\t\tcase 'ULongLong':\n\t\t\tcase 'double':\n\t\t\tcase 'Number':\n\t\t\tcase 'FieldOfView':\n\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t\tcase 'Color':\n\t\t\tcase 'ColorRGB':\n\t\t\tcase 'Vector3D':\n\t\t\tcase 'Lcl_Translation':\n\t\t\tcase 'Lcl_Rotation':\n\t\t\tcase 'Lcl_Scaling':\n\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// CAUTION: these props must append to parent's parent\n\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t'type': innerPropType1,\n\t\t\t'type2': innerPropType2,\n\t\t\t'flag': innerPropFlag,\n\t\t\t'value': innerPropValue\n\n\t\t};\n\n\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t}\n\n}\n\n// Parse an FBX file in Binary format\nclass BinaryParser {\n\n\tparse( buffer ) {\n\n\t\tconst reader = new BinaryReader( buffer );\n\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\tconst version = reader.getUint32();\n\n\t\tif ( version < 6400 ) {\n\n\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t}\n\n\t\tconst allNodes = new FBXTree();\n\n\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\tconst node = this.parseNode( reader, version );\n\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t}\n\n\t\treturn allNodes;\n\n\t}\n\n\t// Check if reader has reached the end of content.\n\tendOfContent( reader ) {\n\n\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t// - 16bytes: magic\n\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t// - 4bytes: magic\n\t\t// - 4bytes: version\n\t\t// - 120bytes: zero\n\t\t// - 16bytes: magic\n\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t} else {\n\n\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t}\n\n\t}\n\n\t// recursively parse nodes until the end of the file is reached\n\tparseNode( reader, version ) {\n\n\t\tconst node = {};\n\n\t\t// The first three data sizes depends on version.\n\t\tconst endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\tconst numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\tconst nameLen = reader.getUint8();\n\t\tconst name = reader.getString( nameLen );\n\n\t\t// Regards this node as NULL-record if endOffset is zero\n\t\tif ( endOffset === 0 ) return null;\n\n\t\tconst propertyList = [];\n\n\t\tfor ( let i = 0; i < numProperties; i ++ ) {\n\n\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t}\n\n\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\tconst id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\tconst attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\tconst attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t// check if this node represents just a single property\n\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\tconst subNode = this.parseNode( reader, version );\n\n\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t}\n\n\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\tif ( typeof id === 'number' ) node.id = id;\n\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\tif ( name !== '' ) node.name = name;\n\n\t\treturn node;\n\n\t}\n\n\tparseSubNode( name, node, subNode ) {\n\n\t\t// special case: child node is single property\n\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\tconst value = subNode.propertyList[ 0 ];\n\n\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\tsubNode.a = value;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t}\n\n\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\tconst array = [];\n\n\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t} );\n\n\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\tnode.connections = [];\n\n\t\t\t}\n\n\t\t\tnode.connections.push( array );\n\n\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\tconst keys = Object.keys( subNode );\n\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t} );\n\n\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\tlet innerPropName = subNode.propertyList[ 0 ];\n\t\t\tlet innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\tconst innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\tconst innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\tlet innerPropValue;\n\n\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\tinnerPropValue = [\n\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t];\n\n\t\t\t} else {\n\n\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t}\n\n\t\t\t// this will be copied to parent, see above\n\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t}\n\n\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tparseProperty( reader ) {\n\n\t\tconst type = reader.getString( 1 );\n\t\tlet length;\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 'C':\n\t\t\t\treturn reader.getBoolean();\n\n\t\t\tcase 'D':\n\t\t\t\treturn reader.getFloat64();\n\n\t\t\tcase 'F':\n\t\t\t\treturn reader.getFloat32();\n\n\t\t\tcase 'I':\n\t\t\t\treturn reader.getInt32();\n\n\t\t\tcase 'L':\n\t\t\t\treturn reader.getInt64();\n\n\t\t\tcase 'R':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\tcase 'S':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getString( length );\n\n\t\t\tcase 'Y':\n\t\t\t\treturn reader.getInt16();\n\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'f':\n\t\t\tcase 'i':\n\t\t\tcase 'l':\n\n\t\t\t\tconst arrayLength = reader.getUint32();\n\t\t\t\tconst encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\tconst compressedLength = reader.getUint32();\n\n\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( typeof fflate === 'undefined' ) {\n\n\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library fflate.min.js required.' );\n\n\t\t\t\t}\n\n\t\t\t\tconst data = fflate.unzlibSync( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\tconst reader2 = new BinaryReader( data.buffer );\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'b':\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\tcase 'i':\n\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t}\n\n\t}\n\n}\n\nclass BinaryReader {\n\n\tconstructor( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\tsize() {\n\n\t\treturn this.dv.buffer.byteLength;\n\n\t}\n\n\tskip( length ) {\n\n\t\tthis.offset += length;\n\n\t}\n\n\t// seems like true/false representation depends on exporter.\n\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t// then sees LSB.\n\tgetBoolean() {\n\n\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t}\n\n\tgetBooleanArray( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getBoolean() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint8() {\n\n\t\tconst value = this.dv.getUint8( this.offset );\n\t\tthis.offset += 1;\n\t\treturn value;\n\n\t}\n\n\tgetInt16() {\n\n\t\tconst value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\tthis.offset += 2;\n\t\treturn value;\n\n\t}\n\n\tgetInt32() {\n\n\t\tconst value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetInt32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint32() {\n\n\t\tconst value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t// There's a possibility that this method returns wrong value if the value\n\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t// TODO: safely handle 64-bit integer\n\tgetInt64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\t// calculate negative value\n\t\tif ( high & 0x80000000 ) {\n\n\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetInt64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// Note: see getInt64() comment\n\tgetUint64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetFloat32() {\n\n\t\tconst value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetFloat32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetFloat64() {\n\n\t\tconst value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\tthis.offset += 8;\n\t\treturn value;\n\n\t}\n\n\tgetFloat64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetArrayBuffer( size ) {\n\n\t\tconst value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\tthis.offset += size;\n\t\treturn value;\n\n\t}\n\n\tgetString( size ) {\n\n\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\tlet a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta[ i ] = this.getUint8();\n\n\t\t}\n\n\t\tconst nullByte = a.indexOf( 0 );\n\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\treturn LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t}\n\n}\n\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\nclass FBXTree {\n\n\tadd( key, val ) {\n\n\t\tthis[ key ] = val;\n\n\t}\n\n}\n\n// ************** UTILITY FUNCTIONS **************\n\nfunction isFbxFormatBinary( buffer ) {\n\n\tconst CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0';\n\n\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n}\n\nfunction isFbxFormatASCII( text ) {\n\n\tconst CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\tlet cursor = 0;\n\n\tfunction read( offset ) {\n\n\t\tconst result = text[ offset - 1 ];\n\t\ttext = text.slice( cursor + offset );\n\t\tcursor ++;\n\t\treturn result;\n\n\t}\n\n\tfor ( let i = 0; i < CORRECT.length; ++ i ) {\n\n\t\tconst num = read( 1 );\n\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction getFbxVersion( text ) {\n\n\tconst versionRegExp = /FBXVersion: (\\d+)/;\n\tconst match = text.match( versionRegExp );\n\n\tif ( match ) {\n\n\t\tconst version = parseInt( match[ 1 ] );\n\t\treturn version;\n\n\t}\n\n\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n}\n\n// Converts FBX ticks into real time seconds.\nfunction convertFBXTimeToSeconds( time ) {\n\n\treturn time / 46186158000;\n\n}\n\nconst dataArray = [];\n\n// extracts the data from the correct position in the FBX array based on indexing type\nfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\tlet index;\n\n\tswitch ( infoObject.mappingType ) {\n\n\t\tcase 'ByPolygonVertex' :\n\t\t\tindex = polygonVertexIndex;\n\t\t\tbreak;\n\t\tcase 'ByPolygon' :\n\t\t\tindex = polygonIndex;\n\t\t\tbreak;\n\t\tcase 'ByVertice' :\n\t\t\tindex = vertexIndex;\n\t\t\tbreak;\n\t\tcase 'AllSame' :\n\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\tbreak;\n\t\tdefault :\n\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t}\n\n\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\tconst from = index * infoObject.dataSize;\n\tconst to = from + infoObject.dataSize;\n\n\treturn slice( dataArray, infoObject.buffer, from, to );\n\n}\n\nconst tempEuler = new Euler();\nconst tempVec = new Vector3();\n\n// generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\nfunction generateTransform( transformData ) {\n\n\tconst lTranslationM = new Matrix4();\n\tconst lPreRotationM = new Matrix4();\n\tconst lRotationM = new Matrix4();\n\tconst lPostRotationM = new Matrix4();\n\n\tconst lScalingM = new Matrix4();\n\tconst lScalingPivotM = new Matrix4();\n\tconst lScalingOffsetM = new Matrix4();\n\tconst lRotationOffsetM = new Matrix4();\n\tconst lRotationPivotM = new Matrix4();\n\n\tconst lParentGX = new Matrix4();\n\tconst lParentLX = new Matrix4();\n\tconst lGlobalT = new Matrix4();\n\n\tconst inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\tif ( transformData.preRotation ) {\n\n\t\tconst array = transformData.preRotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.rotation ) {\n\n\t\tconst array = transformData.rotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.postRotation ) {\n\n\t\tconst array = transformData.postRotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\t\tlPostRotationM.invert();\n\n\t}\n\n\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t// Pivots and offsets\n\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t// parent transform\n\tif ( transformData.parentMatrixWorld ) {\n\n\t\tlParentLX.copy( transformData.parentMatrix );\n\t\tlParentGX.copy( transformData.parentMatrixWorld );\n\n\t}\n\n\tconst lLRM = lPreRotationM.clone().multiply( lRotationM ).multiply( lPostRotationM );\n\t// Global Rotation\n\tconst lParentGRM = new Matrix4();\n\tlParentGRM.extractRotation( lParentGX );\n\n\t// Global Shear*Scaling\n\tconst lParentTM = new Matrix4();\n\tlParentTM.copyPosition( lParentGX );\n\n\tconst lParentGRSM = lParentTM.clone().invert().multiply( lParentGX );\n\tconst lParentGSM = lParentGRM.clone().invert().multiply( lParentGRSM );\n\tconst lLSM = lScalingM;\n\n\tconst lGlobalRS = new Matrix4();\n\n\tif ( inheritType === 0 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\n\n\t} else if ( inheritType === 1 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\n\n\t} else {\n\n\t\tconst lParentLSM = new Matrix4().scale( new Vector3().setFromMatrixScale( lParentLX ) );\n\t\tconst lParentLSM_inv = lParentLSM.clone().invert();\n\t\tconst lParentGSM_noLocal = lParentGSM.clone().multiply( lParentLSM_inv );\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\n\n\t}\n\n\tconst lRotationPivotM_inv = lRotationPivotM.clone().invert();\n\tconst lScalingPivotM_inv = lScalingPivotM.clone().invert();\n\t// Calculate the local transform matrix\n\tlet lTransform = lTranslationM.clone().multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\tconst lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\n\n\tconst lGlobalTranslation = lParentGX.clone().multiply( lLocalTWithAllPivotAndOffsetInfo );\n\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\tlTransform = lGlobalT.clone().multiply( lGlobalRS );\n\n\t// from global to local\n\tlTransform.premultiply( lParentGX.invert() );\n\n\treturn lTransform;\n\n}\n\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\nfunction getEulerOrder( order ) {\n\n\torder = order || 0;\n\n\tconst enums = [\n\t\t'ZYX', // -> XYZ extrinsic\n\t\t'YZX', // -> XZY extrinsic\n\t\t'XZY', // -> YZX extrinsic\n\t\t'ZXY', // -> YXZ extrinsic\n\t\t'YXZ', // -> ZXY extrinsic\n\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t];\n\n\tif ( order === 6 ) {\n\n\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\treturn enums[ 0 ];\n\n\t}\n\n\treturn enums[ order ];\n\n}\n\n// Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\nfunction parseNumberArray( value ) {\n\n\tconst array = value.split( ',' ).map( function ( val ) {\n\n\t\treturn parseFloat( val );\n\n\t} );\n\n\treturn array;\n\n}\n\nfunction convertArrayBufferToString( buffer, from, to ) {\n\n\tif ( from === undefined ) from = 0;\n\tif ( to === undefined ) to = buffer.byteLength;\n\n\treturn LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n}\n\nfunction append( a, b ) {\n\n\tfor ( let i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n}\n\nfunction slice( a, b, from, to ) {\n\n\tfor ( let i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n\treturn a;\n\n}\n\n// inject array a2 into array a1 at index\nfunction inject( a1, index, a2 ) {\n\n\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n}\n\nexport { FBXLoader };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenColor.fromArray( extension.sheenColorFactor );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || 0;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture ).then( function ( texture ) {\n\n\t\t\t\ttexture.encoding = sRGBEncoding;\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst source = json.images[ extension.source ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends MeshStandardMaterial {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.roughness += geometryRoughness;',\n\t\t\t'material.roughness = min( material.roughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = 1.0;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\tmaterial.refractionRatio = 0.98;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\tconst result = this.resultBuffer;\n\tconst values = this.sampleValues;\n\tconst stride = this.valueSize;\n\n\tconst stride2 = stride * 2;\n\tconst stride3 = stride * 3;\n\n\tconst td = t1 - t0;\n\n\tconst p = ( t - t0 ) / td;\n\tconst pp = p * p;\n\tconst ppp = pp * p;\n\n\tconst offset1 = i1 * stride3;\n\tconst offset0 = offset1 - stride3;\n\n\tconst s2 = - 2 * ppp + 3 * pp;\n\tconst s3 = ppp - pp;\n\tconst s0 = 1 - s2;\n\tconst s1 = s3 - pp + p;\n\n\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t}\n\n\treturn result;\n\n};\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox|^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst source = json.images[ textureDef.source ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, source, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tconst cacheKey = ( source.uri || source.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = source.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierarchy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierarchy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierarchy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n",null,null,null,null,null,null,null,null,null,"import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Reflector';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = new PerspectiveCamera();\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.prototype.isReflector = true;\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tQuaternion,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Refractor extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Refractor';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Refractor.RefractorShader;\n\n\t\t//\n\n\t\tconst virtualCamera = new PerspectiveCamera();\n\t\tvirtualCamera.matrixAutoUpdate = false;\n\t\tvirtualCamera.userData.refractor = true;\n\n\t\t//\n\n\t\tconst refractorPlane = new Plane();\n\t\tconst textureMatrix = new Matrix4();\n\n\t\t// render target\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true // ensures, refractors are drawn from farthest to closest\n\t\t} );\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// functions\n\n\t\tconst visible = ( function () {\n\n\t\t\tconst refractorWorldPosition = new Vector3();\n\t\t\tconst cameraWorldPosition = new Vector3();\n\t\t\tconst rotationMatrix = new Matrix4();\n\n\t\t\tconst view = new Vector3();\n\t\t\tconst normal = new Vector3();\n\n\t\t\treturn function visible( camera ) {\n\n\t\t\t\trefractorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\t\tview.subVectors( refractorWorldPosition, cameraWorldPosition );\n\n\t\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\t\tnormal.set( 0, 0, 1 );\n\t\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\t\treturn view.dot( normal ) < 0;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateRefractorPlane = ( function () {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst position = new Vector3();\n\t\t\tconst quaternion = new Quaternion();\n\t\t\tconst scale = new Vector3();\n\n\t\t\treturn function updateRefractorPlane() {\n\n\t\t\t\tscope.matrixWorld.decompose( position, quaternion, scale );\n\t\t\t\tnormal.set( 0, 0, 1 ).applyQuaternion( quaternion ).normalize();\n\n\t\t\t\t// flip the normal because we want to cull everything above the plane\n\n\t\t\t\tnormal.negate();\n\n\t\t\t\trefractorPlane.setFromNormalAndCoplanarPoint( normal, position );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateVirtualCamera = ( function () {\n\n\t\t\tconst clipPlane = new Plane();\n\t\t\tconst clipVector = new Vector4();\n\t\t\tconst q = new Vector4();\n\n\t\t\treturn function updateVirtualCamera( camera ) {\n\n\t\t\t\tvirtualCamera.matrixWorld.copy( camera.matrixWorld );\n\t\t\t\tvirtualCamera.matrixWorldInverse.copy( virtualCamera.matrixWorld ).invert();\n\t\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\t\t\t\tvirtualCamera.far = camera.far; // used in WebGLBackground\n\n\t\t\t\t// The following code creates an oblique view frustum for clipping.\n\t\t\t\t// see: Lengyel, Eric. Oblique View Frustum Depth Projection and Clipping.\n\t\t\t\t// Journal of Game Development, Vol. 1, No. 2 (2005), Charles River Media, pp. 516\n\n\t\t\t\tclipPlane.copy( refractorPlane );\n\t\t\t\tclipPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\t\tclipVector.set( clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.constant );\n\n\t\t\t\t// calculate the clip-space corner point opposite the clipping plane and\n\t\t\t\t// transform it into camera space by multiplying it by the inverse of the projection matrix\n\n\t\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\t\tq.x = ( Math.sign( clipVector.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\t\tq.y = ( Math.sign( clipVector.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\t\tq.z = - 1.0;\n\t\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t\t// calculate the scaled plane vector\n\n\t\t\t\tclipVector.multiplyScalar( 2.0 / clipVector.dot( q ) );\n\n\t\t\t\t// replacing the third row of the projection matrix\n\n\t\t\t\tprojectionMatrix.elements[ 2 ] = clipVector.x;\n\t\t\t\tprojectionMatrix.elements[ 6 ] = clipVector.y;\n\t\t\t\tprojectionMatrix.elements[ 10 ] = clipVector.z + 1.0 - clipBias;\n\t\t\t\tprojectionMatrix.elements[ 14 ] = clipVector.w;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\t// This will update the texture matrix that is used for projective texture mapping in the shader.\n\t\t// see: http://developer.download.nvidia.com/assets/gamedev/docs/projective_texture_mapping.pdf\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\t// this matrix does range mapping to [ 0, 1 ]\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\t// we use \"Object Linear Texgen\", so we need to multiply the texture matrix T\n\t\t\t// (matrix above) with the projection and view matrix of the virtual camera\n\t\t\t// and the model matrix of the refractor\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\t//\n\n\t\tfunction render( renderer, scene, camera ) {\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\t// ensure refractors are rendered only once per frame\n\n\t\t\tif ( camera.userData.refractor === true ) return;\n\n\t\t\t// avoid rendering when the refractor is viewed from behind\n\n\t\t\tif ( ! visible( camera ) === true ) return;\n\n\t\t\t// update\n\n\t\t\tupdateRefractorPlane();\n\n\t\t\tupdateTextureMatrix( camera );\n\n\t\t\tupdateVirtualCamera( camera );\n\n\t\t\trender( renderer, scene, camera );\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nRefractor.prototype.isRefractor = true;\n\nRefractor.RefractorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n\n};\n\nexport { Refractor };\n","import {\n\tClock,\n\tColor,\n\tMatrix4,\n\tMesh,\n\tRepeatWrapping,\n\tShaderMaterial,\n\tTextureLoader,\n\tUniformsLib,\n\tUniformsUtils,\n\tVector2,\n\tVector4\n} from 'three';\nimport { Reflector } from '../objects/Reflector.js';\nimport { Refractor } from '../objects/Refractor.js';\n\n/**\n * References:\n *\thttps://alex.vlachos.com/graphics/Vlachos-SIGGRAPH10-WaterFlow.pdf\n *\thttp://graphicsrunner.blogspot.de/2010/08/water-using-flow-maps.html\n *\n */\n\nclass Water extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Water';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0xFFFFFF );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst flowDirection = options.flowDirection || new Vector2( 1, 0 );\n\t\tconst flowSpeed = options.flowSpeed || 0.03;\n\t\tconst reflectivity = options.reflectivity || 0.02;\n\t\tconst scale = options.scale || 1;\n\t\tconst shader = options.shader || Water.WaterShader;\n\n\t\tconst textureLoader = new TextureLoader();\n\n\t\tconst flowMap = options.flowMap || undefined;\n\t\tconst normalMap0 = options.normalMap0 || textureLoader.load( 'textures/water/Water_1_M_Normal.jpg' );\n\t\tconst normalMap1 = options.normalMap1 || textureLoader.load( 'textures/water/Water_2_M_Normal.jpg' );\n\n\t\tconst cycle = 0.15; // a cycle of a flow map phase\n\t\tconst halfCycle = cycle * 0.5;\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst clock = new Clock();\n\n\t\t// internal components\n\n\t\tif ( Reflector === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Reflector not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( Refractor === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Refractor not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst reflector = new Reflector( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\tconst refractor = new Refractor( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\treflector.matrixAutoUpdate = false;\n\t\trefractor.matrixAutoUpdate = false;\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib[ 'fog' ],\n\t\t\t\tshader.uniforms\n\t\t\t] ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true,\n\t\t\tfog: true\n\t\t} );\n\n\t\tif ( flowMap !== undefined ) {\n\n\t\t\tthis.material.defines.USE_FLOWMAP = '';\n\t\t\tthis.material.uniforms[ 'tFlowMap' ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: flowMap\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.material.uniforms[ 'flowDirection' ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: flowDirection\n\t\t\t};\n\n\t\t}\n\n\t\t// maps\n\n\t\tnormalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\n\t\tnormalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\n\n\t\tthis.material.uniforms[ 'tReflectionMap' ].value = reflector.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tRefractionMap' ].value = refractor.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tNormalMap0' ].value = normalMap0;\n\t\tthis.material.uniforms[ 'tNormalMap1' ].value = normalMap1;\n\n\t\t// water\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'reflectivity' ].value = reflectivity;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// inital values\n\n\t\tthis.material.uniforms[ 'config' ].value.x = 0; // flowMapOffset0\n\t\tthis.material.uniforms[ 'config' ].value.y = halfCycle; // flowMapOffset1\n\t\tthis.material.uniforms[ 'config' ].value.z = halfCycle; // halfCycle\n\t\tthis.material.uniforms[ 'config' ].value.w = scale; // scale\n\n\t\t// functions\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\tfunction updateFlow() {\n\n\t\t\tconst delta = clock.getDelta();\n\t\t\tconst config = scope.material.uniforms[ 'config' ];\n\n\t\t\tconfig.value.x += flowSpeed * delta; // flowMapOffset0\n\t\t\tconfig.value.y = config.value.x + halfCycle; // flowMapOffset1\n\n\t\t\t// Important: The distance between offsets should be always the value of \"halfCycle\".\n\t\t\t// Moreover, both offsets should be in the range of [ 0, cycle ].\n\t\t\t// This approach ensures a smooth water flow and avoids \"reset\" effects.\n\n\t\t\tif ( config.value.x >= cycle ) {\n\n\t\t\t\tconfig.value.x = 0;\n\t\t\t\tconfig.value.y = halfCycle;\n\n\t\t\t} else if ( config.value.y >= cycle ) {\n\n\t\t\t\tconfig.value.y = config.value.y - cycle;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\tupdateTextureMatrix( camera );\n\t\t\tupdateFlow();\n\n\t\t\tscope.visible = false;\n\n\t\t\treflector.matrixWorld.copy( scope.matrixWorld );\n\t\t\trefractor.matrixWorld.copy( scope.matrixWorld );\n\n\t\t\treflector.onBeforeRender( renderer, scene, camera );\n\t\t\trefractor.onBeforeRender( renderer, scene, camera );\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t}\n\n}\n\nWater.prototype.isWater = true;\n\nWater.WaterShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\ttype: 'c',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'reflectivity': {\n\t\t\ttype: 'f',\n\t\t\tvalue: 0\n\t\t},\n\n\t\t'tReflectionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tRefractionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap0': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap1': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\ttype: 'm4',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'config': {\n\t\t\ttype: 'v4',\n\t\t\tvalue: new Vector4()\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}`\n\n};\n\nexport { Water };\n",null,null,"export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking', 'layers' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t\tif ( supported && VRButton.xrSessionIsGranted ) {\n\n\t\t\t\t\tbutton.click();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n\tstatic xrSessionIsGranted = false;\n\n\tstatic registerSessionGrantedListener() {\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tnavigator.xr.addEventListener( 'sessiongranted', () => {\n\n\t\t\t\tVRButton.xrSessionIsGranted = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\nVRButton.registerSessionGrantedListener();\n\nexport { VRButton };\n","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tSphereGeometry,\n} from 'three';\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nclass XRControllerModel extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t}\n\n\tsetEnvironmentMap( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tvalueNode.quaternion.slerpQuaternions(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nclass XRControllerModelFactory {\n\n\tconstructor( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tcreateControllerModel( controller ) {\n\n\t\tconst controllerModel = new XRControllerModel();\n\t\tlet scene = null;\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\txrInputSource,\n\t\t\t\t\tprofile,\n\t\t\t\t\tassetPath\n\t\t\t\t);\n\n\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\tthrow new Error( 'GLTFLoader not set.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t() => {\n\n\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\tconsole.warn( err );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\tcontrollerModel.motionController = null;\n\t\t\tcontrollerModel.remove( scene );\n\t\t\tscene = null;\n\n\t\t} );\n\n\t\treturn controllerModel;\n\n\t}\n\n}\n\nexport { XRControllerModelFactory };\n",null,null,null,null,null,null,null,null,null,null,"import {\n\tLine3,\n\tPlane,\n\tTriangle,\n\tVector3\n} from 'three';\n\n/**\n * Ported from: https://github.com/maurizzzio/quickhull3d/ by Mauricio Poppe (https://github.com/maurizzzio)\n */\n\nconst Visible = 0;\nconst Deleted = 1;\n\nconst _v1 = new Vector3();\nconst _line3 = new Line3();\nconst _plane = new Plane();\nconst _closestPoint = new Vector3();\nconst _triangle = new Triangle();\n\nclass ConvexHull {\n\n\tconstructor() {\n\n\t\tthis.tolerance = - 1;\n\n\t\tthis.faces = []; // the generated faces of the convex hull\n\t\tthis.newFaces = []; // this array holds the faces that are generated within a single iteration\n\n\t\t// the vertex lists work as follows:\n\t\t//\n\t\t// let 'a' and 'b' be 'Face' instances\n\t\t// let 'v' be points wrapped as instance of 'Vertex'\n\t\t//\n\t\t//     [v, v, ..., v, v, v, ...]\n\t\t//      ^             ^\n\t\t//      |             |\n\t\t//  a.outside     b.outside\n\t\t//\n\t\tthis.assigned = new VertexList();\n\t\tthis.unassigned = new VertexList();\n\n\t\tthis.vertices = []; \t// vertices of the hull (internal representation of given geometry data)\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\t// The algorithm needs at least four points.\n\n\t\tif ( points.length >= 4 ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tthis.vertices.push( new VertexNode( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.compute();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tconst points = [];\n\n\t\tobject.updateMatrixWorld( true );\n\n\t\tobject.traverse( function ( node ) {\n\n\t\t\tconst geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tconst attribute = geometry.attributes.position;\n\n\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst point = new Vector3();\n\n\t\t\t\t\t\t\tpoint.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tpoints.push( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst faces = this.faces;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// compute signed distance and check on what half space the point lies\n\n\t\t\tif ( face.distanceToPoint( point ) > this.tolerance ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectRay( ray, target ) {\n\n\t\t// based on \"Fast Ray-Convex Polyhedron Intersection\"  by Eric Haines, GRAPHICS GEMS II\n\n\t\tconst faces = this.faces;\n\n\t\tlet tNear = - Infinity;\n\t\tlet tFar = Infinity;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// interpret faces as planes for the further computation\n\n\t\t\tconst vN = face.distanceToPoint( ray.origin );\n\t\t\tconst vD = face.normal.dot( ray.direction );\n\n\t\t\t// if the origin is on the positive side of a plane (so the plane can \"see\" the origin) and\n\t\t\t// the ray is turned away or parallel to the plane, there is no intersection\n\n\t\t\tif ( vN > 0 && vD >= 0 ) return null;\n\n\t\t\t// compute the distance from the rays origin to the intersection with the plane\n\n\t\t\tconst t = ( vD !== 0 ) ? ( - vN / vD ) : 0;\n\n\t\t\t// only proceed if the distance is positive. a negative distance means the intersection point\n\t\t\t// lies \"behind\" the origin\n\n\t\t\tif ( t <= 0 ) continue;\n\n\t\t\t// now categorized plane as front-facing or back-facing\n\n\t\t\tif ( vD > 0 ) {\n\n\t\t\t\t//  plane faces away from the ray, so this plane is a back-face\n\n\t\t\t\ttFar = Math.min( t, tFar );\n\n\t\t\t} else {\n\n\t\t\t\t// front-face\n\n\t\t\t\ttNear = Math.max( t, tNear );\n\n\t\t\t}\n\n\t\t\tif ( tNear > tFar ) {\n\n\t\t\t\t// if tNear ever is greater than tFar, the ray must miss the convex hull\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// evaluate intersection point\n\n\t\t// always try tNear first since its the closer intersection point\n\n\t\tif ( tNear !== - Infinity ) {\n\n\t\t\tray.at( tNear, target );\n\n\t\t} else {\n\n\t\t\tray.at( tFar, target );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, _v1 ) !== null;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.faces = [];\n\t\tthis.vertices = [];\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\n\n\taddVertexToFace( vertex, face ) {\n\n\t\tvertex.face = face;\n\n\t\tif ( face.outside === null ) {\n\n\t\t\tthis.assigned.append( vertex );\n\n\t\t} else {\n\n\t\t\tthis.assigned.insertBefore( face.outside, vertex );\n\n\t\t}\n\n\t\tface.outside = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the 'assigned' list of vertices and from the given face\n\n\tremoveVertexFromFace( vertex, face ) {\n\n\t\tif ( vertex === face.outside ) {\n\n\t\t\t// fix face.outside link\n\n\t\t\tif ( vertex.next !== null && vertex.next.face === face ) {\n\n\t\t\t\t// face has at least 2 outside vertices, move the 'outside' reference\n\n\t\t\t\tface.outside = vertex.next;\n\n\t\t\t} else {\n\n\t\t\t\t// vertex was the only outside vertex that face had\n\n\t\t\t\tface.outside = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.assigned.remove( vertex );\n\n\t\treturn this;\n\n\t}\n\n\t// Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertext list\n\n\tremoveAllVerticesFromFace( face ) {\n\n\t\tif ( face.outside !== null ) {\n\n\t\t\t// reference to the first and last vertex of this face\n\n\t\t\tconst start = face.outside;\n\t\t\tlet end = face.outside;\n\n\t\t\twhile ( end.next !== null && end.next.face === face ) {\n\n\t\t\t\tend = end.next;\n\n\t\t\t}\n\n\t\t\tthis.assigned.removeSubList( start, end );\n\n\t\t\t// fix references\n\n\t\t\tstart.prev = end.next = null;\n\t\t\tface.outside = null;\n\n\t\t\treturn start;\n\n\t\t}\n\n\t}\n\n\t// Removes all the visible vertices that 'face' is able to see\n\n\tdeleteFaceVertices( face, absorbingFace ) {\n\n\t\tconst faceVertices = this.removeAllVerticesFromFace( face );\n\n\t\tif ( faceVertices !== undefined ) {\n\n\t\t\tif ( absorbingFace === undefined ) {\n\n\t\t\t\t// mark the vertices to be reassigned to some other face\n\n\t\t\t\tthis.unassigned.appendChain( faceVertices );\n\n\n\t\t\t} else {\n\n\t\t\t\t// if there's an absorbing face try to assign as many vertices as possible to it\n\n\t\t\t\tlet vertex = faceVertices;\n\n\t\t\t\tdo {\n\n\t\t\t\t\t// we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\n\t\t\t\t\t// will be changed by upcoming method calls\n\n\t\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\t\tconst distance = absorbingFace.distanceToPoint( vertex.point );\n\n\t\t\t\t\t// check if 'vertex' is able to see 'absorbingFace'\n\n\t\t\t\t\tif ( distance > this.tolerance ) {\n\n\t\t\t\t\t\tthis.addVertexToFace( vertex, absorbingFace );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.unassigned.append( vertex );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// now assign next vertex\n\n\t\t\t\t\tvertex = nextVertex;\n\n\t\t\t\t} while ( vertex !== null );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Reassigns as many vertices as possible from the unassigned list to the new faces\n\n\tresolveUnassignedPoints( newFaces ) {\n\n\t\tif ( this.unassigned.isEmpty() === false ) {\n\n\t\t\tlet vertex = this.unassigned.first();\n\n\t\t\tdo {\n\n\t\t\t\t// buffer 'next' reference, see .deleteFaceVertices()\n\n\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\tlet maxDistance = this.tolerance;\n\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let i = 0; i < newFaces.length; i ++ ) {\n\n\t\t\t\t\tconst face = newFaces[ i ];\n\n\t\t\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\t\t\tconst distance = face.distanceToPoint( vertex.point );\n\n\t\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\t\tmaxFace = face;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( maxDistance > 1000 * this.tolerance ) break;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// 'maxFace' can be null e.g. if there are identical vertices\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t\tvertex = nextVertex;\n\n\t\t\t} while ( vertex !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Computes the extremes of a simplex which will be the initial hull\n\n\tcomputeExtremes() {\n\n\t\tconst min = new Vector3();\n\t\tconst max = new Vector3();\n\n\t\tconst minVertices = [];\n\t\tconst maxVertices = [];\n\n\t\t// initially assume that the first vertex is the min/max\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tminVertices[ i ] = maxVertices[ i ] = this.vertices[ 0 ];\n\n\t\t}\n\n\t\tmin.copy( this.vertices[ 0 ].point );\n\t\tmax.copy( this.vertices[ 0 ].point );\n\n\t\t// compute the min/max vertex on all six directions\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tconst point = vertex.point;\n\n\t\t\t// update the min coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) < min.getComponent( j ) ) {\n\n\t\t\t\t\tmin.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tminVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// update the max coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) > max.getComponent( j ) ) {\n\n\t\t\t\t\tmax.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tmaxVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use min/max vectors to compute an optimal epsilon\n\n\t\tthis.tolerance = 3 * Number.EPSILON * (\n\t\t\tMath.max( Math.abs( min.x ), Math.abs( max.x ) ) +\n\t\t\tMath.max( Math.abs( min.y ), Math.abs( max.y ) ) +\n\t\t\tMath.max( Math.abs( min.z ), Math.abs( max.z ) )\n\t\t);\n\n\t\treturn { min: minVertices, max: maxVertices };\n\n\t}\n\n\t// Computes the initial simplex assigning to its faces all the points\n\t// that are candidates to form part of the hull\n\n\tcomputeInitialHull() {\n\n\t\tconst vertices = this.vertices;\n\t\tconst extremes = this.computeExtremes();\n\t\tconst min = extremes.min;\n\t\tconst max = extremes.max;\n\n\t\t// 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\n\t\t// (max.x - min.x)\n\t\t// (max.y - min.y)\n\t\t// (max.z - min.z)\n\n\t\tlet maxDistance = 0;\n\t\tlet index = 0;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst distance = max[ i ].point.getComponent( i ) - min[ i ].point.getComponent( i );\n\n\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\tmaxDistance = distance;\n\t\t\t\tindex = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst v0 = min[ index ];\n\t\tconst v1 = max[ index ];\n\t\tlet v2;\n\t\tlet v3;\n\n\t\t// 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\n\n\t\tmaxDistance = 0;\n\t\t_line3.set( v0.point, v1.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 ) {\n\n\t\t\t\t_line3.closestPointToPoint( vertex.point, true, _closestPoint );\n\n\t\t\t\tconst distance = _closestPoint.distanceToSquared( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv2 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\n\n\t\tmaxDistance = - 1;\n\t\t_plane.setFromCoplanarPoints( v0.point, v1.point, v2.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 ) {\n\n\t\t\t\tconst distance = Math.abs( _plane.distanceToPoint( vertex.point ) );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv3 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst faces = [];\n\n\t\tif ( _plane.distanceToPoint( v3.point ) < 0 ) {\n\n\t\t\t// the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v1, v2 ),\n\t\t\t\tFace.create( v3, v1, v0 ),\n\t\t\t\tFace.create( v3, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v2 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( j ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ], 1 <= i <= 3\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 1 ).setTwin( faces[ j + 1 ].getEdge( 0 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v1 ),\n\t\t\t\tFace.create( v3, v1, v2 ),\n\t\t\t\tFace.create( v3, v2, v0 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( ( 3 - i ) % 3 ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ]\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 0 ).setTwin( faces[ j + 1 ].getEdge( 1 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// the initial hull is the tetrahedron\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ] );\n\n\t\t}\n\n\t\t// initial assignment of vertices to the faces of the tetrahedron\n\n\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3 ) {\n\n\t\t\t\tmaxDistance = this.tolerance;\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\tconst distance = this.faces[ j ].distanceToPoint( vertex.point );\n\n\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\tmaxFace = this.faces[ j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes inactive faces\n\n\treindexFaces() {\n\n\t\tconst activeFaces = [];\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\tactiveFaces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.faces = activeFaces;\n\n\t\treturn this;\n\n\t}\n\n\t// Finds the next vertex to create faces with the current hull\n\n\tnextVertexToAdd() {\n\n\t\t// if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\n\n\t\tif ( this.assigned.isEmpty() === false ) {\n\n\t\t\tlet eyeVertex, maxDistance = 0;\n\n\t\t\t// grap the first available face and start with the first visible vertex of that face\n\n\t\t\tconst eyeFace = this.assigned.first().face;\n\t\t\tlet vertex = eyeFace.outside;\n\n\t\t\t// now calculate the farthest vertex that face can see\n\n\t\t\tdo {\n\n\t\t\t\tconst distance = eyeFace.distanceToPoint( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\teyeVertex = vertex;\n\n\t\t\t\t}\n\n\t\t\t\tvertex = vertex.next;\n\n\t\t\t} while ( vertex !== null && vertex.face === eyeFace );\n\n\t\t\treturn eyeVertex;\n\n\t\t}\n\n\t}\n\n\t// Computes a chain of half edges in CCW order called the 'horizon'.\n\t// For an edge to be part of the horizon it must join a face that can see\n\t// 'eyePoint' and a face that cannot see 'eyePoint'.\n\n\tcomputeHorizon( eyePoint, crossEdge, face, horizon ) {\n\n\t\t// moves face's vertices to the 'unassigned' vertex list\n\n\t\tthis.deleteFaceVertices( face );\n\n\t\tface.mark = Deleted;\n\n\t\tlet edge;\n\n\t\tif ( crossEdge === null ) {\n\n\t\t\tedge = crossEdge = face.getEdge( 0 );\n\n\t\t} else {\n\n\t\t\t// start from the next edge since 'crossEdge' was already analyzed\n\t\t\t// (actually 'crossEdge.twin' was the edge who called this method recursively)\n\n\t\t\tedge = crossEdge.next;\n\n\t\t}\n\n\t\tdo {\n\n\t\t\tconst twinEdge = edge.twin;\n\t\t\tconst oppositeFace = twinEdge.face;\n\n\t\t\tif ( oppositeFace.mark === Visible ) {\n\n\t\t\t\tif ( oppositeFace.distanceToPoint( eyePoint ) > this.tolerance ) {\n\n\t\t\t\t\t// the opposite face can see the vertex, so proceed with next edge\n\n\t\t\t\t\tthis.computeHorizon( eyePoint, twinEdge, oppositeFace, horizon );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// the opposite face can't see the vertex, so this edge is part of the horizon\n\n\t\t\t\t\thorizon.push( edge );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tedge = edge.next;\n\n\t\t} while ( edge !== crossEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\n\n\taddAdjoiningFace( eyeVertex, horizonEdge ) {\n\n\t\t// all the half edges are created in ccw order thus the face is always pointing outside the hull\n\n\t\tconst face = Face.create( eyeVertex, horizonEdge.tail(), horizonEdge.head() );\n\n\t\tthis.faces.push( face );\n\n\t\t// join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\n\n\t\tface.getEdge( - 1 ).setTwin( horizonEdge.twin );\n\n\t\treturn face.getEdge( 0 ); // the half edge whose vertex is the eyeVertex\n\n\n\t}\n\n\t//  Adds 'horizon.length' faces to the hull, each face will be linked with the\n\t//  horizon opposite face and the face on the left/right\n\n\taddNewFaces( eyeVertex, horizon ) {\n\n\t\tthis.newFaces = [];\n\n\t\tlet firstSideEdge = null;\n\t\tlet previousSideEdge = null;\n\n\t\tfor ( let i = 0; i < horizon.length; i ++ ) {\n\n\t\t\tconst horizonEdge = horizon[ i ];\n\n\t\t\t// returns the right side edge\n\n\t\t\tconst sideEdge = this.addAdjoiningFace( eyeVertex, horizonEdge );\n\n\t\t\tif ( firstSideEdge === null ) {\n\n\t\t\t\tfirstSideEdge = sideEdge;\n\n\t\t\t} else {\n\n\t\t\t\t// joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\n\n\t\t\t\tsideEdge.next.setTwin( previousSideEdge );\n\n\t\t\t}\n\n\t\t\tthis.newFaces.push( sideEdge.face );\n\t\t\tpreviousSideEdge = sideEdge;\n\n\t\t}\n\n\t\t// perform final join of new faces\n\n\t\tfirstSideEdge.next.setTwin( previousSideEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the hull\n\n\taddVertexToHull( eyeVertex ) {\n\n\t\tconst horizon = [];\n\n\t\tthis.unassigned.clear();\n\n\t\t// remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\n\n\t\tthis.removeVertexFromFace( eyeVertex, eyeVertex.face );\n\n\t\tthis.computeHorizon( eyeVertex.point, null, eyeVertex.face, horizon );\n\n\t\tthis.addNewFaces( eyeVertex, horizon );\n\n\t\t// reassign 'unassigned' vertices to the new faces\n\n\t\tthis.resolveUnassignedPoints( this.newFaces );\n\n\t\treturn\tthis;\n\n\t}\n\n\tcleanup() {\n\n\t\tthis.assigned.clear();\n\t\tthis.unassigned.clear();\n\t\tthis.newFaces = [];\n\n\t\treturn this;\n\n\t}\n\n\tcompute() {\n\n\t\tlet vertex;\n\n\t\tthis.computeInitialHull();\n\n\t\t// add all available vertices gradually to the hull\n\n\t\twhile ( ( vertex = this.nextVertexToAdd() ) !== undefined ) {\n\n\t\t\tthis.addVertexToHull( vertex );\n\n\t\t}\n\n\t\tthis.reindexFaces();\n\n\t\tthis.cleanup();\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nclass Face {\n\n\tconstructor() {\n\n\t\tthis.normal = new Vector3();\n\t\tthis.midpoint = new Vector3();\n\t\tthis.area = 0;\n\n\t\tthis.constant = 0; // signed distance from face to the origin\n\t\tthis.outside = null; // reference to a vertex in a vertex list this face can see\n\t\tthis.mark = Visible;\n\t\tthis.edge = null;\n\n\t}\n\n\tstatic create( a, b, c ) {\n\n\t\tconst face = new Face();\n\n\t\tconst e0 = new HalfEdge( a, face );\n\t\tconst e1 = new HalfEdge( b, face );\n\t\tconst e2 = new HalfEdge( c, face );\n\n\t\t// join edges\n\n\t\te0.next = e2.prev = e1;\n\t\te1.next = e0.prev = e2;\n\t\te2.next = e1.prev = e0;\n\n\t\t// main half edge reference\n\n\t\tface.edge = e0;\n\n\t\treturn face.compute();\n\n\t}\n\n\tgetEdge( i ) {\n\n\t\tlet edge = this.edge;\n\n\t\twhile ( i > 0 ) {\n\n\t\t\tedge = edge.next;\n\t\t\ti --;\n\n\t\t}\n\n\t\twhile ( i < 0 ) {\n\n\t\t\tedge = edge.prev;\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn edge;\n\n\t}\n\n\tcompute() {\n\n\t\tconst a = this.edge.tail();\n\t\tconst b = this.edge.head();\n\t\tconst c = this.edge.next.head();\n\n\t\t_triangle.set( a.point, b.point, c.point );\n\n\t\t_triangle.getNormal( this.normal );\n\t\t_triangle.getMidpoint( this.midpoint );\n\t\tthis.area = _triangle.getArea();\n\n\t\tthis.constant = this.normal.dot( this.midpoint );\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) - this.constant;\n\n\t}\n\n}\n\n// Entity for a Doubly-Connected Edge List (DCEL).\n\nclass HalfEdge {\n\n\n\tconstructor( vertex, face ) {\n\n\t\tthis.vertex = vertex;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.twin = null;\n\t\tthis.face = face;\n\n\t}\n\n\thead() {\n\n\t\treturn this.vertex;\n\n\t}\n\n\ttail() {\n\n\t\treturn this.prev ? this.prev.vertex : null;\n\n\t}\n\n\tlength() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceTo( head.point );\n\n\t\t}\n\n\t\treturn - 1;\n\n\t}\n\n\tlengthSquared() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceToSquared( head.point );\n\n\t\t}\n\n\t\treturn - 1;\n\n\t}\n\n\tsetTwin( edge ) {\n\n\t\tthis.twin = edge;\n\t\tedge.twin = this;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// A vertex as a double linked list node.\n\nclass VertexNode {\n\n\tconstructor( point ) {\n\n\t\tthis.point = point;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.face = null; // the face that is able to see this vertex\n\n\t}\n\n}\n\n// A double linked list that contains vertex nodes.\n\nclass VertexList {\n\n\tconstructor() {\n\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\n\t}\n\n\tfirst() {\n\n\t\treturn this.head;\n\n\t}\n\n\tlast() {\n\n\t\treturn this.tail;\n\n\t}\n\n\tclear() {\n\n\t\tthis.head = this.tail = null;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex before the target vertex\n\n\tinsertBefore( target, vertex ) {\n\n\t\tvertex.prev = target.prev;\n\t\tvertex.next = target;\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex;\n\n\t\t}\n\n\t\ttarget.prev = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex after the target vertex\n\n\tinsertAfter( target, vertex ) {\n\n\t\tvertex.prev = target;\n\t\tvertex.next = target.next;\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex;\n\n\t\t}\n\n\t\ttarget.next = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a vertex to the end of the linked list\n\n\tappend( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\t\tvertex.next = null; // the tail has no subsequent vertex\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a chain of vertices where 'vertex' is the head.\n\n\tappendChain( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\n\t\t// ensure that the 'tail' reference points to the last vertex of the chain\n\n\t\twhile ( vertex.next !== null ) {\n\n\t\t\tvertex = vertex.next;\n\n\t\t}\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the linked list\n\n\tremove( vertex ) {\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex.next;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex.next;\n\n\t\t}\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex.prev;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\n\n\tremoveSubList( a, b ) {\n\n\t\tif ( a.prev === null ) {\n\n\t\t\tthis.head = b.next;\n\n\t\t} else {\n\n\t\t\ta.prev.next = b.next;\n\n\t\t}\n\n\t\tif ( b.next === null ) {\n\n\t\t\tthis.tail = a.prev;\n\n\t\t} else {\n\n\t\t\tb.next.prev = a.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn this.head === null;\n\n\t}\n\n}\n\nexport { ConvexHull };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute\n} from 'three';\nimport { ConvexHull } from '../math/ConvexHull.js';\n\nclass ConvexGeometry extends BufferGeometry {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\t// buffers\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\n\t\tif ( ConvexHull === undefined ) {\n\n\t\t\tconsole.error( 'THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull' );\n\n\t\t}\n\n\t\tconst convexHull = new ConvexHull().setFromPoints( points );\n\n\t\t// generate vertices and normals\n\n\t\tconst faces = convexHull.faces;\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\t\t\tlet edge = face.edge;\n\n\t\t\t// we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\n\n\t\t\tdo {\n\n\t\t\t\tconst point = edge.head().point;\n\n\t\t\t\tvertices.push( point.x, point.y, point.z );\n\t\t\t\tnormals.push( face.normal.x, face.normal.y, face.normal.z );\n\n\t\t\t\tedge = edge.next;\n\n\t\t\t} while ( edge !== face.edge );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n}\n\nexport { ConvexGeometry };\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"import {\n\tVector2\n} from 'three';\n\n/**\n * Dot screen shader\n * based on glfx.js sepia shader\n * https://github.com/evanw/glfx.js\n */\n\nconst DotScreenShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'tSize': { value: new Vector2( 256, 256 ) },\n\t\t'center': { value: new Vector2( 0.5, 0.5 ) },\n\t\t'angle': { value: 1.57 },\n\t\t'scale': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}`\n\n};\n\nexport { DotScreenShader };\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","let debug = false\nlet statistiques = true\n\n\nimport {  Scene3D, THREE  } from 'enable3d'\nimport Stats from 'three/examples/jsm/libs/stats.module'\n\n\n\nconst stats = Stats()\nlet raycaster,  scene\n// let INTERSECTED;\n//\n//\n// const pointer = new THREE.Vector2();\nlet mouse = { x : 0, y : 0 }\n\nexport class MainScene extends Scene3D {\n  constructor() {\n    super('MainScene')\n  }\n\n  async init() {\n    console.log('init')\n    this.renderer.setPixelRatio(1)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    if (statistiques){\n      document.body.appendChild(stats.dom)\n    }\n  }\n\n  async preload() {\n    console.log('preload')\n  }\n\n  create() {\n\n    console.log('create')\n\n    // set up scene (light, ground, grid, sky, orbitControls)\n    this.warpSpeed() //'-orbitControls'\n\n    this.debug = debug\n    if (debug == true ){\n      this.physics.debug?.enable()     // enable physics debug\n    }\n    this.camera.position.set(0, 14, 20)\n\n    const blocks = []\n\n    const addTower = () => {\n      const material = this.add.material({ lambert: { color: 0xa04000 } })\n\n      for (let i = 0; i < 12; i++) {\n        if (i % 2 == 0) {\n          blocks.push(\n            this.physics.add.box({ y: i * 0.85, z: -1.3, width: 4, height: 0.65 }, { custom: material }),\n            this.physics.add.box({ y: i * 0.85, z: 0, width: 4, height: 0.65 }, { custom: material }),\n            this.physics.add.box({ y: i * 0.85, z: 1.3, width: 4, height: 0.65 }, { custom: material })\n          )\n        } else {\n          blocks.push(\n            this.physics.add.box({ y: i * 0.85, x: -1.3, depth: 4, height: 0.65 }, { custom: material }),\n            this.physics.add.box({ y: i * 0.85, x: 0, depth: 4, height: 0.65 }, { custom: material }),\n            this.physics.add.box({ y: i * 0.85, x: 1.3, depth: 4, height: 0.65 }, { custom: material })\n          )\n        }\n      }\n      blocks.forEach(block => {\n        block.body.setFriction(0.8)\n      })\n    }\n    addTower()\n\n    scene = this\n    raycaster = new THREE.Raycaster();\n    this.renderer.domElement.addEventListener( 'click', this.raycast, false );\n\n  }\n\n\n  raycast ( e ) {\n\n    //1. sets the mouse position with a coordinate system where the center\n    //   of the screen is the origin\n    // console.log(e.clientX, e.clientY)\n    // mouse.x = ( e.clientX / window.innerWidth ) * 2 - 1;\n    // mouse.y = - ( e.clientY / window.innerHeight ) * 2 + 1;\n    var rect = scene.renderer.domElement.getBoundingClientRect();\n    mouse.x = ( ( e.clientX - rect.left ) / ( rect.right - rect.left ) ) * 2 - 1;\n    mouse.y = - ( ( e.clientY - rect.top ) / ( rect.bottom - rect.top) ) * 2 + 1\n\n    //2. set the picking ray from the camera position and mouse coordinates\n    raycaster.setFromCamera( mouse, scene.camera );\n\n    //3. compute intersections\n    // console.log(scene)\n    var intersects = raycaster.intersectObjects( scene.scene.children );\n\n    for ( var i = 0; i < intersects.length; i++ ) {\n      let name = intersects[ i ].object.name\n      if(name.length > 0 && name != \"ground\"){\n        console.log( name, intersects[ i ] );\n      }else{\n        let point = intersects[ i ].point\n        scene.physics.add.box({x:point.x, y: point.y, z: point.z })\n      }\n\n      /*\n      An intersection has the following properties :\n      - object : intersected object (THREE.Mesh)\n      - distance : distance from camera to intersection (number)\n      - face : intersected face (THREE.Face3)\n      - faceIndex : intersected face index (number)\n      - point : intersection point (THREE.Vector3)\n      - uv : intersection point in the object's UV coordinates (THREE.Vector2)\n      */\n    }\n\n  }\n\n\n\n\n  update() {\n\n    if (statistiques){\n      stats.update()\n    }\n  }\n\n\n\n}\n","<template>\n  <div>\n    Physic World\n    <div class=\"home\" id=\"myCanvas\">\n  </div>\n  </div>\n</template>\n\n<script>\nimport { Project,  PhysicsLoader, /*  ExtendedObject3D, ExtendedMesh, CatmullRomCurve3*/ } from 'enable3d'\nimport { MainScene } from '@/components/worlds/physic/MainScene.js'\n\nexport default {\n  name: \"PhysicWorld\",\n  created(){\n  console.log(process.env.BASE_URL)\n  PhysicsLoader('lib/ammo', () => new Project(\n    {\n      scenes: [MainScene],\n      // gravity: { x: 0, y: -9.81, z: 4},\n      // antialias: true,\n      // maxSubSteps: 10, //20, //10\n      // fixedTimeStep: 1/240, //1 / 360, // 1/240\n    }\n  ))\n}\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhysicWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhysicWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhysicWorld.vue?vue&type=template&id=32dd0ef1&\"\nimport script from \"./PhysicWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./PhysicWorld.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports",null,"/*!\n * matter-js 0.17.1 by @liabru\n * http://brm.io/matter-js/\n * License MIT\n * \n * The MIT License (MIT)\n * \n * Copyright (c) Liam Brummitt and contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Matter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Matter\"] = factory();\n\telse\n\t\troot[\"Matter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 22);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Common` module contains utility functions that are common to all modules.\n*\n* @class Common\n*/\n\nvar Common = {};\n\nmodule.exports = Common;\n\n(function() {\n\n    Common._nextId = 0;\n    Common._seed = 0;\n    Common._nowStartTime = +(new Date());\n    Common._warnedOnce = {};\n    Common._decomp = null;\n    \n    /**\n     * Extends the object in the first argument using the object in the second argument.\n     * @method extend\n     * @param {} obj\n     * @param {boolean} deep\n     * @return {} obj extended\n     */\n    Common.extend = function(obj, deep) {\n        var argsStart,\n            args,\n            deepClone;\n\n        if (typeof deep === 'boolean') {\n            argsStart = 2;\n            deepClone = deep;\n        } else {\n            argsStart = 1;\n            deepClone = true;\n        }\n\n        for (var i = argsStart; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            if (source) {\n                for (var prop in source) {\n                    if (deepClone && source[prop] && source[prop].constructor === Object) {\n                        if (!obj[prop] || obj[prop].constructor === Object) {\n                            obj[prop] = obj[prop] || {};\n                            Common.extend(obj[prop], deepClone, source[prop]);\n                        } else {\n                            obj[prop] = source[prop];\n                        }\n                    } else {\n                        obj[prop] = source[prop];\n                    }\n                }\n            }\n        }\n        \n        return obj;\n    };\n\n    /**\n     * Creates a new clone of the object, if deep is true references will also be cloned.\n     * @method clone\n     * @param {} obj\n     * @param {bool} deep\n     * @return {} obj cloned\n     */\n    Common.clone = function(obj, deep) {\n        return Common.extend({}, deep, obj);\n    };\n\n    /**\n     * Returns the list of keys for the given object.\n     * @method keys\n     * @param {} obj\n     * @return {string[]} keys\n     */\n    Common.keys = function(obj) {\n        if (Object.keys)\n            return Object.keys(obj);\n\n        // avoid hasOwnProperty for performance\n        var keys = [];\n        for (var key in obj)\n            keys.push(key);\n        return keys;\n    };\n\n    /**\n     * Returns the list of values for the given object.\n     * @method values\n     * @param {} obj\n     * @return {array} Array of the objects property values\n     */\n    Common.values = function(obj) {\n        var values = [];\n        \n        if (Object.keys) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length; i++) {\n                values.push(obj[keys[i]]);\n            }\n            return values;\n        }\n        \n        // avoid hasOwnProperty for performance\n        for (var key in obj)\n            values.push(obj[key]);\n        return values;\n    };\n\n    /**\n     * Gets a value from `base` relative to the `path` string.\n     * @method get\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} The object at the given path\n     */\n    Common.get = function(obj, path, begin, end) {\n        path = path.split('.').slice(begin, end);\n\n        for (var i = 0; i < path.length; i += 1) {\n            obj = obj[path[i]];\n        }\n\n        return obj;\n    };\n\n    /**\n     * Sets a value on `base` relative to the given `path` string.\n     * @method set\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {} val The value to set\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} Pass through `val` for chaining\n     */\n    Common.set = function(obj, path, val, begin, end) {\n        var parts = path.split('.').slice(begin, end);\n        Common.get(obj, path, 0, -1)[parts[parts.length - 1]] = val;\n        return val;\n    };\n\n    /**\n     * Shuffles the given array in-place.\n     * The function uses a seeded random generator.\n     * @method shuffle\n     * @param {array} array\n     * @return {array} array shuffled randomly\n     */\n    Common.shuffle = function(array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Common.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    };\n\n    /**\n     * Randomly chooses a value from a list with equal probability.\n     * The function uses a seeded random generator.\n     * @method choose\n     * @param {array} choices\n     * @return {object} A random choice object from the array\n     */\n    Common.choose = function(choices) {\n        return choices[Math.floor(Common.random() * choices.length)];\n    };\n\n    /**\n     * Returns true if the object is a HTMLElement, otherwise false.\n     * @method isElement\n     * @param {object} obj\n     * @return {boolean} True if the object is a HTMLElement, otherwise false\n     */\n    Common.isElement = function(obj) {\n        if (typeof HTMLElement !== 'undefined') {\n            return obj instanceof HTMLElement;\n        }\n\n        return !!(obj && obj.nodeType && obj.nodeName);\n    };\n\n    /**\n     * Returns true if the object is an array.\n     * @method isArray\n     * @param {object} obj\n     * @return {boolean} True if the object is an array, otherwise false\n     */\n    Common.isArray = function(obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    /**\n     * Returns true if the object is a function.\n     * @method isFunction\n     * @param {object} obj\n     * @return {boolean} True if the object is a function, otherwise false\n     */\n    Common.isFunction = function(obj) {\n        return typeof obj === \"function\";\n    };\n\n    /**\n     * Returns true if the object is a plain object.\n     * @method isPlainObject\n     * @param {object} obj\n     * @return {boolean} True if the object is a plain object, otherwise false\n     */\n    Common.isPlainObject = function(obj) {\n        return typeof obj === 'object' && obj.constructor === Object;\n    };\n\n    /**\n     * Returns true if the object is a string.\n     * @method isString\n     * @param {object} obj\n     * @return {boolean} True if the object is a string, otherwise false\n     */\n    Common.isString = function(obj) {\n        return toString.call(obj) === '[object String]';\n    };\n    \n    /**\n     * Returns the given value clamped between a minimum and maximum value.\n     * @method clamp\n     * @param {number} value\n     * @param {number} min\n     * @param {number} max\n     * @return {number} The value clamped between min and max inclusive\n     */\n    Common.clamp = function(value, min, max) {\n        if (value < min)\n            return min;\n        if (value > max)\n            return max;\n        return value;\n    };\n    \n    /**\n     * Returns the sign of the given value.\n     * @method sign\n     * @param {number} value\n     * @return {number} -1 if negative, +1 if 0 or positive\n     */\n    Common.sign = function(value) {\n        return value < 0 ? -1 : 1;\n    };\n    \n    /**\n     * Returns the current timestamp since the time origin (e.g. from page load).\n     * The result is in milliseconds and will use high-resolution timing if available.\n     * @method now\n     * @return {number} the current timestamp in milliseconds\n     */\n    Common.now = function() {\n        if (typeof window !== 'undefined' && window.performance) {\n            if (window.performance.now) {\n                return window.performance.now();\n            } else if (window.performance.webkitNow) {\n                return window.performance.webkitNow();\n            }\n        }\n\n        if (Date.now) {\n            return Date.now();\n        }\n\n        return (new Date()) - Common._nowStartTime;\n    };\n    \n    /**\n     * Returns a random value between a minimum and a maximum value inclusive.\n     * The function uses a seeded random generator.\n     * @method random\n     * @param {number} min\n     * @param {number} max\n     * @return {number} A random number between min and max inclusive\n     */\n    Common.random = function(min, max) {\n        min = (typeof min !== \"undefined\") ? min : 0;\n        max = (typeof max !== \"undefined\") ? max : 1;\n        return min + _seededRandom() * (max - min);\n    };\n\n    var _seededRandom = function() {\n        // https://en.wikipedia.org/wiki/Linear_congruential_generator\n        Common._seed = (Common._seed * 9301 + 49297) % 233280;\n        return Common._seed / 233280;\n    };\n\n    /**\n     * Converts a CSS hex colour string into an integer.\n     * @method colorToNumber\n     * @param {string} colorString\n     * @return {number} An integer representing the CSS hex string\n     */\n    Common.colorToNumber = function(colorString) {\n        colorString = colorString.replace('#','');\n\n        if (colorString.length == 3) {\n            colorString = colorString.charAt(0) + colorString.charAt(0)\n                        + colorString.charAt(1) + colorString.charAt(1)\n                        + colorString.charAt(2) + colorString.charAt(2);\n        }\n\n        return parseInt(colorString, 16);\n    };\n\n    /**\n     * The console logging level to use, where each level includes all levels above and excludes the levels below.\n     * The default level is 'debug' which shows all console messages.  \n     *\n     * Possible level values are:\n     * - 0 = None\n     * - 1 = Debug\n     * - 2 = Info\n     * - 3 = Warn\n     * - 4 = Error\n     * @property Common.logLevel\n     * @type {Number}\n     * @default 1\n     */\n    Common.logLevel = 1;\n\n    /**\n     * Shows a `console.log` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method log\n     * @param ...objs {} The objects to log.\n     */\n    Common.log = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.log.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.info` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method info\n     * @param ...objs {} The objects to log.\n     */\n    Common.info = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 2) {\n            console.info.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.warn` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method warn\n     * @param ...objs {} The objects to log.\n     */\n    Common.warn = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.warn.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Uses `Common.warn` to log the given message one time only.\n     * @method warnOnce\n     * @param ...objs {} The objects to log.\n     */\n    Common.warnOnce = function() {\n        var message = Array.prototype.slice.call(arguments).join(' ');\n\n        if (!Common._warnedOnce[message]) {\n            Common.warn(message);\n            Common._warnedOnce[message] = true;\n        }\n    };\n\n    /**\n     * Shows a deprecated console warning when the function on the given object is called.\n     * The target function will be replaced with a new function that first shows the warning\n     * and then calls the original function.\n     * @method deprecated\n     * @param {object} obj The object or module\n     * @param {string} name The property name of the function on obj\n     * @param {string} warning The one-time message to show if the function is called\n     */\n    Common.deprecated = function(obj, prop, warning) {\n        obj[prop] = Common.chain(function() {\n            Common.warnOnce(' deprecated ', warning);\n        }, obj[prop]);\n    };\n\n    /**\n     * Returns the next unique sequential ID.\n     * @method nextId\n     * @return {Number} Unique sequential ID\n     */\n    Common.nextId = function() {\n        return Common._nextId++;\n    };\n\n    /**\n     * A cross browser compatible indexOf implementation.\n     * @method indexOf\n     * @param {array} haystack\n     * @param {object} needle\n     * @return {number} The position of needle in haystack, otherwise -1.\n     */\n    Common.indexOf = function(haystack, needle) {\n        if (haystack.indexOf)\n            return haystack.indexOf(needle);\n\n        for (var i = 0; i < haystack.length; i++) {\n            if (haystack[i] === needle)\n                return i;\n        }\n\n        return -1;\n    };\n\n    /**\n     * A cross browser compatible array map implementation.\n     * @method map\n     * @param {array} list\n     * @param {function} func\n     * @return {array} Values from list transformed by func.\n     */\n    Common.map = function(list, func) {\n        if (list.map) {\n            return list.map(func);\n        }\n\n        var mapped = [];\n\n        for (var i = 0; i < list.length; i += 1) {\n            mapped.push(func(list[i]));\n        }\n\n        return mapped;\n    };\n\n    /**\n     * Takes a directed graph and returns the partially ordered set of vertices in topological order.\n     * Circular dependencies are allowed.\n     * @method topologicalSort\n     * @param {object} graph\n     * @return {array} Partially ordered set of vertices in topological order.\n     */\n    Common.topologicalSort = function(graph) {\n        // https://github.com/mgechev/javascript-algorithms\n        // Copyright (c) Minko Gechev (MIT license)\n        // Modifications: tidy formatting and naming\n        var result = [],\n            visited = [],\n            temp = [];\n\n        for (var node in graph) {\n            if (!visited[node] && !temp[node]) {\n                Common._topologicalSort(node, visited, temp, graph, result);\n            }\n        }\n\n        return result;\n    };\n\n    Common._topologicalSort = function(node, visited, temp, graph, result) {\n        var neighbors = graph[node] || [];\n        temp[node] = true;\n\n        for (var i = 0; i < neighbors.length; i += 1) {\n            var neighbor = neighbors[i];\n\n            if (temp[neighbor]) {\n                // skip circular dependencies\n                continue;\n            }\n\n            if (!visited[neighbor]) {\n                Common._topologicalSort(neighbor, visited, temp, graph, result);\n            }\n        }\n\n        temp[node] = false;\n        visited[node] = true;\n\n        result.push(node);\n    };\n\n    /**\n     * Takes _n_ functions as arguments and returns a new function that calls them in order.\n     * The arguments applied when calling the new function will also be applied to every function passed.\n     * The value of `this` refers to the last value returned in the chain that was not `undefined`.\n     * Therefore if a passed function does not return a value, the previously returned value is maintained.\n     * After all passed functions have been called the new function returns the last returned value (if any).\n     * If any of the passed functions are a chain, then the chain will be flattened.\n     * @method chain\n     * @param ...funcs {function} The functions to chain.\n     * @return {function} A new function that calls the passed functions in order.\n     */\n    Common.chain = function() {\n        var funcs = [];\n\n        for (var i = 0; i < arguments.length; i += 1) {\n            var func = arguments[i];\n\n            if (func._chained) {\n                // flatten already chained functions\n                funcs.push.apply(funcs, func._chained);\n            } else {\n                funcs.push(func);\n            }\n        }\n\n        var chain = function() {\n            // https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358\n            var lastResult,\n                args = new Array(arguments.length);\n\n            for (var i = 0, l = arguments.length; i < l; i++) {\n                args[i] = arguments[i];\n            }\n\n            for (i = 0; i < funcs.length; i += 1) {\n                var result = funcs[i].apply(lastResult, args);\n\n                if (typeof result !== 'undefined') {\n                    lastResult = result;\n                }\n            }\n\n            return lastResult;\n        };\n\n        chain._chained = funcs;\n\n        return chain;\n    };\n\n    /**\n     * Chains a function to excute before the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathBefore\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain before the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathBefore = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            func,\n            Common.get(base, path)\n        ));\n    };\n\n    /**\n     * Chains a function to excute after the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathAfter\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain after the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathAfter = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            Common.get(base, path),\n            func\n        ));\n    };\n\n    /**\n     * Provide the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module to enable\n     * concave vertex decomposition support when using `Bodies.fromVertices` e.g. `Common.setDecomp(require('poly-decomp'))`.\n     * @method setDecomp\n     * @param {} decomp The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module.\n     */\n    Common.setDecomp = function(decomp) {\n        Common._decomp = decomp;\n    };\n\n    /**\n     * Returns the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module provided through `Common.setDecomp`,\n     * otherwise returns the global `decomp` if set.\n     * @method getDecomp\n     * @return {} The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module if provided.\n     */\n    Common.getDecomp = function() {\n        // get user provided decomp if set\n        var decomp = Common._decomp;\n\n        try {\n            // otherwise from window global\n            if (!decomp && typeof window !== 'undefined') {\n                decomp = window.decomp;\n            }\n    \n            // otherwise from node global\n            if (!decomp && typeof global !== 'undefined') {\n                decomp = global.decomp;\n            }\n        } catch (e) {\n            // decomp not available\n            decomp = null;\n        }\n\n        return decomp;\n    };\n})();\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Bounds` module contains methods for creating and manipulating axis-aligned bounding boxes (AABB).\n*\n* @class Bounds\n*/\n\nvar Bounds = {};\n\nmodule.exports = Bounds;\n\n(function() {\n\n    /**\n     * Creates a new axis-aligned bounding box (AABB) for the given vertices.\n     * @method create\n     * @param {vertices} vertices\n     * @return {bounds} A new bounds object\n     */\n    Bounds.create = function(vertices) {\n        var bounds = { \n            min: { x: 0, y: 0 }, \n            max: { x: 0, y: 0 }\n        };\n\n        if (vertices)\n            Bounds.update(bounds, vertices);\n        \n        return bounds;\n    };\n\n    /**\n     * Updates bounds using the given vertices and extends the bounds given a velocity.\n     * @method update\n     * @param {bounds} bounds\n     * @param {vertices} vertices\n     * @param {vector} velocity\n     */\n    Bounds.update = function(bounds, vertices, velocity) {\n        bounds.min.x = Infinity;\n        bounds.max.x = -Infinity;\n        bounds.min.y = Infinity;\n        bounds.max.y = -Infinity;\n\n        for (var i = 0; i < vertices.length; i++) {\n            var vertex = vertices[i];\n            if (vertex.x > bounds.max.x) bounds.max.x = vertex.x;\n            if (vertex.x < bounds.min.x) bounds.min.x = vertex.x;\n            if (vertex.y > bounds.max.y) bounds.max.y = vertex.y;\n            if (vertex.y < bounds.min.y) bounds.min.y = vertex.y;\n        }\n        \n        if (velocity) {\n            if (velocity.x > 0) {\n                bounds.max.x += velocity.x;\n            } else {\n                bounds.min.x += velocity.x;\n            }\n            \n            if (velocity.y > 0) {\n                bounds.max.y += velocity.y;\n            } else {\n                bounds.min.y += velocity.y;\n            }\n        }\n    };\n\n    /**\n     * Returns true if the bounds contains the given point.\n     * @method contains\n     * @param {bounds} bounds\n     * @param {vector} point\n     * @return {boolean} True if the bounds contain the point, otherwise false\n     */\n    Bounds.contains = function(bounds, point) {\n        return point.x >= bounds.min.x && point.x <= bounds.max.x \n               && point.y >= bounds.min.y && point.y <= bounds.max.y;\n    };\n\n    /**\n     * Returns true if the two bounds intersect.\n     * @method overlaps\n     * @param {bounds} boundsA\n     * @param {bounds} boundsB\n     * @return {boolean} True if the bounds overlap, otherwise false\n     */\n    Bounds.overlaps = function(boundsA, boundsB) {\n        return (boundsA.min.x <= boundsB.max.x && boundsA.max.x >= boundsB.min.x\n                && boundsA.max.y >= boundsB.min.y && boundsA.min.y <= boundsB.max.y);\n    };\n\n    /**\n     * Translates the bounds by the given vector.\n     * @method translate\n     * @param {bounds} bounds\n     * @param {vector} vector\n     */\n    Bounds.translate = function(bounds, vector) {\n        bounds.min.x += vector.x;\n        bounds.max.x += vector.x;\n        bounds.min.y += vector.y;\n        bounds.max.y += vector.y;\n    };\n\n    /**\n     * Shifts the bounds to the given position.\n     * @method shift\n     * @param {bounds} bounds\n     * @param {vector} position\n     */\n    Bounds.shift = function(bounds, position) {\n        var deltaX = bounds.max.x - bounds.min.x,\n            deltaY = bounds.max.y - bounds.min.y;\n            \n        bounds.min.x = position.x;\n        bounds.max.x = position.x + deltaX;\n        bounds.min.y = position.y;\n        bounds.max.y = position.y + deltaY;\n    };\n    \n})();\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Vector` module contains methods for creating and manipulating vectors.\n* Vectors are the basis of all the geometry related operations in the engine.\n* A `Matter.Vector` object is of the form `{ x: 0, y: 0 }`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vector\n*/\n\n// TODO: consider params for reusing vector objects\n\nvar Vector = {};\n\nmodule.exports = Vector;\n\n(function() {\n\n    /**\n     * Creates a new vector.\n     * @method create\n     * @param {number} x\n     * @param {number} y\n     * @return {vector} A new vector\n     */\n    Vector.create = function(x, y) {\n        return { x: x || 0, y: y || 0 };\n    };\n\n    /**\n     * Returns a new vector with `x` and `y` copied from the given `vector`.\n     * @method clone\n     * @param {vector} vector\n     * @return {vector} A new cloned vector\n     */\n    Vector.clone = function(vector) {\n        return { x: vector.x, y: vector.y };\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector.\n     * @method magnitude\n     * @param {vector} vector\n     * @return {number} The magnitude of the vector\n     */\n    Vector.magnitude = function(vector) {\n        return Math.sqrt((vector.x * vector.x) + (vector.y * vector.y));\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector (therefore saving a `sqrt` operation).\n     * @method magnitudeSquared\n     * @param {vector} vector\n     * @return {number} The squared magnitude of the vector\n     */\n    Vector.magnitudeSquared = function(vector) {\n        return (vector.x * vector.x) + (vector.y * vector.y);\n    };\n\n    /**\n     * Rotates the vector about (0, 0) by specified angle.\n     * @method rotate\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} [output]\n     * @return {vector} The vector rotated about (0, 0)\n     */\n    Vector.rotate = function(vector, angle, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = vector.x * cos - vector.y * sin;\n        output.y = vector.x * sin + vector.y * cos;\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Rotates the vector about a specified point by specified angle.\n     * @method rotateAbout\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} point\n     * @param {vector} [output]\n     * @return {vector} A new vector rotated about the point\n     */\n    Vector.rotateAbout = function(vector, angle, point, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = point.x + ((vector.x - point.x) * cos - (vector.y - point.y) * sin);\n        output.y = point.y + ((vector.x - point.x) * sin + (vector.y - point.y) * cos);\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Normalises a vector (such that its magnitude is `1`).\n     * @method normalise\n     * @param {vector} vector\n     * @return {vector} A new vector normalised\n     */\n    Vector.normalise = function(vector) {\n        var magnitude = Vector.magnitude(vector);\n        if (magnitude === 0)\n            return { x: 0, y: 0 };\n        return { x: vector.x / magnitude, y: vector.y / magnitude };\n    };\n\n    /**\n     * Returns the dot-product of two vectors.\n     * @method dot\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The dot product of the two vectors\n     */\n    Vector.dot = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.x) + (vectorA.y * vectorB.y);\n    };\n\n    /**\n     * Returns the cross-product of two vectors.\n     * @method cross\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The cross product of the two vectors\n     */\n    Vector.cross = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.y) - (vectorA.y * vectorB.x);\n    };\n\n    /**\n     * Returns the cross-product of three vectors.\n     * @method cross3\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} vectorC\n     * @return {number} The cross product of the three vectors\n     */\n    Vector.cross3 = function(vectorA, vectorB, vectorC) {\n        return (vectorB.x - vectorA.x) * (vectorC.y - vectorA.y) - (vectorB.y - vectorA.y) * (vectorC.x - vectorA.x);\n    };\n\n    /**\n     * Adds the two vectors.\n     * @method add\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB added\n     */\n    Vector.add = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x + vectorB.x;\n        output.y = vectorA.y + vectorB.y;\n        return output;\n    };\n\n    /**\n     * Subtracts the two vectors.\n     * @method sub\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB subtracted\n     */\n    Vector.sub = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x - vectorB.x;\n        output.y = vectorA.y - vectorB.y;\n        return output;\n    };\n\n    /**\n     * Multiplies a vector and a scalar.\n     * @method mult\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector multiplied by scalar\n     */\n    Vector.mult = function(vector, scalar) {\n        return { x: vector.x * scalar, y: vector.y * scalar };\n    };\n\n    /**\n     * Divides a vector and a scalar.\n     * @method div\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector divided by scalar\n     */\n    Vector.div = function(vector, scalar) {\n        return { x: vector.x / scalar, y: vector.y / scalar };\n    };\n\n    /**\n     * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n     * @method perp\n     * @param {vector} vector\n     * @param {bool} [negate=false]\n     * @return {vector} The perpendicular vector\n     */\n    Vector.perp = function(vector, negate) {\n        negate = negate === true ? -1 : 1;\n        return { x: negate * -vector.y, y: negate * vector.x };\n    };\n\n    /**\n     * Negates both components of a vector such that it points in the opposite direction.\n     * @method neg\n     * @param {vector} vector\n     * @return {vector} The negated vector\n     */\n    Vector.neg = function(vector) {\n        return { x: -vector.x, y: -vector.y };\n    };\n\n    /**\n     * Returns the angle between the vector `vectorB - vectorA` and the x-axis in radians.\n     * @method angle\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The angle in radians\n     */\n    Vector.angle = function(vectorA, vectorB) {\n        return Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);\n    };\n\n    /**\n     * Temporary vector pool (not thread-safe).\n     * @property _temp\n     * @type {vector[]}\n     * @private\n     */\n    Vector._temp = [\n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create()\n    ];\n\n})();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Vertices` module contains methods for creating and manipulating sets of vertices.\n* A set of vertices is an array of `Matter.Vector` with additional indexing properties inserted by `Vertices.create`.\n* A `Matter.Body` maintains a set of vertices to represent the shape of the object (its convex hull).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vertices\n*/\n\nvar Vertices = {};\n\nmodule.exports = Vertices;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of `Matter.Body` compatible vertices.\n     * The `points` argument accepts an array of `Matter.Vector` points orientated around the origin `(0, 0)`, for example:\n     *\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\n     *\n     * The `Vertices.create` method returns a new array of vertices, which are similar to Matter.Vector objects,\n     * but with some additional references required for efficient collision detection routines.\n     *\n     * Vertices must be specified in clockwise order.\n     *\n     * Note that the `body` argument is not optional, a `Matter.Body` reference must be provided.\n     *\n     * @method create\n     * @param {vector[]} points\n     * @param {body} body\n     */\n    Vertices.create = function(points, body) {\n        var vertices = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i],\n                vertex = {\n                    x: point.x,\n                    y: point.y,\n                    index: i,\n                    body: body,\n                    isInternal: false\n                };\n\n            vertices.push(vertex);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Parses a string containing ordered x y pairs separated by spaces (and optionally commas), \n     * into a `Matter.Vertices` object for the given `Matter.Body`.\n     * For parsing SVG paths, see `Svg.pathToVertices`.\n     * @method fromPath\n     * @param {string} path\n     * @param {body} body\n     * @return {vertices} vertices\n     */\n    Vertices.fromPath = function(path, body) {\n        var pathPattern = /L?\\s*([-\\d.e]+)[\\s,]*([-\\d.e]+)*/ig,\n            points = [];\n\n        path.replace(pathPattern, function(match, x, y) {\n            points.push({ x: parseFloat(x), y: parseFloat(y) });\n        });\n\n        return Vertices.create(points, body);\n    };\n\n    /**\n     * Returns the centre (centroid) of the set of vertices.\n     * @method centre\n     * @param {vertices} vertices\n     * @return {vector} The centre point\n     */\n    Vertices.centre = function(vertices) {\n        var area = Vertices.area(vertices, true),\n            centre = { x: 0, y: 0 },\n            cross,\n            temp,\n            j;\n\n        for (var i = 0; i < vertices.length; i++) {\n            j = (i + 1) % vertices.length;\n            cross = Vector.cross(vertices[i], vertices[j]);\n            temp = Vector.mult(Vector.add(vertices[i], vertices[j]), cross);\n            centre = Vector.add(centre, temp);\n        }\n\n        return Vector.div(centre, 6 * area);\n    };\n\n    /**\n     * Returns the average (mean) of the set of vertices.\n     * @method mean\n     * @param {vertices} vertices\n     * @return {vector} The average point\n     */\n    Vertices.mean = function(vertices) {\n        var average = { x: 0, y: 0 };\n\n        for (var i = 0; i < vertices.length; i++) {\n            average.x += vertices[i].x;\n            average.y += vertices[i].y;\n        }\n\n        return Vector.div(average, vertices.length);\n    };\n\n    /**\n     * Returns the area of the set of vertices.\n     * @method area\n     * @param {vertices} vertices\n     * @param {bool} signed\n     * @return {number} The area\n     */\n    Vertices.area = function(vertices, signed) {\n        var area = 0,\n            j = vertices.length - 1;\n\n        for (var i = 0; i < vertices.length; i++) {\n            area += (vertices[j].x - vertices[i].x) * (vertices[j].y + vertices[i].y);\n            j = i;\n        }\n\n        if (signed)\n            return area / 2;\n\n        return Math.abs(area) / 2;\n    };\n\n    /**\n     * Returns the moment of inertia (second moment of area) of the set of vertices given the total mass.\n     * @method inertia\n     * @param {vertices} vertices\n     * @param {number} mass\n     * @return {number} The polygon's moment of inertia\n     */\n    Vertices.inertia = function(vertices, mass) {\n        var numerator = 0,\n            denominator = 0,\n            v = vertices,\n            cross,\n            j;\n\n        // find the polygon's moment of inertia, using second moment of area\n        // from equations at http://www.physicsforums.com/showthread.php?t=25293\n        for (var n = 0; n < v.length; n++) {\n            j = (n + 1) % v.length;\n            cross = Math.abs(Vector.cross(v[j], v[n]));\n            numerator += cross * (Vector.dot(v[j], v[j]) + Vector.dot(v[j], v[n]) + Vector.dot(v[n], v[n]));\n            denominator += cross;\n        }\n\n        return (mass / 6) * (numerator / denominator);\n    };\n\n    /**\n     * Translates the set of vertices in-place.\n     * @method translate\n     * @param {vertices} vertices\n     * @param {vector} vector\n     * @param {number} scalar\n     */\n    Vertices.translate = function(vertices, vector, scalar) {\n        var i;\n        if (scalar) {\n            for (i = 0; i < vertices.length; i++) {\n                vertices[i].x += vector.x * scalar;\n                vertices[i].y += vector.y * scalar;\n            }\n        } else {\n            for (i = 0; i < vertices.length; i++) {\n                vertices[i].x += vector.x;\n                vertices[i].y += vector.y;\n            }\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Rotates the set of vertices in-place.\n     * @method rotate\n     * @param {vertices} vertices\n     * @param {number} angle\n     * @param {vector} point\n     */\n    Vertices.rotate = function(vertices, angle, point) {\n        if (angle === 0)\n            return;\n\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle);\n\n        for (var i = 0; i < vertices.length; i++) {\n            var vertice = vertices[i],\n                dx = vertice.x - point.x,\n                dy = vertice.y - point.y;\n                \n            vertice.x = point.x + (dx * cos - dy * sin);\n            vertice.y = point.y + (dx * sin + dy * cos);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Returns `true` if the `point` is inside the set of `vertices`.\n     * @method contains\n     * @param {vertices} vertices\n     * @param {vector} point\n     * @return {boolean} True if the vertices contains point, otherwise false\n     */\n    Vertices.contains = function(vertices, point) {\n        for (var i = 0; i < vertices.length; i++) {\n            var vertice = vertices[i],\n                nextVertice = vertices[(i + 1) % vertices.length];\n            if ((point.x - vertice.x) * (nextVertice.y - vertice.y) + (point.y - vertice.y) * (vertice.x - nextVertice.x) > 0) {\n                return false;\n            }\n        }\n\n        return true;\n    };\n\n    /**\n     * Scales the vertices from a point (default is centre) in-place.\n     * @method scale\n     * @param {vertices} vertices\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     */\n    Vertices.scale = function(vertices, scaleX, scaleY, point) {\n        if (scaleX === 1 && scaleY === 1)\n            return vertices;\n\n        point = point || Vertices.centre(vertices);\n\n        var vertex,\n            delta;\n\n        for (var i = 0; i < vertices.length; i++) {\n            vertex = vertices[i];\n            delta = Vector.sub(vertex, point);\n            vertices[i].x = point.x + delta.x * scaleX;\n            vertices[i].y = point.y + delta.y * scaleY;\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Chamfers a set of vertices by giving them rounded corners, returns a new set of vertices.\n     * The radius parameter is a single number or an array to specify the radius for each vertex.\n     * @method chamfer\n     * @param {vertices} vertices\n     * @param {number[]} radius\n     * @param {number} quality\n     * @param {number} qualityMin\n     * @param {number} qualityMax\n     */\n    Vertices.chamfer = function(vertices, radius, quality, qualityMin, qualityMax) {\n        if (typeof radius === 'number') {\n            radius = [radius];\n        } else {\n            radius = radius || [8];\n        }\n\n        // quality defaults to -1, which is auto\n        quality = (typeof quality !== 'undefined') ? quality : -1;\n        qualityMin = qualityMin || 2;\n        qualityMax = qualityMax || 14;\n\n        var newVertices = [];\n\n        for (var i = 0; i < vertices.length; i++) {\n            var prevVertex = vertices[i - 1 >= 0 ? i - 1 : vertices.length - 1],\n                vertex = vertices[i],\n                nextVertex = vertices[(i + 1) % vertices.length],\n                currentRadius = radius[i < radius.length ? i : radius.length - 1];\n\n            if (currentRadius === 0) {\n                newVertices.push(vertex);\n                continue;\n            }\n\n            var prevNormal = Vector.normalise({ \n                x: vertex.y - prevVertex.y, \n                y: prevVertex.x - vertex.x\n            });\n\n            var nextNormal = Vector.normalise({ \n                x: nextVertex.y - vertex.y, \n                y: vertex.x - nextVertex.x\n            });\n\n            var diagonalRadius = Math.sqrt(2 * Math.pow(currentRadius, 2)),\n                radiusVector = Vector.mult(Common.clone(prevNormal), currentRadius),\n                midNormal = Vector.normalise(Vector.mult(Vector.add(prevNormal, nextNormal), 0.5)),\n                scaledVertex = Vector.sub(vertex, Vector.mult(midNormal, diagonalRadius));\n\n            var precision = quality;\n\n            if (quality === -1) {\n                // automatically decide precision\n                precision = Math.pow(currentRadius, 0.32) * 1.75;\n            }\n\n            precision = Common.clamp(precision, qualityMin, qualityMax);\n\n            // use an even value for precision, more likely to reduce axes by using symmetry\n            if (precision % 2 === 1)\n                precision += 1;\n\n            var alpha = Math.acos(Vector.dot(prevNormal, nextNormal)),\n                theta = alpha / precision;\n\n            for (var j = 0; j < precision; j++) {\n                newVertices.push(Vector.add(Vector.rotate(radiusVector, theta * j), scaledVertex));\n            }\n        }\n\n        return newVertices;\n    };\n\n    /**\n     * Sorts the input vertices into clockwise order in place.\n     * @method clockwiseSort\n     * @param {vertices} vertices\n     * @return {vertices} vertices\n     */\n    Vertices.clockwiseSort = function(vertices) {\n        var centre = Vertices.mean(vertices);\n\n        vertices.sort(function(vertexA, vertexB) {\n            return Vector.angle(centre, vertexA) - Vector.angle(centre, vertexB);\n        });\n\n        return vertices;\n    };\n\n    /**\n     * Returns true if the vertices form a convex shape (vertices must be in clockwise order).\n     * @method isConvex\n     * @param {vertices} vertices\n     * @return {bool} `true` if the `vertices` are convex, `false` if not (or `null` if not computable).\n     */\n    Vertices.isConvex = function(vertices) {\n        // http://paulbourke.net/geometry/polygonmesh/\n        // Copyright (c) Paul Bourke (use permitted)\n\n        var flag = 0,\n            n = vertices.length,\n            i,\n            j,\n            k,\n            z;\n\n        if (n < 3)\n            return null;\n\n        for (i = 0; i < n; i++) {\n            j = (i + 1) % n;\n            k = (i + 2) % n;\n            z = (vertices[j].x - vertices[i].x) * (vertices[k].y - vertices[j].y);\n            z -= (vertices[j].y - vertices[i].y) * (vertices[k].x - vertices[j].x);\n\n            if (z < 0) {\n                flag |= 1;\n            } else if (z > 0) {\n                flag |= 2;\n            }\n\n            if (flag === 3) {\n                return false;\n            }\n        }\n\n        if (flag !== 0){\n            return true;\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * Returns the convex hull of the input vertices as a new array of points.\n     * @method hull\n     * @param {vertices} vertices\n     * @return [vertex] vertices\n     */\n    Vertices.hull = function(vertices) {\n        // http://geomalgorithms.com/a10-_hull-1.html\n\n        var upper = [],\n            lower = [], \n            vertex,\n            i;\n\n        // sort vertices on x-axis (y-axis for ties)\n        vertices = vertices.slice(0);\n        vertices.sort(function(vertexA, vertexB) {\n            var dx = vertexA.x - vertexB.x;\n            return dx !== 0 ? dx : vertexA.y - vertexB.y;\n        });\n\n        // build lower hull\n        for (i = 0; i < vertices.length; i += 1) {\n            vertex = vertices[i];\n\n            while (lower.length >= 2 \n                   && Vector.cross3(lower[lower.length - 2], lower[lower.length - 1], vertex) <= 0) {\n                lower.pop();\n            }\n\n            lower.push(vertex);\n        }\n\n        // build upper hull\n        for (i = vertices.length - 1; i >= 0; i -= 1) {\n            vertex = vertices[i];\n\n            while (upper.length >= 2 \n                   && Vector.cross3(upper[upper.length - 2], upper[upper.length - 1], vertex) <= 0) {\n                upper.pop();\n            }\n\n            upper.push(vertex);\n        }\n\n        // concatenation of the lower and upper hulls gives the convex hull\n        // omit last points because they are repeated at the beginning of the other list\n        upper.pop();\n        lower.pop();\n\n        return upper.concat(lower);\n    };\n\n})();\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Events` module contains methods to fire and listen to events on other objects.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Events\n*/\n\nvar Events = {};\n\nmodule.exports = Events;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Subscribes a callback function to the given object's `eventName`.\n     * @method on\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.on = function(object, eventNames, callback) {\n        var names = eventNames.split(' '),\n            name;\n\n        for (var i = 0; i < names.length; i++) {\n            name = names[i];\n            object.events = object.events || {};\n            object.events[name] = object.events[name] || [];\n            object.events[name].push(callback);\n        }\n\n        return callback;\n    };\n\n    /**\n     * Removes the given event callback. If no callback, clears all callbacks in `eventNames`. If no `eventNames`, clears all events.\n     * @method off\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.off = function(object, eventNames, callback) {\n        if (!eventNames) {\n            object.events = {};\n            return;\n        }\n\n        // handle Events.off(object, callback)\n        if (typeof eventNames === 'function') {\n            callback = eventNames;\n            eventNames = Common.keys(object.events).join(' ');\n        }\n\n        var names = eventNames.split(' ');\n\n        for (var i = 0; i < names.length; i++) {\n            var callbacks = object.events[names[i]],\n                newCallbacks = [];\n\n            if (callback && callbacks) {\n                for (var j = 0; j < callbacks.length; j++) {\n                    if (callbacks[j] !== callback)\n                        newCallbacks.push(callbacks[j]);\n                }\n            }\n\n            object.events[names[i]] = newCallbacks;\n        }\n    };\n\n    /**\n     * Fires all the callbacks subscribed to the given object's `eventName`, in the order they subscribed, if any.\n     * @method trigger\n     * @param {} object\n     * @param {string} eventNames\n     * @param {} event\n     */\n    Events.trigger = function(object, eventNames, event) {\n        var names,\n            name,\n            callbacks,\n            eventClone;\n\n        var events = object.events;\n        \n        if (events && Common.keys(events).length > 0) {\n            if (!event)\n                event = {};\n\n            names = eventNames.split(' ');\n\n            for (var i = 0; i < names.length; i++) {\n                name = names[i];\n                callbacks = events[name];\n\n                if (callbacks) {\n                    eventClone = Common.clone(event, false);\n                    eventClone.name = name;\n                    eventClone.source = object;\n\n                    for (var j = 0; j < callbacks.length; j++) {\n                        callbacks[j].apply(object, [eventClone]);\n                    }\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* A composite is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite` objects.\n*\n* They are a container that can represent complex objects made of multiple parts, even if they are not physically connected.\n* A composite could contain anything from a single body all the way up to a whole world.\n* \n* When making any changes to composites, use the included functions rather than changing their properties directly.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composite\n*/\n\nvar Composite = {};\n\nmodule.exports = Composite;\n\nvar Events = __webpack_require__(4);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Body = __webpack_require__(6);\n\n(function() {\n\n    /**\n     * Creates a new composite. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properites section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} [options]\n     * @return {composite} A new composite\n     */\n    Composite.create = function(options) {\n        return Common.extend({ \n            id: Common.nextId(),\n            type: 'composite',\n            parent: null,\n            isModified: false,\n            bodies: [], \n            constraints: [], \n            composites: [],\n            label: 'Composite',\n            plugin: {}\n        }, options);\n    };\n\n    /**\n     * Sets the composite's `isModified` flag. \n     * If `updateParents` is true, all parents will be set (default: false).\n     * If `updateChildren` is true, all children will be set (default: false).\n     * @method setModified\n     * @param {composite} composite\n     * @param {boolean} isModified\n     * @param {boolean} [updateParents=false]\n     * @param {boolean} [updateChildren=false]\n     */\n    Composite.setModified = function(composite, isModified, updateParents, updateChildren) {\n        composite.isModified = isModified;\n\n        if (updateParents && composite.parent) {\n            Composite.setModified(composite.parent, isModified, updateParents, updateChildren);\n        }\n\n        if (updateChildren) {\n            for(var i = 0; i < composite.composites.length; i++) {\n                var childComposite = composite.composites[i];\n                Composite.setModified(childComposite, isModified, updateParents, updateChildren);\n            }\n        }\n    };\n\n    /**\n     * Generic single or multi-add function. Adds a single or an array of body(s), constraint(s) or composite(s) to the given composite.\n     * Triggers `beforeAdd` and `afterAdd` events on the `composite`.\n     * @method add\n     * @param {composite} composite\n     * @param {object|array} object A single or an array of body(s), constraint(s) or composite(s)\n     * @return {composite} The original composite with the objects added\n     */\n    Composite.add = function(composite, object) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeAdd', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                // skip adding compound parts\n                if (obj.parent !== obj) {\n                    Common.warn('Composite.add: skipped adding a compound body part (you must add its parent instead)');\n                    break;\n                }\n\n                Composite.addBody(composite, obj);\n                break;\n            case 'constraint':\n                Composite.addConstraint(composite, obj);\n                break;\n            case 'composite':\n                Composite.addComposite(composite, obj);\n                break;\n            case 'mouseConstraint':\n                Composite.addConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterAdd', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Generic remove function. Removes one or many body(s), constraint(s) or a composite(s) to the given composite.\n     * Optionally searching its children recursively.\n     * Triggers `beforeRemove` and `afterRemove` events on the `composite`.\n     * @method remove\n     * @param {composite} composite\n     * @param {object|array} object\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the objects removed\n     */\n    Composite.remove = function(composite, object, deep) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeRemove', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                Composite.removeBody(composite, obj, deep);\n                break;\n            case 'constraint':\n                Composite.removeConstraint(composite, obj, deep);\n                break;\n            case 'composite':\n                Composite.removeComposite(composite, obj, deep);\n                break;\n            case 'mouseConstraint':\n                Composite.removeConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterRemove', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Adds a composite to the given composite.\n     * @private\n     * @method addComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @return {composite} The original compositeA with the objects from compositeB added\n     */\n    Composite.addComposite = function(compositeA, compositeB) {\n        compositeA.composites.push(compositeB);\n        compositeB.parent = compositeA;\n        Composite.setModified(compositeA, true, true, false);\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @param {boolean} [deep=false]\n     * @return {composite} The original compositeA with the composite removed\n     */\n    Composite.removeComposite = function(compositeA, compositeB, deep) {\n        var position = Common.indexOf(compositeA.composites, compositeB);\n        if (position !== -1) {\n            Composite.removeCompositeAt(compositeA, position);\n            Composite.setModified(compositeA, true, true, false);\n        }\n\n        if (deep) {\n            for (var i = 0; i < compositeA.composites.length; i++){\n                Composite.removeComposite(compositeA.composites[i], compositeB, true);\n            }\n        }\n\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite.\n     * @private\n     * @method removeCompositeAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the composite removed\n     */\n    Composite.removeCompositeAt = function(composite, position) {\n        composite.composites.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a body to the given composite.\n     * @private\n     * @method addBody\n     * @param {composite} composite\n     * @param {body} body\n     * @return {composite} The original composite with the body added\n     */\n    Composite.addBody = function(composite, body) {\n        composite.bodies.push(body);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeBody\n     * @param {composite} composite\n     * @param {body} body\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBody = function(composite, body, deep) {\n        var position = Common.indexOf(composite.bodies, body);\n        if (position !== -1) {\n            Composite.removeBodyAt(composite, position);\n            Composite.setModified(composite, true, true, false);\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeBody(composite.composites[i], body, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeBodyAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBodyAt = function(composite, position) {\n        composite.bodies.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a constraint to the given composite.\n     * @private\n     * @method addConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @return {composite} The original composite with the constraint added\n     */\n    Composite.addConstraint = function(composite, constraint) {\n        composite.constraints.push(constraint);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a constraint from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraint = function(composite, constraint, deep) {\n        var position = Common.indexOf(composite.constraints, constraint);\n        if (position !== -1) {\n            Composite.removeConstraintAt(composite, position);\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeConstraint(composite.composites[i], constraint, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeConstraintAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraintAt = function(composite, position) {\n        composite.constraints.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes all bodies, constraints and composites from the given composite.\n     * Optionally clearing its children recursively.\n     * @method clear\n     * @param {composite} composite\n     * @param {boolean} keepStatic\n     * @param {boolean} [deep=false]\n     */\n    Composite.clear = function(composite, keepStatic, deep) {\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.clear(composite.composites[i], keepStatic, true);\n            }\n        }\n        \n        if (keepStatic) {\n            composite.bodies = composite.bodies.filter(function(body) { return body.isStatic; });\n        } else {\n            composite.bodies.length = 0;\n        }\n\n        composite.constraints.length = 0;\n        composite.composites.length = 0;\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Returns all bodies in the given composite, including all bodies in its children, recursively.\n     * @method allBodies\n     * @param {composite} composite\n     * @return {body[]} All the bodies\n     */\n    Composite.allBodies = function(composite) {\n        var bodies = [].concat(composite.bodies);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            bodies = bodies.concat(Composite.allBodies(composite.composites[i]));\n\n        return bodies;\n    };\n\n    /**\n     * Returns all constraints in the given composite, including all constraints in its children, recursively.\n     * @method allConstraints\n     * @param {composite} composite\n     * @return {constraint[]} All the constraints\n     */\n    Composite.allConstraints = function(composite) {\n        var constraints = [].concat(composite.constraints);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            constraints = constraints.concat(Composite.allConstraints(composite.composites[i]));\n\n        return constraints;\n    };\n\n    /**\n     * Returns all composites in the given composite, including all composites in its children, recursively.\n     * @method allComposites\n     * @param {composite} composite\n     * @return {composite[]} All the composites\n     */\n    Composite.allComposites = function(composite) {\n        var composites = [].concat(composite.composites);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            composites = composites.concat(Composite.allComposites(composite.composites[i]));\n\n        return composites;\n    };\n\n    /**\n     * Searches the composite recursively for an object matching the type and id supplied, null if not found.\n     * @method get\n     * @param {composite} composite\n     * @param {number} id\n     * @param {string} type\n     * @return {object} The requested object, if found\n     */\n    Composite.get = function(composite, id, type) {\n        var objects,\n            object;\n\n        switch (type) {\n        case 'body':\n            objects = Composite.allBodies(composite);\n            break;\n        case 'constraint':\n            objects = Composite.allConstraints(composite);\n            break;\n        case 'composite':\n            objects = Composite.allComposites(composite).concat(composite);\n            break;\n        }\n\n        if (!objects)\n            return null;\n\n        object = objects.filter(function(object) { \n            return object.id.toString() === id.toString(); \n        });\n\n        return object.length === 0 ? null : object[0];\n    };\n\n    /**\n     * Moves the given object(s) from compositeA to compositeB (equal to a remove followed by an add).\n     * @method move\n     * @param {compositeA} compositeA\n     * @param {object[]} objects\n     * @param {compositeB} compositeB\n     * @return {composite} Returns compositeA\n     */\n    Composite.move = function(compositeA, objects, compositeB) {\n        Composite.remove(compositeA, objects);\n        Composite.add(compositeB, objects);\n        return compositeA;\n    };\n\n    /**\n     * Assigns new ids for all objects in the composite, recursively.\n     * @method rebase\n     * @param {composite} composite\n     * @return {composite} Returns composite\n     */\n    Composite.rebase = function(composite) {\n        var objects = Composite.allBodies(composite)\n            .concat(Composite.allConstraints(composite))\n            .concat(Composite.allComposites(composite));\n\n        for (var i = 0; i < objects.length; i++) {\n            objects[i].id = Common.nextId();\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Translates all children in the composite by a given vector relative to their current positions, \n     * without imparting any velocity.\n     * @method translate\n     * @param {composite} composite\n     * @param {vector} translation\n     * @param {bool} [recursive=true]\n     */\n    Composite.translate = function(composite, translation, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            Body.translate(bodies[i], translation);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Rotates all children in the composite by a given angle about the given point, without imparting any angular velocity.\n     * @method rotate\n     * @param {composite} composite\n     * @param {number} rotation\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.rotate = function(composite, rotation, point, recursive) {\n        var cos = Math.cos(rotation),\n            sin = Math.sin(rotation),\n            bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            });\n\n            Body.rotate(body, rotation);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Scales all children in the composite, including updating physical properties (mass, area, axes, inertia), from a world-space point.\n     * @method scale\n     * @param {composite} composite\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.scale = function(composite, scaleX, scaleY, point, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + dx * scaleX,\n                y: point.y + dy * scaleY\n            });\n\n            Body.scale(body, scaleX, scaleY);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Returns the union of the bounds of all of the composite's bodies.\n     * @method bounds\n     * @param {composite} composite The composite.\n     * @returns {bounds} The composite bounds.\n     */\n    Composite.bounds = function(composite) {\n        var bodies = Composite.allBodies(composite),\n            vertices = [];\n\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i];\n            vertices.push(body.bounds.min, body.bounds.max);\n        }\n\n        return Bounds.create(vertices);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, before objects have been added.\n    *\n    * @event beforeAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, after objects have been added.\n    *\n    * @event afterAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, before objects have been removed.\n    *\n    * @event beforeRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, after objects have been removed.\n    *\n    * @event afterRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"composite\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage composites.\n     *\n     * @property label\n     * @type string\n     * @default \"Composite\"\n     */\n\n    /**\n     * A flag that specifies whether the composite has been modified during the current step.\n     * Most `Matter.Composite` methods will automatically set this flag to `true` to inform the engine of changes to be handled.\n     * If you need to change it manually, you should use the `Composite.setModified` method.\n     *\n     * @property isModified\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * The `Composite` that is the parent of this composite. It is automatically managed by the `Matter.Composite` methods.\n     *\n     * @property parent\n     * @type composite\n     * @default null\n     */\n\n    /**\n     * An array of `Body` that are _direct_ children of this composite.\n     * To add or remove bodies you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allBodies` method.\n     *\n     * @property bodies\n     * @type body[]\n     * @default []\n     */\n\n    /**\n     * An array of `Constraint` that are _direct_ children of this composite.\n     * To add or remove constraints you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allConstraints` method.\n     *\n     * @property constraints\n     * @type constraint[]\n     * @default []\n     */\n\n    /**\n     * An array of `Composite` that are _direct_ children of this composite.\n     * To add or remove composites you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allComposites` method.\n     *\n     * @property composites\n     * @type composite[]\n     * @default []\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Body` module contains methods for creating and manipulating body models.\n* A `Matter.Body` is a rigid body that can be simulated by a `Matter.Engine`.\n* Factories for commonly used body configurations (such as rectangles, circles and other polygons) can be found in the module `Matter.Bodies`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n\n* @class Body\n*/\n\nvar Body = {};\n\nmodule.exports = Body;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Render = __webpack_require__(16);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(10);\n\n(function() {\n\n    Body._inertiaScale = 4;\n    Body._nextCollidingGroupId = 1;\n    Body._nextNonCollidingGroupId = -1;\n    Body._nextCategory = 0x0001;\n\n    /**\n     * Creates a new rigid body model. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * Vertices must be specified in clockwise order.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {body} body\n     */\n    Body.create = function(options) {\n        var defaults = {\n            id: Common.nextId(),\n            type: 'body',\n            label: 'Body',\n            parts: [],\n            plugin: {},\n            angle: 0,\n            vertices: Vertices.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),\n            position: { x: 0, y: 0 },\n            force: { x: 0, y: 0 },\n            torque: 0,\n            positionImpulse: { x: 0, y: 0 },\n            constraintImpulse: { x: 0, y: 0, angle: 0 },\n            totalContacts: 0,\n            speed: 0,\n            angularSpeed: 0,\n            velocity: { x: 0, y: 0 },\n            angularVelocity: 0,\n            isSensor: false,\n            isStatic: false,\n            isSleeping: false,\n            motion: 0,\n            sleepThreshold: 60,\n            density: 0.001,\n            restitution: 0,\n            friction: 0.1,\n            frictionStatic: 0.5,\n            frictionAir: 0.01,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            },\n            slop: 0.05,\n            timeScale: 1,\n            render: {\n                visible: true,\n                opacity: 1,\n                strokeStyle: null,\n                fillStyle: null,\n                lineWidth: null,\n                sprite: {\n                    xScale: 1,\n                    yScale: 1,\n                    xOffset: 0,\n                    yOffset: 0\n                }\n            },\n            events: null,\n            bounds: null,\n            chamfer: null,\n            circleRadius: 0,\n            positionPrev: null,\n            anglePrev: 0,\n            parent: null,\n            axes: null,\n            area: 0,\n            mass: 0,\n            inertia: 0,\n            _original: null\n        };\n\n        var body = Common.extend(defaults, options);\n\n        _initProperties(body, options);\n\n        return body;\n    };\n\n    /**\n     * Returns the next unique group index for which bodies will collide.\n     * If `isNonColliding` is `true`, returns the next unique group index for which bodies will _not_ collide.\n     * See `body.collisionFilter` for more information.\n     * @method nextGroup\n     * @param {bool} [isNonColliding=false]\n     * @return {Number} Unique group index\n     */\n    Body.nextGroup = function(isNonColliding) {\n        if (isNonColliding)\n            return Body._nextNonCollidingGroupId--;\n\n        return Body._nextCollidingGroupId++;\n    };\n\n    /**\n     * Returns the next unique category bitfield (starting after the initial default category `0x0001`).\n     * There are 32 available. See `body.collisionFilter` for more information.\n     * @method nextCategory\n     * @return {Number} Unique category bitfield\n     */\n    Body.nextCategory = function() {\n        Body._nextCategory = Body._nextCategory << 1;\n        return Body._nextCategory;\n    };\n\n    /**\n     * Initialises body properties.\n     * @method _initProperties\n     * @private\n     * @param {body} body\n     * @param {} [options]\n     */\n    var _initProperties = function(body, options) {\n        options = options || {};\n\n        // init required properties (order is important)\n        Body.set(body, {\n            bounds: body.bounds || Bounds.create(body.vertices),\n            positionPrev: body.positionPrev || Vector.clone(body.position),\n            anglePrev: body.anglePrev || body.angle,\n            vertices: body.vertices,\n            parts: body.parts || [body],\n            isStatic: body.isStatic,\n            isSleeping: body.isSleeping,\n            parent: body.parent || body\n        });\n\n        Vertices.rotate(body.vertices, body.angle, body.position);\n        Axes.rotate(body.axes, body.angle);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n\n        // allow options to override the automatically calculated properties\n        Body.set(body, {\n            axes: options.axes || body.axes,\n            area: options.area || body.area,\n            mass: options.mass || body.mass,\n            inertia: options.inertia || body.inertia\n        });\n\n        // render properties\n        var defaultFillStyle = (body.isStatic ? '#14151f' : Common.choose(['#f19648', '#f5d259', '#f55a3c', '#063e7b', '#ececd1'])),\n            defaultStrokeStyle = body.isStatic ? '#555' : '#ccc',\n            defaultLineWidth = body.isStatic && body.render.fillStyle === null ? 1 : 0;\n        body.render.fillStyle = body.render.fillStyle || defaultFillStyle;\n        body.render.strokeStyle = body.render.strokeStyle || defaultStrokeStyle;\n        body.render.lineWidth = body.render.lineWidth || defaultLineWidth;\n        body.render.sprite.xOffset += -(body.bounds.min.x - body.position.x) / (body.bounds.max.x - body.bounds.min.x);\n        body.render.sprite.yOffset += -(body.bounds.min.y - body.position.y) / (body.bounds.max.y - body.bounds.min.y);\n    };\n\n    /**\n     * Given a property and a value (or map of), sets the property(s) on the body, using the appropriate setter functions if they exist.\n     * Prefer to use the actual setter functions in performance critical situations.\n     * @method set\n     * @param {body} body\n     * @param {} settings A property name (or map of properties and values) to set on the body.\n     * @param {} value The value to set if `settings` is a single property name.\n     */\n    Body.set = function(body, settings, value) {\n        var property;\n\n        if (typeof settings === 'string') {\n            property = settings;\n            settings = {};\n            settings[property] = value;\n        }\n\n        for (property in settings) {\n            if (!Object.prototype.hasOwnProperty.call(settings, property))\n                continue;\n\n            value = settings[property];\n            switch (property) {\n\n            case 'isStatic':\n                Body.setStatic(body, value);\n                break;\n            case 'isSleeping':\n                Sleeping.set(body, value);\n                break;\n            case 'mass':\n                Body.setMass(body, value);\n                break;\n            case 'density':\n                Body.setDensity(body, value);\n                break;\n            case 'inertia':\n                Body.setInertia(body, value);\n                break;\n            case 'vertices':\n                Body.setVertices(body, value);\n                break;\n            case 'position':\n                Body.setPosition(body, value);\n                break;\n            case 'angle':\n                Body.setAngle(body, value);\n                break;\n            case 'velocity':\n                Body.setVelocity(body, value);\n                break;\n            case 'angularVelocity':\n                Body.setAngularVelocity(body, value);\n                break;\n            case 'parts':\n                Body.setParts(body, value);\n                break;\n            case 'centre':\n                Body.setCentre(body, value);\n                break;\n            default:\n                body[property] = value;\n\n            }\n        }\n    };\n\n    /**\n     * Sets the body as static, including isStatic flag and setting mass and inertia to Infinity.\n     * @method setStatic\n     * @param {body} body\n     * @param {bool} isStatic\n     */\n    Body.setStatic = function(body, isStatic) {\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.isStatic = isStatic;\n\n            if (isStatic) {\n                part._original = {\n                    restitution: part.restitution,\n                    friction: part.friction,\n                    mass: part.mass,\n                    inertia: part.inertia,\n                    density: part.density,\n                    inverseMass: part.inverseMass,\n                    inverseInertia: part.inverseInertia\n                };\n\n                part.restitution = 0;\n                part.friction = 1;\n                part.mass = part.inertia = part.density = Infinity;\n                part.inverseMass = part.inverseInertia = 0;\n\n                part.positionPrev.x = part.position.x;\n                part.positionPrev.y = part.position.y;\n                part.anglePrev = part.angle;\n                part.angularVelocity = 0;\n                part.speed = 0;\n                part.angularSpeed = 0;\n                part.motion = 0;\n            } else if (part._original) {\n                part.restitution = part._original.restitution;\n                part.friction = part._original.friction;\n                part.mass = part._original.mass;\n                part.inertia = part._original.inertia;\n                part.density = part._original.density;\n                part.inverseMass = part._original.inverseMass;\n                part.inverseInertia = part._original.inverseInertia;\n\n                part._original = null;\n            }\n        }\n    };\n\n    /**\n     * Sets the mass of the body. Inverse mass, density and inertia are automatically updated to reflect the change.\n     * @method setMass\n     * @param {body} body\n     * @param {number} mass\n     */\n    Body.setMass = function(body, mass) {\n        var moment = body.inertia / (body.mass / 6);\n        body.inertia = moment * (mass / 6);\n        body.inverseInertia = 1 / body.inertia;\n\n        body.mass = mass;\n        body.inverseMass = 1 / body.mass;\n        body.density = body.mass / body.area;\n    };\n\n    /**\n     * Sets the density of the body. Mass and inertia are automatically updated to reflect the change.\n     * @method setDensity\n     * @param {body} body\n     * @param {number} density\n     */\n    Body.setDensity = function(body, density) {\n        Body.setMass(body, density * body.area);\n        body.density = density;\n    };\n\n    /**\n     * Sets the moment of inertia (i.e. second moment of area) of the body. \n     * Inverse inertia is automatically updated to reflect the change. Mass is not changed.\n     * @method setInertia\n     * @param {body} body\n     * @param {number} inertia\n     */\n    Body.setInertia = function(body, inertia) {\n        body.inertia = inertia;\n        body.inverseInertia = 1 / body.inertia;\n    };\n\n    /**\n     * Sets the body's vertices and updates body properties accordingly, including inertia, area and mass (with respect to `body.density`).\n     * Vertices will be automatically transformed to be orientated around their centre of mass as the origin.\n     * They are then automatically translated to world space based on `body.position`.\n     *\n     * The `vertices` argument should be passed as an array of `Matter.Vector` points (or a `Matter.Vertices` array).\n     * Vertices must form a convex hull, concave hulls are not supported.\n     *\n     * @method setVertices\n     * @param {body} body\n     * @param {vector[]} vertices\n     */\n    Body.setVertices = function(body, vertices) {\n        // change vertices\n        if (vertices[0].body === body) {\n            body.vertices = vertices;\n        } else {\n            body.vertices = Vertices.create(vertices, body);\n        }\n\n        // update properties\n        body.axes = Axes.fromVertices(body.vertices);\n        body.area = Vertices.area(body.vertices);\n        Body.setMass(body, body.density * body.area);\n\n        // orient vertices around the centre of mass at origin (0, 0)\n        var centre = Vertices.centre(body.vertices);\n        Vertices.translate(body.vertices, centre, -1);\n\n        // update inertia while vertices are at origin (0, 0)\n        Body.setInertia(body, Body._inertiaScale * Vertices.inertia(body.vertices, body.mass));\n\n        // update geometry\n        Vertices.translate(body.vertices, body.position);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n    };\n\n    /**\n     * Sets the parts of the `body` and updates mass, inertia and centroid.\n     * Each part will have its parent set to `body`.\n     * By default the convex hull will be automatically computed and set on `body`, unless `autoHull` is set to `false.`\n     * Note that this method will ensure that the first part in `body.parts` will always be the `body`.\n     * @method setParts\n     * @param {body} body\n     * @param [body] parts\n     * @param {bool} [autoHull=true]\n     */\n    Body.setParts = function(body, parts, autoHull) {\n        var i;\n\n        // add all the parts, ensuring that the first part is always the parent body\n        parts = parts.slice(0);\n        body.parts.length = 0;\n        body.parts.push(body);\n        body.parent = body;\n\n        for (i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (part !== body) {\n                part.parent = body;\n                body.parts.push(part);\n            }\n        }\n\n        if (body.parts.length === 1)\n            return;\n\n        autoHull = typeof autoHull !== 'undefined' ? autoHull : true;\n\n        // find the convex hull of all parts to set on the parent body\n        if (autoHull) {\n            var vertices = [];\n            for (i = 0; i < parts.length; i++) {\n                vertices = vertices.concat(parts[i].vertices);\n            }\n\n            Vertices.clockwiseSort(vertices);\n\n            var hull = Vertices.hull(vertices),\n                hullCentre = Vertices.centre(hull);\n\n            Body.setVertices(body, hull);\n            Vertices.translate(body.vertices, hullCentre);\n        }\n\n        // sum the properties of all compound parts of the parent body\n        var total = Body._totalProperties(body);\n\n        body.area = total.area;\n        body.parent = body;\n        body.position.x = total.centre.x;\n        body.position.y = total.centre.y;\n        body.positionPrev.x = total.centre.x;\n        body.positionPrev.y = total.centre.y;\n\n        Body.setMass(body, total.mass);\n        Body.setInertia(body, total.inertia);\n        Body.setPosition(body, total.centre);\n    };\n\n    /**\n     * Set the centre of mass of the body. \n     * The `centre` is a vector in world-space unless `relative` is set, in which case it is a translation.\n     * The centre of mass is the point the body rotates about and can be used to simulate non-uniform density.\n     * This is equal to moving `body.position` but not the `body.vertices`.\n     * Invalid if the `centre` falls outside the body's convex hull.\n     * @method setCentre\n     * @param {body} body\n     * @param {vector} centre\n     * @param {bool} relative\n     */\n    Body.setCentre = function(body, centre, relative) {\n        if (!relative) {\n            body.positionPrev.x = centre.x - (body.position.x - body.positionPrev.x);\n            body.positionPrev.y = centre.y - (body.position.y - body.positionPrev.y);\n            body.position.x = centre.x;\n            body.position.y = centre.y;\n        } else {\n            body.positionPrev.x += centre.x;\n            body.positionPrev.y += centre.y;\n            body.position.x += centre.x;\n            body.position.y += centre.y;\n        }\n    };\n\n    /**\n     * Sets the position of the body instantly. Velocity, angle, force etc. are unchanged.\n     * @method setPosition\n     * @param {body} body\n     * @param {vector} position\n     */\n    Body.setPosition = function(body, position) {\n        var delta = Vector.sub(position, body.position);\n        body.positionPrev.x += delta.x;\n        body.positionPrev.y += delta.y;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.position.x += delta.x;\n            part.position.y += delta.y;\n            Vertices.translate(part.vertices, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Sets the angle of the body instantly. Angular velocity, position, force etc. are unchanged.\n     * @method setAngle\n     * @param {body} body\n     * @param {number} angle\n     */\n    Body.setAngle = function(body, angle) {\n        var delta = angle - body.angle;\n        body.anglePrev += delta;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.angle += delta;\n            Vertices.rotate(part.vertices, delta, body.position);\n            Axes.rotate(part.axes, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n            if (i > 0) {\n                Vector.rotateAbout(part.position, delta, body.position, part.position);\n            }\n        }\n    };\n\n    /**\n     * Sets the linear velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\n     * @method setVelocity\n     * @param {body} body\n     * @param {vector} velocity\n     */\n    Body.setVelocity = function(body, velocity) {\n        body.positionPrev.x = body.position.x - velocity.x;\n        body.positionPrev.y = body.position.y - velocity.y;\n        body.velocity.x = velocity.x;\n        body.velocity.y = velocity.y;\n        body.speed = Vector.magnitude(body.velocity);\n    };\n\n    /**\n     * Sets the angular velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\n     * @method setAngularVelocity\n     * @param {body} body\n     * @param {number} velocity\n     */\n    Body.setAngularVelocity = function(body, velocity) {\n        body.anglePrev = body.angle - velocity;\n        body.angularVelocity = velocity;\n        body.angularSpeed = Math.abs(body.angularVelocity);\n    };\n\n    /**\n     * Moves a body by a given vector relative to its current position, without imparting any velocity.\n     * @method translate\n     * @param {body} body\n     * @param {vector} translation\n     */\n    Body.translate = function(body, translation) {\n        Body.setPosition(body, Vector.add(body.position, translation));\n    };\n\n    /**\n     * Rotates a body by a given angle relative to its current angle, without imparting any angular velocity.\n     * @method rotate\n     * @param {body} body\n     * @param {number} rotation\n     * @param {vector} [point]\n     */\n    Body.rotate = function(body, rotation, point) {\n        if (!point) {\n            Body.setAngle(body, body.angle + rotation);\n        } else {\n            var cos = Math.cos(rotation),\n                sin = Math.sin(rotation),\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            });\n\n            Body.setAngle(body, body.angle + rotation);\n        }\n    };\n\n    /**\n     * Scales the body, including updating physical properties (mass, area, axes, inertia), from a world-space point (default is body centre).\n     * @method scale\n     * @param {body} body\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} [point]\n     */\n    Body.scale = function(body, scaleX, scaleY, point) {\n        var totalArea = 0,\n            totalInertia = 0;\n\n        point = point || body.position;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            // scale vertices\n            Vertices.scale(part.vertices, scaleX, scaleY, point);\n\n            // update properties\n            part.axes = Axes.fromVertices(part.vertices);\n            part.area = Vertices.area(part.vertices);\n            Body.setMass(part, body.density * part.area);\n\n            // update inertia (requires vertices to be at origin)\n            Vertices.translate(part.vertices, { x: -part.position.x, y: -part.position.y });\n            Body.setInertia(part, Body._inertiaScale * Vertices.inertia(part.vertices, part.mass));\n            Vertices.translate(part.vertices, { x: part.position.x, y: part.position.y });\n\n            if (i > 0) {\n                totalArea += part.area;\n                totalInertia += part.inertia;\n            }\n\n            // scale position\n            part.position.x = point.x + (part.position.x - point.x) * scaleX;\n            part.position.y = point.y + (part.position.y - point.y) * scaleY;\n\n            // update bounds\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n\n        // handle parent body\n        if (body.parts.length > 1) {\n            body.area = totalArea;\n\n            if (!body.isStatic) {\n                Body.setMass(body, body.density * totalArea);\n                Body.setInertia(body, totalInertia);\n            }\n        }\n\n        // handle circles\n        if (body.circleRadius) { \n            if (scaleX === scaleY) {\n                body.circleRadius *= scaleX;\n            } else {\n                // body is no longer a circle\n                body.circleRadius = null;\n            }\n        }\n    };\n\n    /**\n     * Performs a simulation step for the given `body`, including updating position and angle using Verlet integration.\n     * @method update\n     * @param {body} body\n     * @param {number} deltaTime\n     * @param {number} timeScale\n     * @param {number} correction\n     */\n    Body.update = function(body, deltaTime, timeScale, correction) {\n        var deltaTimeSquared = Math.pow(deltaTime * timeScale * body.timeScale, 2);\n\n        // from the previous step\n        var frictionAir = 1 - body.frictionAir * timeScale * body.timeScale,\n            velocityPrevX = body.position.x - body.positionPrev.x,\n            velocityPrevY = body.position.y - body.positionPrev.y;\n\n        // update velocity with Verlet integration\n        body.velocity.x = (velocityPrevX * frictionAir * correction) + (body.force.x / body.mass) * deltaTimeSquared;\n        body.velocity.y = (velocityPrevY * frictionAir * correction) + (body.force.y / body.mass) * deltaTimeSquared;\n\n        body.positionPrev.x = body.position.x;\n        body.positionPrev.y = body.position.y;\n        body.position.x += body.velocity.x;\n        body.position.y += body.velocity.y;\n\n        // update angular velocity with Verlet integration\n        body.angularVelocity = ((body.angle - body.anglePrev) * frictionAir * correction) + (body.torque / body.inertia) * deltaTimeSquared;\n        body.anglePrev = body.angle;\n        body.angle += body.angularVelocity;\n\n        // track speed and acceleration\n        body.speed = Vector.magnitude(body.velocity);\n        body.angularSpeed = Math.abs(body.angularVelocity);\n\n        // transform the body geometry\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            Vertices.translate(part.vertices, body.velocity);\n            \n            if (i > 0) {\n                part.position.x += body.velocity.x;\n                part.position.y += body.velocity.y;\n            }\n\n            if (body.angularVelocity !== 0) {\n                Vertices.rotate(part.vertices, body.angularVelocity, body.position);\n                Axes.rotate(part.axes, body.angularVelocity);\n                if (i > 0) {\n                    Vector.rotateAbout(part.position, body.angularVelocity, body.position, part.position);\n                }\n            }\n\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Applies a force to a body from a given world-space position, including resulting torque.\n     * @method applyForce\n     * @param {body} body\n     * @param {vector} position\n     * @param {vector} force\n     */\n    Body.applyForce = function(body, position, force) {\n        body.force.x += force.x;\n        body.force.y += force.y;\n        var offset = { x: position.x - body.position.x, y: position.y - body.position.y };\n        body.torque += offset.x * force.y - offset.y * force.x;\n    };\n\n    /**\n     * Returns the sums of the properties of all compound parts of the parent body.\n     * @method _totalProperties\n     * @private\n     * @param {body} body\n     * @return {}\n     */\n    Body._totalProperties = function(body) {\n        // from equations at:\n        // https://ecourses.ou.edu/cgi-bin/ebook.cgi?doc=&topic=st&chap_sec=07.2&page=theory\n        // http://output.to/sideway/default.asp?qno=121100087\n\n        var properties = {\n            mass: 0,\n            area: 0,\n            inertia: 0,\n            centre: { x: 0, y: 0 }\n        };\n\n        // sum the properties of all compound parts of the parent body\n        for (var i = body.parts.length === 1 ? 0 : 1; i < body.parts.length; i++) {\n            var part = body.parts[i],\n                mass = part.mass !== Infinity ? part.mass : 1;\n\n            properties.mass += mass;\n            properties.area += part.area;\n            properties.inertia += part.inertia;\n            properties.centre = Vector.add(properties.centre, Vector.mult(part.position, mass));\n        }\n\n        properties.centre = Vector.div(properties.centre, properties.mass);\n\n        return properties;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a body starts sleeping (where `this` is the body).\n    *\n    * @event sleepStart\n    * @this {body} The body that has started sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a body ends sleeping (where `this` is the body).\n    *\n    * @event sleepEnd\n    * @this {body} The body that has ended sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Body.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"body\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Body\"\n     */\n\n    /**\n     * An array of bodies that make up this body. \n     * The first body in the array must always be a self reference to the current body instance.\n     * All bodies in the `parts` array together form a single rigid compound body.\n     * Parts are allowed to overlap, have gaps or holes or even form concave bodies.\n     * Parts themselves should never be added to a `World`, only the parent body should be.\n     * Use `Body.setParts` when setting parts to ensure correct updates of all properties.\n     *\n     * @property parts\n     * @type body[]\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * A self reference if the body is _not_ a part of another body.\n     * Otherwise this is a reference to the body that this is a part of.\n     * See `body.parts`.\n     *\n     * @property parent\n     * @type body\n     */\n\n    /**\n     * A `Number` specifying the angle of the body, in radians.\n     *\n     * @property angle\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * An array of `Vector` objects that specify the convex hull of the rigid body.\n     * These should be provided about the origin `(0, 0)`. E.g.\n     *\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\n     *\n     * When passed via `Body.create`, the vertices are translated relative to `body.position` (i.e. world-space, and constantly updated by `Body.update` during simulation).\n     * The `Vector` objects are also augmented with additional properties required for efficient collision detection. \n     *\n     * Other properties such as `inertia` and `bounds` are automatically calculated from the passed vertices (unless provided via `options`).\n     * Concave hulls are not currently supported. The module `Matter.Vertices` contains useful methods for working with vertices.\n     *\n     * @property vertices\n     * @type vector[]\n     */\n\n    /**\n     * A `Vector` that specifies the current world-space position of the body.\n     *\n     * @property position\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that specifies the force to apply in the current step. It is zeroed after every `Body.update`. See also `Body.applyForce`.\n     *\n     * @property force\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that specifies the torque (turning force) to apply in the current step. It is zeroed after every `Body.update`.\n     *\n     * @property torque\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that _measures_ the current speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.velocity`).\n     *\n     * @readOnly\n     * @property speed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that _measures_ the current angular speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.angularVelocity`).\n     *\n     * @readOnly\n     * @property angularSpeed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Vector` that _measures_ the current velocity of the body after the last `Body.update`. It is read-only. \n     * If you need to modify a body's velocity directly, you should either apply a force or simply change the body's `position` (as the engine uses position-Verlet integration).\n     *\n     * @readOnly\n     * @property velocity\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that _measures_ the current angular velocity of the body after the last `Body.update`. It is read-only. \n     * If you need to modify a body's angular velocity directly, you should apply a torque or simply change the body's `angle` (as the engine uses position-Verlet integration).\n     *\n     * @readOnly\n     * @property angularVelocity\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A flag that indicates whether a body is considered static. A static body can never change position or angle and is completely fixed.\n     * If you need to set a body as static after its creation, you should use `Body.setStatic` as this requires more than just setting this flag.\n     *\n     * @property isStatic\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag that indicates whether a body is a sensor. Sensor triggers collision events, but doesn't react with colliding body physically.\n     *\n     * @property isSensor\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag that indicates whether the body is considered sleeping. A sleeping body acts similar to a static body, except it is only temporary and can be awoken.\n     * If you need to set a body as sleeping, you should use `Sleeping.set` as this requires more than just setting this flag.\n     *\n     * @property isSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A `Number` that _measures_ the amount of movement a body currently has (a combination of `speed` and `angularSpeed`). It is read-only and always positive.\n     * It is used and updated by the `Matter.Sleeping` module during simulation to decide if a body has come to rest.\n     *\n     * @readOnly\n     * @property motion\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the number of updates in which this body must have near-zero velocity before it is set as sleeping by the `Matter.Sleeping` module (if sleeping is enabled by the engine).\n     *\n     * @property sleepThreshold\n     * @type number\n     * @default 60\n     */\n\n    /**\n     * A `Number` that defines the density of the body, that is its mass per unit area.\n     * If you pass the density via `Body.create` the `mass` property is automatically calculated for you based on the size (area) of the object.\n     * This is generally preferable to simply setting mass and allows for more intuitive definition of materials (e.g. rock has a higher density than wood).\n     *\n     * @property density\n     * @type number\n     * @default 0.001\n     */\n\n    /**\n     * A `Number` that defines the mass of the body, although it may be more appropriate to specify the `density` property instead.\n     * If you modify this value, you must also modify the `body.inverseMass` property (`1 / mass`).\n     *\n     * @property mass\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the inverse mass of the body (`1 / mass`).\n     * If you modify this value, you must also modify the `body.mass` property.\n     *\n     * @property inverseMass\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the moment of inertia (i.e. second moment of area) of the body.\n     * It is automatically calculated from the given convex hull (`vertices` array) and density in `Body.create`.\n     * If you modify this value, you must also modify the `body.inverseInertia` property (`1 / inertia`).\n     *\n     * @property inertia\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the inverse moment of inertia of the body (`1 / inertia`).\n     * If you modify this value, you must also modify the `body.inertia` property.\n     *\n     * @property inverseInertia\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the restitution (elasticity) of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means collisions may be perfectly inelastic and no bouncing may occur. \n     * A value of `0.8` means the body may bounce back with approximately 80% of its kinetic energy.\n     * Note that collision response is based on _pairs_ of bodies, and that `restitution` values are _combined_ with the following formula:\n     *\n     *     Math.max(bodyA.restitution, bodyB.restitution)\n     *\n     * @property restitution\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the friction of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means that the body may slide indefinitely.\n     * A value of `1` means the body may come to a stop almost instantly after a force is applied.\n     *\n     * The effects of the value may be non-linear. \n     * High values may be unstable depending on the body.\n     * The engine uses a Coulomb friction model including static and kinetic friction.\n     * Note that collision response is based on _pairs_ of bodies, and that `friction` values are _combined_ with the following formula:\n     *\n     *     Math.min(bodyA.friction, bodyB.friction)\n     *\n     * @property friction\n     * @type number\n     * @default 0.1\n     */\n\n    /**\n     * A `Number` that defines the static friction of the body (in the Coulomb friction model). \n     * A value of `0` means the body will never 'stick' when it is nearly stationary and only dynamic `friction` is used.\n     * The higher the value (e.g. `10`), the more force it will take to initially get the body moving when nearly stationary.\n     * This value is multiplied with the `friction` property to make it easier to change `friction` and maintain an appropriate amount of static friction.\n     *\n     * @property frictionStatic\n     * @type number\n     * @default 0.5\n     */\n\n    /**\n     * A `Number` that defines the air friction of the body (air resistance). \n     * A value of `0` means the body will never slow as it moves through space.\n     * The higher the value, the faster a body slows when moving through space.\n     * The effects of the value are non-linear. \n     *\n     * @property frictionAir\n     * @type number\n     * @default 0.01\n     */\n\n    /**\n     * An `Object` that specifies the collision filtering properties of this body.\n     *\n     * Collisions between two bodies will obey the following rules:\n     * - If the two bodies have the same non-zero value of `collisionFilter.group`,\n     *   they will always collide if the value is positive, and they will never collide\n     *   if the value is negative.\n     * - If the two bodies have different values of `collisionFilter.group` or if one\n     *   (or both) of the bodies has a value of 0, then the category/mask rules apply as follows:\n     *\n     * Each body belongs to a collision category, given by `collisionFilter.category`. This\n     * value is used as a bit field and the category should have only one bit set, meaning that\n     * the value of this property is a power of two in the range [1, 2^31]. Thus, there are 32\n     * different collision categories available.\n     *\n     * Each body also defines a collision bitmask, given by `collisionFilter.mask` which specifies\n     * the categories it collides with (the value is the bitwise AND value of all these categories).\n     *\n     * Using the category/mask rules, two bodies `A` and `B` collide if each includes the other's\n     * category in its mask, i.e. `(categoryA & maskB) !== 0` and `(categoryB & maskA) !== 0`\n     * are both true.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n    /**\n     * An Integer `Number`, that specifies the collision group this body belongs to.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.group\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * A bit field that specifies the collision category this body belongs to.\n     * The category value should have only one bit set, for example `0x0001`.\n     * This means there are up to 32 unique collision categories available.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.category\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * A bit mask that specifies the collision categories this body may collide with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.mask\n     * @type object\n     * @default -1\n     */\n\n    /**\n     * A `Number` that specifies a tolerance on how far a body is allowed to 'sink' or rotate into other bodies.\n     * Avoid changing this value unless you understand the purpose of `slop` in physics engines.\n     * The default should generally suffice, although very large bodies may require larger values for stable stacking.\n     *\n     * @property slop\n     * @type number\n     * @default 0.05\n     */\n\n    /**\n     * A `Number` that allows per-body time scaling, e.g. a force-field where bodies inside are in slow-motion, while others are at full speed.\n     *\n     * @property timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the body should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * Sets the opacity to use when rendering.\n     *\n     * @property render.opacity\n     * @type number\n     * @default 1\n    */\n\n    /**\n     * An `Object` that defines the sprite properties to use when rendering, if any.\n     *\n     * @property render.sprite\n     * @type object\n     */\n\n    /**\n     * An `String` that defines the path to the image to use as the sprite texture, if any.\n     *\n     * @property render.sprite.texture\n     * @type string\n     */\n     \n    /**\n     * A `Number` that defines the scaling in the x-axis for the sprite, if any.\n     *\n     * @property render.sprite.xScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that defines the scaling in the y-axis for the sprite, if any.\n     *\n     * @property render.sprite.yScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n      * A `Number` that defines the offset in the x-axis for the sprite (normalised by texture width).\n      *\n      * @property render.sprite.xOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n      * A `Number` that defines the offset in the y-axis for the sprite (normalised by texture height).\n      *\n      * @property render.sprite.yOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the body outline (if a sprite is not defined).\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `String` that defines the fill style to use when rendering the body (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.fillStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the body outline (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * An array of unique axis vectors (edge normals) used for collision detection.\n     * These are automatically calculated from the given convex hull (`vertices` array) in `Body.create`.\n     * They are constantly updated by `Body.update` during the simulation.\n     *\n     * @property axes\n     * @type vector[]\n     */\n     \n    /**\n     * A `Number` that _measures_ the area of the body's convex hull, calculated at creation by `Body.create`.\n     *\n     * @property area\n     * @type string\n     * @default \n     */\n\n    /**\n     * A `Bounds` object that defines the AABB region for the body.\n     * It is automatically calculated from the given convex hull (`vertices` array) in `Body.create` and constantly updated by `Body.update` during simulation.\n     *\n     * @property bounds\n     * @type bounds\n     */\n\n})();\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Sleeping` module contains methods to manage the sleeping state of bodies.\n*\n* @class Sleeping\n*/\n\nvar Sleeping = {};\n\nmodule.exports = Sleeping;\n\nvar Events = __webpack_require__(4);\n\n(function() {\n\n    Sleeping._motionWakeThreshold = 0.18;\n    Sleeping._motionSleepThreshold = 0.08;\n    Sleeping._minBias = 0.9;\n\n    /**\n     * Puts bodies to sleep or wakes them up depending on their motion.\n     * @method update\n     * @param {body[]} bodies\n     * @param {number} timeScale\n     */\n    Sleeping.update = function(bodies, timeScale) {\n        var timeFactor = timeScale * timeScale * timeScale;\n\n        // update bodies sleeping status\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                motion = body.speed * body.speed + body.angularSpeed * body.angularSpeed;\n\n            // wake up bodies if they have a force applied\n            if (body.force.x !== 0 || body.force.y !== 0) {\n                Sleeping.set(body, false);\n                continue;\n            }\n\n            var minMotion = Math.min(body.motion, motion),\n                maxMotion = Math.max(body.motion, motion);\n        \n            // biased average motion estimation between frames\n            body.motion = Sleeping._minBias * minMotion + (1 - Sleeping._minBias) * maxMotion;\n            \n            if (body.sleepThreshold > 0 && body.motion < Sleeping._motionSleepThreshold * timeFactor) {\n                body.sleepCounter += 1;\n                \n                if (body.sleepCounter >= body.sleepThreshold)\n                    Sleeping.set(body, true);\n            } else if (body.sleepCounter > 0) {\n                body.sleepCounter -= 1;\n            }\n        }\n    };\n\n    /**\n     * Given a set of colliding pairs, wakes the sleeping bodies involved.\n     * @method afterCollisions\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Sleeping.afterCollisions = function(pairs, timeScale) {\n        var timeFactor = timeScale * timeScale * timeScale;\n\n        // wake up bodies involved in collisions\n        for (var i = 0; i < pairs.length; i++) {\n            var pair = pairs[i];\n            \n            // don't wake inactive pairs\n            if (!pair.isActive)\n                continue;\n\n            var collision = pair.collision,\n                bodyA = collision.bodyA.parent, \n                bodyB = collision.bodyB.parent;\n        \n            // don't wake if at least one body is static\n            if ((bodyA.isSleeping && bodyB.isSleeping) || bodyA.isStatic || bodyB.isStatic)\n                continue;\n        \n            if (bodyA.isSleeping || bodyB.isSleeping) {\n                var sleepingBody = (bodyA.isSleeping && !bodyA.isStatic) ? bodyA : bodyB,\n                    movingBody = sleepingBody === bodyA ? bodyB : bodyA;\n\n                if (!sleepingBody.isStatic && movingBody.motion > Sleeping._motionWakeThreshold * timeFactor) {\n                    Sleeping.set(sleepingBody, false);\n                }\n            }\n        }\n    };\n  \n    /**\n     * Set a body as sleeping or awake.\n     * @method set\n     * @param {body} body\n     * @param {boolean} isSleeping\n     */\n    Sleeping.set = function(body, isSleeping) {\n        var wasSleeping = body.isSleeping;\n\n        if (isSleeping) {\n            body.isSleeping = true;\n            body.sleepCounter = body.sleepThreshold;\n\n            body.positionImpulse.x = 0;\n            body.positionImpulse.y = 0;\n\n            body.positionPrev.x = body.position.x;\n            body.positionPrev.y = body.position.y;\n\n            body.anglePrev = body.angle;\n            body.speed = 0;\n            body.angularSpeed = 0;\n            body.motion = 0;\n\n            if (!wasSleeping) {\n                Events.trigger(body, 'sleepStart');\n            }\n        } else {\n            body.isSleeping = false;\n            body.sleepCounter = 0;\n\n            if (wasSleeping) {\n                Events.trigger(body, 'sleepEnd');\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Constraint` module contains methods for creating and manipulating constraints.\n* Constraints are used for specifying that a fixed distance must be maintained between two bodies (or a body and a fixed world-space position).\n* The stiffness of constraints can be modified to create springs or elastic.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Constraint\n*/\n\nvar Constraint = {};\n\nmodule.exports = Constraint;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(10);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Constraint._warming = 0.4;\n    Constraint._torqueDampen = 1;\n    Constraint._minLength = 0.000001;\n\n    /**\n     * Creates a new constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * To simulate a revolute constraint (or pin joint) set `length: 0` and a high `stiffness` value (e.g. `0.7` or above).\n     * If the constraint is unstable, try lowering the `stiffness` value and / or increasing `engine.constraintIterations`.\n     * For compound bodies, constraints must be applied to the parent body (not one of its parts).\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {constraint} constraint\n     */\n    Constraint.create = function(options) {\n        var constraint = options;\n\n        // if bodies defined but no points, use body centre\n        if (constraint.bodyA && !constraint.pointA)\n            constraint.pointA = { x: 0, y: 0 };\n        if (constraint.bodyB && !constraint.pointB)\n            constraint.pointB = { x: 0, y: 0 };\n\n        // calculate static length using initial world space points\n        var initialPointA = constraint.bodyA ? Vector.add(constraint.bodyA.position, constraint.pointA) : constraint.pointA,\n            initialPointB = constraint.bodyB ? Vector.add(constraint.bodyB.position, constraint.pointB) : constraint.pointB,\n            length = Vector.magnitude(Vector.sub(initialPointA, initialPointB));\n    \n        constraint.length = typeof constraint.length !== 'undefined' ? constraint.length : length;\n\n        // option defaults\n        constraint.id = constraint.id || Common.nextId();\n        constraint.label = constraint.label || 'Constraint';\n        constraint.type = 'constraint';\n        constraint.stiffness = constraint.stiffness || (constraint.length > 0 ? 1 : 0.7);\n        constraint.damping = constraint.damping || 0;\n        constraint.angularStiffness = constraint.angularStiffness || 0;\n        constraint.angleA = constraint.bodyA ? constraint.bodyA.angle : constraint.angleA;\n        constraint.angleB = constraint.bodyB ? constraint.bodyB.angle : constraint.angleB;\n        constraint.plugin = {};\n\n        // render\n        var render = {\n            visible: true,\n            lineWidth: 2,\n            strokeStyle: '#ffffff',\n            type: 'line',\n            anchors: true\n        };\n\n        if (constraint.length === 0 && constraint.stiffness > 0.1) {\n            render.type = 'pin';\n            render.anchors = false;\n        } else if (constraint.stiffness < 0.9) {\n            render.type = 'spring';\n        }\n\n        constraint.render = Common.extend(render, constraint.render);\n\n        return constraint;\n    };\n\n    /**\n     * Prepares for solving by constraint warming.\n     * @private\n     * @method preSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.preSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            body.position.x += impulse.x;\n            body.position.y += impulse.y;\n            body.angle += impulse.angle;\n        }\n    };\n\n    /**\n     * Solves all constraints in a list of collisions.\n     * @private\n     * @method solveAll\n     * @param {constraint[]} constraints\n     * @param {number} timeScale\n     */\n    Constraint.solveAll = function(constraints, timeScale) {\n        // Solve fixed constraints first.\n        for (var i = 0; i < constraints.length; i += 1) {\n            var constraint = constraints[i],\n                fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic),\n                fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (fixedA || fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n\n        // Solve free constraints last.\n        for (i = 0; i < constraints.length; i += 1) {\n            constraint = constraints[i];\n            fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic);\n            fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (!fixedA && !fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n    };\n\n    /**\n     * Solves a distance constraint with Gauss-Siedel method.\n     * @private\n     * @method solve\n     * @param {constraint} constraint\n     * @param {number} timeScale\n     */\n    Constraint.solve = function(constraint, timeScale) {\n        var bodyA = constraint.bodyA,\n            bodyB = constraint.bodyB,\n            pointA = constraint.pointA,\n            pointB = constraint.pointB;\n\n        if (!bodyA && !bodyB)\n            return;\n\n        // update reference angle\n        if (bodyA && !bodyA.isStatic) {\n            Vector.rotate(pointA, bodyA.angle - constraint.angleA, pointA);\n            constraint.angleA = bodyA.angle;\n        }\n        \n        // update reference angle\n        if (bodyB && !bodyB.isStatic) {\n            Vector.rotate(pointB, bodyB.angle - constraint.angleB, pointB);\n            constraint.angleB = bodyB.angle;\n        }\n\n        var pointAWorld = pointA,\n            pointBWorld = pointB;\n\n        if (bodyA) pointAWorld = Vector.add(bodyA.position, pointA);\n        if (bodyB) pointBWorld = Vector.add(bodyB.position, pointB);\n\n        if (!pointAWorld || !pointBWorld)\n            return;\n\n        var delta = Vector.sub(pointAWorld, pointBWorld),\n            currentLength = Vector.magnitude(delta);\n\n        // prevent singularity\n        if (currentLength < Constraint._minLength) {\n            currentLength = Constraint._minLength;\n        }\n\n        // solve distance constraint with Gauss-Siedel method\n        var difference = (currentLength - constraint.length) / currentLength,\n            stiffness = constraint.stiffness < 1 ? constraint.stiffness * timeScale : constraint.stiffness,\n            force = Vector.mult(delta, difference * stiffness),\n            massTotal = (bodyA ? bodyA.inverseMass : 0) + (bodyB ? bodyB.inverseMass : 0),\n            inertiaTotal = (bodyA ? bodyA.inverseInertia : 0) + (bodyB ? bodyB.inverseInertia : 0),\n            resistanceTotal = massTotal + inertiaTotal,\n            torque,\n            share,\n            normal,\n            normalVelocity,\n            relativeVelocity;\n\n        if (constraint.damping) {\n            var zero = Vector.create();\n            normal = Vector.div(delta, currentLength);\n\n            relativeVelocity = Vector.sub(\n                bodyB && Vector.sub(bodyB.position, bodyB.positionPrev) || zero,\n                bodyA && Vector.sub(bodyA.position, bodyA.positionPrev) || zero\n            );\n\n            normalVelocity = Vector.dot(normal, relativeVelocity);\n        }\n\n        if (bodyA && !bodyA.isStatic) {\n            share = bodyA.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyA.constraintImpulse.x -= force.x * share;\n            bodyA.constraintImpulse.y -= force.y * share;\n\n            // apply forces\n            bodyA.position.x -= force.x * share;\n            bodyA.position.y -= force.y * share;\n\n            // apply damping\n            if (constraint.damping) {\n                bodyA.positionPrev.x -= constraint.damping * normal.x * normalVelocity * share;\n                bodyA.positionPrev.y -= constraint.damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointA, force) / resistanceTotal) * Constraint._torqueDampen * bodyA.inverseInertia * (1 - constraint.angularStiffness);\n            bodyA.constraintImpulse.angle -= torque;\n            bodyA.angle -= torque;\n        }\n\n        if (bodyB && !bodyB.isStatic) {\n            share = bodyB.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyB.constraintImpulse.x += force.x * share;\n            bodyB.constraintImpulse.y += force.y * share;\n            \n            // apply forces\n            bodyB.position.x += force.x * share;\n            bodyB.position.y += force.y * share;\n\n            // apply damping\n            if (constraint.damping) {\n                bodyB.positionPrev.x += constraint.damping * normal.x * normalVelocity * share;\n                bodyB.positionPrev.y += constraint.damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointB, force) / resistanceTotal) * Constraint._torqueDampen * bodyB.inverseInertia * (1 - constraint.angularStiffness);\n            bodyB.constraintImpulse.angle += torque;\n            bodyB.angle += torque;\n        }\n\n    };\n\n    /**\n     * Performs body updates required after solving constraints.\n     * @private\n     * @method postSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.postSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            Sleeping.set(body, false);\n\n            // update geometry and reset\n            for (var j = 0; j < body.parts.length; j++) {\n                var part = body.parts[j];\n                \n                Vertices.translate(part.vertices, impulse);\n\n                if (j > 0) {\n                    part.position.x += impulse.x;\n                    part.position.y += impulse.y;\n                }\n\n                if (impulse.angle !== 0) {\n                    Vertices.rotate(part.vertices, impulse.angle, body.position);\n                    Axes.rotate(part.axes, impulse.angle);\n                    if (j > 0) {\n                        Vector.rotateAbout(part.position, impulse.angle, body.position, part.position);\n                    }\n                }\n\n                Bounds.update(part.bounds, part.vertices, body.velocity);\n            }\n\n            // dampen the cached impulse for warming next step\n            impulse.angle *= Constraint._warming;\n            impulse.x *= Constraint._warming;\n            impulse.y *= Constraint._warming;\n        }\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointA`, accounting for `constraint.bodyA`.\n     * @method pointAWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointAWorld = function(constraint) {\n        return {\n            x: (constraint.bodyA ? constraint.bodyA.position.x : 0) + constraint.pointA.x,\n            y: (constraint.bodyA ? constraint.bodyA.position.y : 0) + constraint.pointA.y\n        };\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointB`, accounting for `constraint.bodyB`.\n     * @method pointBWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointBWorld = function(constraint) {\n        return {\n            x: (constraint.bodyB ? constraint.bodyB.position.x : 0) + constraint.pointB.x,\n            y: (constraint.bodyB ? constraint.bodyB.position.y : 0) + constraint.pointB.y\n        };\n    };\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Constraint\"\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the constraint should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the constraint outline.\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the constraint outline.\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the constraint rendering type. \n     * The possible values are 'line', 'pin', 'spring'.\n     * An appropriate render type will be automatically chosen unless one is given in options.\n     *\n     * @property render.type\n     * @type string\n     * @default 'line'\n     */\n\n    /**\n     * A `Boolean` that defines if the constraint's anchor points should be rendered.\n     *\n     * @property render.anchors\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * The first possible `Body` that this constraint is attached to.\n     *\n     * @property bodyA\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The second possible `Body` that this constraint is attached to.\n     *\n     * @property bodyB\n     * @type body\n     * @default null\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.\n     *\n     * @property pointA\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyB` if defined, otherwise a world-space position.\n     *\n     * @property pointB\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that specifies the stiffness of the constraint, i.e. the rate at which it returns to its resting `constraint.length`.\n     * A value of `1` means the constraint should be very stiff.\n     * A value of `0.2` means the constraint acts like a soft spring.\n     *\n     * @property stiffness\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the damping of the constraint, \n     * i.e. the amount of resistance applied to each body based on their velocities to limit the amount of oscillation.\n     * Damping will only be apparent when the constraint also has a very low `stiffness`.\n     * A value of `0.1` means the constraint will apply heavy damping, resulting in little to no oscillation.\n     * A value of `0` means the constraint will apply no damping.\n     *\n     * @property damping\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that specifies the target resting length of the constraint. \n     * It is calculated automatically in `Constraint.create` from initial positions of the `constraint.bodyA` and `constraint.bodyB`.\n     *\n     * @property length\n     * @type number\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pair` module contains methods for creating and manipulating collision pairs.\n*\n* @class Pair\n*/\n\nvar Pair = {};\n\nmodule.exports = Pair;\n\nvar Contact = __webpack_require__(17);\n\n(function() {\n    \n    /**\n     * Creates a pair.\n     * @method create\n     * @param {collision} collision\n     * @param {number} timestamp\n     * @return {pair} A new pair\n     */\n    Pair.create = function(collision, timestamp) {\n        var bodyA = collision.bodyA,\n            bodyB = collision.bodyB,\n            parentA = collision.parentA,\n            parentB = collision.parentB;\n\n        var pair = {\n            id: Pair.id(bodyA, bodyB),\n            bodyA: bodyA,\n            bodyB: bodyB,\n            contacts: {},\n            activeContacts: [],\n            separation: 0,\n            isActive: true,\n            confirmedActive: true,\n            isSensor: bodyA.isSensor || bodyB.isSensor,\n            timeCreated: timestamp,\n            timeUpdated: timestamp,\n            inverseMass: parentA.inverseMass + parentB.inverseMass,\n            friction: Math.min(parentA.friction, parentB.friction),\n            frictionStatic: Math.max(parentA.frictionStatic, parentB.frictionStatic),\n            restitution: Math.max(parentA.restitution, parentB.restitution),\n            slop: Math.max(parentA.slop, parentB.slop)\n        };\n\n        Pair.update(pair, collision, timestamp);\n\n        return pair;\n    };\n\n    /**\n     * Updates a pair given a collision.\n     * @method update\n     * @param {pair} pair\n     * @param {collision} collision\n     * @param {number} timestamp\n     */\n    Pair.update = function(pair, collision, timestamp) {\n        var contacts = pair.contacts,\n            supports = collision.supports,\n            activeContacts = pair.activeContacts,\n            parentA = collision.parentA,\n            parentB = collision.parentB;\n        \n        pair.collision = collision;\n        pair.inverseMass = parentA.inverseMass + parentB.inverseMass;\n        pair.friction = Math.min(parentA.friction, parentB.friction);\n        pair.frictionStatic = Math.max(parentA.frictionStatic, parentB.frictionStatic);\n        pair.restitution = Math.max(parentA.restitution, parentB.restitution);\n        pair.slop = Math.max(parentA.slop, parentB.slop);\n        activeContacts.length = 0;\n        \n        if (collision.collided) {\n            for (var i = 0; i < supports.length; i++) {\n                var support = supports[i],\n                    contactId = Contact.id(support),\n                    contact = contacts[contactId];\n\n                if (contact) {\n                    activeContacts.push(contact);\n                } else {\n                    activeContacts.push(contacts[contactId] = Contact.create(support));\n                }\n            }\n\n            pair.separation = collision.depth;\n            Pair.setActive(pair, true, timestamp);\n        } else {\n            if (pair.isActive === true)\n                Pair.setActive(pair, false, timestamp);\n        }\n    };\n    \n    /**\n     * Set a pair as active or inactive.\n     * @method setActive\n     * @param {pair} pair\n     * @param {bool} isActive\n     * @param {number} timestamp\n     */\n    Pair.setActive = function(pair, isActive, timestamp) {\n        if (isActive) {\n            pair.isActive = true;\n            pair.timeUpdated = timestamp;\n        } else {\n            pair.isActive = false;\n            pair.activeContacts.length = 0;\n        }\n    };\n\n    /**\n     * Get the id for the given pair.\n     * @method id\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @return {string} Unique pairId\n     */\n    Pair.id = function(bodyA, bodyB) {\n        if (bodyA.id < bodyB.id) {\n            return 'A' + bodyA.id + 'B' + bodyB.id;\n        } else {\n            return 'A' + bodyB.id + 'B' + bodyA.id;\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Axes` module contains methods for creating and manipulating sets of axes.\n*\n* @class Axes\n*/\n\nvar Axes = {};\n\nmodule.exports = Axes;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of axes from the given vertices.\n     * @method fromVertices\n     * @param {vertices} vertices\n     * @return {axes} A new axes from the given vertices\n     */\n    Axes.fromVertices = function(vertices) {\n        var axes = {};\n\n        // find the unique axes, using edge normal gradients\n        for (var i = 0; i < vertices.length; i++) {\n            var j = (i + 1) % vertices.length, \n                normal = Vector.normalise({ \n                    x: vertices[j].y - vertices[i].y, \n                    y: vertices[i].x - vertices[j].x\n                }),\n                gradient = (normal.y === 0) ? Infinity : (normal.x / normal.y);\n            \n            // limit precision\n            gradient = gradient.toFixed(3).toString();\n            axes[gradient] = normal;\n        }\n\n        return Common.values(axes);\n    };\n\n    /**\n     * Rotates a set of axes by the given angle.\n     * @method rotate\n     * @param {axes} axes\n     * @param {number} angle\n     */\n    Axes.rotate = function(axes, angle) {\n        if (angle === 0)\n            return;\n        \n        var cos = Math.cos(angle),\n            sin = Math.sin(angle);\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i],\n                xx;\n            xx = axis.x * cos - axis.y * sin;\n            axis.y = axis.x * sin + axis.y * cos;\n            axis.x = xx;\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Bodies` module contains factory methods for creating rigid body models \n* with commonly used body configurations (such as rectangles, circles and other polygons).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Bodies\n*/\n\n// TODO: true circle bodies\n\nvar Bodies = {};\n\nmodule.exports = Bodies;\n\nvar Vertices = __webpack_require__(3);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\nvar Bounds = __webpack_require__(1);\nvar Vector = __webpack_require__(2);\n\n(function() {\n\n    /**\n     * Creates a new rigid body model with a rectangle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method rectangle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {object} [options]\n     * @return {body} A new rectangle body\n     */\n    Bodies.rectangle = function(x, y, width, height, options) {\n        options = options || {};\n\n        var rectangle = { \n            label: 'Rectangle Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath('L 0 0 L ' + width + ' 0 L ' + width + ' ' + height + ' L 0 ' + height)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            rectangle.vertices = Vertices.chamfer(rectangle.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, rectangle, options));\n    };\n    \n    /**\n     * Creates a new rigid body model with a trapezoid hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method trapezoid\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} slope\n     * @param {object} [options]\n     * @return {body} A new trapezoid body\n     */\n    Bodies.trapezoid = function(x, y, width, height, slope, options) {\n        options = options || {};\n\n        slope *= 0.5;\n        var roof = (1 - (slope * 2)) * width;\n        \n        var x1 = width * slope,\n            x2 = x1 + roof,\n            x3 = x2 + x1,\n            verticesPath;\n\n        if (slope < 0.5) {\n            verticesPath = 'L 0 0 L ' + x1 + ' ' + (-height) + ' L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        } else {\n            verticesPath = 'L 0 0 L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        }\n\n        var trapezoid = { \n            label: 'Trapezoid Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(verticesPath)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            trapezoid.vertices = Vertices.chamfer(trapezoid.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, trapezoid, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a circle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method circle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} radius\n     * @param {object} [options]\n     * @param {number} [maxSides]\n     * @return {body} A new circle body\n     */\n    Bodies.circle = function(x, y, radius, options, maxSides) {\n        options = options || {};\n\n        var circle = {\n            label: 'Circle Body',\n            circleRadius: radius\n        };\n        \n        // approximate circles with polygons until true circles implemented in SAT\n        maxSides = maxSides || 25;\n        var sides = Math.ceil(Math.max(10, Math.min(maxSides, radius)));\n\n        // optimisation: always use even number of sides (half the number of unique axes)\n        if (sides % 2 === 1)\n            sides += 1;\n\n        return Bodies.polygon(x, y, sides, radius, Common.extend({}, circle, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a regular polygon hull with the given number of sides. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method polygon\n     * @param {number} x\n     * @param {number} y\n     * @param {number} sides\n     * @param {number} radius\n     * @param {object} [options]\n     * @return {body} A new regular polygon body\n     */\n    Bodies.polygon = function(x, y, sides, radius, options) {\n        options = options || {};\n\n        if (sides < 3)\n            return Bodies.circle(x, y, radius, options);\n\n        var theta = 2 * Math.PI / sides,\n            path = '',\n            offset = theta * 0.5;\n\n        for (var i = 0; i < sides; i += 1) {\n            var angle = offset + (i * theta),\n                xx = Math.cos(angle) * radius,\n                yy = Math.sin(angle) * radius;\n\n            path += 'L ' + xx.toFixed(3) + ' ' + yy.toFixed(3) + ' ';\n        }\n\n        var polygon = { \n            label: 'Polygon Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(path)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            polygon.vertices = Vertices.chamfer(polygon.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, polygon, options));\n    };\n\n    /**\n     * Utility to create a compound body based on set(s) of vertices.\n     * \n     * _Note:_ To optionally enable automatic concave vertices decomposition the [poly-decomp](https://github.com/schteppe/poly-decomp.js) \n     * package must be first installed and provided see `Common.setDecomp`, otherwise the convex hull of each vertex set will be used.\n     * \n     * The resulting vertices are reorientated about their centre of mass,\n     * and offset such that `body.position` corresponds to this point.\n     * \n     * The resulting offset may be found if needed by subtracting `body.bounds` from the original input bounds.\n     * To later move the centre of mass see `Body.setCentre`.\n     * \n     * Note that automatic conconcave decomposition results are not always optimal. \n     * For best results, simplify the input vertices as much as possible first.\n     * By default this function applies some addtional simplification to help.\n     * \n     * Some outputs may also require further manual processing afterwards to be robust.\n     * In particular some parts may need to be overlapped to avoid collision gaps.\n     * Thin parts and sharp points should be avoided or removed where possible.\n     *\n     * The options parameter object specifies any `Matter.Body` properties you wish to override the defaults.\n     * \n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method fromVertices\n     * @param {number} x\n     * @param {number} y\n     * @param {array} vertexSets One or more arrays of vertex points e.g. `[[{ x: 0, y: 0 }...], ...]`.\n     * @param {object} [options] The body options.\n     * @param {bool} [flagInternal=false] Optionally marks internal edges with `isInternal`.\n     * @param {number} [removeCollinear=0.01] Threshold when simplifying vertices along the same edge.\n     * @param {number} [minimumArea=10] Threshold when removing small parts.\n     * @param {number} [removeDuplicatePoints=0.01] Threshold when simplifying nearby vertices.\n     * @return {body}\n     */\n    Bodies.fromVertices = function(x, y, vertexSets, options, flagInternal, removeCollinear, minimumArea, removeDuplicatePoints) {\n        var decomp = Common.getDecomp(),\n            canDecomp,\n            body,\n            parts,\n            isConvex,\n            isConcave,\n            vertices,\n            i,\n            j,\n            k,\n            v,\n            z;\n\n        // check decomp is as expected\n        canDecomp = Boolean(decomp && decomp.quickDecomp);\n\n        options = options || {};\n        parts = [];\n\n        flagInternal = typeof flagInternal !== 'undefined' ? flagInternal : false;\n        removeCollinear = typeof removeCollinear !== 'undefined' ? removeCollinear : 0.01;\n        minimumArea = typeof minimumArea !== 'undefined' ? minimumArea : 10;\n        removeDuplicatePoints = typeof removeDuplicatePoints !== 'undefined' ? removeDuplicatePoints : 0.01;\n\n        // ensure vertexSets is an array of arrays\n        if (!Common.isArray(vertexSets[0])) {\n            vertexSets = [vertexSets];\n        }\n\n        for (v = 0; v < vertexSets.length; v += 1) {\n            vertices = vertexSets[v];\n            isConvex = Vertices.isConvex(vertices);\n            isConcave = !isConvex;\n\n            if (isConcave && !canDecomp) {\n                Common.warnOnce(\n                    'Bodies.fromVertices: Install the \\'poly-decomp\\' library and use Common.setDecomp or provide \\'decomp\\' as a global to decompose concave vertices.'\n                );\n            }\n\n            if (isConvex || !canDecomp) {\n                if (isConvex) {\n                    vertices = Vertices.clockwiseSort(vertices);\n                } else {\n                    // fallback to convex hull when decomposition is not possible\n                    vertices = Vertices.hull(vertices);\n                }\n\n                parts.push({\n                    position: { x: x, y: y },\n                    vertices: vertices\n                });\n            } else {\n                // initialise a decomposition\n                var concave = vertices.map(function(vertex) {\n                    return [vertex.x, vertex.y];\n                });\n\n                // vertices are concave and simple, we can decompose into parts\n                decomp.makeCCW(concave);\n                if (removeCollinear !== false)\n                    decomp.removeCollinearPoints(concave, removeCollinear);\n                if (removeDuplicatePoints !== false && decomp.removeDuplicatePoints)\n                    decomp.removeDuplicatePoints(concave, removeDuplicatePoints);\n\n                // use the quick decomposition algorithm (Bayazit)\n                var decomposed = decomp.quickDecomp(concave);\n\n                // for each decomposed chunk\n                for (i = 0; i < decomposed.length; i++) {\n                    var chunk = decomposed[i];\n\n                    // convert vertices into the correct structure\n                    var chunkVertices = chunk.map(function(vertices) {\n                        return {\n                            x: vertices[0],\n                            y: vertices[1]\n                        };\n                    });\n\n                    // skip small chunks\n                    if (minimumArea > 0 && Vertices.area(chunkVertices) < minimumArea)\n                        continue;\n\n                    // create a compound part\n                    parts.push({\n                        position: Vertices.centre(chunkVertices),\n                        vertices: chunkVertices\n                    });\n                }\n            }\n        }\n\n        // create body parts\n        for (i = 0; i < parts.length; i++) {\n            parts[i] = Body.create(Common.extend(parts[i], options));\n        }\n\n        // flag internal edges (coincident part edges)\n        if (flagInternal) {\n            var coincident_max_dist = 5;\n\n            for (i = 0; i < parts.length; i++) {\n                var partA = parts[i];\n\n                for (j = i + 1; j < parts.length; j++) {\n                    var partB = parts[j];\n\n                    if (Bounds.overlaps(partA.bounds, partB.bounds)) {\n                        var pav = partA.vertices,\n                            pbv = partB.vertices;\n\n                        // iterate vertices of both parts\n                        for (k = 0; k < partA.vertices.length; k++) {\n                            for (z = 0; z < partB.vertices.length; z++) {\n                                // find distances between the vertices\n                                var da = Vector.magnitudeSquared(Vector.sub(pav[(k + 1) % pav.length], pbv[z])),\n                                    db = Vector.magnitudeSquared(Vector.sub(pav[k], pbv[(z + 1) % pbv.length]));\n\n                                // if both vertices are very close, consider the edge concident (internal)\n                                if (da < coincident_max_dist && db < coincident_max_dist) {\n                                    pav[k].isInternal = true;\n                                    pbv[z].isInternal = true;\n                                }\n                            }\n                        }\n\n                    }\n                }\n            }\n        }\n\n        if (parts.length > 1) {\n            // create the parent body to be returned, that contains generated compound parts\n            body = Body.create(Common.extend({ parts: parts.slice(0) }, options));\n\n            // offset such that body.position is at the centre off mass\n            Body.setPosition(body, { x: x, y: y });\n\n            return body;\n        } else {\n            return parts[0];\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Mouse` module contains methods for creating and manipulating mouse inputs.\n*\n* @class Mouse\n*/\n\nvar Mouse = {};\n\nmodule.exports = Mouse;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a mouse input.\n     * @method create\n     * @param {HTMLElement} element\n     * @return {mouse} A new mouse\n     */\n    Mouse.create = function(element) {\n        var mouse = {};\n\n        if (!element) {\n            Common.log('Mouse.create: element was undefined, defaulting to document.body', 'warn');\n        }\n        \n        mouse.element = element || document.body;\n        mouse.absolute = { x: 0, y: 0 };\n        mouse.position = { x: 0, y: 0 };\n        mouse.mousedownPosition = { x: 0, y: 0 };\n        mouse.mouseupPosition = { x: 0, y: 0 };\n        mouse.offset = { x: 0, y: 0 };\n        mouse.scale = { x: 1, y: 1 };\n        mouse.wheelDelta = 0;\n        mouse.button = -1;\n        mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n        mouse.sourceEvents = {\n            mousemove: null,\n            mousedown: null,\n            mouseup: null,\n            mousewheel: null\n        };\n        \n        mouse.mousemove = function(event) { \n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.sourceEvents.mousemove = event;\n        };\n        \n        mouse.mousedown = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            } else {\n                mouse.button = event.button;\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mousedownPosition.x = mouse.position.x;\n            mouse.mousedownPosition.y = mouse.position.y;\n            mouse.sourceEvents.mousedown = event;\n        };\n        \n        mouse.mouseup = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                event.preventDefault();\n            }\n            \n            mouse.button = -1;\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mouseupPosition.x = mouse.position.x;\n            mouse.mouseupPosition.y = mouse.position.y;\n            mouse.sourceEvents.mouseup = event;\n        };\n\n        mouse.mousewheel = function(event) {\n            mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n            event.preventDefault();\n        };\n\n        Mouse.setElement(mouse, mouse.element);\n\n        return mouse;\n    };\n\n    /**\n     * Sets the element the mouse is bound to (and relative to).\n     * @method setElement\n     * @param {mouse} mouse\n     * @param {HTMLElement} element\n     */\n    Mouse.setElement = function(mouse, element) {\n        mouse.element = element;\n\n        element.addEventListener('mousemove', mouse.mousemove);\n        element.addEventListener('mousedown', mouse.mousedown);\n        element.addEventListener('mouseup', mouse.mouseup);\n        \n        element.addEventListener('mousewheel', mouse.mousewheel);\n        element.addEventListener('DOMMouseScroll', mouse.mousewheel);\n\n        element.addEventListener('touchmove', mouse.mousemove);\n        element.addEventListener('touchstart', mouse.mousedown);\n        element.addEventListener('touchend', mouse.mouseup);\n    };\n\n    /**\n     * Clears all captured source events.\n     * @method clearSourceEvents\n     * @param {mouse} mouse\n     */\n    Mouse.clearSourceEvents = function(mouse) {\n        mouse.sourceEvents.mousemove = null;\n        mouse.sourceEvents.mousedown = null;\n        mouse.sourceEvents.mouseup = null;\n        mouse.sourceEvents.mousewheel = null;\n        mouse.wheelDelta = 0;\n    };\n\n    /**\n     * Sets the mouse position offset.\n     * @method setOffset\n     * @param {mouse} mouse\n     * @param {vector} offset\n     */\n    Mouse.setOffset = function(mouse, offset) {\n        mouse.offset.x = offset.x;\n        mouse.offset.y = offset.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n\n    /**\n     * Sets the mouse position scale.\n     * @method setScale\n     * @param {mouse} mouse\n     * @param {vector} scale\n     */\n    Mouse.setScale = function(mouse, scale) {\n        mouse.scale.x = scale.x;\n        mouse.scale.y = scale.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n    \n    /**\n     * Gets the mouse position relative to an element given a screen pixel ratio.\n     * @method _getRelativeMousePosition\n     * @private\n     * @param {} event\n     * @param {} element\n     * @param {number} pixelRatio\n     * @return {}\n     */\n    Mouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n        var elementBounds = element.getBoundingClientRect(),\n            rootNode = (document.documentElement || document.body.parentNode || document.body),\n            scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n            scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n            touches = event.changedTouches,\n            x, y;\n        \n        if (touches) {\n            x = touches[0].pageX - elementBounds.left - scrollX;\n            y = touches[0].pageY - elementBounds.top - scrollY;\n        } else {\n            x = event.pageX - elementBounds.left - scrollX;\n            y = event.pageY - elementBounds.top - scrollY;\n        }\n\n        return { \n            x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n            y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n        };\n    };\n\n})();\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Detector` module contains methods for detecting collisions given a set of pairs.\n*\n* @class Detector\n*/\n\n// TODO: speculative contacts\n\nvar Detector = {};\n\nmodule.exports = Detector;\n\nvar SAT = __webpack_require__(14);\nvar Pair = __webpack_require__(9);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    /**\n     * Finds all collisions given a list of pairs.\n     * @method collisions\n     * @param {pair[]} broadphasePairs\n     * @param {engine} engine\n     * @return {array} collisions\n     */\n    Detector.collisions = function(broadphasePairs, engine) {\n        var collisions = [],\n            pairsTable = engine.pairs.table;\n\n        for (var i = 0; i < broadphasePairs.length; i++) {\n            var bodyA = broadphasePairs[i][0], \n                bodyB = broadphasePairs[i][1];\n\n            if ((bodyA.isStatic || bodyA.isSleeping) && (bodyB.isStatic || bodyB.isSleeping))\n                continue;\n            \n            if (!Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter))\n                continue;\n\n            // mid phase\n            if (Bounds.overlaps(bodyA.bounds, bodyB.bounds)) {\n                for (var j = bodyA.parts.length > 1 ? 1 : 0; j < bodyA.parts.length; j++) {\n                    var partA = bodyA.parts[j];\n\n                    for (var k = bodyB.parts.length > 1 ? 1 : 0; k < bodyB.parts.length; k++) {\n                        var partB = bodyB.parts[k];\n\n                        if ((partA === bodyA && partB === bodyB) || Bounds.overlaps(partA.bounds, partB.bounds)) {\n                            // find a previous collision we could reuse\n                            var pairId = Pair.id(partA, partB),\n                                pair = pairsTable[pairId],\n                                previousCollision;\n\n                            if (pair && pair.isActive) {\n                                previousCollision = pair.collision;\n                            } else {\n                                previousCollision = null;\n                            }\n\n                            // narrow phase\n                            var collision = SAT.collides(partA, partB, previousCollision);\n\n                            if (collision.collided) {\n                                collisions.push(collision);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns `true` if both supplied collision filters will allow a collision to occur.\n     * See `body.collisionFilter` for more information.\n     * @method canCollide\n     * @param {} filterA\n     * @param {} filterB\n     * @return {bool} `true` if collision can occur\n     */\n    Detector.canCollide = function(filterA, filterB) {\n        if (filterA.group === filterB.group && filterA.group !== 0)\n            return filterA.group > 0;\n\n        return (filterA.mask & filterB.category) !== 0 && (filterB.mask & filterA.category) !== 0;\n    };\n\n})();\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.SAT` module contains methods for detecting collisions using the Separating Axis Theorem.\n*\n* @class SAT\n*/\n\n// TODO: true circles and curves\n\nvar SAT = {};\n\nmodule.exports = SAT;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\n\n(function() {\n\n    /**\n     * Detect collision between two bodies using the Separating Axis Theorem.\n     * @method collides\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @param {collision} previousCollision\n     * @return {collision} collision\n     */\n    SAT.collides = function(bodyA, bodyB, previousCollision) {\n        var overlapAB,\n            overlapBA, \n            minOverlap,\n            collision,\n            canReusePrevCol = false;\n\n        if (previousCollision) {\n            // estimate total motion\n            var parentA = bodyA.parent,\n                parentB = bodyB.parent,\n                motion = parentA.speed * parentA.speed + parentA.angularSpeed * parentA.angularSpeed\n                       + parentB.speed * parentB.speed + parentB.angularSpeed * parentB.angularSpeed;\n\n            // we may be able to (partially) reuse collision result \n            // but only safe if collision was resting\n            canReusePrevCol = previousCollision && previousCollision.collided && motion < 0.2;\n\n            // reuse collision object\n            collision = previousCollision;\n        } else {\n            collision = { collided: false, bodyA: bodyA, bodyB: bodyB };\n        }\n\n        if (previousCollision && canReusePrevCol) {\n            // if we can reuse the collision result\n            // we only need to test the previously found axis\n            var axisBodyA = collision.axisBody,\n                axisBodyB = axisBodyA === bodyA ? bodyB : bodyA,\n                axes = [axisBodyA.axes[previousCollision.axisNumber]];\n\n            minOverlap = SAT._overlapAxes(axisBodyA.vertices, axisBodyB.vertices, axes);\n            collision.reused = true;\n\n            if (minOverlap.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n        } else {\n            // if we can't reuse a result, perform a full SAT test\n\n            overlapAB = SAT._overlapAxes(bodyA.vertices, bodyB.vertices, bodyA.axes);\n\n            if (overlapAB.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n\n            overlapBA = SAT._overlapAxes(bodyB.vertices, bodyA.vertices, bodyB.axes);\n\n            if (overlapBA.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n\n            if (overlapAB.overlap < overlapBA.overlap) {\n                minOverlap = overlapAB;\n                collision.axisBody = bodyA;\n            } else {\n                minOverlap = overlapBA;\n                collision.axisBody = bodyB;\n            }\n\n            // important for reuse later\n            collision.axisNumber = minOverlap.axisNumber;\n        }\n\n        collision.bodyA = bodyA.id < bodyB.id ? bodyA : bodyB;\n        collision.bodyB = bodyA.id < bodyB.id ? bodyB : bodyA;\n        collision.collided = true;\n        collision.depth = minOverlap.overlap;\n        collision.parentA = collision.bodyA.parent;\n        collision.parentB = collision.bodyB.parent;\n        \n        bodyA = collision.bodyA;\n        bodyB = collision.bodyB;\n\n        // ensure normal is facing away from bodyA\n        if (Vector.dot(minOverlap.axis, Vector.sub(bodyB.position, bodyA.position)) < 0) {\n            collision.normal = {\n                x: minOverlap.axis.x,\n                y: minOverlap.axis.y\n            };\n        } else {\n            collision.normal = {\n                x: -minOverlap.axis.x,\n                y: -minOverlap.axis.y\n            };\n        }\n\n        collision.tangent = Vector.perp(collision.normal);\n\n        collision.penetration = collision.penetration || {};\n        collision.penetration.x = collision.normal.x * collision.depth;\n        collision.penetration.y = collision.normal.y * collision.depth; \n\n        // find support points, there is always either exactly one or two\n        var verticesB = SAT._findSupports(bodyA, bodyB, collision.normal),\n            supports = [];\n\n        // find the supports from bodyB that are inside bodyA\n        if (Vertices.contains(bodyA.vertices, verticesB[0]))\n            supports.push(verticesB[0]);\n\n        if (Vertices.contains(bodyA.vertices, verticesB[1]))\n            supports.push(verticesB[1]);\n\n        // find the supports from bodyA that are inside bodyB\n        if (supports.length < 2) {\n            var verticesA = SAT._findSupports(bodyB, bodyA, Vector.neg(collision.normal));\n                \n            if (Vertices.contains(bodyB.vertices, verticesA[0]))\n                supports.push(verticesA[0]);\n\n            if (supports.length < 2 && Vertices.contains(bodyB.vertices, verticesA[1]))\n                supports.push(verticesA[1]);\n        }\n\n        // account for the edge case of overlapping but no vertex containment\n        if (supports.length < 1)\n            supports = [verticesB[0]];\n        \n        collision.supports = supports;\n\n        return collision;\n    };\n\n    /**\n     * Find the overlap between two sets of vertices.\n     * @method _overlapAxes\n     * @private\n     * @param {} verticesA\n     * @param {} verticesB\n     * @param {} axes\n     * @return result\n     */\n    SAT._overlapAxes = function(verticesA, verticesB, axes) {\n        var projectionA = Vector._temp[0], \n            projectionB = Vector._temp[1],\n            result = { overlap: Number.MAX_VALUE },\n            overlap,\n            axis;\n\n        for (var i = 0; i < axes.length; i++) {\n            axis = axes[i];\n\n            SAT._projectToAxis(projectionA, verticesA, axis);\n            SAT._projectToAxis(projectionB, verticesB, axis);\n\n            overlap = Math.min(projectionA.max - projectionB.min, projectionB.max - projectionA.min);\n\n            if (overlap <= 0) {\n                result.overlap = overlap;\n                return result;\n            }\n\n            if (overlap < result.overlap) {\n                result.overlap = overlap;\n                result.axis = axis;\n                result.axisNumber = i;\n            }\n        }\n\n        return result;\n    };\n\n    /**\n     * Projects vertices on an axis and returns an interval.\n     * @method _projectToAxis\n     * @private\n     * @param {} projection\n     * @param {} vertices\n     * @param {} axis\n     */\n    SAT._projectToAxis = function(projection, vertices, axis) {\n        var min = Vector.dot(vertices[0], axis),\n            max = min;\n\n        for (var i = 1; i < vertices.length; i += 1) {\n            var dot = Vector.dot(vertices[i], axis);\n\n            if (dot > max) { \n                max = dot; \n            } else if (dot < min) { \n                min = dot; \n            }\n        }\n\n        projection.min = min;\n        projection.max = max;\n    };\n    \n    /**\n     * Finds supporting vertices given two bodies along a given direction using hill-climbing.\n     * @method _findSupports\n     * @private\n     * @param {} bodyA\n     * @param {} bodyB\n     * @param {} normal\n     * @return [vector]\n     */\n    SAT._findSupports = function(bodyA, bodyB, normal) {\n        var nearestDistance = Number.MAX_VALUE,\n            vertexToBody = Vector._temp[0],\n            vertices = bodyB.vertices,\n            bodyAPosition = bodyA.position,\n            distance,\n            vertex,\n            vertexA,\n            vertexB;\n\n        // find closest vertex on bodyB\n        for (var i = 0; i < vertices.length; i++) {\n            vertex = vertices[i];\n            vertexToBody.x = vertex.x - bodyAPosition.x;\n            vertexToBody.y = vertex.y - bodyAPosition.y;\n            distance = -Vector.dot(normal, vertexToBody);\n\n            if (distance < nearestDistance) {\n                nearestDistance = distance;\n                vertexA = vertex;\n            }\n        }\n\n        // find next closest vertex using the two connected to it\n        var prevIndex = vertexA.index - 1 >= 0 ? vertexA.index - 1 : vertices.length - 1;\n        vertex = vertices[prevIndex];\n        vertexToBody.x = vertex.x - bodyAPosition.x;\n        vertexToBody.y = vertex.y - bodyAPosition.y;\n        nearestDistance = -Vector.dot(normal, vertexToBody);\n        vertexB = vertex;\n\n        var nextIndex = (vertexA.index + 1) % vertices.length;\n        vertex = vertices[nextIndex];\n        vertexToBody.x = vertex.x - bodyAPosition.x;\n        vertexToBody.y = vertex.y - bodyAPosition.y;\n        distance = -Vector.dot(normal, vertexToBody);\n        if (distance < nearestDistance) {\n            vertexB = vertex;\n        }\n\n        return [vertexA, vertexB];\n    };\n\n})();\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Plugin` module contains functions for registering and installing plugins on modules.\n*\n* @class Plugin\n*/\n\nvar Plugin = {};\n\nmodule.exports = Plugin;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Plugin._registry = {};\n\n    /**\n     * Registers a plugin object so it can be resolved later by name.\n     * @method register\n     * @param plugin {} The plugin to register.\n     * @return {object} The plugin.\n     */\n    Plugin.register = function(plugin) {\n        if (!Plugin.isPlugin(plugin)) {\n            Common.warn('Plugin.register:', Plugin.toString(plugin), 'does not implement all required fields.');\n        }\n\n        if (plugin.name in Plugin._registry) {\n            var registered = Plugin._registry[plugin.name],\n                pluginVersion = Plugin.versionParse(plugin.version).number,\n                registeredVersion = Plugin.versionParse(registered.version).number;\n\n            if (pluginVersion > registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'was upgraded to', Plugin.toString(plugin));\n                Plugin._registry[plugin.name] = plugin;\n            } else if (pluginVersion < registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'can not be downgraded to', Plugin.toString(plugin));\n            } else if (plugin !== registered) {\n                Common.warn('Plugin.register:', Plugin.toString(plugin), 'is already registered to different plugin object');\n            }\n        } else {\n            Plugin._registry[plugin.name] = plugin;\n        }\n\n        return plugin;\n    };\n\n    /**\n     * Resolves a dependency to a plugin object from the registry if it exists. \n     * The `dependency` may contain a version, but only the name matters when resolving.\n     * @method resolve\n     * @param dependency {string} The dependency.\n     * @return {object} The plugin if resolved, otherwise `undefined`.\n     */\n    Plugin.resolve = function(dependency) {\n        return Plugin._registry[Plugin.dependencyParse(dependency).name];\n    };\n\n    /**\n     * Returns a pretty printed plugin name and version.\n     * @method toString\n     * @param plugin {} The plugin.\n     * @return {string} Pretty printed plugin name and version.\n     */\n    Plugin.toString = function(plugin) {\n        return typeof plugin === 'string' ? plugin : (plugin.name || 'anonymous') + '@' + (plugin.version || plugin.range || '0.0.0');\n    };\n\n    /**\n     * Returns `true` if the object meets the minimum standard to be considered a plugin.\n     * This means it must define the following properties:\n     * - `name`\n     * - `version`\n     * - `install`\n     * @method isPlugin\n     * @param obj {} The obj to test.\n     * @return {boolean} `true` if the object can be considered a plugin otherwise `false`.\n     */\n    Plugin.isPlugin = function(obj) {\n        return obj && obj.name && obj.version && obj.install;\n    };\n\n    /**\n     * Returns `true` if a plugin with the given `name` been installed on `module`.\n     * @method isUsed\n     * @param module {} The module.\n     * @param name {string} The plugin name.\n     * @return {boolean} `true` if a plugin with the given `name` been installed on `module`, otherwise `false`.\n     */\n    Plugin.isUsed = function(module, name) {\n        return module.used.indexOf(name) > -1;\n    };\n\n    /**\n     * Returns `true` if `plugin.for` is applicable to `module` by comparing against `module.name` and `module.version`.\n     * If `plugin.for` is not specified then it is assumed to be applicable.\n     * The value of `plugin.for` is a string of the format `'module-name'` or `'module-name@version'`.\n     * @method isFor\n     * @param plugin {} The plugin.\n     * @param module {} The module.\n     * @return {boolean} `true` if `plugin.for` is applicable to `module`, otherwise `false`.\n     */\n    Plugin.isFor = function(plugin, module) {\n        var parsed = plugin.for && Plugin.dependencyParse(plugin.for);\n        return !plugin.for || (module.name === parsed.name && Plugin.versionSatisfies(module.version, parsed.range));\n    };\n\n    /**\n     * Installs the plugins by calling `plugin.install` on each plugin specified in `plugins` if passed, otherwise `module.uses`.\n     * For installing plugins on `Matter` see the convenience function `Matter.use`.\n     * Plugins may be specified either by their name or a reference to the plugin object.\n     * Plugins themselves may specify further dependencies, but each plugin is installed only once.\n     * Order is important, a topological sort is performed to find the best resulting order of installation.\n     * This sorting attempts to satisfy every dependency's requested ordering, but may not be exact in all cases.\n     * This function logs the resulting status of each dependency in the console, along with any warnings.\n     * - A green tick  indicates a dependency was resolved and installed.\n     * - An orange diamond  indicates a dependency was resolved but a warning was thrown for it or one if its dependencies.\n     * - A red cross  indicates a dependency could not be resolved.\n     * Avoid calling this function multiple times on the same module unless you intend to manually control installation order.\n     * @method use\n     * @param module {} The module install plugins on.\n     * @param [plugins=module.uses] {} The plugins to install on module (optional, defaults to `module.uses`).\n     */\n    Plugin.use = function(module, plugins) {\n        module.uses = (module.uses || []).concat(plugins || []);\n\n        if (module.uses.length === 0) {\n            Common.warn('Plugin.use:', Plugin.toString(module), 'does not specify any dependencies to install.');\n            return;\n        }\n\n        var dependencies = Plugin.dependencies(module),\n            sortedDependencies = Common.topologicalSort(dependencies),\n            status = [];\n\n        for (var i = 0; i < sortedDependencies.length; i += 1) {\n            if (sortedDependencies[i] === module.name) {\n                continue;\n            }\n\n            var plugin = Plugin.resolve(sortedDependencies[i]);\n\n            if (!plugin) {\n                status.push(' ' + sortedDependencies[i]);\n                continue;\n            }\n\n            if (Plugin.isUsed(module, plugin.name)) {\n                continue;\n            }\n\n            if (!Plugin.isFor(plugin, module)) {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'is for', plugin.for, 'but installed on', Plugin.toString(module) + '.');\n                plugin._warned = true;\n            }\n\n            if (plugin.install) {\n                plugin.install(module);\n            } else {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'does not specify an install function.');\n                plugin._warned = true;\n            }\n\n            if (plugin._warned) {\n                status.push(' ' + Plugin.toString(plugin));\n                delete plugin._warned;\n            } else {\n                status.push(' ' + Plugin.toString(plugin));\n            }\n\n            module.used.push(plugin.name);\n        }\n\n        if (status.length > 0) {\n            Common.info(status.join('  '));\n        }\n    };\n\n    /**\n     * Recursively finds all of a module's dependencies and returns a flat dependency graph.\n     * @method dependencies\n     * @param module {} The module.\n     * @return {object} A dependency graph.\n     */\n    Plugin.dependencies = function(module, tracked) {\n        var parsedBase = Plugin.dependencyParse(module),\n            name = parsedBase.name;\n\n        tracked = tracked || {};\n\n        if (name in tracked) {\n            return;\n        }\n\n        module = Plugin.resolve(module) || module;\n\n        tracked[name] = Common.map(module.uses || [], function(dependency) {\n            if (Plugin.isPlugin(dependency)) {\n                Plugin.register(dependency);\n            }\n\n            var parsed = Plugin.dependencyParse(dependency),\n                resolved = Plugin.resolve(dependency);\n\n            if (resolved && !Plugin.versionSatisfies(resolved.version, parsed.range)) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(resolved), 'does not satisfy',\n                    Plugin.toString(parsed), 'used by', Plugin.toString(parsedBase) + '.'\n                );\n\n                resolved._warned = true;\n                module._warned = true;\n            } else if (!resolved) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(dependency), 'used by',\n                    Plugin.toString(parsedBase), 'could not be resolved.'\n                );\n\n                module._warned = true;\n            }\n\n            return parsed.name;\n        });\n\n        for (var i = 0; i < tracked[name].length; i += 1) {\n            Plugin.dependencies(tracked[name][i], tracked);\n        }\n\n        return tracked;\n    };\n\n    /**\n     * Parses a dependency string into its components.\n     * The `dependency` is a string of the format `'module-name'` or `'module-name@version'`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * This function can also handle dependencies that are already resolved (e.g. a module object).\n     * @method dependencyParse\n     * @param dependency {string} The dependency of the format `'module-name'` or `'module-name@version'`.\n     * @return {object} The dependency parsed into its components.\n     */\n    Plugin.dependencyParse = function(dependency) {\n        if (Common.isString(dependency)) {\n            var pattern = /^[\\w-]+(@(\\*|[\\^~]?\\d+\\.\\d+\\.\\d+(-[0-9A-Za-z-]+)?))?$/;\n\n            if (!pattern.test(dependency)) {\n                Common.warn('Plugin.dependencyParse:', dependency, 'is not a valid dependency string.');\n            }\n\n            return {\n                name: dependency.split('@')[0],\n                range: dependency.split('@')[1] || '*'\n            };\n        }\n\n        return {\n            name: dependency.name,\n            range: dependency.range || dependency.version\n        };\n    };\n\n    /**\n     * Parses a version string into its components.  \n     * Versions are strictly of the format `x.y.z` (as in [semver](http://semver.org/)).\n     * Versions may optionally have a prerelease tag in the format `x.y.z-alpha`.\n     * Ranges are a strict subset of [npm ranges](https://docs.npmjs.com/misc/semver#advanced-range-syntax).\n     * Only the following range types are supported:\n     * - Tilde ranges e.g. `~1.2.3`\n     * - Caret ranges e.g. `^1.2.3`\n     * - Greater than ranges e.g. `>1.2.3`\n     * - Greater than or equal ranges e.g. `>=1.2.3`\n     * - Exact version e.g. `1.2.3`\n     * - Any version `*`\n     * @method versionParse\n     * @param range {string} The version string.\n     * @return {object} The version range parsed into its components.\n     */\n    Plugin.versionParse = function(range) {\n        var pattern = /^(\\*)|(\\^|~|>=|>)?\\s*((\\d+)\\.(\\d+)\\.(\\d+))(-[0-9A-Za-z-]+)?$/;\n\n        if (!pattern.test(range)) {\n            Common.warn('Plugin.versionParse:', range, 'is not a valid version or range.');\n        }\n\n        var parts = pattern.exec(range);\n        var major = Number(parts[4]);\n        var minor = Number(parts[5]);\n        var patch = Number(parts[6]);\n\n        return {\n            isRange: Boolean(parts[1] || parts[2]),\n            version: parts[3],\n            range: range,\n            operator: parts[1] || parts[2] || '',\n            major: major,\n            minor: minor,\n            patch: patch,\n            parts: [major, minor, patch],\n            prerelease: parts[7],\n            number: major * 1e8 + minor * 1e4 + patch\n        };\n    };\n\n    /**\n     * Returns `true` if `version` satisfies the given `range`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * If a version or range is not specified, then any version (`*`) is assumed to satisfy.\n     * @method versionSatisfies\n     * @param version {string} The version string.\n     * @param range {string} The range string.\n     * @return {boolean} `true` if `version` satisfies `range`, otherwise `false`.\n     */\n    Plugin.versionSatisfies = function(version, range) {\n        range = range || '*';\n\n        var r = Plugin.versionParse(range),\n            v = Plugin.versionParse(version);\n\n        if (r.isRange) {\n            if (r.operator === '*' || version === '*') {\n                return true;\n            }\n\n            if (r.operator === '>') {\n                return v.number > r.number;\n            }\n\n            if (r.operator === '>=') {\n                return v.number >= r.number;\n            }\n\n            if (r.operator === '~') {\n                return v.major === r.major && v.minor === r.minor && v.patch >= r.patch;\n            }\n\n            if (r.operator === '^') {\n                if (r.major > 0) {\n                    return v.major === r.major && v.number >= r.number;\n                }\n\n                if (r.minor > 0) {\n                    return v.minor === r.minor && v.patch >= r.patch;\n                }\n\n                return v.patch === r.patch;\n            }\n        }\n\n        return version === range || version === '*';\n    };\n\n})();\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Render` module is a simple canvas based renderer for visualising instances of `Matter.Engine`.\n* It is intended for development and debugging purposes, but may also be suitable for simple games.\n* It includes a number of drawing options including wireframe, vector with support for sprites and viewports.\n*\n* @class Render\n*/\n\nvar Render = {};\n\nmodule.exports = Render;\n\nvar Common = __webpack_require__(0);\nvar Composite = __webpack_require__(5);\nvar Bounds = __webpack_require__(1);\nvar Events = __webpack_require__(4);\nvar Vector = __webpack_require__(2);\nvar Mouse = __webpack_require__(12);\n\n(function() {\n\n    var _requestAnimationFrame,\n        _cancelAnimationFrame;\n\n    if (typeof window !== 'undefined') {\n        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame\n                                      || function(callback){ window.setTimeout(function() { callback(Common.now()); }, 1000 / 60); };\n\n        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame\n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n    }\n\n    Render._goodFps = 30;\n    Render._goodDelta = 1000 / 60;\n\n    /**\n     * Creates a new renderer. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {render} A new renderer\n     */\n    Render.create = function(options) {\n        var defaults = {\n            controller: Render,\n            engine: null,\n            element: null,\n            canvas: null,\n            mouse: null,\n            frameRequestId: null,\n            timing: {\n                historySize: 60,\n                delta: 0,\n                deltaHistory: [],\n                lastTime: 0,\n                lastTimestamp: 0,\n                lastElapsed: 0,\n                timestampElapsed: 0,\n                timestampElapsedHistory: [],\n                engineDeltaHistory: [],\n                engineElapsedHistory: [],\n                elapsedHistory: []\n            },\n            options: {\n                width: 800,\n                height: 600,\n                pixelRatio: 1,\n                background: '#14151f',\n                wireframeBackground: '#14151f',\n                hasBounds: !!options.bounds,\n                enabled: true,\n                wireframes: true,\n                showSleeping: true,\n                showDebug: false,\n                showStats: false,\n                showPerformance: false,\n                showBroadphase: false,\n                showBounds: false,\n                showVelocity: false,\n                showCollisions: false,\n                showSeparations: false,\n                showAxes: false,\n                showPositions: false,\n                showAngleIndicator: false,\n                showIds: false,\n                showVertexNumbers: false,\n                showConvexHulls: false,\n                showInternalEdges: false,\n                showMousePosition: false\n            }\n        };\n\n        var render = Common.extend(defaults, options);\n\n        if (render.canvas) {\n            render.canvas.width = render.options.width || render.canvas.width;\n            render.canvas.height = render.options.height || render.canvas.height;\n        }\n\n        render.mouse = options.mouse;\n        render.engine = options.engine;\n        render.canvas = render.canvas || _createCanvas(render.options.width, render.options.height);\n        render.context = render.canvas.getContext('2d');\n        render.textures = {};\n\n        render.bounds = render.bounds || {\n            min: {\n                x: 0,\n                y: 0\n            },\n            max: {\n                x: render.canvas.width,\n                y: render.canvas.height\n            }\n        };\n\n        if (render.options.pixelRatio !== 1) {\n            Render.setPixelRatio(render, render.options.pixelRatio);\n        }\n\n        if (Common.isElement(render.element)) {\n            render.element.appendChild(render.canvas);\n        } else if (!render.canvas.parentNode) {\n            Common.log('Render.create: options.element was undefined, render.canvas was created but not appended', 'warn');\n        }\n\n        return render;\n    };\n\n    /**\n     * Continuously updates the render canvas on the `requestAnimationFrame` event.\n     * @method run\n     * @param {render} render\n     */\n    Render.run = function(render) {\n        (function loop(time){\n            render.frameRequestId = _requestAnimationFrame(loop);\n            \n            _updateTiming(render, time);\n\n            Render.world(render, time);\n\n            if (render.options.showStats || render.options.showDebug) {\n                Render.stats(render, render.context, time);\n            }\n\n            if (render.options.showPerformance || render.options.showDebug) {\n                Render.performance(render, render.context, time);\n            }\n        })();\n    };\n\n    /**\n     * Ends execution of `Render.run` on the given `render`, by canceling the animation frame request event loop.\n     * @method stop\n     * @param {render} render\n     */\n    Render.stop = function(render) {\n        _cancelAnimationFrame(render.frameRequestId);\n    };\n\n    /**\n     * Sets the pixel ratio of the renderer and updates the canvas.\n     * To automatically detect the correct ratio, pass the string `'auto'` for `pixelRatio`.\n     * @method setPixelRatio\n     * @param {render} render\n     * @param {number} pixelRatio\n     */\n    Render.setPixelRatio = function(render, pixelRatio) {\n        var options = render.options,\n            canvas = render.canvas;\n\n        if (pixelRatio === 'auto') {\n            pixelRatio = _getPixelRatio(canvas);\n        }\n\n        options.pixelRatio = pixelRatio;\n        canvas.setAttribute('data-pixel-ratio', pixelRatio);\n        canvas.width = options.width * pixelRatio;\n        canvas.height = options.height * pixelRatio;\n        canvas.style.width = options.width + 'px';\n        canvas.style.height = options.height + 'px';\n    };\n\n    /**\n     * Positions and sizes the viewport around the given object bounds.\n     * Objects must have at least one of the following properties:\n     * - `object.bounds`\n     * - `object.position`\n     * - `object.min` and `object.max`\n     * - `object.x` and `object.y`\n     * @method lookAt\n     * @param {render} render\n     * @param {object[]} objects\n     * @param {vector} [padding]\n     * @param {bool} [center=true]\n     */\n    Render.lookAt = function(render, objects, padding, center) {\n        center = typeof center !== 'undefined' ? center : true;\n        objects = Common.isArray(objects) ? objects : [objects];\n        padding = padding || {\n            x: 0,\n            y: 0\n        };\n\n        // find bounds of all objects\n        var bounds = {\n            min: { x: Infinity, y: Infinity },\n            max: { x: -Infinity, y: -Infinity }\n        };\n\n        for (var i = 0; i < objects.length; i += 1) {\n            var object = objects[i],\n                min = object.bounds ? object.bounds.min : (object.min || object.position || object),\n                max = object.bounds ? object.bounds.max : (object.max || object.position || object);\n\n            if (min && max) {\n                if (min.x < bounds.min.x)\n                    bounds.min.x = min.x;\n\n                if (max.x > bounds.max.x)\n                    bounds.max.x = max.x;\n\n                if (min.y < bounds.min.y)\n                    bounds.min.y = min.y;\n\n                if (max.y > bounds.max.y)\n                    bounds.max.y = max.y;\n            }\n        }\n\n        // find ratios\n        var width = (bounds.max.x - bounds.min.x) + 2 * padding.x,\n            height = (bounds.max.y - bounds.min.y) + 2 * padding.y,\n            viewHeight = render.canvas.height,\n            viewWidth = render.canvas.width,\n            outerRatio = viewWidth / viewHeight,\n            innerRatio = width / height,\n            scaleX = 1,\n            scaleY = 1;\n\n        // find scale factor\n        if (innerRatio > outerRatio) {\n            scaleY = innerRatio / outerRatio;\n        } else {\n            scaleX = outerRatio / innerRatio;\n        }\n\n        // enable bounds\n        render.options.hasBounds = true;\n\n        // position and size\n        render.bounds.min.x = bounds.min.x;\n        render.bounds.max.x = bounds.min.x + width * scaleX;\n        render.bounds.min.y = bounds.min.y;\n        render.bounds.max.y = bounds.min.y + height * scaleY;\n\n        // center\n        if (center) {\n            render.bounds.min.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.max.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.min.y += height * 0.5 - (height * scaleY) * 0.5;\n            render.bounds.max.y += height * 0.5 - (height * scaleY) * 0.5;\n        }\n\n        // padding\n        render.bounds.min.x -= padding.x;\n        render.bounds.max.x -= padding.x;\n        render.bounds.min.y -= padding.y;\n        render.bounds.max.y -= padding.y;\n\n        // update mouse\n        if (render.mouse) {\n            Mouse.setScale(render.mouse, {\n                x: (render.bounds.max.x - render.bounds.min.x) / render.canvas.width,\n                y: (render.bounds.max.y - render.bounds.min.y) / render.canvas.height\n            });\n\n            Mouse.setOffset(render.mouse, render.bounds.min);\n        }\n    };\n\n    /**\n     * Applies viewport transforms based on `render.bounds` to a render context.\n     * @method startViewTransform\n     * @param {render} render\n     */\n    Render.startViewTransform = function(render) {\n        var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n            boundsHeight = render.bounds.max.y - render.bounds.min.y,\n            boundsScaleX = boundsWidth / render.options.width,\n            boundsScaleY = boundsHeight / render.options.height;\n\n        render.context.setTransform(\n            render.options.pixelRatio / boundsScaleX, 0, 0, \n            render.options.pixelRatio / boundsScaleY, 0, 0\n        );\n        \n        render.context.translate(-render.bounds.min.x, -render.bounds.min.y);\n    };\n\n    /**\n     * Resets all transforms on the render context.\n     * @method endViewTransform\n     * @param {render} render\n     */\n    Render.endViewTransform = function(render) {\n        render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n    };\n\n    /**\n     * Renders the given `engine`'s `Matter.World` object.\n     * This is the entry point for all rendering and should be called every time the scene changes.\n     * @method world\n     * @param {render} render\n     */\n    Render.world = function(render, time) {\n        var startTime = Common.now(),\n            engine = render.engine,\n            world = engine.world,\n            canvas = render.canvas,\n            context = render.context,\n            options = render.options,\n            timing = render.timing;\n\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world),\n            background = options.wireframes ? options.wireframeBackground : options.background,\n            bodies = [],\n            constraints = [],\n            i;\n\n        var event = {\n            timestamp: engine.timing.timestamp\n        };\n\n        Events.trigger(render, 'beforeRender', event);\n\n        // apply background if it has changed\n        if (render.currentBackground !== background)\n            _applyBackground(render, background);\n\n        // clear the canvas with a transparent fill, to allow the canvas background to show\n        context.globalCompositeOperation = 'source-in';\n        context.fillStyle = \"transparent\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        context.globalCompositeOperation = 'source-over';\n\n        // handle bounds\n        if (options.hasBounds) {\n            // filter out bodies that are not in view\n            for (i = 0; i < allBodies.length; i++) {\n                var body = allBodies[i];\n                if (Bounds.overlaps(body.bounds, render.bounds))\n                    bodies.push(body);\n            }\n\n            // filter out constraints that are not in view\n            for (i = 0; i < allConstraints.length; i++) {\n                var constraint = allConstraints[i],\n                    bodyA = constraint.bodyA,\n                    bodyB = constraint.bodyB,\n                    pointAWorld = constraint.pointA,\n                    pointBWorld = constraint.pointB;\n\n                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);\n                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);\n\n                if (!pointAWorld || !pointBWorld)\n                    continue;\n\n                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))\n                    constraints.push(constraint);\n            }\n\n            // transform the view\n            Render.startViewTransform(render);\n\n            // update mouse\n            if (render.mouse) {\n                Mouse.setScale(render.mouse, {\n                    x: (render.bounds.max.x - render.bounds.min.x) / render.options.width,\n                    y: (render.bounds.max.y - render.bounds.min.y) / render.options.height\n                });\n\n                Mouse.setOffset(render.mouse, render.bounds.min);\n            }\n        } else {\n            constraints = allConstraints;\n            bodies = allBodies;\n\n            if (render.options.pixelRatio !== 1) {\n                render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n            }\n        }\n\n        if (!options.wireframes || (engine.enableSleeping && options.showSleeping)) {\n            // fully featured rendering of bodies\n            Render.bodies(render, bodies, context);\n        } else {\n            if (options.showConvexHulls)\n                Render.bodyConvexHulls(render, bodies, context);\n\n            // optimised method for wireframes only\n            Render.bodyWireframes(render, bodies, context);\n        }\n\n        if (options.showBounds)\n            Render.bodyBounds(render, bodies, context);\n\n        if (options.showAxes || options.showAngleIndicator)\n            Render.bodyAxes(render, bodies, context);\n\n        if (options.showPositions)\n            Render.bodyPositions(render, bodies, context);\n\n        if (options.showVelocity)\n            Render.bodyVelocity(render, bodies, context);\n\n        if (options.showIds)\n            Render.bodyIds(render, bodies, context);\n\n        if (options.showSeparations)\n            Render.separations(render, engine.pairs.list, context);\n\n        if (options.showCollisions)\n            Render.collisions(render, engine.pairs.list, context);\n\n        if (options.showVertexNumbers)\n            Render.vertexNumbers(render, bodies, context);\n\n        if (options.showMousePosition)\n            Render.mousePosition(render, render.mouse, context);\n\n        Render.constraints(constraints, context);\n\n        if (options.showBroadphase)\n            Render.grid(render, engine.grid, context);\n\n        if (options.hasBounds) {\n            // revert view transforms\n            Render.endViewTransform(render);\n        }\n\n        Events.trigger(render, 'afterRender', event);\n\n        // log the time elapsed computing this update\n        timing.lastElapsed = Common.now() - startTime;\n    };\n\n    /**\n     * Renders statistics about the engine and world useful for debugging.\n     * @private\n     * @method stats\n     * @param {render} render\n     * @param {RenderingContext} context\n     * @param {Number} time\n     */\n    Render.stats = function(render, context, time) {\n        var engine = render.engine,\n            world = engine.world,\n            bodies = Composite.allBodies(world),\n            parts = 0,\n            width = 55,\n            height = 44,\n            x = 0,\n            y = 0;\n        \n        // count parts\n        for (var i = 0; i < bodies.length; i += 1) {\n            parts += bodies[i].parts.length;\n        }\n\n        // sections\n        var sections = {\n            'Part': parts,\n            'Body': bodies.length,\n            'Cons': Composite.allConstraints(world).length,\n            'Comp': Composite.allComposites(world).length,\n            'Pair': engine.pairs.list.length\n        };\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(x, y, width * 5.5, height);\n\n        context.font = '12px Arial';\n        context.textBaseline = 'top';\n        context.textAlign = 'right';\n\n        // sections\n        for (var key in sections) {\n            var section = sections[key];\n            // label\n            context.fillStyle = '#aaa';\n            context.fillText(key, x + width, y + 8);\n\n            // value\n            context.fillStyle = '#eee';\n            context.fillText(section, x + width, y + 26);\n\n            x += width;\n        }\n    };\n\n    /**\n     * Renders engine and render performance information.\n     * @private\n     * @method performance\n     * @param {render} render\n     * @param {RenderingContext} context\n     */\n    Render.performance = function(render, context) {\n        var engine = render.engine,\n            timing = render.timing,\n            deltaHistory = timing.deltaHistory,\n            elapsedHistory = timing.elapsedHistory,\n            timestampElapsedHistory = timing.timestampElapsedHistory,\n            engineDeltaHistory = timing.engineDeltaHistory,\n            engineElapsedHistory = timing.engineElapsedHistory,\n            lastEngineDelta = engine.timing.lastDelta;\n        \n        var deltaMean = _mean(deltaHistory),\n            elapsedMean = _mean(elapsedHistory),\n            engineDeltaMean = _mean(engineDeltaHistory),\n            engineElapsedMean = _mean(engineElapsedHistory),\n            timestampElapsedMean = _mean(timestampElapsedHistory),\n            rateMean = (timestampElapsedMean / deltaMean) || 0,\n            fps = (1000 / deltaMean) || 0;\n\n        var graphHeight = 4,\n            gap = 12,\n            width = 60,\n            height = 34,\n            x = 10,\n            y = 69;\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(0, 50, gap * 4 + width * 5 + 22, height);\n\n        // show FPS\n        Render.status(\n            context, x, y, width, graphHeight, deltaHistory.length, \n            Math.round(fps) + ' fps', \n            fps / Render._goodFps,\n            function(i) { return (deltaHistory[i] / deltaMean) - 1; }\n        );\n\n        // show engine delta\n        Render.status(\n            context, x + gap + width, y, width, graphHeight, engineDeltaHistory.length,\n            lastEngineDelta.toFixed(2) + ' dt', \n            Render._goodDelta / lastEngineDelta,\n            function(i) { return (engineDeltaHistory[i] / engineDeltaMean) - 1; }\n        );\n\n        // show engine update time\n        Render.status(\n            context, x + (gap + width) * 2, y, width, graphHeight, engineElapsedHistory.length,\n            engineElapsedMean.toFixed(2) + ' ut', \n            1 - (engineElapsedMean / Render._goodFps),\n            function(i) { return (engineElapsedHistory[i] / engineElapsedMean) - 1; }\n        );\n\n        // show render time\n        Render.status(\n            context, x + (gap + width) * 3, y, width, graphHeight, elapsedHistory.length,\n            elapsedMean.toFixed(2) + ' rt', \n            1 - (elapsedMean / Render._goodFps),\n            function(i) { return (elapsedHistory[i] / elapsedMean) - 1; }\n        );\n\n        // show effective speed\n        Render.status(\n            context, x + (gap + width) * 4, y, width, graphHeight, timestampElapsedHistory.length, \n            rateMean.toFixed(2) + ' x', \n            rateMean * rateMean * rateMean,\n            function(i) { return (((timestampElapsedHistory[i] / deltaHistory[i]) / rateMean) || 0) - 1; }\n        );\n    };\n\n    /**\n     * Renders a label, indicator and a chart.\n     * @private\n     * @method status\n     * @param {RenderingContext} context\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} count\n     * @param {string} label\n     * @param {string} indicator\n     * @param {function} plotY\n     */\n    Render.status = function(context, x, y, width, height, count, label, indicator, plotY) {\n        // background\n        context.strokeStyle = '#888';\n        context.fillStyle = '#444';\n        context.lineWidth = 1;\n        context.fillRect(x, y + 7, width, 1);\n\n        // chart\n        context.beginPath();\n        context.moveTo(x, y + 7 - height * Common.clamp(0.4 * plotY(0), -2, 2));\n        for (var i = 0; i < width; i += 1) {\n            context.lineTo(x + i, y + 7 - (i < count ? height * Common.clamp(0.4 * plotY(i), -2, 2) : 0));\n        }\n        context.stroke();\n\n        // indicator\n        context.fillStyle = 'hsl(' + Common.clamp(25 + 95 * indicator, 0, 120) + ',100%,60%)';\n        context.fillRect(x, y - 7, 4, 4);\n\n        // label\n        context.font = '12px Arial';\n        context.textBaseline = 'middle';\n        context.textAlign = 'right';\n        context.fillStyle = '#eee';\n        context.fillText(label, x + width, y - 5);\n    };\n\n    /**\n     * Description\n     * @private\n     * @method constraints\n     * @param {constraint[]} constraints\n     * @param {RenderingContext} context\n     */\n    Render.constraints = function(constraints, context) {\n        var c = context;\n\n        for (var i = 0; i < constraints.length; i++) {\n            var constraint = constraints[i];\n\n            if (!constraint.render.visible || !constraint.pointA || !constraint.pointB)\n                continue;\n\n            var bodyA = constraint.bodyA,\n                bodyB = constraint.bodyB,\n                start,\n                end;\n\n            if (bodyA) {\n                start = Vector.add(bodyA.position, constraint.pointA);\n            } else {\n                start = constraint.pointA;\n            }\n\n            if (constraint.render.type === 'pin') {\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n            } else {\n                if (bodyB) {\n                    end = Vector.add(bodyB.position, constraint.pointB);\n                } else {\n                    end = constraint.pointB;\n                }\n\n                c.beginPath();\n                c.moveTo(start.x, start.y);\n\n                if (constraint.render.type === 'spring') {\n                    var delta = Vector.sub(end, start),\n                        normal = Vector.perp(Vector.normalise(delta)),\n                        coils = Math.ceil(Common.clamp(constraint.length / 5, 12, 20)),\n                        offset;\n\n                    for (var j = 1; j < coils; j += 1) {\n                        offset = j % 2 === 0 ? 1 : -1;\n\n                        c.lineTo(\n                            start.x + delta.x * (j / coils) + normal.x * offset * 4,\n                            start.y + delta.y * (j / coils) + normal.y * offset * 4\n                        );\n                    }\n                }\n\n                c.lineTo(end.x, end.y);\n            }\n\n            if (constraint.render.lineWidth) {\n                c.lineWidth = constraint.render.lineWidth;\n                c.strokeStyle = constraint.render.strokeStyle;\n                c.stroke();\n            }\n\n            if (constraint.render.anchors) {\n                c.fillStyle = constraint.render.strokeStyle;\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.arc(end.x, end.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n                c.fill();\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method bodies\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodies = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            showInternalEdges = options.showInternalEdges || !options.wireframes,\n            body,\n            part,\n            i,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                if (!part.render.visible)\n                    continue;\n\n                if (options.showSleeping && body.isSleeping) {\n                    c.globalAlpha = 0.5 * part.render.opacity;\n                } else if (part.render.opacity !== 1) {\n                    c.globalAlpha = part.render.opacity;\n                }\n\n                if (part.render.sprite && part.render.sprite.texture && !options.wireframes) {\n                    // part sprite\n                    var sprite = part.render.sprite,\n                        texture = _getTexture(render, sprite.texture);\n\n                    c.translate(part.position.x, part.position.y);\n                    c.rotate(part.angle);\n\n                    c.drawImage(\n                        texture,\n                        texture.width * -sprite.xOffset * sprite.xScale,\n                        texture.height * -sprite.yOffset * sprite.yScale,\n                        texture.width * sprite.xScale,\n                        texture.height * sprite.yScale\n                    );\n\n                    // revert translation, hopefully faster than save / restore\n                    c.rotate(-part.angle);\n                    c.translate(-part.position.x, -part.position.y);\n                } else {\n                    // part polygon\n                    if (part.circleRadius) {\n                        c.beginPath();\n                        c.arc(part.position.x, part.position.y, part.circleRadius, 0, 2 * Math.PI);\n                    } else {\n                        c.beginPath();\n                        c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                        for (var j = 1; j < part.vertices.length; j++) {\n                            if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                                c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                            } else {\n                                c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                            }\n\n                            if (part.vertices[j].isInternal && !showInternalEdges) {\n                                c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                            }\n                        }\n\n                        c.lineTo(part.vertices[0].x, part.vertices[0].y);\n                        c.closePath();\n                    }\n\n                    if (!options.wireframes) {\n                        c.fillStyle = part.render.fillStyle;\n\n                        if (part.render.lineWidth) {\n                            c.lineWidth = part.render.lineWidth;\n                            c.strokeStyle = part.render.strokeStyle;\n                            c.stroke();\n                        }\n\n                        c.fill();\n                    } else {\n                        c.lineWidth = 1;\n                        c.strokeStyle = '#bbb';\n                        c.stroke();\n                    }\n                }\n\n                c.globalAlpha = 1;\n            }\n        }\n    };\n\n    /**\n     * Optimised method for drawing body wireframes in one pass\n     * @private\n     * @method bodyWireframes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyWireframes = function(render, bodies, context) {\n        var c = context,\n            showInternalEdges = render.options.showInternalEdges,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render all bodies\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                for (j = 1; j < part.vertices.length; j++) {\n                    if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                        c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                    } else {\n                        c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                    }\n\n                    if (part.vertices[j].isInternal && !showInternalEdges) {\n                        c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                    }\n                }\n\n                c.lineTo(part.vertices[0].x, part.vertices[0].y);\n            }\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = '#bbb';\n        c.stroke();\n    };\n\n    /**\n     * Optimised method for drawing body convex hull wireframes in one pass\n     * @private\n     * @method bodyConvexHulls\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyConvexHulls = function(render, bodies, context) {\n        var c = context,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render convex hulls\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible || body.parts.length === 1)\n                continue;\n\n            c.moveTo(body.vertices[0].x, body.vertices[0].y);\n\n            for (j = 1; j < body.vertices.length; j++) {\n                c.lineTo(body.vertices[j].x, body.vertices[j].y);\n            }\n\n            c.lineTo(body.vertices[0].x, body.vertices[0].y);\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = 'rgba(255,255,255,0.2)';\n        c.stroke();\n    };\n\n    /**\n     * Renders body vertex numbers.\n     * @private\n     * @method vertexNumbers\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.vertexNumbers = function(render, bodies, context) {\n        var c = context,\n            i,\n            j,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            var parts = bodies[i].parts;\n            for (k = parts.length > 1 ? 1 : 0; k < parts.length; k++) {\n                var part = parts[k];\n                for (j = 0; j < part.vertices.length; j++) {\n                    c.fillStyle = 'rgba(255,255,255,0.2)';\n                    c.fillText(i + '_' + j, part.position.x + (part.vertices[j].x - part.position.x) * 0.8, part.position.y + (part.vertices[j].y - part.position.y) * 0.8);\n                }\n            }\n        }\n    };\n\n    /**\n     * Renders mouse position.\n     * @private\n     * @method mousePosition\n     * @param {render} render\n     * @param {mouse} mouse\n     * @param {RenderingContext} context\n     */\n    Render.mousePosition = function(render, mouse, context) {\n        var c = context;\n        c.fillStyle = 'rgba(255,255,255,0.8)';\n        c.fillText(mouse.position.x + '  ' + mouse.position.y, mouse.position.x + 5, mouse.position.y - 5);\n    };\n\n    /**\n     * Draws body bounds\n     * @private\n     * @method bodyBounds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyBounds = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.render.visible) {\n                var parts = bodies[i].parts;\n                for (var j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    var part = parts[j];\n                    c.rect(part.bounds.min.x, part.bounds.min.y, part.bounds.max.x - part.bounds.min.x, part.bounds.max.y - part.bounds.min.y);\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,255,255,0.08)';\n        } else {\n            c.strokeStyle = 'rgba(0,0,0,0.1)';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Draws body angle indicators and axes\n     * @private\n     * @method bodyAxes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyAxes = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                parts = body.parts;\n\n            if (!body.render.visible)\n                continue;\n\n            if (options.showAxes) {\n                // render all axes\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        var axis = part.axes[k];\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo(part.position.x + axis.x * 20, part.position.y + axis.y * 20);\n                    }\n                }\n            } else {\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        // render a single axis indicator\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo((part.vertices[0].x + part.vertices[part.vertices.length-1].x) / 2,\n                            (part.vertices[0].y + part.vertices[part.vertices.length-1].y) / 2);\n                    }\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'indianred';\n            c.lineWidth = 1;\n        } else {\n            c.strokeStyle = 'rgba(255, 255, 255, 0.4)';\n            c.globalCompositeOperation = 'overlay';\n            c.lineWidth = 2;\n        }\n\n        c.stroke();\n        c.globalCompositeOperation = 'source-over';\n    };\n\n    /**\n     * Draws body positions\n     * @private\n     * @method bodyPositions\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyPositions = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            body,\n            part,\n            i,\n            k;\n\n        c.beginPath();\n\n        // render current positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n                c.arc(part.position.x, part.position.y, 3, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'indianred';\n        } else {\n            c.fillStyle = 'rgba(0,0,0,0.5)';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render previous positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n            if (body.render.visible) {\n                c.arc(body.positionPrev.x, body.positionPrev.y, 2, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        c.fillStyle = 'rgba(255,165,0,0.8)';\n        c.fill();\n    };\n\n    /**\n     * Draws body velocity\n     * @private\n     * @method bodyVelocity\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyVelocity = function(render, bodies, context) {\n        var c = context;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            c.moveTo(body.position.x, body.position.y);\n            c.lineTo(body.position.x + (body.position.x - body.positionPrev.x) * 2, body.position.y + (body.position.y - body.positionPrev.y) * 2);\n        }\n\n        c.lineWidth = 3;\n        c.strokeStyle = 'cornflowerblue';\n        c.stroke();\n    };\n\n    /**\n     * Draws body ids\n     * @private\n     * @method bodyIds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyIds = function(render, bodies, context) {\n        var c = context,\n            i,\n            j;\n\n        for (i = 0; i < bodies.length; i++) {\n            if (!bodies[i].render.visible)\n                continue;\n\n            var parts = bodies[i].parts;\n            for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                var part = parts[j];\n                c.font = \"12px Arial\";\n                c.fillStyle = 'rgba(255,255,255,0.5)';\n                c.fillText(part.id, part.position.x + 10, part.position.y - 10);\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method collisions\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.collisions = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render collision positions\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            for (j = 0; j < pair.activeContacts.length; j++) {\n                var contact = pair.activeContacts[j],\n                    vertex = contact.vertex;\n                c.rect(vertex.x - 1.5, vertex.y - 1.5, 3.5, 3.5);\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'rgba(255,255,255,0.7)';\n        } else {\n            c.fillStyle = 'orange';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render collision normals\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n\n            if (pair.activeContacts.length > 0) {\n                var normalPosX = pair.activeContacts[0].vertex.x,\n                    normalPosY = pair.activeContacts[0].vertex.y;\n\n                if (pair.activeContacts.length === 2) {\n                    normalPosX = (pair.activeContacts[0].vertex.x + pair.activeContacts[1].vertex.x) / 2;\n                    normalPosY = (pair.activeContacts[0].vertex.y + pair.activeContacts[1].vertex.y) / 2;\n                }\n\n                if (collision.bodyB === collision.supports[0].body || collision.bodyA.isStatic === true) {\n                    c.moveTo(normalPosX - collision.normal.x * 8, normalPosY - collision.normal.y * 8);\n                } else {\n                    c.moveTo(normalPosX + collision.normal.x * 8, normalPosY + collision.normal.y * 8);\n                }\n\n                c.lineTo(normalPosX, normalPosY);\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.7)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method separations\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.separations = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render separations\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.bodyA;\n            bodyB = collision.bodyB;\n\n            var k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyB.isStatic) k = 0;\n\n            c.moveTo(bodyB.position.x, bodyB.position.y);\n            c.lineTo(bodyB.position.x - collision.penetration.x * k, bodyB.position.y - collision.penetration.y * k);\n\n            k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyA.isStatic) k = 0;\n\n            c.moveTo(bodyA.position.x, bodyA.position.y);\n            c.lineTo(bodyA.position.x + collision.penetration.x * k, bodyA.position.y + collision.penetration.y * k);\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.5)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method grid\n     * @param {render} render\n     * @param {grid} grid\n     * @param {RenderingContext} context\n     */\n    Render.grid = function(render, grid, context) {\n        var c = context,\n            options = render.options;\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,180,0,0.1)';\n        } else {\n            c.strokeStyle = 'rgba(255,180,0,0.5)';\n        }\n\n        c.beginPath();\n\n        var bucketKeys = Common.keys(grid.buckets);\n\n        for (var i = 0; i < bucketKeys.length; i++) {\n            var bucketId = bucketKeys[i];\n\n            if (grid.buckets[bucketId].length < 2)\n                continue;\n\n            var region = bucketId.split(/C|R/);\n            c.rect(0.5 + parseInt(region[1], 10) * grid.bucketWidth,\n                0.5 + parseInt(region[2], 10) * grid.bucketHeight,\n                grid.bucketWidth,\n                grid.bucketHeight);\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method inspector\n     * @param {inspector} inspector\n     * @param {RenderingContext} context\n     */\n    Render.inspector = function(inspector, context) {\n        var engine = inspector.engine,\n            selected = inspector.selected,\n            render = inspector.render,\n            options = render.options,\n            bounds;\n\n        if (options.hasBounds) {\n            var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n                boundsHeight = render.bounds.max.y - render.bounds.min.y,\n                boundsScaleX = boundsWidth / render.options.width,\n                boundsScaleY = boundsHeight / render.options.height;\n\n            context.scale(1 / boundsScaleX, 1 / boundsScaleY);\n            context.translate(-render.bounds.min.x, -render.bounds.min.y);\n        }\n\n        for (var i = 0; i < selected.length; i++) {\n            var item = selected[i].data;\n\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.9)';\n            context.setLineDash([1,2]);\n\n            switch (item.type) {\n\n            case 'body':\n\n                // render body selections\n                bounds = item.bounds;\n                context.beginPath();\n                context.rect(Math.floor(bounds.min.x - 3), Math.floor(bounds.min.y - 3),\n                    Math.floor(bounds.max.x - bounds.min.x + 6), Math.floor(bounds.max.y - bounds.min.y + 6));\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            case 'constraint':\n\n                // render constraint selections\n                var point = item.pointA;\n                if (item.bodyA)\n                    point = item.pointB;\n                context.beginPath();\n                context.arc(point.x, point.y, 10, 0, 2 * Math.PI);\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            }\n\n            context.setLineDash([]);\n            context.translate(-0.5, -0.5);\n        }\n\n        // render selection region\n        if (inspector.selectStart !== null) {\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.6)';\n            context.fillStyle = 'rgba(255,165,0,0.1)';\n            bounds = inspector.selectBounds;\n            context.beginPath();\n            context.rect(Math.floor(bounds.min.x), Math.floor(bounds.min.y),\n                Math.floor(bounds.max.x - bounds.min.x), Math.floor(bounds.max.y - bounds.min.y));\n            context.closePath();\n            context.stroke();\n            context.fill();\n            context.translate(-0.5, -0.5);\n        }\n\n        if (options.hasBounds)\n            context.setTransform(1, 0, 0, 1, 0, 0);\n    };\n\n    /**\n     * Updates render timing.\n     * @method _updateTiming\n     * @private\n     * @param {render} render\n     * @param {number} time\n     */\n    var _updateTiming = function(render, time) {\n        var engine = render.engine,\n            timing = render.timing,\n            historySize = timing.historySize,\n            timestamp = engine.timing.timestamp;\n\n        timing.delta = time - timing.lastTime || Render._goodDelta;\n        timing.lastTime = time;\n\n        timing.timestampElapsed = timestamp - timing.lastTimestamp || 0;\n        timing.lastTimestamp = timestamp;\n\n        timing.deltaHistory.unshift(timing.delta);\n        timing.deltaHistory.length = Math.min(timing.deltaHistory.length, historySize);\n\n        timing.engineDeltaHistory.unshift(engine.timing.lastDelta);\n        timing.engineDeltaHistory.length = Math.min(timing.engineDeltaHistory.length, historySize);\n\n        timing.timestampElapsedHistory.unshift(timing.timestampElapsed);\n        timing.timestampElapsedHistory.length = Math.min(timing.timestampElapsedHistory.length, historySize);\n\n        timing.engineElapsedHistory.unshift(engine.timing.lastElapsed);\n        timing.engineElapsedHistory.length = Math.min(timing.engineElapsedHistory.length, historySize);\n\n        timing.elapsedHistory.unshift(timing.lastElapsed);\n        timing.elapsedHistory.length = Math.min(timing.elapsedHistory.length, historySize);\n    };\n\n    /**\n     * Returns the mean value of the given numbers.\n     * @method _mean\n     * @private\n     * @param {Number[]} values\n     * @return {Number} the mean of given values\n     */\n    var _mean = function(values) {\n        var result = 0;\n        for (var i = 0; i < values.length; i += 1) {\n            result += values[i];\n        }\n        return (result / values.length) || 0;\n    };\n\n    /**\n     * @method _createCanvas\n     * @private\n     * @param {} width\n     * @param {} height\n     * @return canvas\n     */\n    var _createCanvas = function(width, height) {\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        canvas.oncontextmenu = function() { return false; };\n        canvas.onselectstart = function() { return false; };\n        return canvas;\n    };\n\n    /**\n     * Gets the pixel ratio of the canvas.\n     * @method _getPixelRatio\n     * @private\n     * @param {HTMLElement} canvas\n     * @return {Number} pixel ratio\n     */\n    var _getPixelRatio = function(canvas) {\n        var context = canvas.getContext('2d'),\n            devicePixelRatio = window.devicePixelRatio || 1,\n            backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio\n                                      || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio\n                                      || context.backingStorePixelRatio || 1;\n\n        return devicePixelRatio / backingStorePixelRatio;\n    };\n\n    /**\n     * Gets the requested texture (an Image) via its path\n     * @method _getTexture\n     * @private\n     * @param {render} render\n     * @param {string} imagePath\n     * @return {Image} texture\n     */\n    var _getTexture = function(render, imagePath) {\n        var image = render.textures[imagePath];\n\n        if (image)\n            return image;\n\n        image = render.textures[imagePath] = new Image();\n        image.src = imagePath;\n\n        return image;\n    };\n\n    /**\n     * Applies the background to the canvas using CSS.\n     * @method applyBackground\n     * @private\n     * @param {render} render\n     * @param {string} background\n     */\n    var _applyBackground = function(render, background) {\n        var cssBackground = background;\n\n        if (/(jpg|gif|png)$/.test(background))\n            cssBackground = 'url(' + background + ')';\n\n        render.canvas.style.background = cssBackground;\n        render.canvas.style.backgroundSize = \"contain\";\n        render.currentBackground = background;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired before rendering\n    *\n    * @event beforeRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after rendering\n    *\n    * @event afterRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A back-reference to the `Matter.Render` module.\n     *\n     * @property controller\n     * @type render\n     */\n\n    /**\n     * A reference to the `Matter.Engine` instance to be used.\n     *\n     * @property engine\n     * @type engine\n     */\n\n    /**\n     * A reference to the element where the canvas is to be inserted (if `render.canvas` has not been specified)\n     *\n     * @property element\n     * @type HTMLElement\n     * @default null\n     */\n\n    /**\n     * The canvas element to render to. If not specified, one will be created if `render.element` has been specified.\n     *\n     * @property canvas\n     * @type HTMLCanvasElement\n     * @default null\n     */\n\n    /**\n     * A `Bounds` object that specifies the drawing view region.\n     * Rendering will be automatically transformed and scaled to fit within the canvas size (`render.options.width` and `render.options.height`).\n     * This allows for creating views that can pan or zoom around the scene.\n     * You must also set `render.options.hasBounds` to `true` to enable bounded rendering.\n     *\n     * @property bounds\n     * @type bounds\n     */\n\n    /**\n     * The 2d rendering context from the `render.canvas` element.\n     *\n     * @property context\n     * @type CanvasRenderingContext2D\n     */\n\n    /**\n     * The sprite texture cache.\n     *\n     * @property textures\n     * @type {}\n     */\n\n    /**\n     * The mouse to render if `render.options.showMousePosition` is enabled.\n     *\n     * @property mouse\n     * @type mouse\n     * @default null\n     */\n\n    /**\n     * The configuration options of the renderer.\n     *\n     * @property options\n     * @type {}\n     */\n\n    /**\n     * The target width in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.width\n     * @type number\n     * @default 800\n     */\n\n    /**\n     * The target height in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.height\n     * @type number\n     * @default 600\n     */\n\n    /**\n     * The [pixel ratio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio) to use when rendering.\n     *\n     * @property options.pixelRatio\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A CSS background color string to use when `render.options.wireframes` is disabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.background\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A CSS background color string to use when `render.options.wireframes` is enabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.wireframeBackground\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A flag that specifies if `render.bounds` should be used when rendering.\n     *\n     * @property options.hasBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable all debug information overlays together.  \n     * This includes and has priority over the values of:\n     *\n     * - `render.options.showStats`\n     * - `render.options.showPerformance`\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the engine stats info overlay.  \n     * From left to right, the values shown are:\n     *\n     * - body parts total\n     * - body total\n     * - constraints total\n     * - composites total\n     * - collision pairs total\n     *\n     * @property options.showStats\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable performance charts.  \n     * From left to right, the values shown are:\n     *\n     * - average render frequency (e.g. 60 fps)\n     * - exact engine delta time used for last update (e.g. 16.66ms)\n     * - average engine execution duration (e.g. 5.00ms)\n     * - average render execution duration (e.g. 0.40ms)\n     * - average effective play speed (e.g. '1.00x' is 'real-time')\n     *\n     * Each value is recorded over a fixed sample of past frames (60 frames).\n     *\n     * A chart shown below each value indicates the variance from the average over the sample.\n     * The more stable or fixed the value is the flatter the chart will appear.\n     *\n     * @property options.showPerformance\n     * @type boolean\n     * @default false\n     */\n    \n    /**\n     * A flag to enable or disable rendering entirely.\n     *\n     * @property options.enabled\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to toggle wireframe rendering otherwise solid fill rendering is used.\n     *\n     * @property options.wireframes\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable sleeping bodies indicators.\n     *\n     * @property options.showSleeping\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable the debug information overlay.\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision broadphase debug overlay.\n     *\n     * @property options.showBroadphase\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body bounds debug overlay.\n     *\n     * @property options.showBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body velocity debug overlay.\n     *\n     * @property options.showVelocity\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body collisions debug overlay.\n     *\n     * @property options.showCollisions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision resolver separations debug overlay.\n     *\n     * @property options.showSeparations\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body axes debug overlay.\n     *\n     * @property options.showAxes\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body positions debug overlay.\n     *\n     * @property options.showPositions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body angle debug overlay.\n     *\n     * @property options.showAngleIndicator\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body and part ids debug overlay.\n     *\n     * @property options.showIds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body vertex numbers debug overlay.\n     *\n     * @property options.showVertexNumbers\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body convex hulls debug overlay.\n     *\n     * @property options.showConvexHulls\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body internal edges debug overlay.\n     *\n     * @property options.showInternalEdges\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the mouse position debug overlay.\n     *\n     * @property options.showMousePosition\n     * @type boolean\n     * @default false\n     */\n\n})();\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Contact` module contains methods for creating and manipulating collision contacts.\n*\n* @class Contact\n*/\n\nvar Contact = {};\n\nmodule.exports = Contact;\n\n(function() {\n\n    /**\n     * Creates a new contact.\n     * @method create\n     * @param {vertex} vertex\n     * @return {contact} A new contact\n     */\n    Contact.create = function(vertex) {\n        return {\n            id: Contact.id(vertex),\n            vertex: vertex,\n            normalImpulse: 0,\n            tangentImpulse: 0\n        };\n    };\n    \n    /**\n     * Generates a contact id.\n     * @method id\n     * @param {vertex} vertex\n     * @return {string} Unique contactID\n     */\n    Contact.id = function(vertex) {\n        return vertex.body.id + '_' + vertex.index;\n    };\n\n})();\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Engine` module contains methods for creating and manipulating engines.\n* An engine is a controller that manages updating the simulation of the world.\n* See `Matter.Runner` for an optional game loop utility.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Engine\n*/\n\nvar Engine = {};\n\nmodule.exports = Engine;\n\nvar Sleeping = __webpack_require__(7);\nvar Resolver = __webpack_require__(19);\nvar Detector = __webpack_require__(13);\nvar Pairs = __webpack_require__(20);\nvar Grid = __webpack_require__(21);\nvar Events = __webpack_require__(4);\nvar Composite = __webpack_require__(5);\nvar Constraint = __webpack_require__(8);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\n\n(function() {\n\n    /**\n     * Creates a new engine. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {engine} engine\n     */\n    Engine.create = function(options) {\n        options = options || {};\n\n        var defaults = {\n            positionIterations: 6,\n            velocityIterations: 4,\n            constraintIterations: 2,\n            enableSleeping: false,\n            events: [],\n            plugin: {},\n            grid: null,\n            gravity: {\n                x: 0,\n                y: 1,\n                scale: 0.001\n            },\n            timing: {\n                timestamp: 0,\n                timeScale: 1,\n                lastDelta: 0,\n                lastElapsed: 0\n            }\n        };\n\n        var engine = Common.extend(defaults, options);\n\n        engine.world = options.world || Composite.create({ label: 'World' });\n        engine.grid = Grid.create(options.grid || options.broadphase);\n        engine.pairs = Pairs.create();\n\n        // temporary back compatibility\n        engine.world.gravity = engine.gravity;\n        engine.broadphase = engine.grid;\n        engine.metrics = {};\n        \n        return engine;\n    };\n\n    /**\n     * Moves the simulation forward in time by `delta` ms.\n     * The `correction` argument is an optional `Number` that specifies the time correction factor to apply to the update.\n     * This can help improve the accuracy of the simulation in cases where `delta` is changing between updates.\n     * The value of `correction` is defined as `delta / lastDelta`, i.e. the percentage change of `delta` over the last step.\n     * Therefore the value is always `1` (no correction) when `delta` constant (or when no correction is desired, which is the default).\n     * See the paper on <a href=\"http://lonesock.net/article/verlet.html\">Time Corrected Verlet</a> for more information.\n     *\n     * Triggers `beforeUpdate` and `afterUpdate` events.\n     * Triggers `collisionStart`, `collisionActive` and `collisionEnd` events.\n     * @method update\n     * @param {engine} engine\n     * @param {number} [delta=16.666]\n     * @param {number} [correction=1]\n     */\n    Engine.update = function(engine, delta, correction) {\n        var startTime = Common.now();\n\n        delta = delta || 1000 / 60;\n        correction = correction || 1;\n\n        var world = engine.world,\n            timing = engine.timing,\n            grid = engine.grid,\n            gridPairs = [],\n            i;\n\n        // increment timestamp\n        timing.timestamp += delta * timing.timeScale;\n        timing.lastDelta = delta * timing.timeScale;\n\n        // create an event object\n        var event = {\n            timestamp: timing.timestamp\n        };\n\n        Events.trigger(engine, 'beforeUpdate', event);\n\n        // get lists of all bodies and constraints, no matter what composites they are in\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world);\n\n        // if sleeping enabled, call the sleeping controller\n        if (engine.enableSleeping)\n            Sleeping.update(allBodies, timing.timeScale);\n\n        // applies gravity to all bodies\n        Engine._bodiesApplyGravity(allBodies, engine.gravity);\n\n        // update all body position and rotation by integration\n        Engine._bodiesUpdate(allBodies, delta, timing.timeScale, correction, world.bounds);\n\n        // update all constraints (first pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, timing.timeScale);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // broadphase pass: find potential collision pairs\n\n        // if world is dirty, we must flush the whole grid\n        if (world.isModified)\n            Grid.clear(grid);\n\n        // update the grid buckets based on current bodies\n        Grid.update(grid, allBodies, engine, world.isModified);\n        gridPairs = grid.pairsList;\n\n        // clear all composite modified flags\n        if (world.isModified) {\n            Composite.setModified(world, false, false, true);\n        }\n\n        // narrowphase pass: find actual collisions, then create or update collision pairs\n        var collisions = Detector.collisions(gridPairs, engine);\n\n        // update collision pairs\n        var pairs = engine.pairs,\n            timestamp = timing.timestamp;\n        Pairs.update(pairs, collisions, timestamp);\n        Pairs.removeOld(pairs, timestamp);\n\n        // wake up bodies involved in collisions\n        if (engine.enableSleeping)\n            Sleeping.afterCollisions(pairs.list, timing.timeScale);\n\n        // trigger collision events\n        if (pairs.collisionStart.length > 0)\n            Events.trigger(engine, 'collisionStart', { pairs: pairs.collisionStart });\n\n        // iteratively resolve position between collisions\n        Resolver.preSolvePosition(pairs.list);\n        for (i = 0; i < engine.positionIterations; i++) {\n            Resolver.solvePosition(pairs.list, timing.timeScale);\n        }\n        Resolver.postSolvePosition(allBodies);\n\n        // update all constraints (second pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, timing.timeScale);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // iteratively resolve velocity between collisions\n        Resolver.preSolveVelocity(pairs.list);\n        for (i = 0; i < engine.velocityIterations; i++) {\n            Resolver.solveVelocity(pairs.list, timing.timeScale);\n        }\n\n        // trigger collision events\n        if (pairs.collisionActive.length > 0)\n            Events.trigger(engine, 'collisionActive', { pairs: pairs.collisionActive });\n\n        if (pairs.collisionEnd.length > 0)\n            Events.trigger(engine, 'collisionEnd', { pairs: pairs.collisionEnd });\n\n        // clear force buffers\n        Engine._bodiesClearForces(allBodies);\n\n        Events.trigger(engine, 'afterUpdate', event);\n\n        // log the time elapsed computing this update\n        engine.timing.lastElapsed = Common.now() - startTime;\n\n        return engine;\n    };\n    \n    /**\n     * Merges two engines by keeping the configuration of `engineA` but replacing the world with the one from `engineB`.\n     * @method merge\n     * @param {engine} engineA\n     * @param {engine} engineB\n     */\n    Engine.merge = function(engineA, engineB) {\n        Common.extend(engineA, engineB);\n        \n        if (engineB.world) {\n            engineA.world = engineB.world;\n\n            Engine.clear(engineA);\n\n            var bodies = Composite.allBodies(engineA.world);\n\n            for (var i = 0; i < bodies.length; i++) {\n                var body = bodies[i];\n                Sleeping.set(body, false);\n                body.id = Common.nextId();\n            }\n        }\n    };\n\n    /**\n     * Clears the engine including the world, pairs and broadphase.\n     * @method clear\n     * @param {engine} engine\n     */\n    Engine.clear = function(engine) {\n        var world = engine.world,\n            bodies = Composite.allBodies(world);\n\n        Pairs.clear(engine.pairs);\n        Grid.clear(engine.grid);\n        Grid.update(engine.grid, bodies, engine, true);\n    };\n\n    /**\n     * Zeroes the `body.force` and `body.torque` force buffers.\n     * @method _bodiesClearForces\n     * @private\n     * @param {body[]} bodies\n     */\n    Engine._bodiesClearForces = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            // reset force buffers\n            body.force.x = 0;\n            body.force.y = 0;\n            body.torque = 0;\n        }\n    };\n\n    /**\n     * Applys a mass dependant force to all given bodies.\n     * @method _bodiesApplyGravity\n     * @private\n     * @param {body[]} bodies\n     * @param {vector} gravity\n     */\n    Engine._bodiesApplyGravity = function(bodies, gravity) {\n        var gravityScale = typeof gravity.scale !== 'undefined' ? gravity.scale : 0.001;\n\n        if ((gravity.x === 0 && gravity.y === 0) || gravityScale === 0) {\n            return;\n        }\n        \n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            // apply gravity\n            body.force.y += body.mass * gravity.y * gravityScale;\n            body.force.x += body.mass * gravity.x * gravityScale;\n        }\n    };\n\n    /**\n     * Applys `Body.update` to all given `bodies`.\n     * @method _bodiesUpdate\n     * @private\n     * @param {body[]} bodies\n     * @param {number} deltaTime \n     * The amount of time elapsed between updates\n     * @param {number} timeScale\n     * @param {number} correction \n     * The Verlet correction factor (deltaTime / lastDeltaTime)\n     * @param {bounds} worldBounds\n     */\n    Engine._bodiesUpdate = function(bodies, deltaTime, timeScale, correction, worldBounds) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            Body.update(body, deltaTime, timeScale, correction);\n        }\n    };\n\n    /**\n     * A deprecated alias for `Runner.run`, use `Matter.Runner.run(engine)` instead and see `Matter.Runner` for more information.\n     * @deprecated use Matter.Runner.run(engine) instead\n     * @method run\n     * @param {engine} engine\n     */\n\n    /**\n    * Fired just before an update\n    *\n    * @event beforeUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update and all collision events\n    *\n    * @event afterUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have started to collide in the current tick (if any)\n    *\n    * @event collisionStart\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that are colliding in the current tick (if any)\n    *\n    * @event collisionActive\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have ended collision in the current tick (if any)\n    *\n    * @event collisionEnd\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` that specifies the number of position iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property positionIterations\n     * @type number\n     * @default 6\n     */\n\n    /**\n     * An integer `Number` that specifies the number of velocity iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property velocityIterations\n     * @type number\n     * @default 4\n     */\n\n    /**\n     * An integer `Number` that specifies the number of constraint iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     * The default value of `2` is usually very adequate.\n     *\n     * @property constraintIterations\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A flag that specifies whether the engine should allow sleeping via the `Matter.Sleeping` module.\n     * Sleeping can improve stability and performance, but often at the expense of accuracy.\n     *\n     * @property enableSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * An `Object` containing properties regarding the timing systems of the engine. \n     *\n     * @property timing\n     * @type object\n     */\n\n    /**\n     * A `Number` that specifies the global scaling factor of time for all bodies.\n     * A value of `0` freezes the simulation.\n     * A value of `0.1` gives a slow-motion effect.\n     * A value of `1.2` gives a speed-up effect.\n     *\n     * @property timing.timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the current simulation-time in milliseconds starting from `0`. \n     * It is incremented on every `Engine.update` by the given `delta` argument. \n     *\n     * @property timing.timestamp\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the total execution time elapsed during the last `Engine.update` in milliseconds.\n     * It is updated by timing from the start of the last `Engine.update` call until it ends.\n     *\n     * This value will also include the total execution time of all event handlers directly or indirectly triggered by the engine update.\n     *\n     * @property timing.lastElapsed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the `delta` value used in the last engine update.\n     *\n     * @property timing.lastDelta\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Matter.Grid` instance.\n     *\n     * @property grid\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * Replaced by and now alias for `engine.grid`.\n     *\n     * @deprecated use `engine.grid`\n     * @property broadphase\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * The root `Matter.Composite` instance that will contain all bodies, constraints and other composites to be simulated by this engine.\n     *\n     * @property world\n     * @type composite\n     * @default a Matter.Composite instance\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * The gravity to apply on all bodies in `engine.world`.\n     *\n     * @property gravity\n     * @type object\n     */\n\n    /**\n     * The gravity x component.\n     *\n     * @property gravity.x\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * The gravity y component.\n     *\n     * @property gravity.y\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * The gravity scale factor.\n     *\n     * @property gravity.scale\n     * @type object\n     * @default 0.001\n     */\n\n})();\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Resolver` module contains methods for resolving collision pairs.\n*\n* @class Resolver\n*/\n\nvar Resolver = {};\n\nmodule.exports = Resolver;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    Resolver._restingThresh = 4;\n    Resolver._restingThreshTangent = 6;\n    Resolver._positionDampen = 0.9;\n    Resolver._positionWarming = 0.8;\n    Resolver._frictionNormalMultiplier = 5;\n\n    /**\n     * Prepare pairs for position solving.\n     * @method preSolvePosition\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolvePosition = function(pairs) {\n        var i,\n            pair,\n            activeCount;\n\n        // find total contacts on each body\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive)\n                continue;\n            \n            activeCount = pair.activeContacts.length;\n            pair.collision.parentA.totalContacts += activeCount;\n            pair.collision.parentB.totalContacts += activeCount;\n        }\n    };\n\n    /**\n     * Find a solution for pair positions.\n     * @method solvePosition\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Resolver.solvePosition = function(pairs, timeScale) {\n        var i,\n            pair,\n            collision,\n            bodyA,\n            bodyB,\n            normal,\n            bodyBtoA,\n            contactShare,\n            positionImpulse,\n            contactCount = {},\n            tempA = Vector._temp[0],\n            tempB = Vector._temp[1],\n            tempC = Vector._temp[2],\n            tempD = Vector._temp[3];\n\n        // find impulses required to resolve penetration\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n\n            // get current separation between body edges involved in collision\n            bodyBtoA = Vector.sub(Vector.add(bodyB.positionImpulse, bodyB.position, tempA), \n                Vector.add(bodyA.positionImpulse, \n                    Vector.sub(bodyB.position, collision.penetration, tempB), tempC), tempD);\n\n            pair.separation = Vector.dot(normal, bodyBtoA);\n        }\n        \n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n            positionImpulse = (pair.separation - pair.slop) * timeScale;\n\n            if (bodyA.isStatic || bodyB.isStatic)\n                positionImpulse *= 2;\n            \n            if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                contactShare = Resolver._positionDampen / bodyA.totalContacts;\n                bodyA.positionImpulse.x += normal.x * positionImpulse * contactShare;\n                bodyA.positionImpulse.y += normal.y * positionImpulse * contactShare;\n            }\n\n            if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                contactShare = Resolver._positionDampen / bodyB.totalContacts;\n                bodyB.positionImpulse.x -= normal.x * positionImpulse * contactShare;\n                bodyB.positionImpulse.y -= normal.y * positionImpulse * contactShare;\n            }\n        }\n    };\n\n    /**\n     * Apply position resolution.\n     * @method postSolvePosition\n     * @param {body[]} bodies\n     */\n    Resolver.postSolvePosition = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            // reset contact count\n            body.totalContacts = 0;\n\n            if (body.positionImpulse.x !== 0 || body.positionImpulse.y !== 0) {\n                // update body geometry\n                for (var j = 0; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n                    Vertices.translate(part.vertices, body.positionImpulse);\n                    Bounds.update(part.bounds, part.vertices, body.velocity);\n                    part.position.x += body.positionImpulse.x;\n                    part.position.y += body.positionImpulse.y;\n                }\n\n                // move the body without changing velocity\n                body.positionPrev.x += body.positionImpulse.x;\n                body.positionPrev.y += body.positionImpulse.y;\n\n                if (Vector.dot(body.positionImpulse, body.velocity) < 0) {\n                    // reset cached impulse if the body has velocity along it\n                    body.positionImpulse.x = 0;\n                    body.positionImpulse.y = 0;\n                } else {\n                    // warm the next iteration\n                    body.positionImpulse.x *= Resolver._positionWarming;\n                    body.positionImpulse.y *= Resolver._positionWarming;\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare pairs for velocity solving.\n     * @method preSolveVelocity\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolveVelocity = function(pairs) {\n        var i,\n            j,\n            pair,\n            contacts,\n            collision,\n            bodyA,\n            bodyB,\n            normal,\n            tangent,\n            contact,\n            contactVertex,\n            normalImpulse,\n            tangentImpulse,\n            offset,\n            impulse = Vector._temp[0],\n            tempA = Vector._temp[1];\n        \n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            contacts = pair.activeContacts;\n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n            tangent = collision.tangent;\n\n            // resolve each contact\n            for (j = 0; j < contacts.length; j++) {\n                contact = contacts[j];\n                contactVertex = contact.vertex;\n                normalImpulse = contact.normalImpulse;\n                tangentImpulse = contact.tangentImpulse;\n\n                if (normalImpulse !== 0 || tangentImpulse !== 0) {\n                    // total impulse from contact\n                    impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\n                    impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\n                    \n                    // apply impulse from contact\n                    if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                        offset = Vector.sub(contactVertex, bodyA.position, tempA);\n                        bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\n                        bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\n                        bodyA.anglePrev += Vector.cross(offset, impulse) * bodyA.inverseInertia;\n                    }\n\n                    if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                        offset = Vector.sub(contactVertex, bodyB.position, tempA);\n                        bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\n                        bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\n                        bodyB.anglePrev -= Vector.cross(offset, impulse) * bodyB.inverseInertia;\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Find a solution for pair velocities.\n     * @method solveVelocity\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Resolver.solveVelocity = function(pairs, timeScale) {\n        var timeScaleSquared = timeScale * timeScale,\n            impulse = Vector._temp[0],\n            tempA = Vector._temp[1],\n            tempB = Vector._temp[2],\n            tempC = Vector._temp[3],\n            tempD = Vector._temp[4],\n            tempE = Vector._temp[5];\n        \n        for (var i = 0; i < pairs.length; i++) {\n            var pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            var collision = pair.collision,\n                bodyA = collision.parentA,\n                bodyB = collision.parentB,\n                normal = collision.normal,\n                tangent = collision.tangent,\n                contacts = pair.activeContacts,\n                contactShare = 1 / contacts.length;\n\n            // update body velocities\n            bodyA.velocity.x = bodyA.position.x - bodyA.positionPrev.x;\n            bodyA.velocity.y = bodyA.position.y - bodyA.positionPrev.y;\n            bodyB.velocity.x = bodyB.position.x - bodyB.positionPrev.x;\n            bodyB.velocity.y = bodyB.position.y - bodyB.positionPrev.y;\n            bodyA.angularVelocity = bodyA.angle - bodyA.anglePrev;\n            bodyB.angularVelocity = bodyB.angle - bodyB.anglePrev;\n\n            // resolve each contact\n            for (var j = 0; j < contacts.length; j++) {\n                var contact = contacts[j],\n                    contactVertex = contact.vertex,\n                    offsetA = Vector.sub(contactVertex, bodyA.position, tempA),\n                    offsetB = Vector.sub(contactVertex, bodyB.position, tempB),\n                    velocityPointA = Vector.add(bodyA.velocity, Vector.mult(Vector.perp(offsetA), bodyA.angularVelocity), tempC),\n                    velocityPointB = Vector.add(bodyB.velocity, Vector.mult(Vector.perp(offsetB), bodyB.angularVelocity), tempD), \n                    relativeVelocity = Vector.sub(velocityPointA, velocityPointB, tempE),\n                    normalVelocity = Vector.dot(normal, relativeVelocity);\n\n                var tangentVelocity = Vector.dot(tangent, relativeVelocity),\n                    tangentSpeed = Math.abs(tangentVelocity),\n                    tangentVelocityDirection = Common.sign(tangentVelocity);\n\n                // raw impulses\n                var normalImpulse = (1 + pair.restitution) * normalVelocity,\n                    normalForce = Common.clamp(pair.separation + normalVelocity, 0, 1) * Resolver._frictionNormalMultiplier;\n\n                // coulomb friction\n                var tangentImpulse = tangentVelocity,\n                    maxFriction = Infinity;\n\n                if (tangentSpeed > pair.friction * pair.frictionStatic * normalForce * timeScaleSquared) {\n                    maxFriction = tangentSpeed;\n                    tangentImpulse = Common.clamp(\n                        pair.friction * tangentVelocityDirection * timeScaleSquared,\n                        -maxFriction, maxFriction\n                    );\n                }\n\n                // modify impulses accounting for mass, inertia and offset\n                var oAcN = Vector.cross(offsetA, normal),\n                    oBcN = Vector.cross(offsetB, normal),\n                    share = contactShare / (bodyA.inverseMass + bodyB.inverseMass + bodyA.inverseInertia * oAcN * oAcN  + bodyB.inverseInertia * oBcN * oBcN);\n\n                normalImpulse *= share;\n                tangentImpulse *= share;\n\n                // handle high velocity and resting collisions separately\n                if (normalVelocity < 0 && normalVelocity * normalVelocity > Resolver._restingThresh * timeScaleSquared) {\n                    // high normal velocity so clear cached contact normal impulse\n                    contact.normalImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // impulse constraint tends to 0\n                    var contactNormalImpulse = contact.normalImpulse;\n                    contact.normalImpulse = Math.min(contact.normalImpulse + normalImpulse, 0);\n                    normalImpulse = contact.normalImpulse - contactNormalImpulse;\n                }\n\n                // handle high velocity and resting collisions separately\n                if (tangentVelocity * tangentVelocity > Resolver._restingThreshTangent * timeScaleSquared) {\n                    // high tangent velocity so clear cached contact tangent impulse\n                    contact.tangentImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // tangent impulse tends to -tangentSpeed or +tangentSpeed\n                    var contactTangentImpulse = contact.tangentImpulse;\n                    contact.tangentImpulse = Common.clamp(contact.tangentImpulse + tangentImpulse, -maxFriction, maxFriction);\n                    tangentImpulse = contact.tangentImpulse - contactTangentImpulse;\n                }\n\n                // total impulse from contact\n                impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\n                impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\n                \n                // apply impulse from contact\n                if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                    bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\n                    bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\n                    bodyA.anglePrev += Vector.cross(offsetA, impulse) * bodyA.inverseInertia;\n                }\n\n                if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                    bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\n                    bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\n                    bodyB.anglePrev -= Vector.cross(offsetB, impulse) * bodyB.inverseInertia;\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pairs` module contains methods for creating and manipulating collision pair sets.\n*\n* @class Pairs\n*/\n\nvar Pairs = {};\n\nmodule.exports = Pairs;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\n\n(function() {\n    \n    Pairs._pairMaxIdleLife = 1000;\n\n    /**\n     * Creates a new pairs structure.\n     * @method create\n     * @param {object} options\n     * @return {pairs} A new pairs structure\n     */\n    Pairs.create = function(options) {\n        return Common.extend({ \n            table: {},\n            list: [],\n            collisionStart: [],\n            collisionActive: [],\n            collisionEnd: []\n        }, options);\n    };\n\n    /**\n     * Updates pairs given a list of collisions.\n     * @method update\n     * @param {object} pairs\n     * @param {collision[]} collisions\n     * @param {number} timestamp\n     */\n    Pairs.update = function(pairs, collisions, timestamp) {\n        var pairsList = pairs.list,\n            pairsTable = pairs.table,\n            collisionStart = pairs.collisionStart,\n            collisionEnd = pairs.collisionEnd,\n            collisionActive = pairs.collisionActive,\n            collision,\n            pairId,\n            pair,\n            i;\n\n        // clear collision state arrays, but maintain old reference\n        collisionStart.length = 0;\n        collisionEnd.length = 0;\n        collisionActive.length = 0;\n\n        for (i = 0; i < pairsList.length; i++) {\n            pairsList[i].confirmedActive = false;\n        }\n\n        for (i = 0; i < collisions.length; i++) {\n            collision = collisions[i];\n\n            if (collision.collided) {\n                pairId = Pair.id(collision.bodyA, collision.bodyB);\n\n                pair = pairsTable[pairId];\n                \n                if (pair) {\n                    // pair already exists (but may or may not be active)\n                    if (pair.isActive) {\n                        // pair exists and is active\n                        collisionActive.push(pair);\n                    } else {\n                        // pair exists but was inactive, so a collision has just started again\n                        collisionStart.push(pair);\n                    }\n\n                    // update the pair\n                    Pair.update(pair, collision, timestamp);\n                    pair.confirmedActive = true;\n                } else {\n                    // pair did not exist, create a new pair\n                    pair = Pair.create(collision, timestamp);\n                    pairsTable[pairId] = pair;\n\n                    // push the new pair\n                    collisionStart.push(pair);\n                    pairsList.push(pair);\n                }\n            }\n        }\n\n        // deactivate previously active pairs that are now inactive\n        for (i = 0; i < pairsList.length; i++) {\n            pair = pairsList[i];\n            if (pair.isActive && !pair.confirmedActive) {\n                Pair.setActive(pair, false, timestamp);\n                collisionEnd.push(pair);\n            }\n        }\n    };\n    \n    /**\n     * Finds and removes pairs that have been inactive for a set amount of time.\n     * @method removeOld\n     * @param {object} pairs\n     * @param {number} timestamp\n     */\n    Pairs.removeOld = function(pairs, timestamp) {\n        var pairsList = pairs.list,\n            pairsTable = pairs.table,\n            indexesToRemove = [],\n            pair,\n            collision,\n            pairIndex,\n            i;\n\n        for (i = 0; i < pairsList.length; i++) {\n            pair = pairsList[i];\n            collision = pair.collision;\n            \n            // never remove sleeping pairs\n            if (collision.bodyA.isSleeping || collision.bodyB.isSleeping) {\n                pair.timeUpdated = timestamp;\n                continue;\n            }\n\n            // if pair is inactive for too long, mark it to be removed\n            if (timestamp - pair.timeUpdated > Pairs._pairMaxIdleLife) {\n                indexesToRemove.push(i);\n            }\n        }\n\n        // remove marked pairs\n        for (i = 0; i < indexesToRemove.length; i++) {\n            pairIndex = indexesToRemove[i] - i;\n            pair = pairsList[pairIndex];\n            delete pairsTable[pair.id];\n            pairsList.splice(pairIndex, 1);\n        }\n    };\n\n    /**\n     * Clears the given pairs structure.\n     * @method clear\n     * @param {pairs} pairs\n     * @return {pairs} pairs\n     */\n    Pairs.clear = function(pairs) {\n        pairs.table = {};\n        pairs.list.length = 0;\n        pairs.collisionStart.length = 0;\n        pairs.collisionActive.length = 0;\n        pairs.collisionEnd.length = 0;\n        return pairs;\n    };\n\n})();\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Grid` module contains methods for creating and manipulating collision broadphase grid structures.\n*\n* @class Grid\n*/\n\nvar Grid = {};\n\nmodule.exports = Grid;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new grid.\n     * @method create\n     * @param {} options\n     * @return {grid} A new grid\n     */\n    Grid.create = function(options) {\n        var defaults = {\n            buckets: {},\n            pairs: {},\n            pairsList: [],\n            bucketWidth: 48,\n            bucketHeight: 48\n        };\n\n        return Common.extend(defaults, options);\n    };\n\n    /**\n     * The width of a single grid bucket.\n     *\n     * @property bucketWidth\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * The height of a single grid bucket.\n     *\n     * @property bucketHeight\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * Updates the grid.\n     * @method update\n     * @param {grid} grid\n     * @param {body[]} bodies\n     * @param {engine} engine\n     * @param {boolean} forceUpdate\n     */\n    Grid.update = function(grid, bodies, engine, forceUpdate) {\n        var i, col, row,\n            world = engine.world,\n            buckets = grid.buckets,\n            bucket,\n            bucketId,\n            gridChanged = false;\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isSleeping && !forceUpdate)\n                continue;\n\n            // temporary back compatibility bounds check\n            if (world.bounds && (body.bounds.max.x < world.bounds.min.x || body.bounds.min.x > world.bounds.max.x\n                || body.bounds.max.y < world.bounds.min.y || body.bounds.min.y > world.bounds.max.y))\n                continue;\n\n            var newRegion = Grid._getRegion(grid, body);\n\n            // if the body has changed grid region\n            if (!body.region || newRegion.id !== body.region.id || forceUpdate) {\n\n                if (!body.region || forceUpdate)\n                    body.region = newRegion;\n\n                var union = Grid._regionUnion(newRegion, body.region);\n\n                // update grid buckets affected by region change\n                // iterate over the union of both regions\n                for (col = union.startCol; col <= union.endCol; col++) {\n                    for (row = union.startRow; row <= union.endRow; row++) {\n                        bucketId = Grid._getBucketId(col, row);\n                        bucket = buckets[bucketId];\n\n                        var isInsideNewRegion = (col >= newRegion.startCol && col <= newRegion.endCol\n                                                && row >= newRegion.startRow && row <= newRegion.endRow);\n\n                        var isInsideOldRegion = (col >= body.region.startCol && col <= body.region.endCol\n                                                && row >= body.region.startRow && row <= body.region.endRow);\n\n                        // remove from old region buckets\n                        if (!isInsideNewRegion && isInsideOldRegion) {\n                            if (isInsideOldRegion) {\n                                if (bucket)\n                                    Grid._bucketRemoveBody(grid, bucket, body);\n                            }\n                        }\n\n                        // add to new region buckets\n                        if (body.region === newRegion || (isInsideNewRegion && !isInsideOldRegion) || forceUpdate) {\n                            if (!bucket)\n                                bucket = Grid._createBucket(buckets, bucketId);\n                            Grid._bucketAddBody(grid, bucket, body);\n                        }\n                    }\n                }\n\n                // set the new region\n                body.region = newRegion;\n\n                // flag changes so we can update pairs\n                gridChanged = true;\n            }\n        }\n\n        // update pairs list only if pairs changed (i.e. a body changed region)\n        if (gridChanged)\n            grid.pairsList = Grid._createActivePairsList(grid);\n    };\n\n    /**\n     * Clears the grid.\n     * @method clear\n     * @param {grid} grid\n     */\n    Grid.clear = function(grid) {\n        grid.buckets = {};\n        grid.pairs = {};\n        grid.pairsList = [];\n    };\n\n    /**\n     * Finds the union of two regions.\n     * @method _regionUnion\n     * @private\n     * @param {} regionA\n     * @param {} regionB\n     * @return {} region\n     */\n    Grid._regionUnion = function(regionA, regionB) {\n        var startCol = Math.min(regionA.startCol, regionB.startCol),\n            endCol = Math.max(regionA.endCol, regionB.endCol),\n            startRow = Math.min(regionA.startRow, regionB.startRow),\n            endRow = Math.max(regionA.endRow, regionB.endRow);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Gets the region a given body falls in for a given grid.\n     * @method _getRegion\n     * @private\n     * @param {} grid\n     * @param {} body\n     * @return {} region\n     */\n    Grid._getRegion = function(grid, body) {\n        var bounds = body.bounds,\n            startCol = Math.floor(bounds.min.x / grid.bucketWidth),\n            endCol = Math.floor(bounds.max.x / grid.bucketWidth),\n            startRow = Math.floor(bounds.min.y / grid.bucketHeight),\n            endRow = Math.floor(bounds.max.y / grid.bucketHeight);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Creates a region.\n     * @method _createRegion\n     * @private\n     * @param {} startCol\n     * @param {} endCol\n     * @param {} startRow\n     * @param {} endRow\n     * @return {} region\n     */\n    Grid._createRegion = function(startCol, endCol, startRow, endRow) {\n        return { \n            id: startCol + ',' + endCol + ',' + startRow + ',' + endRow,\n            startCol: startCol, \n            endCol: endCol, \n            startRow: startRow, \n            endRow: endRow \n        };\n    };\n\n    /**\n     * Gets the bucket id at the given position.\n     * @method _getBucketId\n     * @private\n     * @param {} column\n     * @param {} row\n     * @return {string} bucket id\n     */\n    Grid._getBucketId = function(column, row) {\n        return 'C' + column + 'R' + row;\n    };\n\n    /**\n     * Creates a bucket.\n     * @method _createBucket\n     * @private\n     * @param {} buckets\n     * @param {} bucketId\n     * @return {} bucket\n     */\n    Grid._createBucket = function(buckets, bucketId) {\n        var bucket = buckets[bucketId] = [];\n        return bucket;\n    };\n\n    /**\n     * Adds a body to a bucket.\n     * @method _bucketAddBody\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketAddBody = function(grid, bucket, body) {\n        // add new pairs\n        for (var i = 0; i < bucket.length; i++) {\n            var bodyB = bucket[i];\n\n            if (body.id === bodyB.id || (body.isStatic && bodyB.isStatic))\n                continue;\n\n            // keep track of the number of buckets the pair exists in\n            // important for Grid.update to work\n            var pairId = Pair.id(body, bodyB),\n                pair = grid.pairs[pairId];\n\n            if (pair) {\n                pair[2] += 1;\n            } else {\n                grid.pairs[pairId] = [body, bodyB, 1];\n            }\n        }\n\n        // add to bodies (after pairs, otherwise pairs with self)\n        bucket.push(body);\n    };\n\n    /**\n     * Removes a body from a bucket.\n     * @method _bucketRemoveBody\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketRemoveBody = function(grid, bucket, body) {\n        // remove from bucket\n        bucket.splice(Common.indexOf(bucket, body), 1);\n\n        // update pair counts\n        for (var i = 0; i < bucket.length; i++) {\n            // keep track of the number of buckets the pair exists in\n            // important for _createActivePairsList to work\n            var bodyB = bucket[i],\n                pairId = Pair.id(body, bodyB),\n                pair = grid.pairs[pairId];\n\n            if (pair)\n                pair[2] -= 1;\n        }\n    };\n\n    /**\n     * Generates a list of the active pairs in the grid.\n     * @method _createActivePairsList\n     * @private\n     * @param {} grid\n     * @return [] pairs\n     */\n    Grid._createActivePairsList = function(grid) {\n        var pairKeys,\n            pair,\n            pairs = [];\n\n        // grid.pairs is used as a hashmap\n        pairKeys = Common.keys(grid.pairs);\n\n        // iterate over grid.pairs\n        for (var k = 0; k < pairKeys.length; k++) {\n            pair = grid.pairs[pairKeys[k]];\n\n            // if pair exists in at least one bucket\n            // it is a pair that needs further collision testing so push it\n            if (pair[2] > 0) {\n                pairs.push(pair);\n            } else {\n                delete grid.pairs[pairKeys[k]];\n            }\n        }\n\n        return pairs;\n    };\n    \n})();\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Matter = module.exports = __webpack_require__(23);\r\n\r\nMatter.Axes = __webpack_require__(10);\r\nMatter.Bodies = __webpack_require__(11);\r\nMatter.Body = __webpack_require__(6);\r\nMatter.Bounds = __webpack_require__(1);\r\nMatter.Common = __webpack_require__(0);\r\nMatter.Composite = __webpack_require__(5);\r\nMatter.Composites = __webpack_require__(24);\r\nMatter.Constraint = __webpack_require__(8);\r\nMatter.Contact = __webpack_require__(17);\r\nMatter.Detector = __webpack_require__(13);\r\nMatter.Engine = __webpack_require__(18);\r\nMatter.Events = __webpack_require__(4);\r\nMatter.Grid = __webpack_require__(21);\r\nMatter.Mouse = __webpack_require__(12);\r\nMatter.MouseConstraint = __webpack_require__(25);\r\nMatter.Pair = __webpack_require__(9);\r\nMatter.Pairs = __webpack_require__(20);\r\nMatter.Plugin = __webpack_require__(15);\r\nMatter.Query = __webpack_require__(26);\r\nMatter.Render = __webpack_require__(16);\r\nMatter.Resolver = __webpack_require__(19);\r\nMatter.Runner = __webpack_require__(27);\r\nMatter.SAT = __webpack_require__(14);\r\nMatter.Sleeping = __webpack_require__(7);\r\nMatter.Svg = __webpack_require__(28);\r\nMatter.Vector = __webpack_require__(2);\r\nMatter.Vertices = __webpack_require__(3);\r\nMatter.World = __webpack_require__(29);\r\n\r\n// temporary back compatibility\r\nMatter.Engine.run = Matter.Runner.run;\r\nMatter.Common.deprecated(Matter.Engine, 'run', 'Engine.run  use Matter.Runner.run(engine) instead');\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n* The `Matter` module is the top level namespace. It also includes a function for installing plugins on top of the library.\r\n*\r\n* @class Matter\r\n*/\r\n\r\nvar Matter = {};\r\n\r\nmodule.exports = Matter;\r\n\r\nvar Plugin = __webpack_require__(15);\r\nvar Common = __webpack_require__(0);\r\n\r\n(function() {\r\n\r\n    /**\r\n     * The library name.\r\n     * @property name\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.name = 'matter-js';\r\n\r\n    /**\r\n     * The library version.\r\n     * @property version\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.version =  true ? \"0.17.1\" : undefined;\r\n\r\n    /**\r\n     * A list of plugin dependencies to be installed. These are normally set and installed through `Matter.use`.\r\n     * Alternatively you may set `Matter.uses` manually and install them by calling `Plugin.use(Matter)`.\r\n     * @property uses\r\n     * @type {Array}\r\n     */\r\n    Matter.uses = [];\r\n\r\n    /**\r\n     * The plugins that have been installed through `Matter.Plugin.install`. Read only.\r\n     * @property used\r\n     * @readOnly\r\n     * @type {Array}\r\n     */\r\n    Matter.used = [];\r\n\r\n    /**\r\n     * Installs the given plugins on the `Matter` namespace.\r\n     * This is a short-hand for `Plugin.use`, see it for more information.\r\n     * Call this function once at the start of your code, with all of the plugins you wish to install as arguments.\r\n     * Avoid calling this function multiple times unless you intend to manually control installation order.\r\n     * @method use\r\n     * @param ...plugin {Function} The plugin(s) to install on `base` (multi-argument).\r\n     */\r\n    Matter.use = function() {\r\n        Plugin.use(Matter, Array.prototype.slice.call(arguments));\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute before the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method before\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain before the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.before = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathBefore(Matter, path, func);\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute after the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method after\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain after the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.after = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathAfter(Matter, path, func);\r\n    };\r\n\r\n})();\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Composites` module contains factory methods for creating composite bodies\n* with commonly used configurations (such as stacks and chains).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composites\n*/\n\nvar Composites = {};\n\nmodule.exports = Composites;\n\nvar Composite = __webpack_require__(5);\nvar Constraint = __webpack_require__(8);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\nvar Bodies = __webpack_require__(11);\nvar deprecated = Common.deprecated;\n\n(function() {\n\n    /**\n     * Create a new composite containing bodies created in the callback in a grid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method stack\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.stack = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\n        var stack = Composite.create({ label: 'Stack' }),\n            x = xx,\n            y = yy,\n            lastBody,\n            i = 0;\n\n        for (var row = 0; row < rows; row++) {\n            var maxHeight = 0;\n            \n            for (var column = 0; column < columns; column++) {\n                var body = callback(x, y, column, row, lastBody, i);\n                    \n                if (body) {\n                    var bodyHeight = body.bounds.max.y - body.bounds.min.y,\n                        bodyWidth = body.bounds.max.x - body.bounds.min.x; \n\n                    if (bodyHeight > maxHeight)\n                        maxHeight = bodyHeight;\n                    \n                    Body.translate(body, { x: bodyWidth * 0.5, y: bodyHeight * 0.5 });\n\n                    x = body.bounds.max.x + columnGap;\n\n                    Composite.addBody(stack, body);\n                    \n                    lastBody = body;\n                    i += 1;\n                } else {\n                    x += columnGap;\n                }\n            }\n            \n            y += maxHeight + rowGap;\n            x = xx;\n        }\n\n        return stack;\n    };\n    \n    /**\n     * Chains all bodies in the given composite together using constraints.\n     * @method chain\n     * @param {composite} composite\n     * @param {number} xOffsetA\n     * @param {number} yOffsetA\n     * @param {number} xOffsetB\n     * @param {number} yOffsetB\n     * @param {object} options\n     * @return {composite} A new composite containing objects chained together with constraints\n     */\n    Composites.chain = function(composite, xOffsetA, yOffsetA, xOffsetB, yOffsetB, options) {\n        var bodies = composite.bodies;\n        \n        for (var i = 1; i < bodies.length; i++) {\n            var bodyA = bodies[i - 1],\n                bodyB = bodies[i],\n                bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\n                bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x, \n                bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\n                bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\n        \n            var defaults = {\n                bodyA: bodyA,\n                pointA: { x: bodyAWidth * xOffsetA, y: bodyAHeight * yOffsetA },\n                bodyB: bodyB,\n                pointB: { x: bodyBWidth * xOffsetB, y: bodyBHeight * yOffsetB }\n            };\n            \n            var constraint = Common.extend(defaults, options);\n        \n            Composite.addConstraint(composite, Constraint.create(constraint));\n        }\n\n        composite.label += ' Chain';\n        \n        return composite;\n    };\n\n    /**\n     * Connects bodies in the composite with constraints in a grid pattern, with optional cross braces.\n     * @method mesh\n     * @param {composite} composite\n     * @param {number} columns\n     * @param {number} rows\n     * @param {boolean} crossBrace\n     * @param {object} options\n     * @return {composite} The composite containing objects meshed together with constraints\n     */\n    Composites.mesh = function(composite, columns, rows, crossBrace, options) {\n        var bodies = composite.bodies,\n            row,\n            col,\n            bodyA,\n            bodyB,\n            bodyC;\n        \n        for (row = 0; row < rows; row++) {\n            for (col = 1; col < columns; col++) {\n                bodyA = bodies[(col - 1) + (row * columns)];\n                bodyB = bodies[col + (row * columns)];\n                Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n            }\n\n            if (row > 0) {\n                for (col = 0; col < columns; col++) {\n                    bodyA = bodies[col + ((row - 1) * columns)];\n                    bodyB = bodies[col + (row * columns)];\n                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n\n                    if (crossBrace && col > 0) {\n                        bodyC = bodies[(col - 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n\n                    if (crossBrace && col < columns - 1) {\n                        bodyC = bodies[(col + 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n                }\n            }\n        }\n\n        composite.label += ' Mesh';\n        \n        return composite;\n    };\n    \n    /**\n     * Create a new composite containing bodies created in the callback in a pyramid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method pyramid\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.pyramid = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\n        return Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y, column, row, lastBody, i) {\n            var actualRows = Math.min(rows, Math.ceil(columns / 2)),\n                lastBodyWidth = lastBody ? lastBody.bounds.max.x - lastBody.bounds.min.x : 0;\n            \n            if (row > actualRows)\n                return;\n            \n            // reverse row order\n            row = actualRows - row;\n            \n            var start = row,\n                end = columns - 1 - row;\n\n            if (column < start || column > end)\n                return;\n            \n            // retroactively fix the first body's position, since width was unknown\n            if (i === 1) {\n                Body.translate(lastBody, { x: (column + (columns % 2 === 1 ? 1 : -1)) * lastBodyWidth, y: 0 });\n            }\n\n            var xOffset = lastBody ? column * lastBodyWidth : 0;\n            \n            return callback(xx + xOffset + column * columnGap, y, column, row, lastBody, i);\n        });\n    };\n\n    /**\n     * This has now moved to the [newtonsCradle example](https://github.com/liabru/matter-js/blob/master/examples/newtonsCradle.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to newtonsCradle example\n     * @method newtonsCradle\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} number\n     * @param {number} size\n     * @param {number} length\n     * @return {composite} A new composite newtonsCradle body\n     */\n    Composites.newtonsCradle = function(xx, yy, number, size, length) {\n        var newtonsCradle = Composite.create({ label: 'Newtons Cradle' });\n\n        for (var i = 0; i < number; i++) {\n            var separation = 1.9,\n                circle = Bodies.circle(xx + i * (size * separation), yy + length, size, \n                    { inertia: Infinity, restitution: 1, friction: 0, frictionAir: 0.0001, slop: 1 }),\n                constraint = Constraint.create({ pointA: { x: xx + i * (size * separation), y: yy }, bodyB: circle });\n\n            Composite.addBody(newtonsCradle, circle);\n            Composite.addConstraint(newtonsCradle, constraint);\n        }\n\n        return newtonsCradle;\n    };\n\n    deprecated(Composites, 'newtonsCradle', 'Composites.newtonsCradle  moved to newtonsCradle example');\n    \n    /**\n     * This has now moved to the [car example](https://github.com/liabru/matter-js/blob/master/examples/car.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to car example\n     * @method car\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} width\n     * @param {number} height\n     * @param {number} wheelSize\n     * @return {composite} A new composite car body\n     */\n    Composites.car = function(xx, yy, width, height, wheelSize) {\n        var group = Body.nextGroup(true),\n            wheelBase = 20,\n            wheelAOffset = -width * 0.5 + wheelBase,\n            wheelBOffset = width * 0.5 - wheelBase,\n            wheelYOffset = 0;\n    \n        var car = Composite.create({ label: 'Car' }),\n            body = Bodies.rectangle(xx, yy, width, height, { \n                collisionFilter: {\n                    group: group\n                },\n                chamfer: {\n                    radius: height * 0.5\n                },\n                density: 0.0002\n            });\n    \n        var wheelA = Bodies.circle(xx + wheelAOffset, yy + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var wheelB = Bodies.circle(xx + wheelBOffset, yy + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var axelA = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelAOffset, y: wheelYOffset },\n            bodyA: wheelA,\n            stiffness: 1,\n            length: 0\n        });\n                        \n        var axelB = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelBOffset, y: wheelYOffset },\n            bodyA: wheelB,\n            stiffness: 1,\n            length: 0\n        });\n        \n        Composite.addBody(car, body);\n        Composite.addBody(car, wheelA);\n        Composite.addBody(car, wheelB);\n        Composite.addConstraint(car, axelA);\n        Composite.addConstraint(car, axelB);\n\n        return car;\n    };\n\n    deprecated(Composites, 'car', 'Composites.car  moved to car example');\n\n    /**\n     * This has now moved to the [softBody example](https://github.com/liabru/matter-js/blob/master/examples/softBody.js)\n     * and the [cloth example](https://github.com/liabru/matter-js/blob/master/examples/cloth.js), follow those instead as this function is deprecated here.\n     * @deprecated moved to softBody and cloth examples\n     * @method softBody\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {boolean} crossBrace\n     * @param {number} particleRadius\n     * @param {} particleOptions\n     * @param {} constraintOptions\n     * @return {composite} A new composite softBody\n     */\n    Composites.softBody = function(xx, yy, columns, rows, columnGap, rowGap, crossBrace, particleRadius, particleOptions, constraintOptions) {\n        particleOptions = Common.extend({ inertia: Infinity }, particleOptions);\n        constraintOptions = Common.extend({ stiffness: 0.2, render: { type: 'line', anchors: false } }, constraintOptions);\n\n        var softBody = Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y) {\n            return Bodies.circle(x, y, particleRadius, particleOptions);\n        });\n\n        Composites.mesh(softBody, columns, rows, crossBrace, constraintOptions);\n\n        softBody.label = 'Soft Body';\n\n        return softBody;\n    };\n\n    deprecated(Composites, 'softBody', 'Composites.softBody  moved to softBody and cloth examples');\n})();\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.MouseConstraint` module contains methods for creating mouse constraints.\n* Mouse constraints are used for allowing user interaction, providing the ability to move bodies via the mouse or touch.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class MouseConstraint\n*/\n\nvar MouseConstraint = {};\n\nmodule.exports = MouseConstraint;\n\nvar Vertices = __webpack_require__(3);\nvar Sleeping = __webpack_require__(7);\nvar Mouse = __webpack_require__(12);\nvar Events = __webpack_require__(4);\nvar Detector = __webpack_require__(13);\nvar Constraint = __webpack_require__(8);\nvar Composite = __webpack_require__(5);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    /**\n     * Creates a new mouse constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {engine} engine\n     * @param {} options\n     * @return {MouseConstraint} A new MouseConstraint\n     */\n    MouseConstraint.create = function(engine, options) {\n        var mouse = (engine ? engine.mouse : null) || (options ? options.mouse : null);\n\n        if (!mouse) {\n            if (engine && engine.render && engine.render.canvas) {\n                mouse = Mouse.create(engine.render.canvas);\n            } else if (options && options.element) {\n                mouse = Mouse.create(options.element);\n            } else {\n                mouse = Mouse.create();\n                Common.warn('MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected');\n            }\n        }\n\n        var constraint = Constraint.create({ \n            label: 'Mouse Constraint',\n            pointA: mouse.position,\n            pointB: { x: 0, y: 0 },\n            length: 0.01, \n            stiffness: 0.1,\n            angularStiffness: 1,\n            render: {\n                strokeStyle: '#90EE90',\n                lineWidth: 3\n            }\n        });\n\n        var defaults = {\n            type: 'mouseConstraint',\n            mouse: mouse,\n            element: null,\n            body: null,\n            constraint: constraint,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            }\n        };\n\n        var mouseConstraint = Common.extend(defaults, options);\n\n        Events.on(engine, 'beforeUpdate', function() {\n            var allBodies = Composite.allBodies(engine.world);\n            MouseConstraint.update(mouseConstraint, allBodies);\n            MouseConstraint._triggerEvents(mouseConstraint);\n        });\n\n        return mouseConstraint;\n    };\n\n    /**\n     * Updates the given mouse constraint.\n     * @private\n     * @method update\n     * @param {MouseConstraint} mouseConstraint\n     * @param {body[]} bodies\n     */\n    MouseConstraint.update = function(mouseConstraint, bodies) {\n        var mouse = mouseConstraint.mouse,\n            constraint = mouseConstraint.constraint,\n            body = mouseConstraint.body;\n\n        if (mouse.button === 0) {\n            if (!constraint.bodyB) {\n                for (var i = 0; i < bodies.length; i++) {\n                    body = bodies[i];\n                    if (Bounds.contains(body.bounds, mouse.position) \n                            && Detector.canCollide(body.collisionFilter, mouseConstraint.collisionFilter)) {\n                        for (var j = body.parts.length > 1 ? 1 : 0; j < body.parts.length; j++) {\n                            var part = body.parts[j];\n                            if (Vertices.contains(part.vertices, mouse.position)) {\n                                constraint.pointA = mouse.position;\n                                constraint.bodyB = mouseConstraint.body = body;\n                                constraint.pointB = { x: mouse.position.x - body.position.x, y: mouse.position.y - body.position.y };\n                                constraint.angleB = body.angle;\n\n                                Sleeping.set(body, false);\n                                Events.trigger(mouseConstraint, 'startdrag', { mouse: mouse, body: body });\n\n                                break;\n                            }\n                        }\n                    }\n                }\n            } else {\n                Sleeping.set(constraint.bodyB, false);\n                constraint.pointA = mouse.position;\n            }\n        } else {\n            constraint.bodyB = mouseConstraint.body = null;\n            constraint.pointB = null;\n\n            if (body)\n                Events.trigger(mouseConstraint, 'enddrag', { mouse: mouse, body: body });\n        }\n    };\n\n    /**\n     * Triggers mouse constraint events.\n     * @method _triggerEvents\n     * @private\n     * @param {mouse} mouseConstraint\n     */\n    MouseConstraint._triggerEvents = function(mouseConstraint) {\n        var mouse = mouseConstraint.mouse,\n            mouseEvents = mouse.sourceEvents;\n\n        if (mouseEvents.mousemove)\n            Events.trigger(mouseConstraint, 'mousemove', { mouse: mouse });\n\n        if (mouseEvents.mousedown)\n            Events.trigger(mouseConstraint, 'mousedown', { mouse: mouse });\n\n        if (mouseEvents.mouseup)\n            Events.trigger(mouseConstraint, 'mouseup', { mouse: mouse });\n\n        // reset the mouse state ready for the next step\n        Mouse.clearSourceEvents(mouse);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when the mouse has moved (or a touch moves) during the last step\n    *\n    * @event mousemove\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is down (or a touch has started) during the last step\n    *\n    * @event mousedown\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is up (or a touch has ended) during the last step\n    *\n    * @event mouseup\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user starts dragging a body\n    *\n    * @event startdrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user ends dragging a body\n    *\n    * @event enddrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body that has stopped being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * The `Mouse` instance in use. If not supplied in `MouseConstraint.create`, one will be created.\n     *\n     * @property mouse\n     * @type mouse\n     * @default mouse\n     */\n\n    /**\n     * The `Body` that is currently being moved by the user, or `null` if no body.\n     *\n     * @property body\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The `Constraint` object that is used to move the body during interaction.\n     *\n     * @property constraint\n     * @type constraint\n     */\n\n    /**\n     * An `Object` that specifies the collision filter properties.\n     * The collision filter allows the user to define which types of body this mouse constraint can interact with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n})();\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Query` module contains methods for performing collision queries.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Query\n*/\n\nvar Query = {};\n\nmodule.exports = Query;\n\nvar Vector = __webpack_require__(2);\nvar SAT = __webpack_require__(14);\nvar Bounds = __webpack_require__(1);\nvar Bodies = __webpack_require__(11);\nvar Vertices = __webpack_require__(3);\n\n(function() {\n\n    /**\n     * Returns a list of collisions between `body` and `bodies`.\n     * @method collides\n     * @param {body} body\n     * @param {body[]} bodies\n     * @return {object[]} Collisions\n     */\n    Query.collides = function(body, bodies) {\n        var collisions = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var bodyA = bodies[i];\n            \n            if (Bounds.overlaps(bodyA.bounds, body.bounds)) {\n                for (var j = bodyA.parts.length === 1 ? 0 : 1; j < bodyA.parts.length; j++) {\n                    var part = bodyA.parts[j];\n\n                    if (Bounds.overlaps(part.bounds, body.bounds)) {\n                        var collision = SAT.collides(part, body);\n\n                        if (collision.collided) {\n                            collisions.push(collision);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Casts a ray segment against a set of bodies and returns all collisions, ray width is optional. Intersection points are not provided.\n     * @method ray\n     * @param {body[]} bodies\n     * @param {vector} startPoint\n     * @param {vector} endPoint\n     * @param {number} [rayWidth]\n     * @return {object[]} Collisions\n     */\n    Query.ray = function(bodies, startPoint, endPoint, rayWidth) {\n        rayWidth = rayWidth || 1e-100;\n\n        var rayAngle = Vector.angle(startPoint, endPoint),\n            rayLength = Vector.magnitude(Vector.sub(startPoint, endPoint)),\n            rayX = (endPoint.x + startPoint.x) * 0.5,\n            rayY = (endPoint.y + startPoint.y) * 0.5,\n            ray = Bodies.rectangle(rayX, rayY, rayLength, rayWidth, { angle: rayAngle }),\n            collisions = Query.collides(ray, bodies);\n\n        for (var i = 0; i < collisions.length; i += 1) {\n            var collision = collisions[i];\n            collision.body = collision.bodyB = collision.bodyA;            \n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns all bodies whose bounds are inside (or outside if set) the given set of bounds, from the given set of bodies.\n     * @method region\n     * @param {body[]} bodies\n     * @param {bounds} bounds\n     * @param {bool} [outside=false]\n     * @return {body[]} The bodies matching the query\n     */\n    Query.region = function(bodies, bounds, outside) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                overlaps = Bounds.overlaps(body.bounds, bounds);\n            if ((overlaps && !outside) || (!overlaps && outside))\n                result.push(body);\n        }\n\n        return result;\n    };\n\n    /**\n     * Returns all bodies whose vertices contain the given point, from the given set of bodies.\n     * @method point\n     * @param {body[]} bodies\n     * @param {vector} point\n     * @return {body[]} The bodies matching the query\n     */\n    Query.point = function(bodies, point) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n            \n            if (Bounds.contains(body.bounds, point)) {\n                for (var j = body.parts.length === 1 ? 0 : 1; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n\n                    if (Bounds.contains(part.bounds, point)\n                        && Vertices.contains(part.vertices, point)) {\n                        result.push(body);\n                        break;\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n\n})();\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Runner` module is an optional utility which provides a game loop, \n* that handles continuously updating a `Matter.Engine` for you within a browser.\n* It is intended for development and debugging purposes, but may also be suitable for simple games.\n* If you are using your own game loop instead, then you do not need the `Matter.Runner` module.\n* Instead just call `Engine.update(engine, delta)` in your own loop.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Runner\n*/\n\nvar Runner = {};\n\nmodule.exports = Runner;\n\nvar Events = __webpack_require__(4);\nvar Engine = __webpack_require__(18);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    var _requestAnimationFrame,\n        _cancelAnimationFrame;\n\n    if (typeof window !== 'undefined') {\n        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;\n   \n        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame \n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n    }\n\n    if (!_requestAnimationFrame) {\n        var _frameTimeout;\n\n        _requestAnimationFrame = function(callback){ \n            _frameTimeout = setTimeout(function() { \n                callback(Common.now()); \n            }, 1000 / 60);\n        };\n\n        _cancelAnimationFrame = function() {\n            clearTimeout(_frameTimeout);\n        };\n    }\n\n    /**\n     * Creates a new Runner. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * @method create\n     * @param {} options\n     */\n    Runner.create = function(options) {\n        var defaults = {\n            fps: 60,\n            correction: 1,\n            deltaSampleSize: 60,\n            counterTimestamp: 0,\n            frameCounter: 0,\n            deltaHistory: [],\n            timePrev: null,\n            timeScalePrev: 1,\n            frameRequestId: null,\n            isFixed: false,\n            enabled: true\n        };\n\n        var runner = Common.extend(defaults, options);\n\n        runner.delta = runner.delta || 1000 / runner.fps;\n        runner.deltaMin = runner.deltaMin || 1000 / runner.fps;\n        runner.deltaMax = runner.deltaMax || 1000 / (runner.fps * 0.5);\n        runner.fps = 1000 / runner.delta;\n\n        return runner;\n    };\n\n    /**\n     * Continuously ticks a `Matter.Engine` by calling `Runner.tick` on the `requestAnimationFrame` event.\n     * @method run\n     * @param {engine} engine\n     */\n    Runner.run = function(runner, engine) {\n        // create runner if engine is first argument\n        if (typeof runner.positionIterations !== 'undefined') {\n            engine = runner;\n            runner = Runner.create();\n        }\n\n        (function render(time){\n            runner.frameRequestId = _requestAnimationFrame(render);\n\n            if (time && runner.enabled) {\n                Runner.tick(runner, engine, time);\n            }\n        })();\n\n        return runner;\n    };\n\n    /**\n     * A game loop utility that updates the engine and renderer by one step (a 'tick').\n     * Features delta smoothing, time correction and fixed or dynamic timing.\n     * Consider just `Engine.update(engine, delta)` if you're using your own loop.\n     * @method tick\n     * @param {runner} runner\n     * @param {engine} engine\n     * @param {number} time\n     */\n    Runner.tick = function(runner, engine, time) {\n        var timing = engine.timing,\n            correction = 1,\n            delta;\n\n        // create an event object\n        var event = {\n            timestamp: timing.timestamp\n        };\n\n        Events.trigger(runner, 'beforeTick', event);\n\n        if (runner.isFixed) {\n            // fixed timestep\n            delta = runner.delta;\n        } else {\n            // dynamic timestep based on wall clock between calls\n            delta = (time - runner.timePrev) || runner.delta;\n            runner.timePrev = time;\n\n            // optimistically filter delta over a few frames, to improve stability\n            runner.deltaHistory.push(delta);\n            runner.deltaHistory = runner.deltaHistory.slice(-runner.deltaSampleSize);\n            delta = Math.min.apply(null, runner.deltaHistory);\n            \n            // limit delta\n            delta = delta < runner.deltaMin ? runner.deltaMin : delta;\n            delta = delta > runner.deltaMax ? runner.deltaMax : delta;\n\n            // correction for delta\n            correction = delta / runner.delta;\n\n            // update engine timing object\n            runner.delta = delta;\n        }\n\n        // time correction for time scaling\n        if (runner.timeScalePrev !== 0)\n            correction *= timing.timeScale / runner.timeScalePrev;\n\n        if (timing.timeScale === 0)\n            correction = 0;\n\n        runner.timeScalePrev = timing.timeScale;\n        runner.correction = correction;\n\n        // fps counter\n        runner.frameCounter += 1;\n        if (time - runner.counterTimestamp >= 1000) {\n            runner.fps = runner.frameCounter * ((time - runner.counterTimestamp) / 1000);\n            runner.counterTimestamp = time;\n            runner.frameCounter = 0;\n        }\n\n        Events.trigger(runner, 'tick', event);\n\n        // update\n        Events.trigger(runner, 'beforeUpdate', event);\n        Engine.update(engine, delta, correction);\n        Events.trigger(runner, 'afterUpdate', event);\n\n        Events.trigger(runner, 'afterTick', event);\n    };\n\n    /**\n     * Ends execution of `Runner.run` on the given `runner`, by canceling the animation frame request event loop.\n     * If you wish to only temporarily pause the engine, see `engine.enabled` instead.\n     * @method stop\n     * @param {runner} runner\n     */\n    Runner.stop = function(runner) {\n        _cancelAnimationFrame(runner.frameRequestId);\n    };\n\n    /**\n     * Alias for `Runner.run`.\n     * @method start\n     * @param {runner} runner\n     * @param {engine} engine\n     */\n    Runner.start = function(runner, engine) {\n        Runner.run(runner, engine);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired at the start of a tick, before any updates to the engine or timing\n    *\n    * @event beforeTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine timing updated, but just before update\n    *\n    * @event tick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired at the end of a tick, after engine update and after rendering\n    *\n    * @event afterTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired before update\n    *\n    * @event beforeUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after update\n    *\n    * @event afterUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A flag that specifies whether the runner is running or not.\n     *\n     * @property enabled\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A `Boolean` that specifies if the runner should use a fixed timestep (otherwise it is variable).\n     * If timing is fixed, then the apparent simulation speed will change depending on the frame rate (but behaviour will be deterministic).\n     * If the timing is variable, then the apparent simulation speed will be constant (approximately, but at the cost of determininism).\n     *\n     * @property isFixed\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A `Number` that specifies the time step between updates in milliseconds.\n     * If `engine.timing.isFixed` is set to `true`, then `delta` is fixed.\n     * If it is `false`, then `delta` can dynamically change to maintain the correct apparent simulation speed.\n     *\n     * @property delta\n     * @type number\n     * @default 1000 / 60\n     */\n\n})();\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Svg` module contains methods for converting SVG images into an array of vector points.\n*\n* To use this module you also need the SVGPathSeg polyfill: https://github.com/progers/pathseg\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Svg\n*/\n\nvar Svg = {};\n\nmodule.exports = Svg;\n\nvar Bounds = __webpack_require__(1);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Converts an SVG path into an array of vector points.\n     * If the input path forms a concave shape, you must decompose the result into convex parts before use.\n     * See `Bodies.fromVertices` which provides support for this.\n     * Note that this function is not guaranteed to support complex paths (such as those with holes).\n     * You must load the `pathseg.js` polyfill on newer browsers.\n     * @method pathToVertices\n     * @param {SVGPathElement} path\n     * @param {Number} [sampleLength=15]\n     * @return {Vector[]} points\n     */\n    Svg.pathToVertices = function(path, sampleLength) {\n        if (typeof window !== 'undefined' && !('SVGPathSeg' in window)) {\n            Common.warn('Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.');\n        }\n\n        // https://github.com/wout/svg.topoly.js/blob/master/svg.topoly.js\n        var i, il, total, point, segment, segments, \n            segmentsQueue, lastSegment, \n            lastPoint, segmentIndex, points = [],\n            lx, ly, length = 0, x = 0, y = 0;\n\n        sampleLength = sampleLength || 15;\n\n        var addPoint = function(px, py, pathSegType) {\n            // all odd-numbered path types are relative except PATHSEG_CLOSEPATH (1)\n            var isRelative = pathSegType % 2 === 1 && pathSegType > 1;\n\n            // when the last point doesn't equal the current point add the current point\n            if (!lastPoint || px != lastPoint.x || py != lastPoint.y) {\n                if (lastPoint && isRelative) {\n                    lx = lastPoint.x;\n                    ly = lastPoint.y;\n                } else {\n                    lx = 0;\n                    ly = 0;\n                }\n\n                var point = {\n                    x: lx + px,\n                    y: ly + py\n                };\n\n                // set last point\n                if (isRelative || !lastPoint) {\n                    lastPoint = point;\n                }\n\n                points.push(point);\n\n                x = lx + px;\n                y = ly + py;\n            }\n        };\n\n        var addSegmentPoint = function(segment) {\n            var segType = segment.pathSegTypeAsLetter.toUpperCase();\n\n            // skip path ends\n            if (segType === 'Z') \n                return;\n\n            // map segment to x and y\n            switch (segType) {\n\n            case 'M':\n            case 'L':\n            case 'T':\n            case 'C':\n            case 'S':\n            case 'Q':\n                x = segment.x;\n                y = segment.y;\n                break;\n            case 'H':\n                x = segment.x;\n                break;\n            case 'V':\n                y = segment.y;\n                break;\n            }\n\n            addPoint(x, y, segment.pathSegType);\n        };\n\n        // ensure path is absolute\n        Svg._svgPathToAbsolute(path);\n\n        // get total length\n        total = path.getTotalLength();\n\n        // queue segments\n        segments = [];\n        for (i = 0; i < path.pathSegList.numberOfItems; i += 1)\n            segments.push(path.pathSegList.getItem(i));\n\n        segmentsQueue = segments.concat();\n\n        // sample through path\n        while (length < total) {\n            // get segment at position\n            segmentIndex = path.getPathSegAtLength(length);\n            segment = segments[segmentIndex];\n\n            // new segment\n            if (segment != lastSegment) {\n                while (segmentsQueue.length && segmentsQueue[0] != segment)\n                    addSegmentPoint(segmentsQueue.shift());\n\n                lastSegment = segment;\n            }\n\n            // add points in between when curving\n            // TODO: adaptive sampling\n            switch (segment.pathSegTypeAsLetter.toUpperCase()) {\n\n            case 'C':\n            case 'T':\n            case 'S':\n            case 'Q':\n            case 'A':\n                point = path.getPointAtLength(length);\n                addPoint(point.x, point.y, 0);\n                break;\n\n            }\n\n            // increment by sample value\n            length += sampleLength;\n        }\n\n        // add remaining segments not passed by sampling\n        for (i = 0, il = segmentsQueue.length; i < il; ++i)\n            addSegmentPoint(segmentsQueue[i]);\n\n        return points;\n    };\n\n    Svg._svgPathToAbsolute = function(path) {\n        // http://phrogz.net/convert-svg-path-to-all-absolute-commands\n        // Copyright (c) Gavin Kistner\n        // http://phrogz.net/js/_ReuseLicense.txt\n        // Modifications: tidy formatting and naming\n        var x0, y0, x1, y1, x2, y2, segs = path.pathSegList,\n            x = 0, y = 0, len = segs.numberOfItems;\n\n        for (var i = 0; i < len; ++i) {\n            var seg = segs.getItem(i),\n                segType = seg.pathSegTypeAsLetter;\n\n            if (/[MLHVCSQTA]/.test(segType)) {\n                if ('x' in seg) x = seg.x;\n                if ('y' in seg) y = seg.y;\n            } else {\n                if ('x1' in seg) x1 = x + seg.x1;\n                if ('x2' in seg) x2 = x + seg.x2;\n                if ('y1' in seg) y1 = y + seg.y1;\n                if ('y2' in seg) y2 = y + seg.y2;\n                if ('x' in seg) x += seg.x;\n                if ('y' in seg) y += seg.y;\n\n                switch (segType) {\n\n                case 'm':\n                    segs.replaceItem(path.createSVGPathSegMovetoAbs(x, y), i);\n                    break;\n                case 'l':\n                    segs.replaceItem(path.createSVGPathSegLinetoAbs(x, y), i);\n                    break;\n                case 'h':\n                    segs.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(x), i);\n                    break;\n                case 'v':\n                    segs.replaceItem(path.createSVGPathSegLinetoVerticalAbs(y), i);\n                    break;\n                case 'c':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicAbs(x, y, x1, y1, x2, y2), i);\n                    break;\n                case 's':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(x, y, x2, y2), i);\n                    break;\n                case 'q':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(x, y, x1, y1), i);\n                    break;\n                case 't':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(x, y), i);\n                    break;\n                case 'a':\n                    segs.replaceItem(path.createSVGPathSegArcAbs(x, y, seg.r1, seg.r2, seg.angle, seg.largeArcFlag, seg.sweepFlag), i);\n                    break;\n                case 'z':\n                case 'Z':\n                    x = x0;\n                    y = y0;\n                    break;\n\n                }\n            }\n\n            if (segType == 'M' || segType == 'm') {\n                x0 = x;\n                y0 = y;\n            }\n        }\n    };\n\n})();\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* This module has now been replaced by `Matter.Composite`.\n*\n* All usage should be migrated to the equivalent functions found on `Matter.Composite`.\n* For example `World.add(world, body)` now becomes `Composite.add(world, body)`.\n*\n* The property `world.gravity` has been moved to `engine.gravity`.\n*\n* For back-compatibility purposes this module will remain as a direct alias to `Matter.Composite` in the short term during migration.\n* Eventually this alias module will be marked as deprecated and then later removed in a future release.\n*\n* @class World\n*/\n\nvar World = {};\n\nmodule.exports = World;\n\nvar Composite = __webpack_require__(5);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * See above, aliases for back compatibility only\n     */\n    World.create = Composite.create;\n    World.add = Composite.add;\n    World.remove = Composite.remove;\n    World.clear = Composite.clear;\n    World.addComposite = Composite.addComposite;\n    World.addBody = Composite.addBody;\n    World.addConstraint = Composite.addConstraint;\n\n})();\n\n\n/***/ })\n/******/ ]);\n});"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","staticClass","attrs","_m1","Matrix4","_obj","Object3D","_offset","Vector3","Geometry","EventDispatcher","constructor","super","uuid","MathUtils","name","type","vertices","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","boundingSphere","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","applyMatrix4","matrix","normalMatrix","Matrix3","getNormalMatrix","i","il","length","vertex","face","normal","applyMatrix3","normalize","j","jl","vertexNormals","computeBoundingBox","computeBoundingSphere","rotateX","angle","makeRotationX","rotateY","makeRotationY","rotateZ","makeRotationZ","translate","x","y","z","makeTranslation","scale","makeScale","lookAt","vector","updateMatrix","fromBufferGeometry","geometry","scope","index","undefined","attributes","position","console","error","color","uv","uv2","count","push","fromBufferAttribute","Color","addFace","a","b","c","materialIndex","vertexColors","clone","Face3","Vector2","groups","group","start","getX","computeFaceNormals","center","getCenter","negate","radius","s","set","cb","ab","f","fl","vA","vB","vC","subVectors","cross","copy","computeVertexNormals","areaWeighted","Array","v","vl","add","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","Box3","setFromPoints","Sphere","merge","materialIndexOffset","isGeometry","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","faceVertexUvs2","uvs2","uvsCopy","k","kl","mergeMesh","mesh","isMesh","matrixAutoUpdate","mergeVertices","precisionPoints","verticesMap","unique","changes","precision","Math","pow","key","round","faceIndicesToRemove","indices","n","idx","splice","diff","points","l","point","sortFacesByMaterialIndex","_id","materialIndexSort","sort","uvs1","newUvs1","newUvs2","id","toJSON","data","metadata","version","generator","parameters","normals","normalsHash","colorsHash","uvs","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","r","g","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","value","enabled","hash","toString","getHex","source","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","toBufferGeometry","DirectGeometry","fromGeometry","buffergeometry","BufferGeometry","positions","Float32Array","setAttribute","BufferAttribute","copyVector3sArray","copyColorsArray","copyVector2sArray","array","attribute","Float32BufferAttribute","morphAttributes","copyVector4sArray","computeTangents","computeLineDistances","applyMatrix","warn","dispose","dispatchEvent","object","isPoints","isLine","copyArray","prototype","computeGroups","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","isVector3","isArray","isColor","SVGLoader","Loader","manager","defaultDPI","defaultUnit","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","e","itemError","parseNode","node","style","nodeType","transform","getNodeTransform","traverseChildNodes","nodeName","parseCSSStylesheet","parseStyle","hasAttribute","parsePathNode","parseRectNode","parsePolygonNode","parsePolylineNode","parseCircleNode","parseEllipseNode","parseLineNode","href","getAttributeNS","usedNodeId","substring","usedNode","viewportElement","getElementById","fill","setStyle","transformPath","currentTransform","paths","userData","nodes","childNodes","transformStack","pop","identity","ShapePath","control","firstPoint","isFirstPoint","doSetFirstPoint","d","getAttribute","commands","match","command","charAt","substr","trim","numbers","parseFloats","moveTo","lineTo","bezierCurveTo","getReflection","quadraticCurveTo","rx","ry","parseArcCommand","currentPath","autoClose","curves","currentPoint","sheet","cssRules","stylesheet","selectorList","selectorText","split","filter","Boolean","map","definitions","Object","fromEntries","entries","stylesheets","assign","x_axis_rotation","large_arc_flag","sweep_flag","end","PI","abs","dx2","dy2","x1p","cos","sin","y1p","rxs","rys","x1ps","y1ps","cr","sqrt","dq","pq","q","max","cxp","cyp","cx","cy","theta","svgAngle","delta","absellipse","ux","uy","vx","vy","dot","len","ang","acos","min","parseFloatWithUnits","w","h","bci","iterator","regex","replace","subpath","Path","absarc","subPaths","x1","y1","x2","y2","stylesheetStyles","classSelectors","addStyle","svgName","jsName","adjustFunction","startsWith","clamp","positive","input","flags","stride","TypeError","RE","SEPARATOR","WHITESPACE","DIGIT","SIGN","POINT","COMMA","EXP","FLAGS","SEP","INT","FLOAT","state","seenComma","number","exponent","result","throwSyntaxError","current","partial","SyntaxError","newNumber","Number","includes","test","units","unitConversion","string","theUnit","String","u","endsWith","parseFloat","parseNodeTransform","premultiply","tempTransform0","tx","ty","transformsTexts","tIndex","transformText","openParPos","indexOf","closeParPos","transformType","tempTransform1","tempTransform2","rotate","tempTransform3","multiplyMatrices","scaleX","scaleY","tan","m","transfVec2","v2","tempV3","isRotated","isTransformRotated","subPath","curve","isLineCurve","v1","isCubicBezierCurve","v0","v3","isQuadraticBezierCurve","isEllipseCurve","tempV2","aX","aY","xRadius","getTransformScaleX","yRadius","getTransformScaleY","elements","te","xml","DOMParser","parseFromString","documentElement","fillOpacity","strokeOpacity","strokeWidth","strokeLineJoin","strokeLineCap","strokeMiterLimit","shapePath","BIGNUMBER","IntersectionLocationType","ORIGIN","DESTINATION","BETWEEN","LEFT","RIGHT","BEHIND","BEYOND","classifyResult","loc","t","findEdgeIntersection","a0","a1","b0","b1","x3","x4","y3","y4","nom1","nom2","denom","t1","t2","classifyPoint","toPrecision","p","edgeStart","edgeEnd","ax","ay","bx","by","sa","EPSILON","getIntersections","path1","path2","intersectionsRaw","intersections","path1EdgeStart","path1EdgeEnd","index2","path2EdgeStart","path2EdgeEnd","intersection","find","getScanlineIntersections","scanline","allIntersections","forEach","containsPoint","identifier","isCW","i1","i2","isHoleTo","simplePath","allPaths","scanlineMinX","scanlineMaxX","_fillRule","centerBoundingBox","scanlineIntersections","baseIntersections","otherIntersections","firstXOfPath","stack","isHole","isHoleFor","for","lastCWValue","simplePaths","getPoints","maxY","minY","maxX","minX","ShapeUtils","Box2","sp","isAHole","fillRule","shapesToReturn","amIAHole","shape","Shape","holes","hole","width","lineJoin","lineCap","miterLimit","strokeColor","arcDivisions","minDistance","pointsToStrokeWithBuffers","tempV2_1","tempV2_2","tempV2_3","tempV2_4","tempV2_5","tempV2_6","tempV2_7","lastPointL","lastPointR","point0L","point0R","currentPointL","currentPointR","nextPointL","nextPointR","innerPoint","outerPoint","removeDuplicatedPoints","numPoints","isClosed","equals","nextPoint","previousPoint","strokeWidth2","deltaU","u1","innerSideModified","joinIsOnLeftSide","isMiter","u0","initialJoinIsOnLeftSide","numVertices","currentCoordinate","currentCoordinateUV","getNormal","multiplyScalar","sub","iPoint","normal1","miterSide","setLength","miterLength2","segmentLengthPrev","divideScalar","segmentLengthNext","makeSegmentTriangles","makeSegmentWithBevelJoin","createSegmentTrianglesWithMiddleSection","makeCircularSector","miterFraction","addVertex","addCapGeometry","lastOuter","lastInner","toArray","p1","p2","rotateAround","addVectors","dupPoints","distanceTo","newPoints","buffer","directGeometry","fromDirectGeometry","_a","_b","Transform","camera","renderer","bufferGeometry","isBufferGeometry","fromSVGtoShape","svg","isCCW","noHoles","svgLoader","shapes","toShapes","from3dto2d","vector3","canvas","domElement","updateMatrixWorld","project","height","from2dto3d","distanceFromCamera","tmpPlane","geo","PlaneBufferGeometry","mat","MeshBasicMaterial","transparent","opacity","Mesh","tmpRaycaster","Raycaster","tmpVector3","setRotationFromEuler","rotation","getWorldDirection","setFromCamera","intersects","intersectObjects","CSGWrapper","meshA","meshB","meshC","toGeometry","doCSG","operation","bspA","CSG","fromMesh","bspB","bspC","toMesh","polygons","csg","geom","fs","vs","polys","fm","Vertex","Polygon","fromPolygons","_tmpm3","pos","toMatrix","ps","fvuv","pvs","pvlen","pv","fc","fuv","fnml","plane","inv","parseInt","REVISION","invert","getInverse","decompose","tokens","_index","currentOp","token","iEval","op","sourceMesh","nextPrim","currentPrim","doRemove","parent","remove","material","castShadow","receiveShadow","toPolygons","union","Node","clipTo","build","allPolygons","subtract","intersect","inverse","flip","Vector","arguments","Error","negated","plus","minus","times","dividedBy","lerp","unit","interpolate","other","Plane","splitPolygon","polygon","coplanarFront","coplanarBack","front","back","COPLANAR","FRONT","BACK","SPANNING","polygonType","types","ti","tj","vi","vj","shared","fromPoints","reverse","temp","clipPolygons","slice","concat","bsp","ch2","durl","URL","createObjectURL","Blob","cwk","Worker","revokeObjectURL","encodeURI","wk","msg","transfer","onerror","onmessage","postMessage","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","revfl","fd","revfd","rev","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","flm","flrm","fdm","fdrm","bits","o","bits16","shft","slc","subarray","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","bt","lm","dm","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","dsym","wbits","wbits16","hTree","et","i0","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","ll","dl","flen","ftlen","dtlen","llm","lcts","it","clct","dst","deo","dflt","lvl","plvl","pre","post","lst","ceil","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","pti","lin","din","crct","crc","adler","dopt","level","mem","log","mrg","wcln","fn","fnStr","td","ks","lastIndexOf","st_1","spInd","ch","cbfs","wrkr","fns","init","td_1","bInflt","inflateSync","pbf","gu8","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zlv","size","cbify","opts","err","terminate","consume","astrm","strm","ondata","ev","astrmify","call","b2","b4","b8","filename","mtime","floor","Date","now","charCodeAt","flg","zs","lv","AsyncCmpStrm","Deflate","chunk","AsyncDeflate","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","AsyncGzip","gzip","gzipSync","Gunzip","AsyncGunzip","gunzip","gunzipSync","Zlib","AsyncZlib","zlib","zlibSync","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_1","apply","AsyncDecompress","decompress","decompressSync","fltn","val","TextEncoder","TextDecoder","tds","decode","stream","dutf8","fromCharCode","DecodeUTF8","np","EncodeUTF8","strToU8","str","latin1","ar_1","encode","ar","ai","strFromU8","ext","dbf","slzh","zh","fnl","es","z64e","sc","su","off","exfl","ex","wzh","ce","extra","col","exl","os","flag","compression","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","exf","wzf","ZipPassThrough","process","ZipDeflate","AsyncZipDeflate","Zip","file","com","comment","hl","header","chks","pAll","_i","chks_1","chk","ind","uf","nxt","dd","zip","keys","tot","slft","files","term","tAll","cbf","oe","cdl","badd","_loop_1","ms","cbl","zipSync","UnzipPassThrough","UnzipInflate","AsyncUnzipInflate","_","sz","Unzip","onfile","toAdd","is","oc","_loop_2","sig","this_1","bf","cmp_1","chks_2","unshift","d_1","sc_1","su_1","fn_1","file_1","ctr","chks_3","originalSize","state_1","register","decoder","unzip","_loop_3","c_1","no","infl","unzipSync","c_2","findSpan","U","low","high","mid","calcBasisFunctions","span","N","left","right","saved","rv","calcBSplinePoint","P","C","Vector4","Nj","wNj","calcBasisFunctionDerivatives","zeroArr","ders","ndu","s1","s2","rk","pk","j1","j2","calcBSplineDerivatives","nd","du","CK","nders","Pw","calcKoverI","nom","calcRationalCurveDerivatives","Pders","Aders","wders","calcNURBSDerivatives","NURBSCurve","Curve","degree","knots","controlPoints","startKnot","endKnot","getPoint","optionalTarget","hpoint","NURBSUtils","getTangent","tangent","fbxTree","connections","sceneGraph","FBXLoader","LoaderUtils","setResponseType","FBXBuffer","isFbxFormatBinary","BinaryParser","FBXText","convertArrayBufferToString","isFbxFormatASCII","getFbxVersion","TextParser","textureLoader","TextureLoader","resourcePath","setCrossOrigin","crossOrigin","FBXTreeParser","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","GeometryParser","parseScene","connectionMap","Map","rawConnections","Connections","rawConnection","fromID","toID","relationship","has","parents","children","parentRelationship","ID","get","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","byteLength","base64Content","image","parseImage","content","fileName","extension","toLowerCase","getHandler","window","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","values","Scaling","repeat","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","MeshPhongMaterial","MeshLambertMaterial","setValues","BumpFactor","bumpScale","Diffuse","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","Opacity","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","aoMap","encoding","sRGBEncoding","displacementMap","emissiveMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","weights","transformLink","TransformLink","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","parentConnections","connection","bindSkeleton","createAmbientLight","traverse","transformData","parentMatrix","parentMatrixWorld","matrixWorld","generateTransform","updateWorldMatrix","animations","AnimationParser","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","getTransformData","bone","subBone","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","innerWidth","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","decay","PointLight","DirectionalLight","InnerAngle","penumbra","OuterAngle","SpotLight","CastShadows","FBX_Deformer","SkinnedMesh","normalizeSkinWeights","reduce","LineBasicMaterial","linewidth","Line","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","Lcl_Rotation","postRotation","PostRotation","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","target","bindMatrices","parsePoseNodes","geoRelationships","geoConnParent","bind","Skeleton","BindPoseNode","Pose","NbPoseNodes","poseNodes","PoseNode","poseNode","Matrix","GlobalSettings","ambientColor","AmbientColor","AmbientLight","geoNodes","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Uint16BufferAttribute","weightsIndices","vertexWeights","normalAttribute","applyNormalMatrix","uvBuffer","mappingType","prevMaterialIndex","startIndex","currentIndex","addGroup","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","UV","parseUVs","weightTable","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","morphTargetsRelative","rawTarget","morphGeoNode","genMorphGeometry","morphPositionsSparse","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","order","Order","isNaN","KnotVector","pointsValues","Points","Form","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","rawCurves","animationCurve","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","generateTracks","AnimationClip","Quaternion","Euler","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","quaternion","euler","quaternionValues","multiply","QuaternionKeyframeTrack","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","time","xValue","yValue","zValue","valuesSpan","absoluteSpan","numSubIntervals","step","nextValue","initialTime","timeSpan","interval","nextTime","interpolatedTimes","interpolatedValues","inject","getPrevNode","nodeStack","currentIndent","getCurrentNode","getCurrentProp","currentProp","pushStack","popStack","setCurrentProp","currentPropName","allNodes","FBXTree","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","parseNodePropertyContinued","property","nodeAttrs","parseNodeAttr","currentNode","contentLine","propName","propValue","parentName","connProps","from","to","rest","elem","append","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","reader","BinaryReader","skip","getUint32","endOfContent","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","fflate","reader2","littleEndian","dv","DataView","offset","nullByte","CORRECT","cursor","read","num","versionRegExp","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lParentLX","lGlobalT","setPosition","makeRotationFromEuler","lLRM","lParentGRM","extractRotation","lParentTM","copyPosition","lParentGRSM","lParentGSM","lLSM","lGlobalRS","lParentLSM","setFromMatrixScale","lParentLSM_inv","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a2","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFLightsExtension","GLTFMeshoptCompression","itemStart","_onError","itemEnd","gltf","setDRACOLoader","setDDSLoader","setKTX2Loader","setMeshoptDecoder","callback","unregister","extensions","plugins","magic","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","parseAsync","Promise","resolve","reject","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","_markDefs","nodeDefs","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","_loadLight","lightIndex","cacheKey","dependency","lightDefs","lights","lightDef","lightNode","range","spot","innerConeAngle","outerConeAngle","createUniqueName","createNodeAttachment","self","then","_getNodeRef","getMaterialType","extendParams","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","all","MeshPhysicalMaterial","extendMaterialParams","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","textureIndex","textureDef","options","loadTextureImage","isSupported","uri","handler","detectSupport","Image","src","onload","loadBufferView","bufferView","bufferViews","extensionDef","getDependency","supported","ready","res","byteOffset","byteStride","decodeGltfBuffer","mode","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","body","headerView","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","decodePrimitive","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","extendTexture","texCoord","needsUpdate","GLTFMeshStandardSGMaterial","MeshStandardMaterial","params","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","setHex","glossiness","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","defineProperties","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularGlossinessTexture","specGlossMapDef","createMaterial","fog","lightMap","lightMapIntensity","aoMapIntensity","normalMapType","TangentSpaceNormalMap","normalScale","displacementBias","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","copySampleValue_","valueSize","beforeStart_","afterEnd_","interpolate_","t0","stride2","stride3","pp","ppp","offset1","offset0","s3","s0","p0","m0","m1","_q","GLTFCubicSplineQuaternionInterpolant","WEBGL_CONSTANTS","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","MirroredRepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","OPAQUE","MASK","BLEND","createDefaultMaterial","depthTest","side","FrontSide","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","updateMorphTargets","meshDef","morphTargetInfluences","targetNames","createPrimitiveKey","primitiveDef","dracoExtension","geometryKey","createAttributesKey","attributesKey","getNormalizedComponentScale","associations","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","ImageBitmapLoader","_invokeAll","beforeRoot","getDependencies","dependencies","scene","scenes","cameras","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","updateMappings","original","mappings","_invokeOne","func","loadScene","loadNode","loadMesh","loadAccessor","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","pendingBufferViews","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","bufferAttribute","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sampler","webkitURL","sourceURI","isObjectURL","blob","mimeType","promise","isImageBitmapLoader","imageBitmap","flipY","samplers","magFilter","minFilter","mapName","mapDef","gltfReference","assignFinalMaterial","useDerivativeTangents","useVertexColors","useFlatShading","pointsMaterial","PointsMaterial","sizeAttenuation","lineMaterial","cachedMaterial","flatShading","materialType","materialExtensions","sgExtension","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","doubleSided","DoubleSide","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","originalName","sanitizedName","loadGeometries","primitives","createDracoPrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","results","geometries","skinWeight","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","LineLoop","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","output","inputAccessors","outputAccessors","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","outputArray","scaled","track","createInterpolant","interpolantType","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","createNodeMesh","meshPromise","sceneIndex","sceneDef","nodeIds","buildNodeHierarchy","reduceAssociations","reducedAssociations","nodeId","parentObject","pendingJoints","jointNodes","boneInverses","jointNode","computeBounds","box","boxScale","maxDisplacement","expandByVector","sphere","assignAttributeAccessor","gltfAttributeName","setIndex","drawMode","getIndex","numberOfTriangles","newIndices","newGeometry","Loaders","textureAnisotropy","_fileLoader","imageLoader","_imgLoader","ImageLoader","_svgLoader","_textureLoader","objectLoader","_objectLoader","ObjectLoader","gltfLoader","_gltfLoader","fbxLoader","_fbxLoader","isModel","isTexture","textureAtlas","_type","parsed","isJSONArray","frames","jsonHash","frame","rotated","sourceSize","spriteSourceSize","trimmed","atlas","isBase64","anisotropy","fbx","PointLightHelper","SphereBufferGeometry","update","Lights","helper","directionalLightHelper","DirectionalLightHelper","spotLightHelper","SpotLightHelper","pointLightHelper","directionalLight","hemisphereLight","skyColor","groundColor","HemisphereLight","ambientLight","pointLight","spotLight","rectAreaLight","RectAreaLight","ExtendedMesh","world","worldTheta","phi","worldPhi","atan2","loggerCache","LOG_LIMIT","logger","DefaultMaterial","_defaultMaterial","Factories","isHeadless","defaultMaterial","make","planeConfig","materialConfig","makePlane","boxConfig","makeBox","sphereConfig","makeSphere","cylinder","cylinderConfig","makeCylinder","cone","coneConfig","makeCone","torus","torusConfig","makeTorus","extrude","extrudeConfig","makeExtrude","addMesh","existing","addExisting","addPlane","addBox","ground","groundConfig","addGround","addSphere","addCylinder","addCone","addTorus","addExtrude","addMaterial","obj","autoCenter","breakable","depth","bevelEnabled","ExtrudeBufferGeometry","widthSegments","heightSegments","phiStart","phiLength","thetaStart","thetaLength","BoxBufferGeometry","depthSegments","THREE_Math","CylinderBufferGeometry","radiusTop","radiusBottom","radiusSegments","openEnded","ConeBufferGeometry","TorusBufferGeometry","tube","radialSegments","tubularSegments","arc","basic","MeshNormalMaterial","standard","lambert","phong","physical","MeshToonMaterial","toon","custom","HeightMap","config","heightMap","colorScale","document","createElement","ctx","getContext","drawImage","pixel","getImageData","getHighPoint","hex","WarpSpeed","physics","factories","warpSpeed","features","Features","negativeFeatures","feature","hasNegativeFeatures","featuresToRemove","vertexShader","topColor","bottomColor","skyGeo","skyMat","ShaderMaterial","BackSide","sky","shadow","top","bottom","mapSize","addGrid","gridData","__loadPhysics","setRestitution","orbitControls","OrbitControls","Mixers","animationMixer","root","mixer","AnimationMixer","mixers","create","_mixers","Reflector","textureWidth","textureHeight","clipBias","ReflectorShader","reflectorPlane","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","view","textureMatrix","virtualCamera","renderTarget","WebGLRenderTarget","UniformsUtils","onBeforeRender","setFromMatrixPosition","reflect","up","far","projectionMatrix","matrixWorldInverse","setFromNormalAndCoplanarPoint","constant","sign","outputEncoding","visible","currentRenderTarget","getRenderTarget","currentXrEnabled","xr","currentShadowAutoUpdate","shadowMap","autoUpdate","setRenderTarget","setMask","autoClear","clear","viewport","isReflector","Refractor","RefractorShader","refractor","refractorPlane","refractorWorldPosition","updateRefractorPlane","applyQuaternion","updateVirtualCamera","clipVector","updateTextureMatrix","isRefractor","Water","flowDirection","flowSpeed","WaterShader","flowMap","normalMap0","normalMap1","cycle","halfCycle","clock","Clock","reflector","updateFlow","getDelta","UniformsLib","USE_FLOWMAP","isWater","addWater","flowX","flowY","groundGeometry","groundMaterial","waterGeometry","water","Misc","textureCube","TextureCube","down","_defineProperty","defineProperty","enumerable","configurable","writable","VRButton","button","showEnterVR","currentSession","async","onSessionStarted","session","addEventListener","onSessionEnded","setSession","textContent","removeEventListener","display","onmouseenter","onmouseleave","onclick","sessionInit","optionalFeatures","requestSession","disableButton","showWebXRNotFound","stylizeElement","element","padding","border","borderRadius","background","font","textAlign","outline","isSessionSupported","xrSessionIsGranted","click","message","isSecureContext","location","innerHTML","textDecoration","registerSessionGrantedListener","Constants","Handedness","freeze","NONE","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","X_AXIS","Y_AXIS","STATE","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","fetchJsonFile","response","fetch","ok","statusText","fetchProfilesList","basePath","profileListFileName","profilesList","fetchProfile","xrInputSource","defaultProfile","getAssetPath","supportedProfilesList","profiles","some","profileId","supportedProfile","profilePath","deprecated","profile","assetPath","layout","handedness","layouts","defaultComponentValues","xAxis","yAxis","normalizeAxes","hypotenuse","normalizedXAxis","normalizedYAxis","VisualResponse","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","updateFromGamepad","gamepad","buttons","gamepadButton","pressed","touched","axes","MotionController","assetUrl","layoutDescription","components","gripSpace","targetRaySpace","component","DEFAULT_PROFILES_PATH","DEFAULT_PROFILE","XRControllerModel","motionController","setEnvironmentMap","force","valueNode","minNode","maxNode","MotionControllerConstants","slerpQuaternions","lerpVectors","findNodes","touchPointNode","sphereGeometry","SphereGeometry","addAssetSceneToControllerModel","controllerModel","XRControllerModelFactory","_assetCache","createControllerModel","controller","event","targetRayMode","cachedAsset","WebXR","_renderer","_scene","_camera","cameraGroup","THREE","vrButton","cssText","appendChild","isPresenting","getController","getControllerGrip","controllerGrip","controllerModelFactory","getControllerRay","WebXRCamera","getCamera","HaveSomeFun","numberOfElements","Between","random","RandomPick","mass","Cameras","perspectiveCamera","Perspective","orthographicCamera","Orthographic","near","Scene3D","sceneConfig","enableXR","__config","sceneKey","deconstructor","_deconstructor","initializeScene","autoStart","Plugins","misc","ws","webXR","destroy","animationMixers","haveSomeFun","isRunning","_isRunning","stop","_start","_preload","_create","setAnimationLoop","_update","restart","rigidBodies","setSize","updateProjectionMatrix","setPixelRatio","ratio","_time","_delta","preRender","postRender","getElapsedTime","toFixed","updateDebugger","composer","PhysicsBody","ammo","Ammo","btVector3","btQuaternion","Events","destructor","eventEmitter","removeAllListeners","tmpBtVector3","tmpBtVector3_1","tmpBtQuaternion","getCollisionShape","setupEventEmitter","needUpdate","_needUpdate","need","didUpdate","onUpdateEvent","updateCallback","once","_emitUpdateEvents","on","collision","collisionCallback","onCollision","checkCollisions","collisionEvents","bodies","worldTransform","getMotionState","getWorldTransform","refresh","setWorldTransform","setRotation","tmpEuler","tmpQuaternion","setValue","ammoQuat","getRotation","q1","getOrigin","velocity","getLinearVelocity","angularVelocity","getAngularVelocity","setVelocity","setLinearVelocity","setVelocityX","setVelocityY","setVelocityZ","setAngularVelocity","setAngularVelocityX","setAngularVelocityY","setAngularVelocityZ","applyForce","applyCentralImpulse","applyForceX","applyForceY","applyForceZ","applyCentralForce","applyCentralLocalForce","applyImpulse","impulse","relativePosition","applyLocalTorque","applyTorque","applyTorqueImpulse","setCollisionFlags","getCollisionFlags","setBounciness","setFriction","setDamping","linear","angular","setGravity","setLinearFactor","setAngularFactor","setCcdMotionThreshold","threshold","setCcdSweptSphereRadius","Shapes","factory","collisionFlags","translateX","Constraints","physicsWorld","toAmmoV3","addConstraints","lock","bodyA","bodyB","disableCollisionsBetweenLinkedBodies","fixed","pointToPoint","hinge","slider","spring","coneTwist","frameA","frameB","dof","getTransform","centerVector","dx","dy","dz","transformB","btTransform","setIdentity","setOrigin","transformA","getCenterOfMassTransform","op_mul","zero","angularLowerLimit","angularUpperLimit","constraint","btFixedConstraint","addConstraint","pivotA","pivotB","pivotV3","targetPivotV3","btPoint2PointConstraint","axisA","axisB","axisV3","targetAxisV3","btHingeConstraint","linearLowerLimit","lll","linearUpperLimit","lul","aul","rotationA","setEulerZYX","rotationB","btSliderConstraint","setLowerLinLimit","setUpperLinLimit","setLowerAngLimit","setUpperAngLimit","stiffness","damping","angularLock","enableSpring","btGeneric6DofSpringConstraint","setLinearLowerLimit","setLinearUpperLimit","setAngularLowerLimit","setAngularUpperLimit","setStiffness","rbAFrame","rbBFrame","btConeTwistConstraint","setAngularOnly","btGeneric6DofConstraint","createTorusShape","quat","SIMD_PI","subdivisions","gap","btHalfExtents","cylinderShape","btCylinderShape","setMargin","compoundShape","btCompoundShape","forward","addChildShape","CollisionEvents","addCollider","object1","object2","eventCallback","AmmoDebugConstants","NoDebug","DrawWireframe","DrawAabb","DrawFeaturesText","DrawContactPoints","NoDeactivation","NoHelpText","DrawText","ProfileTimings","EnableSatComparison","DisableBulletLCP","EnableCCD","DrawConstraints","DrawConstraintLimits","FastWireframe","DrawNormals","DrawOnTop","MAX_DEBUG_DRAW_MODE","DebugDrawer","debugDrawMode","drawOnTop","maxBufferSize","setUsage","StaticDrawUsage","renderOrder","frustumCulled","debugDrawer","drawLine","drawContactPoint","reportErrorWarning","draw3dText","setDebugMode","getDebugMode","setDebugDrawer","enable","disable","debugDrawWorld","setDrawRange","heap","HEAPF32","fromX","fromY","fromZ","setXYZ","toX","toY","toZ","pointOnB","normalOnB","_lifeTime","warningString","hasOwnProperty","Pointer_stringify","warnedOnce","_location","_textString","debugMode","Visible","Deleted","_v1","_line3","Line3","_plane","_closestPoint","_triangle","Triangle","ConvexHull","tolerance","newFaces","assigned","VertexList","unassigned","makeEmpty","VertexNode","compute","setFromObject","distanceToPoint","intersectRay","ray","tNear","Infinity","tFar","vN","origin","vD","direction","at","intersectsRay","addVertexToFace","outside","insertBefore","removeVertexFromFace","next","removeAllVerticesFromFace","removeSubList","deleteFaceVertices","absorbingFace","faceVertices","appendChain","nextVertex","resolveUnassignedPoints","isEmpty","first","maxDistance","maxFace","mark","computeExtremes","minVertices","maxVertices","getComponent","setComponent","computeInitialHull","extremes","closestPointToPoint","distanceToSquared","setFromCoplanarPoints","Face","getEdge","setTwin","reindexFaces","activeFaces","nextVertexToAdd","eyeVertex","eyeFace","computeHorizon","eyePoint","crossEdge","horizon","edge","twinEdge","twin","oppositeFace","addAdjoiningFace","horizonEdge","tail","addNewFaces","firstSideEdge","previousSideEdge","sideEdge","addVertexToHull","cleanup","midpoint","area","e0","HalfEdge","e1","e2","getMidpoint","getArea","lengthSquared","last","insertAfter","ConvexGeometry","convexHull","newConvexGeometry","_newConvexGeometry","ConvexObjectBreaker","minSizeForBreak","smallDelta","tempLine1","tempPlane1","tempPlane2","tempPlane_Cut","tempCM1","tempCM2","tempVector3","tempVector3_2","tempVector3_3","tempVector3_P0","tempVector3_P1","tempVector3_P2","tempVector3_N0","tempVector3_N1","tempVector3_AB","tempVector3_CB","tempResultObjects","segments","prepareBreakableObject","ammoPhysicsData","subdivideByImpact","pointOfImpact","maxRadialIterations","maxRandomIterations","debris","maxTotalIterations","subdivideRadial","subObject","startAngle","endAngle","numIterations","applyAxisAngle","cutByPlane","obj1","obj2","coords","numFaces","getVertexIndex","faceIdx","vert","points1","points2","numPointPairs","n0","n1","c1","c2","coplanar","localPlane","transformPlaneToLocalSpace","va","vb","vc","segment","segmentState","mark0","mark1","intersectLine","segmentedObject1","segmentedObject2","newMass","radius1","numPoints1","radius2","numPoints2","numObjects","transformFreeVector","transformFreeVectorInverse","transformTiedVectorInverse","resultPlane","referencePoint","coplanarPoint","wasmSupported","WebAssembly","instantiate","module","Module","of","Instance","loadScriptAsync","doneCallback","tag","loadAmmoModule","PhysicsLoader","applyMixins","derivedCtor","constructors","baseCtor","getOwnPropertyNames","getOwnPropertyDescriptor","ClosestRayResultCallback","getHitPointWorld","_btRayCallback","get_m_hitPointWorld","getHitNormalWorld","get_m_hitNormalWorld","getCollisionObject","rb","castObject","get_m_collisionObject","btRigidBody","threeObject","AllHitsRayResultCallback","getHitPointsWorld","hh","getHitNormalsWorld","getCollisionObjects","threeObjects","get_m_collisionObjects","setRayFromWorld","_btRayFrom","setRayToWorld","_btRayTo","hasHit","rayTest","ClosestRaycaster","AllHitsRaycaster","createHACDShapes","createHullShape","createTriMeshShape","createVHACDShapes","iterateGeometries","require","AmmoPhysics","gravity","tmpVector3a","tmpMatrix4","tmpMatrix4a","emptyV3","impactPoint","impactNormal","tmpTrans","isSoftBody","removeSoftBody","removeRigidBody","hasBody","setup","setupPhysicsWorld","convexBreaker","objectsToRemove","numObjectsToRemove","constraints","softBodies","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","broadphase","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","btSoftBodyRigidBodyCollisionConfiguration","softBodySolver","btDefaultSoftBodySolver","btSoftRigidDynamicsWorld","createDebrisFromBreakableObject","fragmentDepth","fractureImpulse","setTimeout","removeDebris","updatePhysics","detectCollisions","deltaTime","stepSimulation","maxSubSteps","fixedTimeStep","objThree","objPhys","emit","isKinematicObject","getWorldQuaternion","getWorldPosition","skipUpdate","isStaticObject","ignoreScale","getLocalScaling","compose","detectedCollisions","getDispatcher","numManifolds","getNumManifolds","contactManifold","getManifoldByIndexInternal","numContacts","getNumContacts","rb0","getBody0","rb1","getBody1","threeObject0","threeObject1","checkCollisions0","checkCollisions1","breakable0","breakable1","fractureImpulse0","fractureImpulse1","checkBreakable","contact","maxImpulse","contactPoint","getContactPoint","getDistance","getAppliedImpulse","get_m_positionWorldOnB","get_m_normalWorldOnB","names","combinedName","earlierDetectedCollisions","el","MAX_FRAGMENT_DEPTH","physicsBody","vel","angVel","fragment","obj0","debug","collider","raycaster","prepareThreeObjectForCollisionShape","defaultParams","createCollisionShape","axis","extractData","matrices","indexes","vertexArray","matrixArray","indexArray","collisionShape","complexShapes","btBoxShape","btSphereShape","btCylinderShapeX","btCylinderShapeZ","btConeShape","btConeShapeX","btConeShapeZ","btCapsuleShape","btCapsuleShapeX","btCapsuleShapeZ","concave","_compoundOffset","mergeCollisionShapesToCompoundShape","collisionShapes","_childOffset","margin","applyPosQuatScaleMargin","getWorldScale","compound","collisionGroup","collisionMask","addChildren","localTransform","rigidBody","collisionShapeToRigidBody","addRigidBodyToWorld","cs","addRigidBody","ptr","localScale","setLocalScaling","disableDeactivation","motionState","btDefaultMotionState","localInertia","calculateLocalInertia","rbInfo","btRigidBodyConstructionInfo","setActivationState","ThreeGraphics","threeGraphicsConfig","alpha","antialias","usePhysics","VERSION","info","Project","projectConfig","firstSceneKey","plug","clientWidth","clientHeight","devicePixelRatio","maxTouchPoints","Stats","container","addPanel","panel","dom","showPanel","preventDefault","beginTime","performance","prevTime","fpsPanel","Panel","msPanel","memory","memPanel","begin","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","context","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","statistiques","stats","mouse","MainScene","blocks","addTower","block","raycast","rect","getBoundingClientRect","clientX","clientY","created","TYPE","BOX","CYLINDER","SPHERE","CAPSULE","CONE","HULL","HACD","VHACD","MESH","HEIGHTFIELD","FIT","ALL","MANUAL","HEIGHTFIELD_DATA_TYPE","short","float","createCollisionShapes","createBoxShape","createCylinderShape","createCapsuleShape","createConeShape","createSphereShape","createHeightfieldTerrainShape","_setOptions","fit","halfExtents","_computeHalfExtents","_computeBounds","minHalfExtent","maxHalfExtent","_finishCollisionShape","_computeScale","cylinderAxis","sphereRadius","_computeRadius","bounds","btVertex","originalHull","btConvexHullShape","vertexCount","hullMaxVertices","isLastVertex","addPoint","getNumVertices","shapeHull","btShapeHull","buildHull","getPointer","getVertexPointer","triCount","hacd","SetCompacityWeight","compacityWeight","SetVolumeWeight","volumeWeight","SetNClusters","nClusters","SetNVerticesPerCH","nVerticesPerCH","SetConcavity","concavity","_malloc","triangles","SetPoints","SetTriangles","SetNPoints","SetNTriangles","pptr","tptr","HEAPF64","HEAP32","Compute","_free","GetNClusters","hull","nPoints","GetNPointsCH","nTriangles","GetNTrianglesCH","hullPoints","hullTriangles","GetCH","pi","px","py","pz","vhacd","Parameters","set_m_resolution","resolution","set_m_depth","set_m_concavity","set_m_planeDownsampling","planeDownsampling","set_m_convexhullDownsampling","convexhullDownsampling","set_m_alpha","set_m_beta","beta","set_m_gamma","gamma","set_m_pca","pca","set_m_mode","set_m_maxNumVerticesPerCH","maxNumVerticesPerCH","set_m_minVolumePerCH","minVolumePerCH","set_m_convexhullApproximation","convexhullApproximation","set_m_oclAcceleration","oclAcceleration","nHulls","GetNConvexHulls","GetConvexHull","get_m_nPoints","get_m_points","bta","btb","btc","triMesh","btTriangleMesh","bi","ci","addTriangle","setScaling","btBvhTriangleMeshShape","btConvexTriangleMeshShape","resources","heightfieldDistance","heightfieldData","heightScale","upAxis","hdt","heightDataType","PHY_SHORT","PHY_FLOAT","flipQuadEdges","heightStickLength","heightStickWidth","minHeight","POSITIVE_INFINITY","maxHeight","NEGATIVE_INFINITY","btHeightfieldTerrainShape","includeInvisible","object3D","maxRadiusSq","cz","_iterateVertices","clampScalar","minZ","maxZ","exports","modules","installedModules","__webpack_require__","moduleId","getter","Symbol","toStringTag","__esModule","ns","Common","_nextId","_seed","_nowStartTime","_warnedOnce","_decomp","extend","deep","argsStart","deepClone","parts","shuffle","choose","choices","isElement","HTMLElement","isFunction","isPlainObject","isString","webkitNow","_seededRandom","colorToNumber","colorString","logLevel","warnOnce","warning","chain","nextId","haystack","needle","list","mapped","topologicalSort","graph","visited","_topologicalSort","neighbors","neighbor","funcs","_chained","lastResult","args","chainPathBefore","base","chainPathAfter","setDecomp","decomp","getDecomp","global","Bounds","contains","overlaps","boundsA","boundsB","shift","deltaX","deltaY","magnitude","magnitudeSquared","rotateAbout","normalise","vectorA","vectorB","cross3","vectorC","mult","scalar","div","perp","neg","_temp","isInternal","fromPath","pathPattern","centre","mean","average","signed","inertia","numerator","denominator","vertice","nextVertice","chamfer","quality","qualityMin","qualityMax","newVertices","prevVertex","currentRadius","prevNormal","nextNormal","diagonalRadius","radiusVector","midNormal","scaledVertex","clockwiseSort","vertexA","vertexB","isConvex","upper","lower","eventNames","events","callbacks","newCallbacks","trigger","eventClone","Composite","Body","isModified","composites","label","setModified","composite","updateParents","updateChildren","childComposite","addBody","addComposite","removeBody","removeConstraint","removeComposite","compositeA","compositeB","removeCompositeAt","removeBodyAt","removeConstraintAt","keepStatic","isStatic","allBodies","allConstraints","allComposites","move","rebase","recursive","Sleeping","Axes","_inertiaScale","_nextCollidingGroupId","_nextNonCollidingGroupId","_nextCategory","defaults","torque","positionImpulse","constraintImpulse","totalContacts","speed","angularSpeed","isSensor","isSleeping","motion","sleepThreshold","density","restitution","friction","frictionStatic","frictionAir","collisionFilter","category","mask","slop","timeScale","strokeStyle","lineWidth","sprite","xScale","yScale","xOffset","yOffset","circleRadius","positionPrev","anglePrev","_original","_initProperties","nextGroup","isNonColliding","nextCategory","defaultFillStyle","defaultStrokeStyle","defaultLineWidth","settings","setStatic","setMass","setDensity","setInertia","setVertices","setAngle","setParts","setCentre","part","inverseMass","inverseInertia","moment","fromVertices","autoHull","hullCentre","total","_totalProperties","relative","totalArea","totalInertia","correction","deltaTimeSquared","velocityPrevX","velocityPrevY","properties","_motionWakeThreshold","_motionSleepThreshold","_minBias","timeFactor","minMotion","maxMotion","sleepCounter","afterCollisions","pairs","pair","isActive","sleepingBody","movingBody","wasSleeping","Constraint","_warming","_torqueDampen","_minLength","pointA","pointB","initialPointA","initialPointB","angularStiffness","angleA","angleB","anchors","preSolveAll","solveAll","fixedA","fixedB","solve","pointAWorld","pointBWorld","currentLength","share","normalVelocity","relativeVelocity","difference","massTotal","inertiaTotal","resistanceTotal","postSolveAll","Pair","Contact","timestamp","parentA","parentB","contacts","activeContacts","separation","confirmedActive","timeCreated","timeUpdated","supports","collided","support","contactId","setActive","gradient","xx","Bodies","rectangle","trapezoid","slope","verticesPath","roof","circle","maxSides","sides","yy","vertexSets","flagInternal","removeCollinear","minimumArea","removeDuplicatePoints","canDecomp","isConcave","quickDecomp","makeCCW","removeCollinearPoints","decomposed","chunkVertices","coincident_max_dist","partA","partB","pav","pbv","da","db","Mouse","absolute","mousedownPosition","mouseupPosition","wheelDelta","pixelRatio","sourceEvents","mousemove","mousedown","mouseup","mousewheel","_getRelativeMousePosition","touches","changedTouches","detail","setElement","clearSourceEvents","setOffset","setScale","elementBounds","rootNode","parentNode","scrollX","pageXOffset","scrollLeft","scrollY","pageYOffset","scrollTop","pageX","pageY","Detector","SAT","collisions","broadphasePairs","engine","pairsTable","table","canCollide","previousCollision","pairId","collides","filterA","filterB","overlapAB","overlapBA","minOverlap","canReusePrevCol","axisBodyA","axisBody","axisBodyB","axisNumber","_overlapAxes","reused","overlap","penetration","verticesB","_findSupports","verticesA","projectionA","projectionB","MAX_VALUE","_projectToAxis","projection","nearestDistance","vertexToBody","bodyAPosition","prevIndex","nextIndex","Plugin","_registry","isPlugin","registered","pluginVersion","versionParse","registeredVersion","dependencyParse","install","isUsed","used","isFor","versionSatisfies","use","sortedDependencies","status","_warned","tracked","parsedBase","resolved","pattern","exec","major","minor","patch","isRange","operator","prerelease","Render","_requestAnimationFrame","_cancelAnimationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","_goodFps","_goodDelta","frameRequestId","timing","historySize","deltaHistory","lastTime","lastTimestamp","lastElapsed","timestampElapsed","timestampElapsedHistory","engineDeltaHistory","engineElapsedHistory","elapsedHistory","wireframeBackground","hasBounds","wireframes","showSleeping","showDebug","showStats","showPerformance","showBroadphase","showBounds","showVelocity","showCollisions","showSeparations","showAxes","showPositions","showAngleIndicator","showIds","showVertexNumbers","showConvexHulls","showInternalEdges","showMousePosition","_createCanvas","run","loop","_updateTiming","_getPixelRatio","viewHeight","viewWidth","outerRatio","innerRatio","startViewTransform","boundsWidth","boundsHeight","boundsScaleX","boundsScaleY","setTransform","endViewTransform","startTime","currentBackground","_applyBackground","globalCompositeOperation","enableSleeping","bodyConvexHulls","bodyWireframes","bodyBounds","bodyAxes","bodyPositions","bodyVelocity","bodyIds","separations","vertexNumbers","mousePosition","grid","sections","section","lastEngineDelta","lastDelta","deltaMean","_mean","elapsedMean","engineDeltaMean","engineElapsedMean","timestampElapsedMean","rateMean","fps","graphHeight","indicator","plotY","beginPath","stroke","closePath","coils","_getTexture","normalPosX","normalPosY","bucketKeys","buckets","bucketId","region","bucketWidth","bucketHeight","inspector","selected","item","setLineDash","selectStart","selectBounds","oncontextmenu","onselectstart","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","imagePath","cssBackground","backgroundSize","normalImpulse","tangentImpulse","Engine","Resolver","Pairs","Grid","positionIterations","velocityIterations","constraintIterations","metrics","gridPairs","_bodiesApplyGravity","_bodiesUpdate","pairsList","removeOld","collisionStart","preSolvePosition","solvePosition","postSolvePosition","preSolveVelocity","solveVelocity","collisionActive","collisionEnd","_bodiesClearForces","engineA","engineB","gravityScale","worldBounds","_restingThresh","_restingThreshTangent","_positionDampen","_positionWarming","_frictionNormalMultiplier","activeCount","bodyBtoA","contactShare","tempA","tempB","tempC","tempD","contactVertex","timeScaleSquared","tempE","offsetA","offsetB","velocityPointA","velocityPointB","tangentVelocity","tangentSpeed","tangentVelocityDirection","normalForce","maxFriction","oAcN","oBcN","contactNormalImpulse","contactTangentImpulse","_pairMaxIdleLife","pairIndex","indexesToRemove","forceUpdate","row","bucket","gridChanged","newRegion","_getRegion","_regionUnion","startCol","endCol","startRow","endRow","_getBucketId","isInsideNewRegion","isInsideOldRegion","_bucketRemoveBody","_createBucket","_bucketAddBody","_createActivePairsList","regionA","regionB","_createRegion","column","pairKeys","Matter","Composites","MouseConstraint","Query","Runner","Svg","World","before","after","columns","rows","columnGap","rowGap","lastBody","bodyHeight","bodyWidth","xOffsetA","yOffsetA","xOffsetB","yOffsetB","bodyAHeight","bodyAWidth","bodyBHeight","bodyBWidth","crossBrace","bodyC","pyramid","actualRows","lastBodyWidth","newtonsCradle","car","wheelSize","wheelBase","wheelAOffset","wheelBOffset","wheelYOffset","wheelA","wheelB","axelA","axelB","softBody","particleRadius","particleOptions","constraintOptions","mouseConstraint","_triggerEvents","mouseEvents","startPoint","endPoint","rayWidth","rayAngle","rayLength","rayX","rayY","_frameTimeout","clearTimeout","deltaSampleSize","counterTimestamp","frameCounter","timePrev","timeScalePrev","isFixed","runner","deltaMin","deltaMax","tick","pathToVertices","sampleLength","segmentsQueue","lastSegment","lastPoint","segmentIndex","lx","ly","pathSegType","isRelative","addSegmentPoint","segType","pathSegTypeAsLetter","toUpperCase","_svgPathToAbsolute","getTotalLength","pathSegList","numberOfItems","getItem","getPathSegAtLength","getPointAtLength","x0","y0","segs","seg","replaceItem","createSVGPathSegMovetoAbs","createSVGPathSegLinetoAbs","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoVerticalAbs","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegArcAbs","r1","r2","largeArcFlag","sweepFlag","addListener","emitter","listener","EE","_events","_eventsCount","clearEvent","delete","version_1","handlers","ee","listeners","removeListener","__spreadArray","length_1"],"sourceRoot":""}