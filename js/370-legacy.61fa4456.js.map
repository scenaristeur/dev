{"version":3,"file":"js/370-legacy.61fa4456.js","mappings":"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","sources":["webpack://dev/./src/components/worlds/PhysicWorld.vue?025d","webpack://dev/./node_modules/three/examples/jsm/deprecated/Geometry.js","webpack://dev/../../src/deprecated/face3.ts","webpack://dev/./node_modules/three/examples/jsm/loaders/SVGLoader.js","webpack://dev/../../src/csg/_directGeometry.ts","webpack://dev/../../src/csg/_fromGeometry.ts","webpack://dev/../../src/plugins/transform.ts","webpack://dev/../../src/csg/index.ts","webpack://dev/./node_modules/three/examples/jsm/libs/fflate.module.js","webpack://dev/./node_modules/three/examples/jsm/curves/NURBSUtils.js","webpack://dev/./node_modules/three/examples/jsm/loaders/FBXLoader.js","webpack://dev/./node_modules/three/examples/jsm/curves/NURBSCurve.js","webpack://dev/./node_modules/three/examples/jsm/loaders/GLTFLoader.js","webpack://dev/../../src/plugins/loaders.ts","webpack://dev/../../src/plugins/lights.ts","webpack://dev/../src/extendedMesh.ts","webpack://dev/../src/logger.ts","webpack://dev/../src/defaultMaterial.ts","webpack://dev/../src/factories.ts","webpack://dev/../../src/plugins/heightmap.ts","webpack://dev/../../src/plugins/warpSpeed.ts","webpack://dev/../../src/plugins/mixers.ts","webpack://dev/./node_modules/three/examples/jsm/objects/Reflector.js","webpack://dev/./node_modules/three/examples/jsm/objects/Refractor.js","webpack://dev/./node_modules/three/examples/jsm/objects/Water2.js","webpack://dev/../../src/plugins/water.ts","webpack://dev/../../src/plugins/misc.ts","webpack://dev/./node_modules/three/examples/jsm/webxr/VRButton.js","webpack://dev/./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://dev/./node_modules/three/examples/jsm/libs/motion-controllers.module.js","webpack://dev/./node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","webpack://dev/../../src/plugins/webxr.ts","webpack://dev/../../src/plugins/haveSomeFun.ts","webpack://dev/../../src/plugins/cameras.ts","webpack://dev/../src/scene3d.ts","webpack://dev/../src/physicsBody.ts","webpack://dev/../src/shapes.ts","webpack://dev/../src/constraints.ts","webpack://dev/../src/torusShape.ts","webpack://dev/../src/collisionEvents.ts","webpack://dev/../src/debugDrawer.ts","webpack://dev/./node_modules/three/examples/jsm/math/ConvexHull.js","webpack://dev/./node_modules/three/examples/jsm/geometries/ConvexGeometry.js","webpack://dev/../src/convexObjectBreaker.ts","webpack://dev/../src/wasmLoader.ts","webpack://dev/../src/physicsLoader.ts","webpack://dev/../src/applyMixins.ts","webpack://dev/../../src/raycaster/closestRayResultCallback.ts","webpack://dev/../../src/raycaster/allHitsRayResultCallback.ts","webpack://dev/../../src/raycaster/raycaster.ts","webpack://dev/../src/physics.ts","webpack://dev/../src/core.ts","webpack://dev/../src/version.ts","webpack://dev/../src/index.ts","webpack://dev/../src/project.ts","webpack://dev/../src/eventMatrix.ts","webpack://dev/../../src/flat/_misc.ts","webpack://dev/./node_modules/three/examples/jsm/shaders/DigitalGlitch.js","webpack://dev/./node_modules/three/examples/jsm/libs/stats.module.js","webpack://dev/./node_modules/three/examples/jsm/postprocessing/GlitchPass.js","webpack://dev/./node_modules/three/examples/jsm/shaders/DotScreenShader.js","webpack://dev/./src/components/worlds/physic/MainScene.js","webpack://dev/src/components/worlds/PhysicWorld.vue","webpack://dev/./src/components/worlds/PhysicWorld.vue?11e9","webpack://dev/./src/components/worlds/PhysicWorld.vue","webpack://dev/./node_modules/core-js/modules/es.object.from-entries.js","webpack://dev/./node_modules/core-js/modules/es.typed-array.of.js","webpack://dev/../src/three-to-ammo.js","webpack://dev/./node_modules/matter-js/build/matter.js"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._v(\" Physic World \"),_c('div',{staticClass:\"home\",attrs:{\"id\":\"myCanvas\"}})])}]\n\nexport { render, staticRenderFns }","import {\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tColor,\n\tEventDispatcher,\n\tFloat32BufferAttribute,\n\tMatrix3,\n\tMatrix4,\n\tMathUtils,\n\tObject3D,\n\tSphere,\n\tVector2,\n\tVector3\n} from 'three';\n\nconst _m1 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\n\nclass Geometry extends EventDispatcher {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.uuid = MathUtils.generateUUID();\n\n\t\tthis.name = '';\n\t\tthis.type = 'Geometry';\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\tthis.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = false;\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.lineDistancesNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tapplyMatrix4( matrix ) {\n\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t}\n\n\trotateX( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateY( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\trotateZ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\ttranslate( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tscale( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t}\n\n\tlookAt( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t}\n\n\tfromBufferGeometry( geometry ) {\n\n\t\tconst scope = this;\n\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\n\t\tconst attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst position = attributes.position;\n\t\tconst normal = attributes.normal;\n\t\tconst color = attributes.color;\n\t\tconst uv = attributes.uv;\n\t\tconst uv2 = attributes.uv2;\n\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\n\n\t\t\tif ( color !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone()\n\t\t\t];\n\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\n\t\t\t];\n\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uv !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uv2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\n\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tcenter() {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t}\n\n\tnormalize() {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tconst center = this.boundingSphere.center;\n\t\tconst radius = this.boundingSphere.radius;\n\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tconst matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t}\n\n\tcomputeFaceNormals() {\n\n\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t}\n\n\tcomputeVertexNormals( areaWeighted = true ) {\n\n\t\tconst vertices = new Array( this.vertices.length );\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t}\n\n\tcomputeFlatVertexNormals() {\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t}\n\n\tcomputeMorphNormals() {\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tconst tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tconst faceNormal = new Vector3();\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t}\n\n\tcomputeBoundingBox() {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t}\n\n\tcomputeBoundingSphere() {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t}\n\n\tmerge( geometry, matrix, materialIndexOffset = 0 ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet normalMatrix;\n\t\tconst vertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = vertices2[ i ];\n\n\t\t\tconst vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tconst face = faces2[ i ];\n\t\t\tlet normal, color;\n\t\t\tconst faceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tconst faceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tmergeMesh( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t}\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices( precisionPoints = 4 ) {\n\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tconst unique = [], changes = [];\n\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst v = this.vertices[ i ];\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tconst faceIndicesToRemove = [];\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tconst indices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tconst idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tconst diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsortFacesByMaterialIndex() {\n\n\t\tconst faces = this.faces;\n\t\tconst length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tlet newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t}\n\n\ttoJSON() {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tconst vertices = [];\n\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst normals = [];\n\t\tconst normalsHash = {};\n\t\tconst colors = [];\n\t\tconst colorsHash = {};\n\t\tconst uvs = [];\n\t\tconst uvsHash = {};\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tconst hasMaterial = true;\n\t\t\tconst hasFaceUv = false; // deprecated\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tlet faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t}\n\n\tclone() {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tconst vertices = source.vertices;\n\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tconst colors = source.colors;\n\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tconst faces = source.faces;\n\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphTargets = source.morphTargets;\n\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tconst morphNormals = source.morphNormals;\n\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tconst morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tconst destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tconst skinWeights = source.skinWeights;\n\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tconst skinIndices = source.skinIndices;\n\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tconst lineDistances = source.lineDistances;\n\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t}\n\n\ttoBufferGeometry() {\n\n\t\tconst geometry = new DirectGeometry().fromGeometry( this );\n\n\t\tconst buffergeometry = new BufferGeometry();\n\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tbuffergeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tbuffergeometry.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tbuffergeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tbuffergeometry.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tbuffergeometry.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tbuffergeometry.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( const name in geometry.morphTargets ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ i ];\n\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tbuffergeometry.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tbuffergeometry.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tbuffergeometry.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tbuffergeometry.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tbuffergeometry.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tcomputeTangents() {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t}\n\n\tcomputeLineDistances() {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t}\n\n\tapplyMatrix( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n\tdispose() {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n\tstatic createBufferGeometryFromObject( object ) {\n\n\t\tlet buffergeometry = new BufferGeometry();\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tbuffergeometry.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tbuffergeometry.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tbuffergeometry.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tbuffergeometry.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tbuffergeometry.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tbuffergeometry = geometry.toBufferGeometry();\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n}\n\nGeometry.prototype.isGeometry = true;\n\nclass DirectGeometry {\n\n\tconstructor() {\n\n\t\tthis.vertices = [];\n\t\tthis.normals = [];\n\t\tthis.colors = [];\n\t\tthis.uvs = [];\n\t\tthis.uvs2 = [];\n\n\t\tthis.groups = [];\n\n\t\tthis.morphTargets = {};\n\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\n\t\t// this.lineDistances = [];\n\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// update flags\n\n\t\tthis.verticesNeedUpdate = false;\n\t\tthis.normalsNeedUpdate = false;\n\t\tthis.colorsNeedUpdate = false;\n\t\tthis.uvsNeedUpdate = false;\n\t\tthis.groupsNeedUpdate = false;\n\n\t}\n\n\tcomputeGroups( geometry ) {\n\n\t\tconst groups = [];\n\n\t\tlet group, i;\n\t\tlet materialIndex = undefined;\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t}\n\n\tfromGeometry( geometry ) {\n\n\t\tconst faces = geometry.faces;\n\t\tconst vertices = geometry.vertices;\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tconst morphTargets = geometry.morphTargets;\n\t\tconst morphTargetsLength = morphTargets.length;\n\n\t\tlet morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tconst morphNormals = geometry.morphNormals;\n\t\tconst morphNormalsLength = morphNormals.length;\n\n\t\tlet morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tconst skinIndices = geometry.skinIndices;\n\t\tconst skinWeights = geometry.skinWeights;\n\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nclass Face3 {\n\n\tconstructor( a, b, c, normal, color, materialIndex = 0 ) {\n\n\t\tthis.a = a;\n\t\tthis.b = b;\n\t\tthis.c = c;\n\n\t\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\t\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\t\tthis.color = ( color && color.isColor ) ? color : new Color();\n\t\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\t\tthis.materialIndex = materialIndex;\n\n\t}\n\n\tclone() {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n}\n\nexport { Face3, Geometry };\n",null,"import {\n\tBox2,\n\tBufferGeometry,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tLoader,\n\tMatrix3,\n\tPath,\n\tShape,\n\tShapePath,\n\tShapeUtils,\n\tVector2,\n\tVector3\n} from 'three';\n\nclass SVGLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\t// Default dots per inch\n\t\tthis.defaultDPI = 90;\n\n\t\t// Accepted units: 'mm', 'cm', 'in', 'pt', 'pc', 'px'\n\t\tthis.defaultUnit = 'px';\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( text ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( text ) {\n\n\t\tconst scope = this;\n\n\t\tfunction parseNode( node, style ) {\n\n\t\t\tif ( node.nodeType !== 1 ) return;\n\n\t\t\tconst transform = getNodeTransform( node );\n\n\t\t\tlet traverseChildNodes = true;\n\n\t\t\tlet path = null;\n\n\t\t\tswitch ( node.nodeName ) {\n\n\t\t\t\tcase 'svg':\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'style':\n\t\t\t\t\tparseCSSStylesheet( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'g':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'path':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tif ( node.hasAttribute( 'd' ) ) path = parsePathNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'rect':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseRectNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polygon':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolygonNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'polyline':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parsePolylineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'circle':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseCircleNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ellipse':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseEllipseNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'line':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\t\t\t\t\tpath = parseLineNode( node );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'defs':\n\t\t\t\t\ttraverseChildNodes = false;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'use':\n\t\t\t\t\tstyle = parseStyle( node, style );\n\n\t\t\t\t\tconst href = node.getAttributeNS( 'http://www.w3.org/1999/xlink', 'href' ) || '';\n\t\t\t\t\tconst usedNodeId = href.substring( 1 );\n\t\t\t\t\tconst usedNode = node.viewportElement.getElementById( usedNodeId );\n\t\t\t\t\tif ( usedNode ) {\n\n\t\t\t\t\t\tparseNode( usedNode, style );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'SVGLoader: \\'use node\\' references non-existent node id: ' + usedNodeId );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\t// console.log( node );\n\n\t\t\t}\n\n\t\t\tif ( path ) {\n\n\t\t\t\tif ( style.fill !== undefined && style.fill !== 'none' ) {\n\n\t\t\t\t\tpath.color.setStyle( style.fill );\n\n\t\t\t\t}\n\n\t\t\t\ttransformPath( path, currentTransform );\n\n\t\t\t\tpaths.push( path );\n\n\t\t\t\tpath.userData = { node: node, style: style };\n\n\t\t\t}\n\n\t\t\tif ( traverseChildNodes ) {\n\n\t\t\t\tconst nodes = node.childNodes;\n\n\t\t\t\tfor ( let i = 0; i < nodes.length; i ++ ) {\n\n\t\t\t\t\tparseNode( nodes[ i ], style );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( transform ) {\n\n\t\t\t\ttransformStack.pop();\n\n\t\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\t\tcurrentTransform.copy( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction parsePathNode( node ) {\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tconst point = new Vector2();\n\t\t\tconst control = new Vector2();\n\n\t\t\tconst firstPoint = new Vector2();\n\t\t\tlet isFirstPoint = true;\n\t\t\tlet doSetFirstPoint = false;\n\n\t\t\tconst d = node.getAttribute( 'd' );\n\n\t\t\t// console.log( d );\n\n\t\t\tconst commands = d.match( /[a-df-z][^a-df-z]*/ig );\n\n\t\t\tfor ( let i = 0, l = commands.length; i < l; i ++ ) {\n\n\t\t\t\tconst command = commands[ i ];\n\n\t\t\t\tconst type = command.charAt( 0 );\n\t\t\t\tconst data = command.substr( 1 ).trim();\n\n\t\t\t\tif ( isFirstPoint === true ) {\n\n\t\t\t\t\tdoSetFirstPoint = true;\n\t\t\t\t\tisFirstPoint = false;\n\n\t\t\t\t}\n\n\t\t\t\tlet numbers;\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'M':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'H':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'V':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y = numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'L':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'C':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 4 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'S':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 2 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'T':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tnumbers[ j + 0 ],\n\t\t\t\t\t\t\t\tnumbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'A':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if start point == end point\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == point.x && numbers[ j + 6 ] == point.y ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x = numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y = numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\n\t\t\t\t\t\t\tif ( j === 0 ) {\n\n\t\t\t\t\t\t\t\tpath.moveTo( point.x, point.y );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( j === 0 ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'h':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tpoint.y += numbers[ j ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 1 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tpath.lineTo( point.x, point.y );\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 6 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 4 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 5 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 2 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 3 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 4 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 5 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 's':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\t\t\t\tgetReflection( point.x, control.x ),\n\t\t\t\t\t\t\t\tgetReflection( point.y, control.y ),\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'q':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 4 ) {\n\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ],\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 2 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 3 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tcontrol.y = point.y + numbers[ j + 1 ];\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 2 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 3 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tnumbers = parseFloats( data );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 2 ) {\n\n\t\t\t\t\t\t\tconst rx = getReflection( point.x, control.x );\n\t\t\t\t\t\t\tconst ry = getReflection( point.y, control.y );\n\t\t\t\t\t\t\tpath.quadraticCurveTo(\n\t\t\t\t\t\t\t\trx,\n\t\t\t\t\t\t\t\try,\n\t\t\t\t\t\t\t\tpoint.x + numbers[ j + 0 ],\n\t\t\t\t\t\t\t\tpoint.y + numbers[ j + 1 ]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcontrol.x = rx;\n\t\t\t\t\t\t\tcontrol.y = ry;\n\t\t\t\t\t\t\tpoint.x = point.x + numbers[ j + 0 ];\n\t\t\t\t\t\t\tpoint.y = point.y + numbers[ j + 1 ];\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'a':\n\t\t\t\t\t\tnumbers = parseFloats( data, [ 3, 4 ], 7 );\n\n\t\t\t\t\t\tfor ( let j = 0, jl = numbers.length; j < jl; j += 7 ) {\n\n\t\t\t\t\t\t\t// skip command if no displacement\n\t\t\t\t\t\t\tif ( numbers[ j + 5 ] == 0 && numbers[ j + 6 ] == 0 ) continue;\n\n\t\t\t\t\t\t\tconst start = point.clone();\n\t\t\t\t\t\t\tpoint.x += numbers[ j + 5 ];\n\t\t\t\t\t\t\tpoint.y += numbers[ j + 6 ];\n\t\t\t\t\t\t\tcontrol.x = point.x;\n\t\t\t\t\t\t\tcontrol.y = point.y;\n\t\t\t\t\t\t\tparseArcCommand(\n\t\t\t\t\t\t\t\tpath, numbers[ j ], numbers[ j + 1 ], numbers[ j + 2 ], numbers[ j + 3 ], numbers[ j + 4 ], start, point\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif ( j === 0 && doSetFirstPoint === true ) firstPoint.copy( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Z':\n\t\t\t\t\tcase 'z':\n\t\t\t\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\t\t\t\tif ( path.currentPath.curves.length > 0 ) {\n\n\t\t\t\t\t\t\t// Reset point to beginning of Path\n\t\t\t\t\t\t\tpoint.copy( firstPoint );\n\t\t\t\t\t\t\tpath.currentPath.currentPoint.copy( point );\n\t\t\t\t\t\t\tisFirstPoint = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.warn( command );\n\n\t\t\t\t}\n\n\t\t\t\t// console.log( type, parseFloats( data ), parseFloats( data ).length  )\n\n\t\t\t\tdoSetFirstPoint = false;\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCSSStylesheet( node ) {\n\n\t\t\tif ( ! node.sheet || ! node.sheet.cssRules || ! node.sheet.cssRules.length ) return;\n\n\t\t\tfor ( let i = 0; i < node.sheet.cssRules.length; i ++ ) {\n\n\t\t\t\tconst stylesheet = node.sheet.cssRules[ i ];\n\n\t\t\t\tif ( stylesheet.type !== 1 ) continue;\n\n\t\t\t\tconst selectorList = stylesheet.selectorText\n\t\t\t\t\t.split( /,/gm )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let j = 0; j < selectorList.length; j ++ ) {\n\n\t\t\t\t\t// Remove empty rules\n\t\t\t\t\tconst definitions = Object.fromEntries(\n\t\t\t\t\t\tObject.entries( stylesheet.style ).filter( ( [ , v ] ) => v !== '' )\n\t\t\t\t\t);\n\n\t\t\t\t\tstylesheets[ selectorList[ j ] ] = Object.assign(\n\t\t\t\t\t\tstylesheets[ selectorList[ j ] ] || {},\n\t\t\t\t\t\tdefinitions\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/**\n\t\t * https://www.w3.org/TR/SVG/implnote.html#ArcImplementationNotes\n\t\t * https://mortoray.com/2017/02/16/rendering-an-svg-elliptical-arc-as-bezier-curves/ Appendix: Endpoint to center arc conversion\n\t\t * From\n\t\t * rx ry x-axis-rotation large-arc-flag sweep-flag x y\n\t\t * To\n\t\t * aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation\n\t\t */\n\n\t\tfunction parseArcCommand( path, rx, ry, x_axis_rotation, large_arc_flag, sweep_flag, start, end ) {\n\n\t\t\tif ( rx == 0 || ry == 0 ) {\n\n\t\t\t\t// draw a line if either of the radii == 0\n\t\t\t\tpath.lineTo( end.x, end.y );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tx_axis_rotation = x_axis_rotation * Math.PI / 180;\n\n\t\t\t// Ensure radii are positive\n\t\t\trx = Math.abs( rx );\n\t\t\try = Math.abs( ry );\n\n\t\t\t// Compute (x1', y1')\n\t\t\tconst dx2 = ( start.x - end.x ) / 2.0;\n\t\t\tconst dy2 = ( start.y - end.y ) / 2.0;\n\t\t\tconst x1p = Math.cos( x_axis_rotation ) * dx2 + Math.sin( x_axis_rotation ) * dy2;\n\t\t\tconst y1p = - Math.sin( x_axis_rotation ) * dx2 + Math.cos( x_axis_rotation ) * dy2;\n\n\t\t\t// Compute (cx', cy')\n\t\t\tlet rxs = rx * rx;\n\t\t\tlet rys = ry * ry;\n\t\t\tconst x1ps = x1p * x1p;\n\t\t\tconst y1ps = y1p * y1p;\n\n\t\t\t// Ensure radii are large enough\n\t\t\tconst cr = x1ps / rxs + y1ps / rys;\n\n\t\t\tif ( cr > 1 ) {\n\n\t\t\t\t// scale up rx,ry equally so cr == 1\n\t\t\t\tconst s = Math.sqrt( cr );\n\t\t\t\trx = s * rx;\n\t\t\t\try = s * ry;\n\t\t\t\trxs = rx * rx;\n\t\t\t\trys = ry * ry;\n\n\t\t\t}\n\n\t\t\tconst dq = ( rxs * y1ps + rys * x1ps );\n\t\t\tconst pq = ( rxs * rys - dq ) / dq;\n\t\t\tlet q = Math.sqrt( Math.max( 0, pq ) );\n\t\t\tif ( large_arc_flag === sweep_flag ) q = - q;\n\t\t\tconst cxp = q * rx * y1p / ry;\n\t\t\tconst cyp = - q * ry * x1p / rx;\n\n\t\t\t// Step 3: Compute (cx, cy) from (cx', cy')\n\t\t\tconst cx = Math.cos( x_axis_rotation ) * cxp - Math.sin( x_axis_rotation ) * cyp + ( start.x + end.x ) / 2;\n\t\t\tconst cy = Math.sin( x_axis_rotation ) * cxp + Math.cos( x_axis_rotation ) * cyp + ( start.y + end.y ) / 2;\n\n\t\t\t// Step 4: Compute 1 and \n\t\t\tconst theta = svgAngle( 1, 0, ( x1p - cxp ) / rx, ( y1p - cyp ) / ry );\n\t\t\tconst delta = svgAngle( ( x1p - cxp ) / rx, ( y1p - cyp ) / ry, ( - x1p - cxp ) / rx, ( - y1p - cyp ) / ry ) % ( Math.PI * 2 );\n\n\t\t\tpath.currentPath.absellipse( cx, cy, rx, ry, theta, theta + delta, sweep_flag === 0, x_axis_rotation );\n\n\t\t}\n\n\t\tfunction svgAngle( ux, uy, vx, vy ) {\n\n\t\t\tconst dot = ux * vx + uy * vy;\n\t\t\tconst len = Math.sqrt( ux * ux + uy * uy ) * Math.sqrt( vx * vx + vy * vy );\n\t\t\tlet ang = Math.acos( Math.max( - 1, Math.min( 1, dot / len ) ) ); // floating point precision, slightly over values appear\n\t\t\tif ( ( ux * vy - uy * vx ) < 0 ) ang = - ang;\n\t\t\treturn ang;\n\n\t\t}\n\n\t\t/*\n\t\t* According to https://www.w3.org/TR/SVG/shapes.html#RectElementRXAttribute\n\t\t* rounded corner should be rendered to elliptical arc, but bezier curve does the job well enough\n\t\t*/\n\t\tfunction parseRectNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'x' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'y' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || node.getAttribute( 'ry' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst w = parseFloatWithUnits( node.getAttribute( 'width' ) );\n\t\t\tconst h = parseFloatWithUnits( node.getAttribute( 'height' ) );\n\n\t\t\t// Ellipse arc to Bezier approximation Coefficient (Inversed). See:\n\t\t\t// https://spencermortensen.com/articles/bezier-circle/\n\t\t\tconst bci = 1 - 0.551915024494;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\t// top left\n\t\t\tpath.moveTo( x + rx, y );\n\n\t\t\t// top right\n\t\t\tpath.lineTo( x + w - rx, y );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry * bci,\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom right\n\t\t\tpath.lineTo( x + w, y + h - ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + w,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx + w - rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx + w - rx,\n\t\t\t\t\ty + h\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// bottom left\n\t\t\tpath.lineTo( x + rx, y + h );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo(\n\t\t\t\t\tx + rx * bci,\n\t\t\t\t\ty + h,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry * bci,\n\t\t\t\t\tx,\n\t\t\t\t\ty + h - ry\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\t// back to top left\n\t\t\tpath.lineTo( x, y + ry );\n\t\t\tif ( rx !== 0 || ry !== 0 ) {\n\n\t\t\t\tpath.bezierCurveTo( x, y + ry * bci, x + rx * bci, y, x + rx, y );\n\n\t\t\t}\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolygonNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = true;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parsePolylineNode( node ) {\n\n\t\t\tfunction iterator( match, a, b ) {\n\n\t\t\t\tconst x = parseFloatWithUnits( a );\n\t\t\t\tconst y = parseFloatWithUnits( b );\n\n\t\t\t\tif ( index === 0 ) {\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t}\n\n\t\t\t\tindex ++;\n\n\t\t\t}\n\n\t\t\tconst regex = /(-?[\\d\\.?]+)[,|\\s](-?[\\d\\.?]+)/g;\n\n\t\t\tconst path = new ShapePath();\n\n\t\t\tlet index = 0;\n\n\t\t\tnode.getAttribute( 'points' ).replace( regex, iterator );\n\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseCircleNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst r = parseFloatWithUnits( node.getAttribute( 'r' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absarc( x, y, r, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseEllipseNode( node ) {\n\n\t\t\tconst x = parseFloatWithUnits( node.getAttribute( 'cx' ) || 0 );\n\t\t\tconst y = parseFloatWithUnits( node.getAttribute( 'cy' ) || 0 );\n\t\t\tconst rx = parseFloatWithUnits( node.getAttribute( 'rx' ) || 0 );\n\t\t\tconst ry = parseFloatWithUnits( node.getAttribute( 'ry' ) || 0 );\n\n\t\t\tconst subpath = new Path();\n\t\t\tsubpath.absellipse( x, y, rx, ry, 0, Math.PI * 2 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.subPaths.push( subpath );\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\tfunction parseLineNode( node ) {\n\n\t\t\tconst x1 = parseFloatWithUnits( node.getAttribute( 'x1' ) || 0 );\n\t\t\tconst y1 = parseFloatWithUnits( node.getAttribute( 'y1' ) || 0 );\n\t\t\tconst x2 = parseFloatWithUnits( node.getAttribute( 'x2' ) || 0 );\n\t\t\tconst y2 = parseFloatWithUnits( node.getAttribute( 'y2' ) || 0 );\n\n\t\t\tconst path = new ShapePath();\n\t\t\tpath.moveTo( x1, y1 );\n\t\t\tpath.lineTo( x2, y2 );\n\t\t\tpath.currentPath.autoClose = false;\n\n\t\t\treturn path;\n\n\t\t}\n\n\t\t//\n\n\t\tfunction parseStyle( node, style ) {\n\n\t\t\tstyle = Object.assign( {}, style ); // clone style\n\n\t\t\tlet stylesheetStyles = {};\n\n\t\t\tif ( node.hasAttribute( 'class' ) ) {\n\n\t\t\t\tconst classSelectors = node.getAttribute( 'class' )\n\t\t\t\t\t.split( /\\s/ )\n\t\t\t\t\t.filter( Boolean )\n\t\t\t\t\t.map( i => i.trim() );\n\n\t\t\t\tfor ( let i = 0; i < classSelectors.length; i ++ ) {\n\n\t\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '.' + classSelectors[ i ] ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'id' ) ) {\n\n\t\t\t\tstylesheetStyles = Object.assign( stylesheetStyles, stylesheets[ '#' + node.getAttribute( 'id' ) ] );\n\n\t\t\t}\n\n\t\t\tfunction addStyle( svgName, jsName, adjustFunction ) {\n\n\t\t\t\tif ( adjustFunction === undefined ) adjustFunction = function copy( v ) {\n\n\t\t\t\t\tif ( v.startsWith( 'url' ) ) console.warn( 'SVGLoader: url access in attributes is not implemented.' );\n\n\t\t\t\t\treturn v;\n\n\t\t\t\t};\n\n\t\t\t\tif ( node.hasAttribute( svgName ) ) style[ jsName ] = adjustFunction( node.getAttribute( svgName ) );\n\t\t\t\tif ( stylesheetStyles[ svgName ] ) style[ jsName ] = adjustFunction( stylesheetStyles[ svgName ] );\n\t\t\t\tif ( node.style && node.style[ svgName ] !== '' ) style[ jsName ] = adjustFunction( node.style[ svgName ] );\n\n\t\t\t}\n\n\t\t\tfunction clamp( v ) {\n\n\t\t\t\treturn Math.max( 0, Math.min( 1, parseFloatWithUnits( v ) ) );\n\n\t\t\t}\n\n\t\t\tfunction positive( v ) {\n\n\t\t\t\treturn Math.max( 0, parseFloatWithUnits( v ) );\n\n\t\t\t}\n\n\t\t\taddStyle( 'fill', 'fill' );\n\t\t\taddStyle( 'fill-opacity', 'fillOpacity', clamp );\n\t\t\taddStyle( 'fill-rule', 'fillRule' );\n\t\t\taddStyle( 'opacity', 'opacity', clamp );\n\t\t\taddStyle( 'stroke', 'stroke' );\n\t\t\taddStyle( 'stroke-opacity', 'strokeOpacity', clamp );\n\t\t\taddStyle( 'stroke-width', 'strokeWidth', positive );\n\t\t\taddStyle( 'stroke-linejoin', 'strokeLineJoin' );\n\t\t\taddStyle( 'stroke-linecap', 'strokeLineCap' );\n\t\t\taddStyle( 'stroke-miterlimit', 'strokeMiterLimit', positive );\n\t\t\taddStyle( 'visibility', 'visibility' );\n\n\t\t\treturn style;\n\n\t\t}\n\n\t\t// http://www.w3.org/TR/SVG11/implnote.html#PathElementImplementationNotes\n\n\t\tfunction getReflection( a, b ) {\n\n\t\t\treturn a - ( b - a );\n\n\t\t}\n\n\t\t// from https://github.com/ppvg/svg-numbers (MIT License)\n\n\t\tfunction parseFloats( input, flags, stride ) {\n\n\t\t\tif ( typeof input !== 'string' ) {\n\n\t\t\t\tthrow new TypeError( 'Invalid input: ' + typeof input );\n\n\t\t\t}\n\n\t\t\t// Character groups\n\t\t\tconst RE = {\n\t\t\t\tSEPARATOR: /[ \\t\\r\\n\\,.\\-+]/,\n\t\t\t\tWHITESPACE: /[ \\t\\r\\n]/,\n\t\t\t\tDIGIT: /[\\d]/,\n\t\t\t\tSIGN: /[-+]/,\n\t\t\t\tPOINT: /\\./,\n\t\t\t\tCOMMA: /,/,\n\t\t\t\tEXP: /e/i,\n\t\t\t\tFLAGS: /[01]/\n\t\t\t};\n\n\t\t\t// States\n\t\t\tconst SEP = 0;\n\t\t\tconst INT = 1;\n\t\t\tconst FLOAT = 2;\n\t\t\tconst EXP = 3;\n\n\t\t\tlet state = SEP;\n\t\t\tlet seenComma = true;\n\t\t\tlet number = '', exponent = '';\n\t\t\tconst result = [];\n\n\t\t\tfunction throwSyntaxError( current, i, partial ) {\n\n\t\t\t\tconst error = new SyntaxError( 'Unexpected character \"' + current + '\" at index ' + i + '.' );\n\t\t\t\terror.partial = partial;\n\t\t\t\tthrow error;\n\n\t\t\t}\n\n\t\t\tfunction newNumber() {\n\n\t\t\t\tif ( number !== '' ) {\n\n\t\t\t\t\tif ( exponent === '' ) result.push( Number( number ) );\n\t\t\t\t\telse result.push( Number( number ) * Math.pow( 10, Number( exponent ) ) );\n\n\t\t\t\t}\n\n\t\t\t\tnumber = '';\n\t\t\t\texponent = '';\n\n\t\t\t}\n\n\t\t\tlet current;\n\t\t\tconst length = input.length;\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tcurrent = input[ i ];\n\n\t\t\t\t// check for flags\n\t\t\t\tif ( Array.isArray( flags ) && flags.includes( result.length % stride ) && RE.FLAGS.test( current ) ) {\n\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\t// parse until next number\n\t\t\t\tif ( state === SEP ) {\n\n\t\t\t\t\t// eat whitespace\n\t\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// start new number\n\t\t\t\t\tif ( RE.DIGIT.test( current ) || RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tstate = INT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tnumber = current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double commas (e.g. \"1, , 2\")\n\t\t\t\t\tif ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\t\tif ( seenComma ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseenComma = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse integer part\n\t\t\t\tif ( state === INT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double signs (\"-+1\"), but not on sign as separator (\"-1-2\")\n\t\t\t\t\tif ( RE.SIGN.test( current )\n\t\t\t\t\t\t\t&& number.length === 1\n\t\t\t\t\t\t\t&& RE.SIGN.test( number[ 0 ] ) ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse decimal part\n\t\t\t\tif ( state === FLOAT ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\tnumber += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.EXP.test( current ) ) {\n\n\t\t\t\t\t\tstate = EXP;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// throw on double decimal points (e.g. \"1..2\")\n\t\t\t\t\tif ( RE.POINT.test( current ) && number[ number.length - 1 ] === '.' ) {\n\n\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// parse exponent part\n\t\t\t\tif ( state === EXP ) {\n\n\t\t\t\t\tif ( RE.DIGIT.test( current ) ) {\n\n\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\t\tif ( exponent === '' ) {\n\n\t\t\t\t\t\t\texponent += current;\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( exponent.length === 1 && RE.SIGN.test( exponent ) ) {\n\n\t\t\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\n\t\t\t\t// end of number\n\t\t\t\tif ( RE.WHITESPACE.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = false;\n\n\t\t\t\t} else if ( RE.COMMA.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = SEP;\n\t\t\t\t\tseenComma = true;\n\n\t\t\t\t} else if ( RE.SIGN.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = INT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else if ( RE.POINT.test( current ) ) {\n\n\t\t\t\t\tnewNumber();\n\t\t\t\t\tstate = FLOAT;\n\t\t\t\t\tnumber = current;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrowSyntaxError( current, i, result );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add the last number found (if any)\n\t\t\tnewNumber();\n\n\t\t\treturn result;\n\n\t\t}\n\n\t\t// Units\n\n\t\tconst units = [ 'mm', 'cm', 'in', 'pt', 'pc', 'px' ];\n\n\t\t// Conversion: [ fromUnit ][ toUnit ] (-1 means dpi dependent)\n\t\tconst unitConversion = {\n\n\t\t\t'mm': {\n\t\t\t\t'mm': 1,\n\t\t\t\t'cm': 0.1,\n\t\t\t\t'in': 1 / 25.4,\n\t\t\t\t'pt': 72 / 25.4,\n\t\t\t\t'pc': 6 / 25.4,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'cm': {\n\t\t\t\t'mm': 10,\n\t\t\t\t'cm': 1,\n\t\t\t\t'in': 1 / 2.54,\n\t\t\t\t'pt': 72 / 2.54,\n\t\t\t\t'pc': 6 / 2.54,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'in': {\n\t\t\t\t'mm': 25.4,\n\t\t\t\t'cm': 2.54,\n\t\t\t\t'in': 1,\n\t\t\t\t'pt': 72,\n\t\t\t\t'pc': 6,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pt': {\n\t\t\t\t'mm': 25.4 / 72,\n\t\t\t\t'cm': 2.54 / 72,\n\t\t\t\t'in': 1 / 72,\n\t\t\t\t'pt': 1,\n\t\t\t\t'pc': 6 / 72,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'pc': {\n\t\t\t\t'mm': 25.4 / 6,\n\t\t\t\t'cm': 2.54 / 6,\n\t\t\t\t'in': 1 / 6,\n\t\t\t\t'pt': 72 / 6,\n\t\t\t\t'pc': 1,\n\t\t\t\t'px': - 1\n\t\t\t},\n\t\t\t'px': {\n\t\t\t\t'px': 1\n\t\t\t}\n\n\t\t};\n\n\t\tfunction parseFloatWithUnits( string ) {\n\n\t\t\tlet theUnit = 'px';\n\n\t\t\tif ( typeof string === 'string' || string instanceof String ) {\n\n\t\t\t\tfor ( let i = 0, n = units.length; i < n; i ++ ) {\n\n\t\t\t\t\tconst u = units[ i ];\n\n\t\t\t\t\tif ( string.endsWith( u ) ) {\n\n\t\t\t\t\t\ttheUnit = u;\n\t\t\t\t\t\tstring = string.substring( 0, string.length - u.length );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tlet scale = undefined;\n\n\t\t\tif ( theUnit === 'px' && scope.defaultUnit !== 'px' ) {\n\n\t\t\t\t// Conversion scale from  pixels to inches, then to default units\n\n\t\t\t\tscale = unitConversion[ 'in' ][ scope.defaultUnit ] / scope.defaultDPI;\n\n\t\t\t} else {\n\n\t\t\t\tscale = unitConversion[ theUnit ][ scope.defaultUnit ];\n\n\t\t\t\tif ( scale < 0 ) {\n\n\t\t\t\t\t// Conversion scale to pixels\n\n\t\t\t\t\tscale = unitConversion[ theUnit ][ 'in' ] * scope.defaultDPI;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn scale * parseFloat( string );\n\n\t\t}\n\n\t\t// Transforms\n\n\t\tfunction getNodeTransform( node ) {\n\n\t\t\tif ( ! ( node.hasAttribute( 'transform' ) || ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) ) ) {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t\tconst transform = parseNodeTransform( node );\n\n\t\t\tif ( transformStack.length > 0 ) {\n\n\t\t\t\ttransform.premultiply( transformStack[ transformStack.length - 1 ] );\n\n\t\t\t}\n\n\t\t\tcurrentTransform.copy( transform );\n\t\t\ttransformStack.push( transform );\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction parseNodeTransform( node ) {\n\n\t\t\tconst transform = new Matrix3();\n\t\t\tconst currentTransform = tempTransform0;\n\n\t\t\tif ( node.nodeName === 'use' && ( node.hasAttribute( 'x' ) || node.hasAttribute( 'y' ) ) ) {\n\n\t\t\t\tconst tx = parseFloatWithUnits( node.getAttribute( 'x' ) );\n\t\t\t\tconst ty = parseFloatWithUnits( node.getAttribute( 'y' ) );\n\n\t\t\t\ttransform.translate( tx, ty );\n\n\t\t\t}\n\n\t\t\tif ( node.hasAttribute( 'transform' ) ) {\n\n\t\t\t\tconst transformsTexts = node.getAttribute( 'transform' ).split( ')' );\n\n\t\t\t\tfor ( let tIndex = transformsTexts.length - 1; tIndex >= 0; tIndex -- ) {\n\n\t\t\t\t\tconst transformText = transformsTexts[ tIndex ].trim();\n\n\t\t\t\t\tif ( transformText === '' ) continue;\n\n\t\t\t\t\tconst openParPos = transformText.indexOf( '(' );\n\t\t\t\t\tconst closeParPos = transformText.length;\n\n\t\t\t\t\tif ( openParPos > 0 && openParPos < closeParPos ) {\n\n\t\t\t\t\t\tconst transformType = transformText.substr( 0, openParPos );\n\n\t\t\t\t\t\tconst array = parseFloats( transformText.substr( openParPos + 1, closeParPos - openParPos - 1 ) );\n\n\t\t\t\t\t\tcurrentTransform.identity();\n\n\t\t\t\t\t\tswitch ( transformType ) {\n\n\t\t\t\t\t\t\tcase 'translate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst tx = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet ty = tx;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tty = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.translate( tx, ty );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'rotate':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tlet angle = 0;\n\t\t\t\t\t\t\t\t\tlet cx = 0;\n\t\t\t\t\t\t\t\t\tlet cy = 0;\n\n\t\t\t\t\t\t\t\t\t// Angle\n\t\t\t\t\t\t\t\t\tangle = - array[ 0 ] * Math.PI / 180;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 3 ) {\n\n\t\t\t\t\t\t\t\t\t\t// Center x, y\n\t\t\t\t\t\t\t\t\t\tcx = array[ 1 ];\n\t\t\t\t\t\t\t\t\t\tcy = array[ 2 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t// Rotate around center (cx, cy)\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( - cx, - cy );\n\t\t\t\t\t\t\t\t\ttempTransform2.identity().rotate( angle );\n\t\t\t\t\t\t\t\t\ttempTransform3.multiplyMatrices( tempTransform2, tempTransform1 );\n\t\t\t\t\t\t\t\t\ttempTransform1.identity().translate( cx, cy );\n\t\t\t\t\t\t\t\t\tcurrentTransform.multiplyMatrices( tempTransform1, tempTransform3 );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'scale':\n\n\t\t\t\t\t\t\t\tif ( array.length >= 1 ) {\n\n\t\t\t\t\t\t\t\t\tconst scaleX = array[ 0 ];\n\t\t\t\t\t\t\t\t\tlet scaleY = scaleX;\n\n\t\t\t\t\t\t\t\t\tif ( array.length >= 2 ) {\n\n\t\t\t\t\t\t\t\t\t\tscaleY = array[ 1 ];\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.scale( scaleX, scaleY );\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewX':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, Math.tan( array[ 0 ] * Math.PI / 180 ), 0,\n\t\t\t\t\t\t\t\t\t\t0, 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'skewY':\n\n\t\t\t\t\t\t\t\tif ( array.length === 1 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\t1, 0, 0,\n\t\t\t\t\t\t\t\t\t\tMath.tan( array[ 0 ] * Math.PI / 180 ), 1, 0,\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 'matrix':\n\n\t\t\t\t\t\t\t\tif ( array.length === 6 ) {\n\n\t\t\t\t\t\t\t\t\tcurrentTransform.set(\n\t\t\t\t\t\t\t\t\t\tarray[ 0 ], array[ 2 ], array[ 4 ],\n\t\t\t\t\t\t\t\t\t\tarray[ 1 ], array[ 3 ], array[ 5 ],\n\t\t\t\t\t\t\t\t\t\t0, 0, 1\n\t\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttransform.premultiply( currentTransform );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn transform;\n\n\t\t}\n\n\t\tfunction transformPath( path, m ) {\n\n\t\t\tfunction transfVec2( v2 ) {\n\n\t\t\t\ttempV3.set( v2.x, v2.y, 1 ).applyMatrix3( m );\n\n\t\t\t\tv2.set( tempV3.x, tempV3.y );\n\n\t\t\t}\n\n\t\t\tconst isRotated = isTransformRotated( m );\n\n\t\t\tconst subPaths = path.subPaths;\n\n\t\t\tfor ( let i = 0, n = subPaths.length; i < n; i ++ ) {\n\n\t\t\t\tconst subPath = subPaths[ i ];\n\t\t\t\tconst curves = subPath.curves;\n\n\t\t\t\tfor ( let j = 0; j < curves.length; j ++ ) {\n\n\t\t\t\t\tconst curve = curves[ j ];\n\n\t\t\t\t\tif ( curve.isLineCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isCubicBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\t\t\t\t\t\ttransfVec2( curve.v3 );\n\n\t\t\t\t\t} else if ( curve.isQuadraticBezierCurve ) {\n\n\t\t\t\t\t\ttransfVec2( curve.v0 );\n\t\t\t\t\t\ttransfVec2( curve.v1 );\n\t\t\t\t\t\ttransfVec2( curve.v2 );\n\n\t\t\t\t\t} else if ( curve.isEllipseCurve ) {\n\n\t\t\t\t\t\tif ( isRotated ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented.' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttempV2.set( curve.aX, curve.aY );\n\t\t\t\t\t\ttransfVec2( tempV2 );\n\t\t\t\t\t\tcurve.aX = tempV2.x;\n\t\t\t\t\t\tcurve.aY = tempV2.y;\n\n\t\t\t\t\t\tcurve.xRadius *= getTransformScaleX( m );\n\t\t\t\t\t\tcurve.yRadius *= getTransformScaleY( m );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction isTransformRotated( m ) {\n\n\t\t\treturn m.elements[ 1 ] !== 0 || m.elements[ 3 ] !== 0;\n\n\t\t}\n\n\t\tfunction getTransformScaleX( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] );\n\n\t\t}\n\n\t\tfunction getTransformScaleY( m ) {\n\n\t\t\tconst te = m.elements;\n\t\t\treturn Math.sqrt( te[ 3 ] * te[ 3 ] + te[ 4 ] * te[ 4 ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst paths = [];\n\t\tconst stylesheets = {};\n\n\t\tconst transformStack = [];\n\n\t\tconst tempTransform0 = new Matrix3();\n\t\tconst tempTransform1 = new Matrix3();\n\t\tconst tempTransform2 = new Matrix3();\n\t\tconst tempTransform3 = new Matrix3();\n\t\tconst tempV2 = new Vector2();\n\t\tconst tempV3 = new Vector3();\n\n\t\tconst currentTransform = new Matrix3();\n\n\t\tconst xml = new DOMParser().parseFromString( text, 'image/svg+xml' ); // application/xml\n\n\t\tparseNode( xml.documentElement, {\n\t\t\tfill: '#000',\n\t\t\tfillOpacity: 1,\n\t\t\tstrokeOpacity: 1,\n\t\t\tstrokeWidth: 1,\n\t\t\tstrokeLineJoin: 'miter',\n\t\t\tstrokeLineCap: 'butt',\n\t\t\tstrokeMiterLimit: 4\n\t\t} );\n\n\t\tconst data = { paths: paths, xml: xml.documentElement };\n\n\t\t// console.log( paths );\n\t\treturn data;\n\n\t}\n\n\tstatic createShapes( shapePath ) {\n\n\t\t// Param shapePath: a shapepath as returned by the parse function of this class\n\t\t// Returns Shape object\n\n\t\tconst BIGNUMBER = 999999999;\n\n\t\tconst IntersectionLocationType = {\n\t\t\tORIGIN: 0,\n\t\t\tDESTINATION: 1,\n\t\t\tBETWEEN: 2,\n\t\t\tLEFT: 3,\n\t\t\tRIGHT: 4,\n\t\t\tBEHIND: 5,\n\t\t\tBEYOND: 6\n\t\t};\n\n\t\tconst classifyResult = {\n\t\t\tloc: IntersectionLocationType.ORIGIN,\n\t\t\tt: 0\n\t\t};\n\n\t\tfunction findEdgeIntersection( a0, a1, b0, b1 ) {\n\n\t\t\tconst x1 = a0.x;\n\t\t\tconst x2 = a1.x;\n\t\t\tconst x3 = b0.x;\n\t\t\tconst x4 = b1.x;\n\t\t\tconst y1 = a0.y;\n\t\t\tconst y2 = a1.y;\n\t\t\tconst y3 = b0.y;\n\t\t\tconst y4 = b1.y;\n\t\t\tconst nom1 = ( x4 - x3 ) * ( y1 - y3 ) - ( y4 - y3 ) * ( x1 - x3 );\n\t\t\tconst nom2 = ( x2 - x1 ) * ( y1 - y3 ) - ( y2 - y1 ) * ( x1 - x3 );\n\t\t\tconst denom = ( y4 - y3 ) * ( x2 - x1 ) - ( x4 - x3 ) * ( y2 - y1 );\n\t\t\tconst t1 = nom1 / denom;\n\t\t\tconst t2 = nom2 / denom;\n\n\t\t\tif ( ( ( denom === 0 ) && ( nom1 !== 0 ) ) || ( t1 <= 0 ) || ( t1 >= 1 ) || ( t2 < 0 ) || ( t2 > 1 ) ) {\n\n\t\t\t\t//1. lines are parallel or edges don't intersect\n\n\t\t\t\treturn null;\n\n\t\t\t} else if ( ( nom1 === 0 ) && ( denom === 0 ) ) {\n\n\t\t\t\t//2. lines are colinear\n\n\t\t\t\t//check if endpoints of edge2 (b0-b1) lies on edge1 (a0-a1)\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\t\t\t\t\t//find position of this endpoints relatively to edge1\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t} else if ( classifyResult.loc == IntersectionLocationType.BETWEEN ) {\n\n\t\t\t\t\t\tconst x = + ( ( x1 + classifyResult.t * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\tconst y = + ( ( y1 + classifyResult.t * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\t\t\treturn { x: x, y: y, t: classifyResult.t, };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t} else {\n\n\t\t\t\t//3. edges intersect\n\n\t\t\t\tfor ( let i = 0; i < 2; i ++ ) {\n\n\t\t\t\t\tclassifyPoint( i === 0 ? b0 : b1, a0, a1 );\n\n\t\t\t\t\tif ( classifyResult.loc == IntersectionLocationType.ORIGIN ) {\n\n\t\t\t\t\t\tconst point = ( i === 0 ? b0 : b1 );\n\t\t\t\t\t\treturn { x: point.x, y: point.y, t: classifyResult.t };\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst x = + ( ( x1 + t1 * ( x2 - x1 ) ).toPrecision( 10 ) );\n\t\t\t\tconst y = + ( ( y1 + t1 * ( y2 - y1 ) ).toPrecision( 10 ) );\n\t\t\t\treturn { x: x, y: y, t: t1 };\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction classifyPoint( p, edgeStart, edgeEnd ) {\n\n\t\t\tconst ax = edgeEnd.x - edgeStart.x;\n\t\t\tconst ay = edgeEnd.y - edgeStart.y;\n\t\t\tconst bx = p.x - edgeStart.x;\n\t\t\tconst by = p.y - edgeStart.y;\n\t\t\tconst sa = ax * by - bx * ay;\n\n\t\t\tif ( ( p.x === edgeStart.x ) && ( p.y === edgeStart.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.ORIGIN;\n\t\t\t\tclassifyResult.t = 0;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( p.x === edgeEnd.x ) && ( p.y === edgeEnd.y ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.DESTINATION;\n\t\t\t\tclassifyResult.t = 1;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa < - Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.LEFT;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( sa > Number.EPSILON ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.RIGHT;\n\t\t\t\treturn;\n\n\n\t\t\t}\n\n\t\t\tif ( ( ( ax * bx ) < 0 ) || ( ( ay * by ) < 0 ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEHIND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tif ( ( Math.sqrt( ax * ax + ay * ay ) ) < ( Math.sqrt( bx * bx + by * by ) ) ) {\n\n\t\t\t\tclassifyResult.loc = IntersectionLocationType.BEYOND;\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tlet t;\n\n\t\t\tif ( ax !== 0 ) {\n\n\t\t\t\tt = bx / ax;\n\n\t\t\t} else {\n\n\t\t\t\tt = by / ay;\n\n\t\t\t}\n\n\t\t\tclassifyResult.loc = IntersectionLocationType.BETWEEN;\n\t\t\tclassifyResult.t = t;\n\n\t\t}\n\n\t\tfunction getIntersections( path1, path2 ) {\n\n\t\t\tconst intersectionsRaw = [];\n\t\t\tconst intersections = [];\n\n\t\t\tfor ( let index = 1; index < path1.length; index ++ ) {\n\n\t\t\t\tconst path1EdgeStart = path1[ index - 1 ];\n\t\t\t\tconst path1EdgeEnd = path1[ index ];\n\n\t\t\t\tfor ( let index2 = 1; index2 < path2.length; index2 ++ ) {\n\n\t\t\t\t\tconst path2EdgeStart = path2[ index2 - 1 ];\n\t\t\t\t\tconst path2EdgeEnd = path2[ index2 ];\n\n\t\t\t\t\tconst intersection = findEdgeIntersection( path1EdgeStart, path1EdgeEnd, path2EdgeStart, path2EdgeEnd );\n\n\t\t\t\t\tif ( intersection !== null && intersectionsRaw.find( i => i.t <= intersection.t + Number.EPSILON && i.t >= intersection.t - Number.EPSILON ) === undefined ) {\n\n\t\t\t\t\t\tintersectionsRaw.push( intersection );\n\t\t\t\t\t\tintersections.push( new Vector2( intersection.x, intersection.y ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn intersections;\n\n\t\t}\n\n\t\tfunction getScanlineIntersections( scanline, boundingBox, paths ) {\n\n\t\t\tconst center = new Vector2();\n\t\t\tboundingBox.getCenter( center );\n\n\t\t\tconst allIntersections = [];\n\n\t\t\tpaths.forEach( path => {\n\n\t\t\t\t// check if the center of the bounding box is in the bounding box of the paths.\n\t\t\t\t// this is a pruning method to limit the search of intersections in paths that can't envelop of the current path.\n\t\t\t\t// if a path envelops another path. The center of that oter path, has to be inside the bounding box of the enveloping path.\n\t\t\t\tif ( path.boundingBox.containsPoint( center ) ) {\n\n\t\t\t\t\tconst intersections = getIntersections( scanline, path.points );\n\n\t\t\t\t\tintersections.forEach( p => {\n\n\t\t\t\t\t\tallIntersections.push( { identifier: path.identifier, isCW: path.isCW, point: p } );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tallIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\treturn allIntersections;\n\n\t\t}\n\n\t\tfunction isHoleTo( simplePath, allPaths, scanlineMinX, scanlineMaxX, _fillRule ) {\n\n\t\t\tif ( _fillRule === null || _fillRule === undefined || _fillRule === '' ) {\n\n\t\t\t\t_fillRule = 'nonzero';\n\n\t\t\t}\n\n\t\t\tconst centerBoundingBox = new Vector2();\n\t\t\tsimplePath.boundingBox.getCenter( centerBoundingBox );\n\n\t\t\tconst scanline = [ new Vector2( scanlineMinX, centerBoundingBox.y ), new Vector2( scanlineMaxX, centerBoundingBox.y ) ];\n\n\t\t\tconst scanlineIntersections = getScanlineIntersections( scanline, simplePath.boundingBox, allPaths );\n\n\t\t\tscanlineIntersections.sort( ( i1, i2 ) => {\n\n\t\t\t\treturn i1.point.x - i2.point.x;\n\n\t\t\t} );\n\n\t\t\tconst baseIntersections = [];\n\t\t\tconst otherIntersections = [];\n\n\t\t\tscanlineIntersections.forEach( i => {\n\n\t\t\t\tif ( i.identifier === simplePath.identifier ) {\n\n\t\t\t\t\tbaseIntersections.push( i );\n\n\t\t\t\t} else {\n\n\t\t\t\t\totherIntersections.push( i );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\tconst firstXOfPath = baseIntersections[ 0 ].point.x;\n\n\t\t\t// build up the path hierarchy\n\t\t\tconst stack = [];\n\t\t\tlet i = 0;\n\n\t\t\twhile ( i < otherIntersections.length && otherIntersections[ i ].point.x < firstXOfPath ) {\n\n\t\t\t\tif ( stack.length > 0 && stack[ stack.length - 1 ] === otherIntersections[ i ].identifier ) {\n\n\t\t\t\t\tstack.pop();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstack.push( otherIntersections[ i ].identifier );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t\tstack.push( simplePath.identifier );\n\n\t\t\tif ( _fillRule === 'evenodd' ) {\n\n\t\t\t\tconst isHole = stack.length % 2 === 0 ? true : false;\n\t\t\t\tconst isHoleFor = stack[ stack.length - 2 ];\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else if ( _fillRule === 'nonzero' ) {\n\n\t\t\t\t// check if path is a hole by counting the amount of paths with alternating rotations it has to cross.\n\t\t\t\tlet isHole = true;\n\t\t\t\tlet isHoleFor = null;\n\t\t\t\tlet lastCWValue = null;\n\n\t\t\t\tfor ( let i = 0; i < stack.length; i ++ ) {\n\n\t\t\t\t\tconst identifier = stack[ i ];\n\t\t\t\t\tif ( isHole ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = false;\n\t\t\t\t\t\tisHoleFor = identifier;\n\n\t\t\t\t\t} else if ( lastCWValue !== allPaths[ identifier ].isCW ) {\n\n\t\t\t\t\t\tlastCWValue = allPaths[ identifier ].isCW;\n\t\t\t\t\t\tisHole = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\treturn { identifier: simplePath.identifier, isHole: isHole, for: isHoleFor };\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'fill-rule: \"' + _fillRule + '\" is currently not implemented.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// check for self intersecting paths\n\t\t// TODO\n\n\t\t// check intersecting paths\n\t\t// TODO\n\n\t\t// prepare paths for hole detection\n\t\tlet identifier = 0;\n\n\t\tlet scanlineMinX = BIGNUMBER;\n\t\tlet scanlineMaxX = - BIGNUMBER;\n\n\t\tlet simplePaths = shapePath.subPaths.map( p => {\n\n\t\t\tconst points = p.getPoints();\n\t\t\tlet maxY = - BIGNUMBER;\n\t\t\tlet minY = BIGNUMBER;\n\t\t\tlet maxX = - BIGNUMBER;\n\t\t\tlet minX = BIGNUMBER;\n\n\t      \t//points.forEach(p => p.y *= -1);\n\n\t\t\tfor ( let i = 0; i < points.length; i ++ ) {\n\n\t\t\t\tconst p = points[ i ];\n\n\t\t\t\tif ( p.y > maxY ) {\n\n\t\t\t\t\tmaxY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.y < minY ) {\n\n\t\t\t\t\tminY = p.y;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x > maxX ) {\n\n\t\t\t\t\tmaxX = p.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( p.x < minX ) {\n\n\t\t\t\t\tminX = p.x;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\t\t\tif ( scanlineMaxX <= maxX ) {\n\n\t\t\t\tscanlineMaxX = maxX + 1;\n\n\t\t\t}\n\n\t\t\tif ( scanlineMinX >= minX ) {\n\n\t\t\t\tscanlineMinX = minX - 1;\n\n\t\t\t}\n\n\t\t\treturn { curves: p.curves, points: points, isCW: ShapeUtils.isClockWise( points ), identifier: identifier ++, boundingBox: new Box2( new Vector2( minX, minY ), new Vector2( maxX, maxY ) ) };\n\n\t\t} );\n\n\t\tsimplePaths = simplePaths.filter( sp => sp.points.length > 1 );\n\n\t\t// check if path is solid or a hole\n\t\tconst isAHole = simplePaths.map( p => isHoleTo( p, simplePaths, scanlineMinX, scanlineMaxX, shapePath.userData.style.fillRule ) );\n\n\n\t\tconst shapesToReturn = [];\n\t\tsimplePaths.forEach( p => {\n\n\t\t\tconst amIAHole = isAHole[ p.identifier ];\n\n\t\t\tif ( ! amIAHole.isHole ) {\n\n\t\t\t\tconst shape = new Shape();\n\t\t\t\tshape.curves = p.curves;\n\t\t\t\tconst holes = isAHole.filter( h => h.isHole && h.for === p.identifier );\n\t\t\t\tholes.forEach( h => {\n\n\t\t\t\t\tconst hole = simplePaths[ h.identifier ];\n\t\t\t\t\tconst path = new Path();\n\t\t\t\t\tpath.curves = hole.curves;\n\t\t\t\t\tshape.holes.push( path );\n\n\t\t\t\t} );\n\t\t\t\tshapesToReturn.push( shape );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn shapesToReturn;\n\n\t}\n\n\tstatic getStrokeStyle( width, color, lineJoin, lineCap, miterLimit ) {\n\n\t\t// Param width: Stroke width\n\t\t// Param color: As returned by THREE.Color.getStyle()\n\t\t// Param lineJoin: One of \"round\", \"bevel\", \"miter\" or \"miter-limit\"\n\t\t// Param lineCap: One of \"round\", \"square\" or \"butt\"\n\t\t// Param miterLimit: Maximum join length, in multiples of the \"width\" parameter (join is truncated if it exceeds that distance)\n\t\t// Returns style object\n\n\t\twidth = width !== undefined ? width : 1;\n\t\tcolor = color !== undefined ? color : '#000';\n\t\tlineJoin = lineJoin !== undefined ? lineJoin : 'miter';\n\t\tlineCap = lineCap !== undefined ? lineCap : 'butt';\n\t\tmiterLimit = miterLimit !== undefined ? miterLimit : 4;\n\n\t\treturn {\n\t\t\tstrokeColor: color,\n\t\t\tstrokeWidth: width,\n\t\t\tstrokeLineJoin: lineJoin,\n\t\t\tstrokeLineCap: lineCap,\n\t\t\tstrokeMiterLimit: miterLimit\n\t\t};\n\n\t}\n\n\tstatic pointsToStroke( points, style, arcDivisions, minDistance ) {\n\n\t\t// Generates a stroke with some witdh around the given path.\n\t\t// The path can be open or closed (last point equals to first point)\n\t\t// Param points: Array of Vector2D (the path). Minimum 2 points.\n\t\t// Param style: Object with SVG properties as returned by SVGLoader.getStrokeStyle(), or SVGLoader.parse() in the path.userData.style object\n\t\t// Params arcDivisions: Arc divisions for round joins and endcaps. (Optional)\n\t\t// Param minDistance: Points closer to this distance will be merged. (Optional)\n\t\t// Returns BufferGeometry with stroke triangles (In plane z = 0). UV coordinates are generated ('u' along path. 'v' across it, from left to right)\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\tif ( SVGLoader.pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs ) === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst geometry = new BufferGeometry();\n\t\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tgeometry.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tgeometry.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\treturn geometry;\n\n\t}\n\n\tstatic pointsToStrokeWithBuffers( points, style, arcDivisions, minDistance, vertices, normals, uvs, vertexOffset ) {\n\n\t\t// This function can be called to update existing arrays or buffers.\n\t\t// Accepts same parameters as pointsToStroke, plus the buffers and optional offset.\n\t\t// Param vertexOffset: Offset vertices to start writing in the buffers (3 elements/vertex for vertices and normals, and 2 elements/vertex for uvs)\n\t\t// Returns number of written vertices / normals / uvs pairs\n\t\t// if 'vertices' parameter is undefined no triangles will be generated, but the returned vertices count will still be valid (useful to preallocate the buffers)\n\t\t// 'normals' and 'uvs' buffers are optional\n\n\t\tconst tempV2_1 = new Vector2();\n\t\tconst tempV2_2 = new Vector2();\n\t\tconst tempV2_3 = new Vector2();\n\t\tconst tempV2_4 = new Vector2();\n\t\tconst tempV2_5 = new Vector2();\n\t\tconst tempV2_6 = new Vector2();\n\t\tconst tempV2_7 = new Vector2();\n\t\tconst lastPointL = new Vector2();\n\t\tconst lastPointR = new Vector2();\n\t\tconst point0L = new Vector2();\n\t\tconst point0R = new Vector2();\n\t\tconst currentPointL = new Vector2();\n\t\tconst currentPointR = new Vector2();\n\t\tconst nextPointL = new Vector2();\n\t\tconst nextPointR = new Vector2();\n\t\tconst innerPoint = new Vector2();\n\t\tconst outerPoint = new Vector2();\n\n\t\tarcDivisions = arcDivisions !== undefined ? arcDivisions : 12;\n\t\tminDistance = minDistance !== undefined ? minDistance : 0.001;\n\t\tvertexOffset = vertexOffset !== undefined ? vertexOffset : 0;\n\n\t\t// First ensure there are no duplicated points\n\t\tpoints = removeDuplicatedPoints( points );\n\n\t\tconst numPoints = points.length;\n\n\t\tif ( numPoints < 2 ) return 0;\n\n\t\tconst isClosed = points[ 0 ].equals( points[ numPoints - 1 ] );\n\n\t\tlet currentPoint;\n\t\tlet previousPoint = points[ 0 ];\n\t\tlet nextPoint;\n\n\t\tconst strokeWidth2 = style.strokeWidth / 2;\n\n\t\tconst deltaU = 1 / ( numPoints - 1 );\n\t\tlet u0 = 0, u1;\n\n\t\tlet innerSideModified;\n\t\tlet joinIsOnLeftSide;\n\t\tlet isMiter;\n\t\tlet initialJoinIsOnLeftSide = false;\n\n\t\tlet numVertices = 0;\n\t\tlet currentCoordinate = vertexOffset * 3;\n\t\tlet currentCoordinateUV = vertexOffset * 2;\n\n\t\t// Get initial left and right stroke points\n\t\tgetNormal( points[ 0 ], points[ 1 ], tempV2_1 ).multiplyScalar( strokeWidth2 );\n\t\tlastPointL.copy( points[ 0 ] ).sub( tempV2_1 );\n\t\tlastPointR.copy( points[ 0 ] ).add( tempV2_1 );\n\t\tpoint0L.copy( lastPointL );\n\t\tpoint0R.copy( lastPointR );\n\n\t\tfor ( let iPoint = 1; iPoint < numPoints; iPoint ++ ) {\n\n\t\t\tcurrentPoint = points[ iPoint ];\n\n\t\t\t// Get next point\n\t\t\tif ( iPoint === numPoints - 1 ) {\n\n\t\t\t\tif ( isClosed ) {\n\n\t\t\t\t\t// Skip duplicated initial point\n\t\t\t\t\tnextPoint = points[ 1 ];\n\n\t\t\t\t} else nextPoint = undefined;\n\n\t\t\t} else {\n\n\t\t\t\tnextPoint = points[ iPoint + 1 ];\n\n\t\t\t}\n\n\t\t\t// Normal of previous segment in tempV2_1\n\t\t\tconst normal1 = tempV2_1;\n\t\t\tgetNormal( previousPoint, currentPoint, normal1 );\n\n\t\t\ttempV2_3.copy( normal1 ).multiplyScalar( strokeWidth2 );\n\t\t\tcurrentPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\tcurrentPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\tu1 = u0 + deltaU;\n\n\t\t\tinnerSideModified = false;\n\n\t\t\tif ( nextPoint !== undefined ) {\n\n\t\t\t\t// Normal of next segment in tempV2_2\n\t\t\t\tgetNormal( currentPoint, nextPoint, tempV2_2 );\n\n\t\t\t\ttempV2_3.copy( tempV2_2 ).multiplyScalar( strokeWidth2 );\n\t\t\t\tnextPointL.copy( currentPoint ).sub( tempV2_3 );\n\t\t\t\tnextPointR.copy( currentPoint ).add( tempV2_3 );\n\n\t\t\t\tjoinIsOnLeftSide = true;\n\t\t\t\ttempV2_3.subVectors( nextPoint, previousPoint );\n\t\t\t\tif ( normal1.dot( tempV2_3 ) < 0 ) {\n\n\t\t\t\t\tjoinIsOnLeftSide = false;\n\n\t\t\t\t}\n\n\t\t\t\tif ( iPoint === 1 ) initialJoinIsOnLeftSide = joinIsOnLeftSide;\n\n\t\t\t\ttempV2_3.subVectors( nextPoint, currentPoint );\n\t\t\t\ttempV2_3.normalize();\n\t\t\t\tconst dot = Math.abs( normal1.dot( tempV2_3 ) );\n\n\t\t\t\t// If path is straight, don't create join\n\t\t\t\tif ( dot !== 0 ) {\n\n\t\t\t\t\t// Compute inner and outer segment intersections\n\t\t\t\t\tconst miterSide = strokeWidth2 / dot;\n\t\t\t\t\ttempV2_3.multiplyScalar( - miterSide );\n\t\t\t\t\ttempV2_4.subVectors( currentPoint, previousPoint );\n\t\t\t\t\ttempV2_5.copy( tempV2_4 ).setLength( miterSide ).add( tempV2_3 );\n\t\t\t\t\tinnerPoint.copy( tempV2_5 ).negate();\n\t\t\t\t\tconst miterLength2 = tempV2_5.length();\n\t\t\t\t\tconst segmentLengthPrev = tempV2_4.length();\n\t\t\t\t\ttempV2_4.divideScalar( segmentLengthPrev );\n\t\t\t\t\ttempV2_6.subVectors( nextPoint, currentPoint );\n\t\t\t\t\tconst segmentLengthNext = tempV2_6.length();\n\t\t\t\t\ttempV2_6.divideScalar( segmentLengthNext );\n\t\t\t\t\t// Check that previous and next segments doesn't overlap with the innerPoint of intersection\n\t\t\t\t\tif ( tempV2_4.dot( innerPoint ) < segmentLengthPrev && tempV2_6.dot( innerPoint ) < segmentLengthNext ) {\n\n\t\t\t\t\t\tinnerSideModified = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\touterPoint.copy( tempV2_5 ).add( currentPoint );\n\t\t\t\t\tinnerPoint.add( currentPoint );\n\n\t\t\t\t\tisMiter = false;\n\n\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\tnextPointR.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointR.copy( innerPoint );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tnextPointL.copy( innerPoint );\n\t\t\t\t\t\t\tcurrentPointL.copy( innerPoint );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// The segment triangles are generated here if there was overlapping\n\n\t\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tswitch ( style.strokeLineJoin ) {\n\n\t\t\t\t\t\tcase 'bevel':\n\n\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'round':\n\n\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t// Join triangles\n\n\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, currentPointL, nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tmakeCircularSector( currentPoint, nextPointR, currentPointR, u1, 1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase 'miter':\n\t\t\t\t\t\tcase 'miter-clip':\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\tconst miterFraction = ( strokeWidth2 * style.strokeMiterLimit ) / miterLength2;\n\n\t\t\t\t\t\t\tif ( miterFraction < 1 ) {\n\n\t\t\t\t\t\t\t\t// The join miter length exceeds the miter limit\n\n\t\t\t\t\t\t\t\tif ( style.strokeLineJoin !== 'miter-clip' ) {\n\n\t\t\t\t\t\t\t\t\tmakeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u1 );\n\t\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Segment triangles\n\n\t\t\t\t\t\t\t\t\tcreateSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified );\n\n\t\t\t\t\t\t\t\t\t// Miter-clip join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointL ).multiplyScalar( miterFraction ).add( currentPointL );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointL ).multiplyScalar( miterFraction ).add( nextPointL );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\ttempV2_6.subVectors( outerPoint, currentPointR ).multiplyScalar( miterFraction ).add( currentPointR );\n\t\t\t\t\t\t\t\t\t\ttempV2_7.subVectors( outerPoint, nextPointR ).multiplyScalar( miterFraction ).add( nextPointR );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_6, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( tempV2_7, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t// Miter join segment triangles\n\n\t\t\t\t\t\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t\t\t\t\t\t// Optimized segment + join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\tnextPointL.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\tnextPointR.copy( outerPoint );\n\n\t\t\t\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t// Add extra miter join triangles\n\n\t\t\t\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 0 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointL, u1, 0 );\n\n\t\t\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\t\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\t\t\t\t\t\taddVertex( outerPoint, u1, 1 );\n\t\t\t\t\t\t\t\t\t\taddVertex( nextPointR, u1, 1 );\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tisMiter = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// The segment triangles are generated here when two consecutive points are collinear\n\n\t\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// The segment triangles are generated here if it is the ending segment\n\n\t\t\t\tmakeSegmentTriangles();\n\n\t\t\t}\n\n\t\t\tif ( ! isClosed && iPoint === numPoints - 1 ) {\n\n\t\t\t\t// Start line endcap\n\t\t\t\taddCapGeometry( points[ 0 ], point0L, point0R, joinIsOnLeftSide, true, u0 );\n\n\t\t\t}\n\n\t\t\t// Increment loop variables\n\n\t\t\tu0 = u1;\n\n\t\t\tpreviousPoint = currentPoint;\n\n\t\t\tlastPointL.copy( nextPointL );\n\t\t\tlastPointR.copy( nextPointR );\n\n\t\t}\n\n\t\tif ( ! isClosed ) {\n\n\t\t\t// Ending line endcap\n\t\t\taddCapGeometry( currentPoint, currentPointL, currentPointR, joinIsOnLeftSide, false, u1 );\n\n\t\t} else if ( innerSideModified && vertices ) {\n\n\t\t\t// Modify path first segment vertices to adjust to the segments inner and outer intersections\n\n\t\t\tlet lastOuter = outerPoint;\n\t\t\tlet lastInner = innerPoint;\n\n\t\t\tif ( initialJoinIsOnLeftSide !== joinIsOnLeftSide ) {\n\n\t\t\t\tlastOuter = innerPoint;\n\t\t\t\tlastInner = outerPoint;\n\n\t\t\t}\n\n\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\tif ( isMiter || initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 0 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 1 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( isMiter || ! initialJoinIsOnLeftSide ) {\n\n\t\t\t\t\tlastInner.toArray( vertices, 1 * 3 );\n\t\t\t\t\tlastInner.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\tif ( isMiter ) {\n\n\t\t\t\t\t\tlastOuter.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn numVertices;\n\n\t\t// -- End of algorithm\n\n\t\t// -- Functions\n\n\t\tfunction getNormal( p1, p2, result ) {\n\n\t\t\tresult.subVectors( p2, p1 );\n\t\t\treturn result.set( - result.y, result.x ).normalize();\n\n\t\t}\n\n\t\tfunction addVertex( position, u, v ) {\n\n\t\t\tif ( vertices ) {\n\n\t\t\t\tvertices[ currentCoordinate ] = position.x;\n\t\t\t\tvertices[ currentCoordinate + 1 ] = position.y;\n\t\t\t\tvertices[ currentCoordinate + 2 ] = 0;\n\n\t\t\t\tif ( normals ) {\n\n\t\t\t\t\tnormals[ currentCoordinate ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 1 ] = 0;\n\t\t\t\t\tnormals[ currentCoordinate + 2 ] = 1;\n\n\t\t\t\t}\n\n\t\t\t\tcurrentCoordinate += 3;\n\n\t\t\t\tif ( uvs ) {\n\n\t\t\t\t\tuvs[ currentCoordinateUV ] = u;\n\t\t\t\t\tuvs[ currentCoordinateUV + 1 ] = v;\n\n\t\t\t\t\tcurrentCoordinateUV += 2;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnumVertices += 3;\n\n\t\t}\n\n\t\tfunction makeCircularSector( center, p1, p2, u, v ) {\n\n\t\t\t// param p1, p2: Points in the circle arc.\n\t\t\t// p1 and p2 are in clockwise direction.\n\n\t\t\ttempV2_1.copy( p1 ).sub( center ).normalize();\n\t\t\ttempV2_2.copy( p2 ).sub( center ).normalize();\n\n\t\t\tlet angle = Math.PI;\n\t\t\tconst dot = tempV2_1.dot( tempV2_2 );\n\t\t\tif ( Math.abs( dot ) < 1 ) angle = Math.abs( Math.acos( dot ) );\n\n\t\t\tangle /= arcDivisions;\n\n\t\t\ttempV2_3.copy( p1 );\n\n\t\t\tfor ( let i = 0, il = arcDivisions - 1; i < il; i ++ ) {\n\n\t\t\t\ttempV2_4.copy( tempV2_3 ).rotateAround( center, angle );\n\n\t\t\t\taddVertex( tempV2_3, u, v );\n\t\t\t\taddVertex( tempV2_4, u, v );\n\t\t\t\taddVertex( center, u, 0.5 );\n\n\t\t\t\ttempV2_3.copy( tempV2_4 );\n\n\t\t\t}\n\n\t\t\taddVertex( tempV2_4, u, v );\n\t\t\taddVertex( p2, u, v );\n\t\t\taddVertex( center, u, 0.5 );\n\n\t\t}\n\n\t\tfunction makeSegmentTriangles() {\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\taddVertex( currentPointL, u1, 1 );\n\t\t\taddVertex( currentPointR, u1, 0 );\n\n\t\t}\n\n\t\tfunction makeSegmentWithBevelJoin( joinIsOnLeftSide, innerSideModified, u ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\t// Optimized segment + bevel triangles\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Path segments triangles\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\t// Bevel join triangle\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( innerPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bevel join triangle. The segment triangles are done in the main loop\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( currentPointL, u, 0 );\n\t\t\t\t\taddVertex( nextPointL, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( currentPointR, u, 1 );\n\t\t\t\t\taddVertex( nextPointR, u, 0 );\n\t\t\t\t\taddVertex( currentPoint, u, 0.5 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction createSegmentTrianglesWithMiddleSection( joinIsOnLeftSide, innerSideModified ) {\n\n\t\t\tif ( innerSideModified ) {\n\n\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( currentPointL, u1, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( nextPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 1 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\taddVertex( lastPointR, u0, 1 );\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( lastPointL, u0, 0 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPointR, u1, 1 );\n\n\t\t\t\t\taddVertex( currentPointR, u0, 1 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\n\t\t\t\t\taddVertex( currentPoint, u1, 0.5 );\n\t\t\t\t\taddVertex( innerPoint, u1, 0 );\n\t\t\t\t\taddVertex( nextPointR, u0, 1 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addCapGeometry( center, p1, p2, joinIsOnLeftSide, start, u ) {\n\n\t\t\t// param center: End point of the path\n\t\t\t// param p1, p2: Left and right cap points\n\n\t\t\tswitch ( style.strokeLineCap ) {\n\n\t\t\t\tcase 'round':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\tmakeCircularSector( center, p2, p1, u, 0.5 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tmakeCircularSector( center, p1, p2, u, 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'square':\n\n\t\t\t\t\tif ( start ) {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p1, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 3 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 1 * 3 );\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, 3 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, 0 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttempV2_1.subVectors( p2, center );\n\t\t\t\t\t\ttempV2_2.set( tempV2_1.y, - tempV2_1.x );\n\n\t\t\t\t\t\ttempV2_3.addVectors( tempV2_1, tempV2_2 ).add( center );\n\t\t\t\t\t\ttempV2_4.subVectors( tempV2_2, tempV2_1 ).add( center );\n\n\t\t\t\t\t\tconst vl = vertices.length;\n\n\t\t\t\t\t\t// Modify already existing vertices\n\t\t\t\t\t\tif ( joinIsOnLeftSide ) {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\ttempV2_3.toArray( vertices, vl - 2 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 1 * 3 );\n\t\t\t\t\t\t\ttempV2_4.toArray( vertices, vl - 4 * 3 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'butt':\n\t\t\t\tdefault:\n\n\t\t\t\t\t// Nothing to do here\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction removeDuplicatedPoints( points ) {\n\n\t\t\t// Creates a new array if necessary with duplicated points removed.\n\t\t\t// This does not remove duplicated initial and ending points of a closed path.\n\n\t\t\tlet dupPoints = false;\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) < minDistance ) {\n\n\t\t\t\t\tdupPoints = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! dupPoints ) return points;\n\n\t\t\tconst newPoints = [];\n\t\t\tnewPoints.push( points[ 0 ] );\n\n\t\t\tfor ( let i = 1, n = points.length - 1; i < n; i ++ ) {\n\n\t\t\t\tif ( points[ i ].distanceTo( points[ i + 1 ] ) >= minDistance ) {\n\n\t\t\t\t\tnewPoints.push( points[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewPoints.push( points[ points.length - 1 ] );\n\n\t\t\treturn newPoints;\n\n\t\t}\n\n\t}\n\n\n}\n\nexport { SVGLoader };\n",null,null,null,null,"/*!\nfflate - fast JavaScript compression/decompression\n<https://101arrowz.github.io/fflate>\nLicensed under MIT. https://github.com/101arrowz/fflate/blob/master/LICENSE\nversion 0.6.9\n*/\n\n// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Some of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// However, the vast majority of the codebase has diverged from UZIP.js to increase performance and reduce bundle size.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar durl = function (c) { return URL.createObjectURL(new Blob([c], { type: 'text/javascript' })); };\nvar cwk = function (u) { return new Worker(u); };\ntry {\n    URL.revokeObjectURL(durl(''));\n}\ncatch (e) {\n    // We're in Deno or a very old browser\n    durl = function (c) { return 'data:application/javascript;charset=UTF-8,' + encodeURI(c); };\n    // If Deno, this is necessary; if not, this changes nothing\n    cwk = function (u) { return new Worker(u, { type: 'module' }); };\n}\nvar wk = (function (c, id, msg, transfer, cb) {\n    var w = cwk(ch2[id] || (ch2[id] = durl(c)));\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i) {\n            if (cd[i]) {\n                co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n            }\n        }\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8)) >> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) | 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) | 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    if (!sl || (st && !st.l && sl < 5))\n        return buf || new u8(0);\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var lpos = pos;\n        for (;; lpos = pos) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts) {\n                if (noSt)\n                    throw 'unexpected EOF';\n                break;\n            }\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lpos = pos, lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = lpos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) | 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [et, 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.ceil(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            // deopt when i > s - 3 - at end, deopt acceptable\n            var hv = hsh(i);\n            // index mod 32768    previous index mod\n            var imod = i & 32767, pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst && pos & 7)\n            pos = wfblk(w, pos + 1, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = -1;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return ~c; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 2655, l);\n                for (; i < e; ++i)\n                    m += n += d[i];\n                n = (n & 65535) + 15 * (n >> 16), m = (m & 65535) + 15 * (m >> 16);\n            }\n            a = n, b = m;\n        },\n        d: function () {\n            a %= 65521, b %= 65521;\n            return (a & 255) << 24 | (a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8);\n        }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    w.postMessage([dat, opts], opts.consume ? [dat.buffer] : []);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16) | (d[b + 3] << 24)) >>> 0; };\nvar b8 = function (d, b) { return b4(d, b) + (b4(d, b + 4) * 4294967296); };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return ((d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) | (d[l - 1] << 24)) >>> 0;\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    return dopt(data, opts || {}, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) | 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = this.p.length > 3 ? gzs(this.p) : 4;\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n// text encoder\nvar te = typeof TextEncoder != 'undefined' && /*#__PURE__*/ new TextEncoder();\n// text decoder\nvar td = typeof TextDecoder != 'undefined' && /*#__PURE__*/ new TextDecoder();\n// text decoder stream\nvar tds = 0;\ntry {\n    td.decode(et, { stream: true });\n    tds = 1;\n}\ncatch (e) { }\n// decode UTF8\nvar dutf8 = function (d) {\n    for (var r = '', i = 0;;) {\n        var c = d[i++];\n        var eb = (c > 127) + (c > 223) + (c > 239);\n        if (i + eb > d.length)\n            return [r, slc(d, i - 1)];\n        if (!eb)\n            r += String.fromCharCode(c);\n        else if (eb == 3) {\n            c = ((c & 15) << 18 | (d[i++] & 63) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n        }\n        else if (eb & 1)\n            r += String.fromCharCode((c & 31) << 6 | (d[i++] & 63));\n        else\n            r += String.fromCharCode((c & 15) << 12 | (d[i++] & 63) << 6 | (d[i++] & 63));\n    }\n};\n/**\n * Streaming UTF-8 decoding\n */\nvar DecodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is decoded\n     */\n    function DecodeUTF8(cb) {\n        this.ondata = cb;\n        if (tds)\n            this.t = new TextDecoder();\n        else\n            this.p = et;\n    }\n    /**\n     * Pushes a chunk to be decoded from UTF-8 binary\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    DecodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        final = !!final;\n        if (this.t) {\n            this.ondata(this.t.decode(chunk, { stream: true }), final);\n            if (final) {\n                if (this.t.decode().length)\n                    throw 'invalid utf-8 data';\n                this.t = null;\n            }\n            return;\n        }\n        if (!this.p)\n            throw 'stream finished';\n        var dat = new u8(this.p.length + chunk.length);\n        dat.set(this.p);\n        dat.set(chunk, this.p.length);\n        var _a = dutf8(dat), ch = _a[0], np = _a[1];\n        if (final) {\n            if (np.length)\n                throw 'invalid utf-8 data';\n            this.p = null;\n        }\n        else\n            this.p = np;\n        this.ondata(ch, final);\n    };\n    return DecodeUTF8;\n}());\nexport { DecodeUTF8 };\n/**\n * Streaming UTF-8 encoding\n */\nvar EncodeUTF8 = /*#__PURE__*/ (function () {\n    /**\n     * Creates a UTF-8 decoding stream\n     * @param cb The callback to call whenever data is encoded\n     */\n    function EncodeUTF8(cb) {\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be encoded to UTF-8\n     * @param chunk The string data to push\n     * @param final Whether this is the last chunk\n     */\n    EncodeUTF8.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback';\n        if (this.d)\n            throw 'stream finished';\n        this.ondata(strToU8(chunk), this.d = final || false);\n    };\n    return EncodeUTF8;\n}());\nexport { EncodeUTF8 };\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    if (latin1) {\n        var ar_1 = new u8(str.length);\n        for (var i = 0; i < str.length; ++i)\n            ar_1[i] = str.charCodeAt(i);\n        return ar_1;\n    }\n    if (te)\n        return te.encode(str);\n    var l = str.length;\n    var ar = new u8(str.length + (str.length >> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >> 18)), w(128 | ((c >> 12) & 63)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >> 12)), w(128 | ((c >> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    if (latin1) {\n        var r = '';\n        for (var i = 0; i < dat.length; i += 16384)\n            r += String.fromCharCode.apply(null, dat.subarray(i, i + 16384));\n        return r;\n    }\n    else if (td)\n        return td.decode(dat);\n    else {\n        var _a = dutf8(dat), out = _a[0], ext = _a[1];\n        if (ext.length)\n            throw 'invalid utf-8 data';\n        return out;\n    }\n}\n;\n// deflate bit flag\nvar dbf = function (l) { return l == 1 ? 3 : l < 6 ? 2 : l == 9 ? 1 : 0; };\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl, bs = b4(d, b + 20);\n    var _a = z && bs == 4294967295 ? z64e(d, es) : [bs, b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b8(d, b + 12), b8(d, b + 4), b8(d, b + 20)];\n};\n// extra field length\nvar exfl = function (ex) {\n    var le = 0;\n    if (ex) {\n        for (var k in ex) {\n            var l = ex[k].length;\n            if (l > 65535)\n                throw 'extra field too long';\n            le += l + 4;\n        }\n    }\n    return le;\n};\n// write zip header\nvar wzh = function (d, b, f, fn, u, c, ce, co) {\n    var fl = fn.length, ex = f.extra, col = co && co.length;\n    var exl = exfl(ex);\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b++] = 20, d[b++] = f.os;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (f.flag << 1) | (c == null && 8), d[b++] = u && 8;\n    d[b++] = f.compression & 255, d[b++] = f.compression >> 8;\n    var dt = new Date(f.mtime == null ? Date.now() : f.mtime), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, (y << 25) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1)), b += 4;\n    if (c != null) {\n        wbytes(d, b, f.crc);\n        wbytes(d, b + 4, c);\n        wbytes(d, b + 8, f.size);\n    }\n    wbytes(d, b + 12, fl);\n    wbytes(d, b + 14, exl), b += 16;\n    if (ce != null) {\n        wbytes(d, b, col);\n        wbytes(d, b + 6, f.attrs);\n        wbytes(d, b + 10, ce), b += 14;\n    }\n    d.set(fn, b);\n    b += fl;\n    if (exl) {\n        for (var k in ex) {\n            var exf = ex[k], l = exf.length;\n            wbytes(d, b, +k);\n            wbytes(d, b + 2, l);\n            d.set(exf, b + 4), b += 4 + l;\n        }\n    }\n    if (col)\n        d.set(co, b), b += col;\n    return b;\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\n/**\n * A pass-through stream to keep data uncompressed in a ZIP archive.\n */\nvar ZipPassThrough = /*#__PURE__*/ (function () {\n    /**\n     * Creates a pass-through stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     */\n    function ZipPassThrough(filename) {\n        this.filename = filename;\n        this.c = crc();\n        this.size = 0;\n        this.compression = 0;\n    }\n    /**\n     * Processes a chunk and pushes to the output stream. You can override this\n     * method in a subclass for custom behavior, but by default this passes\n     * the data through. You must call this.ondata(err, chunk, final) at some\n     * point in this method.\n     * @param chunk The chunk to process\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.process = function (chunk, final) {\n        this.ondata(null, chunk, final);\n    };\n    /**\n     * Pushes a chunk to be added. If you are subclassing this with a custom\n     * compression algorithm, note that you must push data from the source\n     * file only, pre-compression.\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipPassThrough.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no callback - add to ZIP archive before pushing';\n        this.c.p(chunk);\n        this.size += chunk.length;\n        if (final)\n            this.crc = this.c.d();\n        this.process(chunk, final || false);\n    };\n    return ZipPassThrough;\n}());\nexport { ZipPassThrough };\n// I don't extend because TypeScript extension adds 1kB of runtime bloat\n/**\n * Streaming DEFLATE compression for ZIP archives. Prefer using AsyncZipDeflate\n * for better performance\n */\nvar ZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function ZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new Deflate(opts, function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n    }\n    ZipDeflate.prototype.process = function (chunk, final) {\n        try {\n            this.d.push(chunk, final);\n        }\n        catch (e) {\n            this.ondata(e, null, final);\n        }\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    ZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return ZipDeflate;\n}());\nexport { ZipDeflate };\n/**\n * Asynchronous streaming DEFLATE compression for ZIP archives\n */\nvar AsyncZipDeflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE stream that can be added to ZIP archives\n     * @param filename The filename to associate with this data stream\n     * @param opts The compression options\n     */\n    function AsyncZipDeflate(filename, opts) {\n        var _this_1 = this;\n        if (!opts)\n            opts = {};\n        ZipPassThrough.call(this, filename);\n        this.d = new AsyncDeflate(opts, function (err, dat, final) {\n            _this_1.ondata(err, dat, final);\n        });\n        this.compression = 8;\n        this.flag = dbf(opts.level);\n        this.terminate = this.d.terminate;\n    }\n    AsyncZipDeflate.prototype.process = function (chunk, final) {\n        this.d.push(chunk, final);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncZipDeflate.prototype.push = function (chunk, final) {\n        ZipPassThrough.prototype.push.call(this, chunk, final);\n    };\n    return AsyncZipDeflate;\n}());\nexport { AsyncZipDeflate };\n// TODO: Better tree shaking\n/**\n * A zippable archive to which files can incrementally be added\n */\nvar Zip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an empty ZIP archive to which files can be added\n     * @param cb The callback to call whenever data for the generated ZIP archive\n     *           is available\n     */\n    function Zip(cb) {\n        this.ondata = cb;\n        this.u = [];\n        this.d = 1;\n    }\n    /**\n     * Adds a file to the ZIP archive\n     * @param file The file stream to add\n     */\n    Zip.prototype.add = function (file) {\n        var _this_1 = this;\n        if (this.d & 2)\n            throw 'stream finished';\n        var f = strToU8(file.filename), fl = f.length;\n        var com = file.comment, o = com && strToU8(com);\n        var u = fl != file.filename.length || (o && (com.length != o.length));\n        var hl = fl + exfl(file.extra) + 30;\n        if (fl > 65535)\n            throw 'filename too long';\n        var header = new u8(hl);\n        wzh(header, 0, file, f, u);\n        var chks = [header];\n        var pAll = function () {\n            for (var _i = 0, chks_1 = chks; _i < chks_1.length; _i++) {\n                var chk = chks_1[_i];\n                _this_1.ondata(null, chk, false);\n            }\n            chks = [];\n        };\n        var tr = this.d;\n        this.d = 0;\n        var ind = this.u.length;\n        var uf = mrg(file, {\n            f: f,\n            u: u,\n            o: o,\n            t: function () {\n                if (file.terminate)\n                    file.terminate();\n            },\n            r: function () {\n                pAll();\n                if (tr) {\n                    var nxt = _this_1.u[ind + 1];\n                    if (nxt)\n                        nxt.r();\n                    else\n                        _this_1.d = 1;\n                }\n                tr = 1;\n            }\n        });\n        var cl = 0;\n        file.ondata = function (err, dat, final) {\n            if (err) {\n                _this_1.ondata(err, dat, final);\n                _this_1.terminate();\n            }\n            else {\n                cl += dat.length;\n                chks.push(dat);\n                if (final) {\n                    var dd = new u8(16);\n                    wbytes(dd, 0, 0x8074B50);\n                    wbytes(dd, 4, file.crc);\n                    wbytes(dd, 8, cl);\n                    wbytes(dd, 12, file.size);\n                    chks.push(dd);\n                    uf.c = cl, uf.b = hl + cl + 16, uf.crc = file.crc, uf.size = file.size;\n                    if (tr)\n                        uf.r();\n                    tr = 1;\n                }\n                else if (tr)\n                    pAll();\n            }\n        };\n        this.u.push(uf);\n    };\n    /**\n     * Ends the process of adding files and prepares to emit the final chunks.\n     * This *must* be called after adding all desired files for the resulting\n     * ZIP file to work properly.\n     */\n    Zip.prototype.end = function () {\n        var _this_1 = this;\n        if (this.d & 2) {\n            if (this.d & 1)\n                throw 'stream finishing';\n            throw 'stream finished';\n        }\n        if (this.d)\n            this.e();\n        else\n            this.u.push({\n                r: function () {\n                    if (!(_this_1.d & 1))\n                        return;\n                    _this_1.u.splice(-1, 1);\n                    _this_1.e();\n                },\n                t: function () { }\n            });\n        this.d = 3;\n    };\n    Zip.prototype.e = function () {\n        var bt = 0, l = 0, tl = 0;\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            tl += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0);\n        }\n        var out = new u8(tl + 22);\n        for (var _b = 0, _c = this.u; _b < _c.length; _b++) {\n            var f = _c[_b];\n            wzh(out, bt, f, f.f, f.u, f.c, l, f.o);\n            bt += 46 + f.f.length + exfl(f.extra) + (f.o ? f.o.length : 0), l += f.b;\n        }\n        wzf(out, bt, this.u.length, tl, l);\n        this.ondata(null, out, true);\n        this.d = 2;\n    };\n    /**\n     * A method to terminate any internal workers used by the stream. Subsequent\n     * calls to add() will fail.\n     */\n    Zip.prototype.terminate = function () {\n        for (var _i = 0, _a = this.u; _i < _a.length; _i++) {\n            var f = _a[_i];\n            f.t();\n        }\n        this.d = 2;\n    };\n    return Zip;\n}());\nexport { Zip };\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                var l = f.c.length;\n                wzh(out, tot, f, f.f, f.u, l);\n                var badd = 30 + f.f.length + exfl(f.extra);\n                var loc = tot + badd;\n                out.set(f.c, loc);\n                wzh(out, o, f, f.f, f.u, l, tot, f.m), o += 16 + badd + (f.m ? f.m.length : 0), tot = loc + l;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), size = file.length;\n        c.p(file);\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        var compression = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = mrg(p, {\n                    size: size,\n                    crc: c.d(),\n                    c: d,\n                    f: f,\n                    m: m,\n                    u: s != fn.length || (m && (com.length != ms)),\n                    compression: compression\n                });\n                o += 30 + s + exl + l;\n                tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (s > 65535)\n            cbl('filename too long', null);\n        if (!compression)\n            cbl(null, file);\n        else if (size < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (!opts)\n        opts = {};\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var compression = p.level == 0 ? 0 : 8;\n        var f = strToU8(fn), s = f.length;\n        var com = p.comment, m = com && strToU8(com), ms = m && m.length;\n        var exl = exfl(p.extra);\n        if (s > 65535)\n            throw 'filename too long';\n        var d = compression ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push(mrg(p, {\n            size: file.length,\n            crc: c.d(),\n            c: d,\n            f: f,\n            m: m,\n            u: s != fn.length || (m && (com.length != ms)),\n            o: o,\n            compression: compression\n        }));\n        o += 30 + s + exl + l;\n        tot += 76 + 2 * (s + exl) + (ms || 0) + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f, f.f, f.u, f.c.length);\n        var badd = 30 + f.f.length + exfl(f.extra);\n        out.set(f.c, f.o + badd);\n        wzh(out, o, f, f.f, f.u, f.c.length, f.o, f.m), o += 16 + badd + (f.m ? f.m.length : 0);\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Streaming pass-through decompression for ZIP archives\n */\nvar UnzipPassThrough = /*#__PURE__*/ (function () {\n    function UnzipPassThrough() {\n    }\n    UnzipPassThrough.prototype.push = function (data, final) {\n        this.ondata(null, data, final);\n    };\n    UnzipPassThrough.compression = 0;\n    return UnzipPassThrough;\n}());\nexport { UnzipPassThrough };\n/**\n * Streaming DEFLATE decompression for ZIP archives. Prefer AsyncZipInflate for\n * better performance.\n */\nvar UnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function UnzipInflate() {\n        var _this_1 = this;\n        this.i = new Inflate(function (dat, final) {\n            _this_1.ondata(null, dat, final);\n        });\n    }\n    UnzipInflate.prototype.push = function (data, final) {\n        try {\n            this.i.push(data, final);\n        }\n        catch (e) {\n            this.ondata(e, data, final);\n        }\n    };\n    UnzipInflate.compression = 8;\n    return UnzipInflate;\n}());\nexport { UnzipInflate };\n/**\n * Asynchronous streaming DEFLATE decompression for ZIP archives\n */\nvar AsyncUnzipInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates a DEFLATE decompression that can be used in ZIP archives\n     */\n    function AsyncUnzipInflate(_, sz) {\n        var _this_1 = this;\n        if (sz < 320000) {\n            this.i = new Inflate(function (dat, final) {\n                _this_1.ondata(null, dat, final);\n            });\n        }\n        else {\n            this.i = new AsyncInflate(function (err, dat, final) {\n                _this_1.ondata(err, dat, final);\n            });\n            this.terminate = this.i.terminate;\n        }\n    }\n    AsyncUnzipInflate.prototype.push = function (data, final) {\n        if (this.i.terminate)\n            data = slc(data, 0);\n        this.i.push(data, final);\n    };\n    AsyncUnzipInflate.compression = 8;\n    return AsyncUnzipInflate;\n}());\nexport { AsyncUnzipInflate };\n/**\n * A ZIP archive decompression stream that emits files as they are discovered\n */\nvar Unzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a ZIP decompression stream\n     * @param cb The callback to call whenever a file in the ZIP archive is found\n     */\n    function Unzip(cb) {\n        this.onfile = cb;\n        this.k = [];\n        this.o = {\n            0: UnzipPassThrough\n        };\n        this.p = et;\n    }\n    /**\n     * Pushes a chunk to be unzipped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzip.prototype.push = function (chunk, final) {\n        var _this_1 = this;\n        if (!this.onfile)\n            throw 'no callback';\n        if (!this.p)\n            throw 'stream finished';\n        if (this.c > 0) {\n            var len = Math.min(this.c, chunk.length);\n            var toAdd = chunk.subarray(0, len);\n            this.c -= len;\n            if (this.d)\n                this.d.push(toAdd, !this.c);\n            else\n                this.k[0].push(toAdd);\n            chunk = chunk.subarray(len);\n            if (chunk.length)\n                return this.push(chunk, final);\n        }\n        else {\n            var f = 0, i = 0, is = void 0, buf = void 0;\n            if (!this.p.length)\n                buf = chunk;\n            else if (!chunk.length)\n                buf = this.p;\n            else {\n                buf = new u8(this.p.length + chunk.length);\n                buf.set(this.p), buf.set(chunk, this.p.length);\n            }\n            var l = buf.length, oc = this.c, add = oc && this.d;\n            var _loop_2 = function () {\n                var _a;\n                var sig = b4(buf, i);\n                if (sig == 0x4034B50) {\n                    f = 1, is = i;\n                    this_1.d = null;\n                    this_1.c = 0;\n                    var bf = b2(buf, i + 6), cmp_1 = b2(buf, i + 8), u = bf & 2048, dd = bf & 8, fnl = b2(buf, i + 26), es = b2(buf, i + 28);\n                    if (l > i + 30 + fnl + es) {\n                        var chks_2 = [];\n                        this_1.k.unshift(chks_2);\n                        f = 2;\n                        var sc_1 = b4(buf, i + 18), su_1 = b4(buf, i + 22);\n                        var fn_1 = strFromU8(buf.subarray(i + 30, i += 30 + fnl), !u);\n                        if (sc_1 == 4294967295) {\n                            _a = dd ? [-2] : z64e(buf, i), sc_1 = _a[0], su_1 = _a[1];\n                        }\n                        else if (dd)\n                            sc_1 = -1;\n                        i += es;\n                        this_1.c = sc_1;\n                        var d_1;\n                        var file_1 = {\n                            name: fn_1,\n                            compression: cmp_1,\n                            start: function () {\n                                if (!file_1.ondata)\n                                    throw 'no callback';\n                                if (!sc_1)\n                                    file_1.ondata(null, et, true);\n                                else {\n                                    var ctr = _this_1.o[cmp_1];\n                                    if (!ctr)\n                                        throw 'unknown compression type ' + cmp_1;\n                                    d_1 = sc_1 < 0 ? new ctr(fn_1) : new ctr(fn_1, sc_1, su_1);\n                                    d_1.ondata = function (err, dat, final) { file_1.ondata(err, dat, final); };\n                                    for (var _i = 0, chks_3 = chks_2; _i < chks_3.length; _i++) {\n                                        var dat = chks_3[_i];\n                                        d_1.push(dat, false);\n                                    }\n                                    if (_this_1.k[0] == chks_2 && _this_1.c)\n                                        _this_1.d = d_1;\n                                    else\n                                        d_1.push(et, true);\n                                }\n                            },\n                            terminate: function () {\n                                if (d_1 && d_1.terminate)\n                                    d_1.terminate();\n                            }\n                        };\n                        if (sc_1 >= 0)\n                            file_1.size = sc_1, file_1.originalSize = su_1;\n                        this_1.onfile(file_1);\n                    }\n                    return \"break\";\n                }\n                else if (oc) {\n                    if (sig == 0x8074B50) {\n                        is = i += 12 + (oc == -2 && 8), f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                    else if (sig == 0x2014B50) {\n                        is = i -= 4, f = 3, this_1.c = 0;\n                        return \"break\";\n                    }\n                }\n            };\n            var this_1 = this;\n            for (; i < l - 4; ++i) {\n                var state_1 = _loop_2();\n                if (state_1 === \"break\")\n                    break;\n            }\n            this.p = et;\n            if (oc < 0) {\n                var dat = f ? buf.subarray(0, is - 12 - (oc == -2 && 8) - (b4(buf, is - 16) == 0x8074B50 && 4)) : buf.subarray(0, i);\n                if (add)\n                    add.push(dat, !!f);\n                else\n                    this.k[+(f == 2)].push(dat);\n            }\n            if (f & 2)\n                return this.push(buf.subarray(i), final);\n            this.p = buf.subarray(i);\n        }\n        if (final) {\n            if (this.c)\n                throw 'invalid zip file';\n            this.p = null;\n        }\n    };\n    /**\n     * Registers a decoder with the stream, allowing for files compressed with\n     * the compression type provided to be expanded correctly\n     * @param decoder The decoder constructor\n     */\n    Unzip.prototype.register = function (decoder) {\n        this.o[decoder.compression] = decoder;\n    };\n    return Unzip;\n}());\nexport { Unzip };\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50) {\n            cb('invalid zip file', null);\n            return;\n        }\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_3 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_3(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import {\n\tVector3,\n\tVector4\n} from 'three';\n\n/**\n * NURBS utils\n *\n * See NURBSCurve and NURBSSurface.\n **/\n\n\n/**************************************************************\n *\tNURBS Utils\n **************************************************************/\n\n/*\nFinds knot vector span.\n\np : degree\nu : parametric value\nU : knot vector\n\nreturns the span\n*/\nfunction findSpan( p, u, U ) {\n\n\tconst n = U.length - p - 1;\n\n\tif ( u >= U[ n ] ) {\n\n\t\treturn n - 1;\n\n\t}\n\n\tif ( u <= U[ p ] ) {\n\n\t\treturn p;\n\n\t}\n\n\tlet low = p;\n\tlet high = n;\n\tlet mid = Math.floor( ( low + high ) / 2 );\n\n\twhile ( u < U[ mid ] || u >= U[ mid + 1 ] ) {\n\n\t\tif ( u < U[ mid ] ) {\n\n\t\t\thigh = mid;\n\n\t\t} else {\n\n\t\t\tlow = mid;\n\n\t\t}\n\n\t\tmid = Math.floor( ( low + high ) / 2 );\n\n\t}\n\n\treturn mid;\n\n}\n\n\n/*\nCalculate basis functions. See The NURBS Book, page 70, algorithm A2.2\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nU    : knot vector\n\nreturns array[p+1] with basis functions values.\n*/\nfunction calcBasisFunctions( span, u, p, U ) {\n\n\tconst N = [];\n\tconst left = [];\n\tconst right = [];\n\tN[ 0 ] = 1.0;\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tconst temp = N[ r ] / ( rv + lv );\n\t\t\tN[ r ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tN[ j ] = saved;\n\n\t}\n\n\treturn N;\n\n}\n\n\n/*\nCalculate B-Spline curve points. See The NURBS Book, page 82, algorithm A3.1.\n\np : degree of B-Spline\nU : knot vector\nP : control points (x, y, z, w)\nu : parametric point\n\nreturns point for given u\n*/\nfunction calcBSplinePoint( p, U, P, u ) {\n\n\tconst span = findSpan( p, u, U );\n\tconst N = calcBasisFunctions( span, u, p, U );\n\tconst C = new Vector4( 0, 0, 0, 0 );\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tconst point = P[ span - p + j ];\n\t\tconst Nj = N[ j ];\n\t\tconst wNj = point.w * Nj;\n\t\tC.x += point.x * wNj;\n\t\tC.y += point.y * wNj;\n\t\tC.z += point.z * wNj;\n\t\tC.w += point.w * Nj;\n\n\t}\n\n\treturn C;\n\n}\n\n\n/*\nCalculate basis functions derivatives. See The NURBS Book, page 72, algorithm A2.3.\n\nspan : span in which u lies\nu    : parametric point\np    : degree\nn    : number of derivatives to calculate\nU    : knot vector\n\nreturns array[n+1][p+1] with basis functions derivatives\n*/\nfunction calcBasisFunctionDerivatives( span, u, p, n, U ) {\n\n\tconst zeroArr = [];\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tzeroArr[ i ] = 0.0;\n\n\tconst ders = [];\n\n\tfor ( let i = 0; i <= n; ++ i )\n\t\tders[ i ] = zeroArr.slice( 0 );\n\n\tconst ndu = [];\n\n\tfor ( let i = 0; i <= p; ++ i )\n\t\tndu[ i ] = zeroArr.slice( 0 );\n\n\tndu[ 0 ][ 0 ] = 1.0;\n\n\tconst left = zeroArr.slice( 0 );\n\tconst right = zeroArr.slice( 0 );\n\n\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\tleft[ j ] = u - U[ span + 1 - j ];\n\t\tright[ j ] = U[ span + j ] - u;\n\n\t\tlet saved = 0.0;\n\n\t\tfor ( let r = 0; r < j; ++ r ) {\n\n\t\t\tconst rv = right[ r + 1 ];\n\t\t\tconst lv = left[ j - r ];\n\t\t\tndu[ j ][ r ] = rv + lv;\n\n\t\t\tconst temp = ndu[ r ][ j - 1 ] / ndu[ j ][ r ];\n\t\t\tndu[ r ][ j ] = saved + rv * temp;\n\t\t\tsaved = lv * temp;\n\n\t\t}\n\n\t\tndu[ j ][ j ] = saved;\n\n\t}\n\n\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\tders[ 0 ][ j ] = ndu[ j ][ p ];\n\n\t}\n\n\tfor ( let r = 0; r <= p; ++ r ) {\n\n\t\tlet s1 = 0;\n\t\tlet s2 = 1;\n\n\t\tconst a = [];\n\t\tfor ( let i = 0; i <= p; ++ i ) {\n\n\t\t\ta[ i ] = zeroArr.slice( 0 );\n\n\t\t}\n\n\t\ta[ 0 ][ 0 ] = 1.0;\n\n\t\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\t\tlet d = 0.0;\n\t\t\tconst rk = r - k;\n\t\t\tconst pk = p - k;\n\n\t\t\tif ( r >= k ) {\n\n\t\t\t\ta[ s2 ][ 0 ] = a[ s1 ][ 0 ] / ndu[ pk + 1 ][ rk ];\n\t\t\t\td = a[ s2 ][ 0 ] * ndu[ rk ][ pk ];\n\n\t\t\t}\n\n\t\t\tconst j1 = ( rk >= - 1 ) ? 1 : - rk;\n\t\t\tconst j2 = ( r - 1 <= pk ) ? k - 1 : p - r;\n\n\t\t\tfor ( let j = j1; j <= j2; ++ j ) {\n\n\t\t\t\ta[ s2 ][ j ] = ( a[ s1 ][ j ] - a[ s1 ][ j - 1 ] ) / ndu[ pk + 1 ][ rk + j ];\n\t\t\t\td += a[ s2 ][ j ] * ndu[ rk + j ][ pk ];\n\n\t\t\t}\n\n\t\t\tif ( r <= pk ) {\n\n\t\t\t\ta[ s2 ][ k ] = - a[ s1 ][ k - 1 ] / ndu[ pk + 1 ][ r ];\n\t\t\t\td += a[ s2 ][ k ] * ndu[ r ][ pk ];\n\n\t\t\t}\n\n\t\t\tders[ k ][ r ] = d;\n\n\t\t\tconst j = s1;\n\t\t\ts1 = s2;\n\t\t\ts2 = j;\n\n\t\t}\n\n\t}\n\n\tlet r = p;\n\n\tfor ( let k = 1; k <= n; ++ k ) {\n\n\t\tfor ( let j = 0; j <= p; ++ j ) {\n\n\t\t\tders[ k ][ j ] *= r;\n\n\t\t}\n\n\t\tr *= p - k;\n\n\t}\n\n\treturn ders;\n\n}\n\n\n/*\n\tCalculate derivatives of a B-Spline. See The NURBS Book, page 93, algorithm A3.2.\n\n\tp  : degree\n\tU  : knot vector\n\tP  : control points\n\tu  : Parametric points\n\tnd : number of derivatives\n\n\treturns array[d+1] with derivatives\n\t*/\nfunction calcBSplineDerivatives( p, U, P, u, nd ) {\n\n\tconst du = nd < p ? nd : p;\n\tconst CK = [];\n\tconst span = findSpan( p, u, U );\n\tconst nders = calcBasisFunctionDerivatives( span, u, p, du, U );\n\tconst Pw = [];\n\n\tfor ( let i = 0; i < P.length; ++ i ) {\n\n\t\tconst point = P[ i ].clone();\n\t\tconst w = point.w;\n\n\t\tpoint.x *= w;\n\t\tpoint.y *= w;\n\t\tpoint.z *= w;\n\n\t\tPw[ i ] = point;\n\n\t}\n\n\tfor ( let k = 0; k <= du; ++ k ) {\n\n\t\tconst point = Pw[ span - p ].clone().multiplyScalar( nders[ k ][ 0 ] );\n\n\t\tfor ( let j = 1; j <= p; ++ j ) {\n\n\t\t\tpoint.add( Pw[ span - p + j ].clone().multiplyScalar( nders[ k ][ j ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = point;\n\n\t}\n\n\tfor ( let k = du + 1; k <= nd + 1; ++ k ) {\n\n\t\tCK[ k ] = new Vector4( 0, 0, 0 );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate \"K over I\"\n\nreturns k!/(i!(k-i)!)\n*/\nfunction calcKoverI( k, i ) {\n\n\tlet nom = 1;\n\n\tfor ( let j = 2; j <= k; ++ j ) {\n\n\t\tnom *= j;\n\n\t}\n\n\tlet denom = 1;\n\n\tfor ( let j = 2; j <= i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\tfor ( let j = 2; j <= k - i; ++ j ) {\n\n\t\tdenom *= j;\n\n\t}\n\n\treturn nom / denom;\n\n}\n\n\n/*\nCalculate derivatives (0-nd) of rational curve. See The NURBS Book, page 127, algorithm A4.2.\n\nPders : result of function calcBSplineDerivatives\n\nreturns array with derivatives for rational curve.\n*/\nfunction calcRationalCurveDerivatives( Pders ) {\n\n\tconst nd = Pders.length;\n\tconst Aders = [];\n\tconst wders = [];\n\n\tfor ( let i = 0; i < nd; ++ i ) {\n\n\t\tconst point = Pders[ i ];\n\t\tAders[ i ] = new Vector3( point.x, point.y, point.z );\n\t\twders[ i ] = point.w;\n\n\t}\n\n\tconst CK = [];\n\n\tfor ( let k = 0; k < nd; ++ k ) {\n\n\t\tconst v = Aders[ k ].clone();\n\n\t\tfor ( let i = 1; i <= k; ++ i ) {\n\n\t\t\tv.sub( CK[ k - i ].clone().multiplyScalar( calcKoverI( k, i ) * wders[ i ] ) );\n\n\t\t}\n\n\t\tCK[ k ] = v.divideScalar( wders[ 0 ] );\n\n\t}\n\n\treturn CK;\n\n}\n\n\n/*\nCalculate NURBS curve derivatives. See The NURBS Book, page 127, algorithm A4.2.\n\np  : degree\nU  : knot vector\nP  : control points in homogeneous space\nu  : parametric points\nnd : number of derivatives\n\nreturns array with derivatives.\n*/\nfunction calcNURBSDerivatives( p, U, P, u, nd ) {\n\n\tconst Pders = calcBSplineDerivatives( p, U, P, u, nd );\n\treturn calcRationalCurveDerivatives( Pders );\n\n}\n\n\n/*\nCalculate rational B-Spline surface point. See The NURBS Book, page 134, algorithm A4.3.\n\np1, p2 : degrees of B-Spline surface\nU1, U2 : knot vectors\nP      : control points (x, y, z, w)\nu, v   : parametric values\n\nreturns point for given (u, v)\n*/\nfunction calcSurfacePoint( p, q, U, V, P, u, v, target ) {\n\n\tconst uspan = findSpan( p, u, U );\n\tconst vspan = findSpan( q, v, V );\n\tconst Nu = calcBasisFunctions( uspan, u, p, U );\n\tconst Nv = calcBasisFunctions( vspan, v, q, V );\n\tconst temp = [];\n\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\ttemp[ l ] = new Vector4( 0, 0, 0, 0 );\n\t\tfor ( let k = 0; k <= p; ++ k ) {\n\n\t\t\tconst point = P[ uspan - p + k ][ vspan - q + l ].clone();\n\t\t\tconst w = point.w;\n\t\t\tpoint.x *= w;\n\t\t\tpoint.y *= w;\n\t\t\tpoint.z *= w;\n\t\t\ttemp[ l ].add( point.multiplyScalar( Nu[ k ] ) );\n\n\t\t}\n\n\t}\n\n\tconst Sw = new Vector4( 0, 0, 0, 0 );\n\tfor ( let l = 0; l <= q; ++ l ) {\n\n\t\tSw.add( temp[ l ].multiplyScalar( Nv[ l ] ) );\n\n\t}\n\n\tSw.divideScalar( Sw.w );\n\ttarget.set( Sw.x, Sw.y, Sw.z );\n\n}\n\n\n\nexport {\n\tfindSpan,\n\tcalcBasisFunctions,\n\tcalcBSplinePoint,\n\tcalcBasisFunctionDerivatives,\n\tcalcBSplineDerivatives,\n\tcalcKoverI,\n\tcalcRationalCurveDerivatives,\n\tcalcNURBSDerivatives,\n\tcalcSurfacePoint,\n};\n","import {\n\tAmbientLight,\n\tAnimationClip,\n\tBone,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tEquirectangularReflectionMapping,\n\tEuler,\n\tFileLoader,\n\tFloat32BufferAttribute,\n\tGroup,\n\tLine,\n\tLineBasicMaterial,\n\tLoader,\n\tLoaderUtils,\n\tMathUtils,\n\tMatrix3,\n\tMatrix4,\n\tMesh,\n\tMeshLambertMaterial,\n\tMeshPhongMaterial,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSpotLight,\n\tTexture,\n\tTextureLoader,\n\tUint16BufferAttribute,\n\tVector3,\n\tVector4,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\nimport * as fflate from '../libs/fflate.module.js';\nimport { NURBSCurve } from '../curves/NURBSCurve.js';\n\n/**\n * Loader loads FBX file and generates Group representing FBX scene.\n * Requires FBX file to be >= 7.0 and in ASCII or >= 6400 in Binary format\n * Versions lower than this may load but will probably have errors\n *\n * Needs Support:\n *  Morph normals / blend shape normals\n *\n * FBX format references:\n * \thttps://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_index_html (C++ SDK reference)\n *\n * Binary format specification:\n *\thttps://code.blender.org/2013/08/fbx-binary-file-format-specification/\n */\n\n\nlet fbxTree;\nlet connections;\nlet sceneGraph;\n\nclass FBXLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( scope.path === '' ) ? LoaderUtils.extractUrlBase( url ) : scope.path;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( scope.requestHeader );\n\t\tloader.setWithCredentials( scope.withCredentials );\n\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( buffer, path ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n\tparse( FBXBuffer, path ) {\n\n\t\tif ( isFbxFormatBinary( FBXBuffer ) ) {\n\n\t\t\tfbxTree = new BinaryParser().parse( FBXBuffer );\n\n\t\t} else {\n\n\t\t\tconst FBXText = convertArrayBufferToString( FBXBuffer );\n\n\t\t\tif ( ! isFbxFormatASCII( FBXText ) ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown format.' );\n\n\t\t\t}\n\n\t\t\tif ( getFbxVersion( FBXText ) < 7000 ) {\n\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + getFbxVersion( FBXText ) );\n\n\t\t\t}\n\n\t\t\tfbxTree = new TextParser().parse( FBXText );\n\n\t\t}\n\n\t\t// console.log( fbxTree );\n\n\t\tconst textureLoader = new TextureLoader( this.manager ).setPath( this.resourcePath || path ).setCrossOrigin( this.crossOrigin );\n\n\t\treturn new FBXTreeParser( textureLoader, this.manager ).parse( fbxTree );\n\n\t}\n\n}\n\n// Parse the FBXTree object returned by the BinaryParser or TextParser and return a Group\nclass FBXTreeParser {\n\n\tconstructor( textureLoader, manager ) {\n\n\t\tthis.textureLoader = textureLoader;\n\t\tthis.manager = manager;\n\n\t}\n\n\tparse() {\n\n\t\tconnections = this.parseConnections();\n\n\t\tconst images = this.parseImages();\n\t\tconst textures = this.parseTextures( images );\n\t\tconst materials = this.parseMaterials( textures );\n\t\tconst deformers = this.parseDeformers();\n\t\tconst geometryMap = new GeometryParser().parse( deformers );\n\n\t\tthis.parseScene( deformers, geometryMap, materials );\n\n\t\treturn sceneGraph;\n\n\t}\n\n\t// Parses FBXTree.Connections which holds parent-child connections between objects (e.g. material -> texture, model->geometry )\n\t// and details the connection type\n\tparseConnections() {\n\n\t\tconst connectionMap = new Map();\n\n\t\tif ( 'Connections' in fbxTree ) {\n\n\t\t\tconst rawConnections = fbxTree.Connections.connections;\n\n\t\t\trawConnections.forEach( function ( rawConnection ) {\n\n\t\t\t\tconst fromID = rawConnection[ 0 ];\n\t\t\t\tconst toID = rawConnection[ 1 ];\n\t\t\t\tconst relationship = rawConnection[ 2 ];\n\n\t\t\t\tif ( ! connectionMap.has( fromID ) ) {\n\n\t\t\t\t\tconnectionMap.set( fromID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst parentRelationship = { ID: toID, relationship: relationship };\n\t\t\t\tconnectionMap.get( fromID ).parents.push( parentRelationship );\n\n\t\t\t\tif ( ! connectionMap.has( toID ) ) {\n\n\t\t\t\t\tconnectionMap.set( toID, {\n\t\t\t\t\t\tparents: [],\n\t\t\t\t\t\tchildren: []\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t\tconst childRelationship = { ID: fromID, relationship: relationship };\n\t\t\t\tconnectionMap.get( toID ).children.push( childRelationship );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn connectionMap;\n\n\t}\n\n\t// Parse FBXTree.Objects.Video for embedded image data\n\t// These images are connected to textures in FBXTree.Objects.Textures\n\t// via FBXTree.Connections.\n\tparseImages() {\n\n\t\tconst images = {};\n\t\tconst blobs = {};\n\n\t\tif ( 'Video' in fbxTree.Objects ) {\n\n\t\t\tconst videoNodes = fbxTree.Objects.Video;\n\n\t\t\tfor ( const nodeID in videoNodes ) {\n\n\t\t\t\tconst videoNode = videoNodes[ nodeID ];\n\n\t\t\t\tconst id = parseInt( nodeID );\n\n\t\t\t\timages[ id ] = videoNode.RelativeFilename || videoNode.Filename;\n\n\t\t\t\t// raw image data is in videoNode.Content\n\t\t\t\tif ( 'Content' in videoNode ) {\n\n\t\t\t\t\tconst arrayBufferContent = ( videoNode.Content instanceof ArrayBuffer ) && ( videoNode.Content.byteLength > 0 );\n\t\t\t\t\tconst base64Content = ( typeof videoNode.Content === 'string' ) && ( videoNode.Content !== '' );\n\n\t\t\t\t\tif ( arrayBufferContent || base64Content ) {\n\n\t\t\t\t\t\tconst image = this.parseImage( videoNodes[ nodeID ] );\n\n\t\t\t\t\t\tblobs[ videoNode.RelativeFilename || videoNode.Filename ] = image;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( const id in images ) {\n\n\t\t\tconst filename = images[ id ];\n\n\t\t\tif ( blobs[ filename ] !== undefined ) images[ id ] = blobs[ filename ];\n\t\t\telse images[ id ] = images[ id ].split( '\\\\' ).pop();\n\n\t\t}\n\n\t\treturn images;\n\n\t}\n\n\t// Parse embedded image data in FBXTree.Video.Content\n\tparseImage( videoNode ) {\n\n\t\tconst content = videoNode.Content;\n\t\tconst fileName = videoNode.RelativeFilename || videoNode.Filename;\n\t\tconst extension = fileName.slice( fileName.lastIndexOf( '.' ) + 1 ).toLowerCase();\n\n\t\tlet type;\n\n\t\tswitch ( extension ) {\n\n\t\t\tcase 'bmp':\n\n\t\t\t\ttype = 'image/bmp';\n\t\t\t\tbreak;\n\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\n\t\t\t\ttype = 'image/jpeg';\n\t\t\t\tbreak;\n\n\t\t\tcase 'png':\n\n\t\t\t\ttype = 'image/png';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tif':\n\n\t\t\t\ttype = 'image/tiff';\n\t\t\t\tbreak;\n\n\t\t\tcase 'tga':\n\n\t\t\t\tif ( this.manager.getHandler( '.tga' ) === null ) {\n\n\t\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, skipping ', fileName );\n\n\t\t\t\t}\n\n\t\t\t\ttype = 'image/tga';\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'FBXLoader: Image type \"' + extension + '\" is not supported.' );\n\t\t\t\treturn;\n\n\t\t}\n\n\t\tif ( typeof content === 'string' ) { // ASCII format\n\n\t\t\treturn 'data:' + type + ';base64,' + content;\n\n\t\t} else { // Binary Format\n\n\t\t\tconst array = new Uint8Array( content );\n\t\t\treturn window.URL.createObjectURL( new Blob( [ array ], { type: type } ) );\n\n\t\t}\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Texture\n\t// These contain details such as UV scaling, cropping, rotation etc and are connected\n\t// to images in FBXTree.Objects.Video\n\tparseTextures( images ) {\n\n\t\tconst textureMap = new Map();\n\n\t\tif ( 'Texture' in fbxTree.Objects ) {\n\n\t\t\tconst textureNodes = fbxTree.Objects.Texture;\n\t\t\tfor ( const nodeID in textureNodes ) {\n\n\t\t\t\tconst texture = this.parseTexture( textureNodes[ nodeID ], images );\n\t\t\t\ttextureMap.set( parseInt( nodeID ), texture );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textureMap;\n\n\t}\n\n\t// Parse individual node in FBXTree.Objects.Texture\n\tparseTexture( textureNode, images ) {\n\n\t\tconst texture = this.loadTexture( textureNode, images );\n\n\t\ttexture.ID = textureNode.id;\n\n\t\ttexture.name = textureNode.attrName;\n\n\t\tconst wrapModeU = textureNode.WrapModeU;\n\t\tconst wrapModeV = textureNode.WrapModeV;\n\n\t\tconst valueU = wrapModeU !== undefined ? wrapModeU.value : 0;\n\t\tconst valueV = wrapModeV !== undefined ? wrapModeV.value : 0;\n\n\t\t// http://download.autodesk.com/us/fbx/SDKdocs/FBX_SDK_Help/files/fbxsdkref/class_k_fbx_texture.html#889640e63e2e681259ea81061b85143a\n\t\t// 0: repeat(default), 1: clamp\n\n\t\ttexture.wrapS = valueU === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\t\ttexture.wrapT = valueV === 0 ? RepeatWrapping : ClampToEdgeWrapping;\n\n\t\tif ( 'Scaling' in textureNode ) {\n\n\t\t\tconst values = textureNode.Scaling.value;\n\n\t\t\ttexture.repeat.x = values[ 0 ];\n\t\t\ttexture.repeat.y = values[ 1 ];\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\t// load a texture specified as a blob or data URI, or via an external URL using TextureLoader\n\tloadTexture( textureNode, images ) {\n\n\t\tlet fileName;\n\n\t\tconst currentPath = this.textureLoader.path;\n\n\t\tconst children = connections.get( textureNode.id ).children;\n\n\t\tif ( children !== undefined && children.length > 0 && images[ children[ 0 ].ID ] !== undefined ) {\n\n\t\t\tfileName = images[ children[ 0 ].ID ];\n\n\t\t\tif ( fileName.indexOf( 'blob:' ) === 0 || fileName.indexOf( 'data:' ) === 0 ) {\n\n\t\t\t\tthis.textureLoader.setPath( undefined );\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet texture;\n\n\t\tconst extension = textureNode.FileName.slice( - 3 ).toLowerCase();\n\n\t\tif ( extension === 'tga' ) {\n\n\t\t\tconst loader = this.manager.getHandler( '.tga' );\n\n\t\t\tif ( loader === null ) {\n\n\t\t\t\tconsole.warn( 'FBXLoader: TGA loader not found, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\t\ttexture = new Texture();\n\n\t\t\t} else {\n\n\t\t\t\tloader.setPath( this.textureLoader.path );\n\t\t\t\ttexture = loader.load( fileName );\n\n\t\t\t}\n\n\t\t} else if ( extension === 'psd' ) {\n\n\t\t\tconsole.warn( 'FBXLoader: PSD textures are not supported, creating placeholder texture for', textureNode.RelativeFilename );\n\t\t\ttexture = new Texture();\n\n\t\t} else {\n\n\t\t\ttexture = this.textureLoader.load( fileName );\n\n\t\t}\n\n\t\tthis.textureLoader.setPath( currentPath );\n\n\t\treturn texture;\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Material\n\tparseMaterials( textureMap ) {\n\n\t\tconst materialMap = new Map();\n\n\t\tif ( 'Material' in fbxTree.Objects ) {\n\n\t\t\tconst materialNodes = fbxTree.Objects.Material;\n\n\t\t\tfor ( const nodeID in materialNodes ) {\n\n\t\t\t\tconst material = this.parseMaterial( materialNodes[ nodeID ], textureMap );\n\n\t\t\t\tif ( material !== null ) materialMap.set( parseInt( nodeID ), material );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materialMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Material\n\t// Materials are connected to texture maps in FBXTree.Objects.Textures\n\t// FBX format currently only supports Lambert and Phong shading models\n\tparseMaterial( materialNode, textureMap ) {\n\n\t\tconst ID = materialNode.id;\n\t\tconst name = materialNode.attrName;\n\t\tlet type = materialNode.ShadingModel;\n\n\t\t// Case where FBX wraps shading model in property object.\n\t\tif ( typeof type === 'object' ) {\n\n\t\t\ttype = type.value;\n\n\t\t}\n\n\t\t// Ignore unused materials which don't have any connections.\n\t\tif ( ! connections.has( ID ) ) return null;\n\n\t\tconst parameters = this.parseParameters( materialNode, textureMap, ID );\n\n\t\tlet material;\n\n\t\tswitch ( type.toLowerCase() ) {\n\n\t\t\tcase 'phong':\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\t\t\tcase 'lambert':\n\t\t\t\tmaterial = new MeshLambertMaterial();\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: unknown material type \"%s\". Defaulting to MeshPhongMaterial.', type );\n\t\t\t\tmaterial = new MeshPhongMaterial();\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tmaterial.setValues( parameters );\n\t\tmaterial.name = name;\n\n\t\treturn material;\n\n\t}\n\n\t// Parse FBX material and return parameters suitable for a three.js material\n\t// Also parse the texture map and return any textures associated with the material\n\tparseParameters( materialNode, textureMap, ID ) {\n\n\t\tconst parameters = {};\n\n\t\tif ( materialNode.BumpFactor ) {\n\n\t\t\tparameters.bumpScale = materialNode.BumpFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Diffuse ) {\n\n\t\t\tparameters.color = new Color().fromArray( materialNode.Diffuse.value );\n\n\t\t} else if ( materialNode.DiffuseColor && ( materialNode.DiffuseColor.type === 'Color' || materialNode.DiffuseColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports diffuse here instead of in materialNode.Diffuse\n\t\t\tparameters.color = new Color().fromArray( materialNode.DiffuseColor.value );\n\n\t\t}\n\n\t\tif ( materialNode.DisplacementFactor ) {\n\n\t\t\tparameters.displacementScale = materialNode.DisplacementFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Emissive ) {\n\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.Emissive.value );\n\n\t\t} else if ( materialNode.EmissiveColor && ( materialNode.EmissiveColor.type === 'Color' || materialNode.EmissiveColor.type === 'ColorRGB' ) ) {\n\n\t\t\t// The blender exporter exports emissive color here instead of in materialNode.Emissive\n\t\t\tparameters.emissive = new Color().fromArray( materialNode.EmissiveColor.value );\n\n\t\t}\n\n\t\tif ( materialNode.EmissiveFactor ) {\n\n\t\t\tparameters.emissiveIntensity = parseFloat( materialNode.EmissiveFactor.value );\n\n\t\t}\n\n\t\tif ( materialNode.Opacity ) {\n\n\t\t\tparameters.opacity = parseFloat( materialNode.Opacity.value );\n\n\t\t}\n\n\t\tif ( parameters.opacity < 1.0 ) {\n\n\t\t\tparameters.transparent = true;\n\n\t\t}\n\n\t\tif ( materialNode.ReflectionFactor ) {\n\n\t\t\tparameters.reflectivity = materialNode.ReflectionFactor.value;\n\n\t\t}\n\n\t\tif ( materialNode.Shininess ) {\n\n\t\t\tparameters.shininess = materialNode.Shininess.value;\n\n\t\t}\n\n\t\tif ( materialNode.Specular ) {\n\n\t\t\tparameters.specular = new Color().fromArray( materialNode.Specular.value );\n\n\t\t} else if ( materialNode.SpecularColor && materialNode.SpecularColor.type === 'Color' ) {\n\n\t\t\t// The blender exporter exports specular color here instead of in materialNode.Specular\n\t\t\tparameters.specular = new Color().fromArray( materialNode.SpecularColor.value );\n\n\t\t}\n\n\t\tconst scope = this;\n\t\tconnections.get( ID ).children.forEach( function ( child ) {\n\n\t\t\tconst type = child.relationship;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'Bump':\n\t\t\t\t\tparameters.bumpMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'Maya|TEX_ao_map':\n\t\t\t\t\tparameters.aoMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DiffuseColor':\n\t\t\t\tcase 'Maya|TEX_color_map':\n\t\t\t\t\tparameters.map = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.map !== undefined ) {\n\n\t\t\t\t\t\tparameters.map.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'DisplacementColor':\n\t\t\t\t\tparameters.displacementMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EmissiveColor':\n\t\t\t\t\tparameters.emissiveMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.emissiveMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'NormalMap':\n\t\t\t\tcase 'Maya|TEX_normal_map':\n\t\t\t\t\tparameters.normalMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ReflectionColor':\n\t\t\t\t\tparameters.envMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.envMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.envMap.mapping = EquirectangularReflectionMapping;\n\t\t\t\t\t\tparameters.envMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpecularColor':\n\t\t\t\t\tparameters.specularMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tif ( parameters.specularMap !== undefined ) {\n\n\t\t\t\t\t\tparameters.specularMap.encoding = sRGBEncoding;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'TransparentColor':\n\t\t\t\tcase 'TransparencyFactor':\n\t\t\t\t\tparameters.alphaMap = scope.getTexture( textureMap, child.ID );\n\t\t\t\t\tparameters.transparent = true;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'AmbientColor':\n\t\t\t\tcase 'ShininessExponent': // AKA glossiness map\n\t\t\t\tcase 'SpecularFactor': // AKA specularLevel\n\t\t\t\tcase 'VectorDisplacementColor': // NOTE: Seems to be a copy of DisplacementColor\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: %s map is not supported in three.js, skipping texture.', type );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn parameters;\n\n\t}\n\n\t// get a texture from the textureMap for use by a material.\n\tgetTexture( textureMap, id ) {\n\n\t\t// if the texture is a layered texture, just use the first layer and issue a warning\n\t\tif ( 'LayeredTexture' in fbxTree.Objects && id in fbxTree.Objects.LayeredTexture ) {\n\n\t\t\tconsole.warn( 'THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer.' );\n\t\t\tid = connections.get( id ).children[ 0 ].ID;\n\n\t\t}\n\n\t\treturn textureMap.get( id );\n\n\t}\n\n\t// Parse nodes in FBXTree.Objects.Deformer\n\t// Deformer node can contain skinning or Vertex Cache animation data, however only skinning is supported here\n\t// Generates map of Skeleton-like objects for use later when generating and binding skeletons.\n\tparseDeformers() {\n\n\t\tconst skeletons = {};\n\t\tconst morphTargets = {};\n\n\t\tif ( 'Deformer' in fbxTree.Objects ) {\n\n\t\t\tconst DeformerNodes = fbxTree.Objects.Deformer;\n\n\t\t\tfor ( const nodeID in DeformerNodes ) {\n\n\t\t\t\tconst deformerNode = DeformerNodes[ nodeID ];\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\n\t\t\t\tif ( deformerNode.attrType === 'Skin' ) {\n\n\t\t\t\t\tconst skeleton = this.parseSkeleton( relationships, DeformerNodes );\n\t\t\t\t\tskeleton.ID = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: skeleton attached to more than one geometry is not supported.' );\n\t\t\t\t\tskeleton.geometryID = relationships.parents[ 0 ].ID;\n\n\t\t\t\t\tskeletons[ nodeID ] = skeleton;\n\n\t\t\t\t} else if ( deformerNode.attrType === 'BlendShape' ) {\n\n\t\t\t\t\tconst morphTarget = {\n\t\t\t\t\t\tid: nodeID,\n\t\t\t\t\t};\n\n\t\t\t\t\tmorphTarget.rawTargets = this.parseMorphTargets( relationships, DeformerNodes );\n\t\t\t\t\tmorphTarget.id = nodeID;\n\n\t\t\t\t\tif ( relationships.parents.length > 1 ) console.warn( 'THREE.FBXLoader: morph target attached to more than one geometry is not supported.' );\n\n\t\t\t\t\tmorphTargets[ nodeID ] = morphTarget;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\n\t\t\tskeletons: skeletons,\n\t\t\tmorphTargets: morphTargets,\n\n\t\t};\n\n\t}\n\n\t// Parse single nodes in FBXTree.Objects.Deformer\n\t// The top level skeleton node has type 'Skin' and sub nodes have type 'Cluster'\n\t// Each skin node represents a skeleton and each cluster node represents a bone\n\tparseSkeleton( relationships, deformerNodes ) {\n\n\t\tconst rawBones = [];\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst boneNode = deformerNodes[ child.ID ];\n\n\t\t\tif ( boneNode.attrType !== 'Cluster' ) return;\n\n\t\t\tconst rawBone = {\n\n\t\t\t\tID: child.ID,\n\t\t\t\tindices: [],\n\t\t\t\tweights: [],\n\t\t\t\ttransformLink: new Matrix4().fromArray( boneNode.TransformLink.a ),\n\t\t\t\t// transform: new Matrix4().fromArray( boneNode.Transform.a ),\n\t\t\t\t// linkMode: boneNode.Mode,\n\n\t\t\t};\n\n\t\t\tif ( 'Indexes' in boneNode ) {\n\n\t\t\t\trawBone.indices = boneNode.Indexes.a;\n\t\t\t\trawBone.weights = boneNode.Weights.a;\n\n\t\t\t}\n\n\t\t\trawBones.push( rawBone );\n\n\t\t} );\n\n\t\treturn {\n\n\t\t\trawBones: rawBones,\n\t\t\tbones: []\n\n\t\t};\n\n\t}\n\n\t// The top level morph deformer node has type \"BlendShape\" and sub nodes have type \"BlendShapeChannel\"\n\tparseMorphTargets( relationships, deformerNodes ) {\n\n\t\tconst rawMorphTargets = [];\n\n\t\tfor ( let i = 0; i < relationships.children.length; i ++ ) {\n\n\t\t\tconst child = relationships.children[ i ];\n\n\t\t\tconst morphTargetNode = deformerNodes[ child.ID ];\n\n\t\t\tconst rawMorphTarget = {\n\n\t\t\t\tname: morphTargetNode.attrName,\n\t\t\t\tinitialWeight: morphTargetNode.DeformPercent,\n\t\t\t\tid: morphTargetNode.id,\n\t\t\t\tfullWeights: morphTargetNode.FullWeights.a\n\n\t\t\t};\n\n\t\t\tif ( morphTargetNode.attrType !== 'BlendShapeChannel' ) return;\n\n\t\t\trawMorphTarget.geoID = connections.get( parseInt( child.ID ) ).children.filter( function ( child ) {\n\n\t\t\t\treturn child.relationship === undefined;\n\n\t\t\t} )[ 0 ].ID;\n\n\t\t\trawMorphTargets.push( rawMorphTarget );\n\n\t\t}\n\n\t\treturn rawMorphTargets;\n\n\t}\n\n\t// create the main Group() to be returned by the loader\n\tparseScene( deformers, geometryMap, materialMap ) {\n\n\t\tsceneGraph = new Group();\n\n\t\tconst modelMap = this.parseModels( deformers.skeletons, geometryMap, materialMap );\n\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tconst scope = this;\n\t\tmodelMap.forEach( function ( model ) {\n\n\t\t\tconst modelNode = modelNodes[ model.ID ];\n\t\t\tscope.setLookAtProperties( model, modelNode );\n\n\t\t\tconst parentConnections = connections.get( model.ID ).parents;\n\n\t\t\tparentConnections.forEach( function ( connection ) {\n\n\t\t\t\tconst parent = modelMap.get( connection.ID );\n\t\t\t\tif ( parent !== undefined ) parent.add( model );\n\n\t\t\t} );\n\n\t\t\tif ( model.parent === null ) {\n\n\t\t\t\tsceneGraph.add( model );\n\n\t\t\t}\n\n\n\t\t} );\n\n\t\tthis.bindSkeleton( deformers.skeletons, geometryMap, modelMap );\n\n\t\tthis.createAmbientLight();\n\n\t\tsceneGraph.traverse( function ( node ) {\n\n\t\t\tif ( node.userData.transformData ) {\n\n\t\t\t\tif ( node.parent ) {\n\n\t\t\t\t\tnode.userData.transformData.parentMatrix = node.parent.matrix;\n\t\t\t\t\tnode.userData.transformData.parentMatrixWorld = node.parent.matrixWorld;\n\n\t\t\t\t}\n\n\t\t\t\tconst transform = generateTransform( node.userData.transformData );\n\n\t\t\t\tnode.applyMatrix4( transform );\n\t\t\t\tnode.updateWorldMatrix();\n\n\t\t\t}\n\n\t\t} );\n\n\t\tconst animations = new AnimationParser().parse();\n\n\t\t// if all the models where already combined in a single group, just return that\n\t\tif ( sceneGraph.children.length === 1 && sceneGraph.children[ 0 ].isGroup ) {\n\n\t\t\tsceneGraph.children[ 0 ].animations = animations;\n\t\t\tsceneGraph = sceneGraph.children[ 0 ];\n\n\t\t}\n\n\t\tsceneGraph.animations = animations;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.Model\n\tparseModels( skeletons, geometryMap, materialMap ) {\n\n\t\tconst modelMap = new Map();\n\t\tconst modelNodes = fbxTree.Objects.Model;\n\n\t\tfor ( const nodeID in modelNodes ) {\n\n\t\t\tconst id = parseInt( nodeID );\n\t\t\tconst node = modelNodes[ nodeID ];\n\t\t\tconst relationships = connections.get( id );\n\n\t\t\tlet model = this.buildSkeleton( relationships, skeletons, id, node.attrName );\n\n\t\t\tif ( ! model ) {\n\n\t\t\t\tswitch ( node.attrType ) {\n\n\t\t\t\t\tcase 'Camera':\n\t\t\t\t\t\tmodel = this.createCamera( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Light':\n\t\t\t\t\t\tmodel = this.createLight( relationships );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Mesh':\n\t\t\t\t\t\tmodel = this.createMesh( relationships, geometryMap, materialMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'NurbsCurve':\n\t\t\t\t\t\tmodel = this.createCurve( relationships, geometryMap );\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'LimbNode':\n\t\t\t\t\tcase 'Root':\n\t\t\t\t\t\tmodel = new Bone();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'Null':\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmodel = new Group();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tmodel.name = node.attrName ? PropertyBinding.sanitizeNodeName( node.attrName ) : '';\n\n\t\t\t\tmodel.ID = id;\n\n\t\t\t}\n\n\t\t\tthis.getTransformData( model, node );\n\t\t\tmodelMap.set( id, model );\n\n\t\t}\n\n\t\treturn modelMap;\n\n\t}\n\n\tbuildSkeleton( relationships, skeletons, id, name ) {\n\n\t\tlet bone = null;\n\n\t\trelationships.parents.forEach( function ( parent ) {\n\n\t\t\tfor ( const ID in skeletons ) {\n\n\t\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t\tif ( rawBone.ID === parent.ID ) {\n\n\t\t\t\t\t\tconst subBone = bone;\n\t\t\t\t\t\tbone = new Bone();\n\n\t\t\t\t\t\tbone.matrixWorld.copy( rawBone.transformLink );\n\n\t\t\t\t\t\t// set name and id here - otherwise in cases where \"subBone\" is created it will not have a name / id\n\n\t\t\t\t\t\tbone.name = name ? PropertyBinding.sanitizeNodeName( name ) : '';\n\t\t\t\t\t\tbone.ID = id;\n\n\t\t\t\t\t\tskeleton.bones[ i ] = bone;\n\n\t\t\t\t\t\t// In cases where a bone is shared between multiple meshes\n\t\t\t\t\t\t// duplicate the bone here and and it as a child of the first bone\n\t\t\t\t\t\tif ( subBone !== null ) {\n\n\t\t\t\t\t\t\tbone.add( subBone );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn bone;\n\n\t}\n\n\t// create a PerspectiveCamera or OrthographicCamera\n\tcreateCamera( relationships ) {\n\n\t\tlet model;\n\t\tlet cameraAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tcameraAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( cameraAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type = 0;\n\t\t\tif ( cameraAttribute.CameraProjectionType !== undefined && cameraAttribute.CameraProjectionType.value === 1 ) {\n\n\t\t\t\ttype = 1;\n\n\t\t\t}\n\n\t\t\tlet nearClippingPlane = 1;\n\t\t\tif ( cameraAttribute.NearPlane !== undefined ) {\n\n\t\t\t\tnearClippingPlane = cameraAttribute.NearPlane.value / 1000;\n\n\t\t\t}\n\n\t\t\tlet farClippingPlane = 1000;\n\t\t\tif ( cameraAttribute.FarPlane !== undefined ) {\n\n\t\t\t\tfarClippingPlane = cameraAttribute.FarPlane.value / 1000;\n\n\t\t\t}\n\n\n\t\t\tlet width = window.innerWidth;\n\t\t\tlet height = window.innerHeight;\n\n\t\t\tif ( cameraAttribute.AspectWidth !== undefined && cameraAttribute.AspectHeight !== undefined ) {\n\n\t\t\t\twidth = cameraAttribute.AspectWidth.value;\n\t\t\t\theight = cameraAttribute.AspectHeight.value;\n\n\t\t\t}\n\n\t\t\tconst aspect = width / height;\n\n\t\t\tlet fov = 45;\n\t\t\tif ( cameraAttribute.FieldOfView !== undefined ) {\n\n\t\t\t\tfov = cameraAttribute.FieldOfView.value;\n\n\t\t\t}\n\n\t\t\tconst focalLength = cameraAttribute.FocalLength ? cameraAttribute.FocalLength.value : null;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Perspective\n\t\t\t\t\tmodel = new PerspectiveCamera( fov, aspect, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tif ( focalLength !== null ) model.setFocalLength( focalLength );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Orthographic\n\t\t\t\t\tmodel = new OrthographicCamera( - width / 2, width / 2, height / 2, - height / 2, nearClippingPlane, farClippingPlane );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown camera type ' + type + '.' );\n\t\t\t\t\tmodel = new Object3D();\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\t// Create a DirectionalLight, PointLight or SpotLight\n\tcreateLight( relationships ) {\n\n\t\tlet model;\n\t\tlet lightAttribute;\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tconst attr = fbxTree.Objects.NodeAttribute[ child.ID ];\n\n\t\t\tif ( attr !== undefined ) {\n\n\t\t\t\tlightAttribute = attr;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( lightAttribute === undefined ) {\n\n\t\t\tmodel = new Object3D();\n\n\t\t} else {\n\n\t\t\tlet type;\n\n\t\t\t// LightType can be undefined for Point lights\n\t\t\tif ( lightAttribute.LightType === undefined ) {\n\n\t\t\t\ttype = 0;\n\n\t\t\t} else {\n\n\t\t\t\ttype = lightAttribute.LightType.value;\n\n\t\t\t}\n\n\t\t\tlet color = 0xffffff;\n\n\t\t\tif ( lightAttribute.Color !== undefined ) {\n\n\t\t\t\tcolor = new Color().fromArray( lightAttribute.Color.value );\n\n\t\t\t}\n\n\t\t\tlet intensity = ( lightAttribute.Intensity === undefined ) ? 1 : lightAttribute.Intensity.value / 100;\n\n\t\t\t// light disabled\n\t\t\tif ( lightAttribute.CastLightOnObject !== undefined && lightAttribute.CastLightOnObject.value === 0 ) {\n\n\t\t\t\tintensity = 0;\n\n\t\t\t}\n\n\t\t\tlet distance = 0;\n\t\t\tif ( lightAttribute.FarAttenuationEnd !== undefined ) {\n\n\t\t\t\tif ( lightAttribute.EnableFarAttenuation !== undefined && lightAttribute.EnableFarAttenuation.value === 0 ) {\n\n\t\t\t\t\tdistance = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdistance = lightAttribute.FarAttenuationEnd.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// TODO: could this be calculated linearly from FarAttenuationStart to FarAttenuationEnd?\n\t\t\tconst decay = 1;\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 0: // Point\n\t\t\t\t\tmodel = new PointLight( color, intensity, distance, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1: // Directional\n\t\t\t\t\tmodel = new DirectionalLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 2: // Spot\n\t\t\t\t\tlet angle = Math.PI / 3;\n\n\t\t\t\t\tif ( lightAttribute.InnerAngle !== undefined ) {\n\n\t\t\t\t\t\tangle = MathUtils.degToRad( lightAttribute.InnerAngle.value );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tlet penumbra = 0;\n\t\t\t\t\tif ( lightAttribute.OuterAngle !== undefined ) {\n\n\t\t\t\t\t\t// TODO: this is not correct - FBX calculates outer and inner angle in degrees\n\t\t\t\t\t\t// with OuterAngle > InnerAngle && OuterAngle <= Math.PI\n\t\t\t\t\t\t// while three.js uses a penumbra between (0, 1) to attenuate the inner angle\n\t\t\t\t\t\tpenumbra = MathUtils.degToRad( lightAttribute.OuterAngle.value );\n\t\t\t\t\t\tpenumbra = Math.max( penumbra, 1 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmodel = new SpotLight( color, intensity, distance, angle, penumbra, decay );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Unknown light type ' + lightAttribute.LightType.value + ', defaulting to a PointLight.' );\n\t\t\t\t\tmodel = new PointLight( color, intensity );\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( lightAttribute.CastShadows !== undefined && lightAttribute.CastShadows.value === 1 ) {\n\n\t\t\t\tmodel.castShadow = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateMesh( relationships, geometryMap, materialMap ) {\n\n\t\tlet model;\n\t\tlet geometry = null;\n\t\tlet material = null;\n\t\tconst materials = [];\n\n\t\t// get geometry and materials(s) from connections\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) {\n\n\t\t\t\tgeometry = geometryMap.get( child.ID );\n\n\t\t\t}\n\n\t\t\tif ( materialMap.has( child.ID ) ) {\n\n\t\t\t\tmaterials.push( materialMap.get( child.ID ) );\n\n\t\t\t}\n\n\t\t} );\n\n\t\tif ( materials.length > 1 ) {\n\n\t\t\tmaterial = materials;\n\n\t\t} else if ( materials.length > 0 ) {\n\n\t\t\tmaterial = materials[ 0 ];\n\n\t\t} else {\n\n\t\t\tmaterial = new MeshPhongMaterial( { color: 0xcccccc } );\n\t\t\tmaterials.push( material );\n\n\t\t}\n\n\t\tif ( 'color' in geometry.attributes ) {\n\n\t\t\tmaterials.forEach( function ( material ) {\n\n\t\t\t\tmaterial.vertexColors = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( geometry.FBX_Deformer ) {\n\n\t\t\tmodel = new SkinnedMesh( geometry, material );\n\t\t\tmodel.normalizeSkinWeights();\n\n\t\t} else {\n\n\t\t\tmodel = new Mesh( geometry, material );\n\n\t\t}\n\n\t\treturn model;\n\n\t}\n\n\tcreateCurve( relationships, geometryMap ) {\n\n\t\tconst geometry = relationships.children.reduce( function ( geo, child ) {\n\n\t\t\tif ( geometryMap.has( child.ID ) ) geo = geometryMap.get( child.ID );\n\n\t\t\treturn geo;\n\n\t\t}, null );\n\n\t\t// FBX does not list materials for Nurbs lines, so we'll just put our own in here.\n\t\tconst material = new LineBasicMaterial( { color: 0x3300ff, linewidth: 1 } );\n\t\treturn new Line( geometry, material );\n\n\t}\n\n\t// parse the model node for transform data\n\tgetTransformData( model, modelNode ) {\n\n\t\tconst transformData = {};\n\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\telse transformData.eulerOrder = 'ZYX';\n\n\t\tif ( 'Lcl_Translation' in modelNode ) transformData.translation = modelNode.Lcl_Translation.value;\n\n\t\tif ( 'PreRotation' in modelNode ) transformData.preRotation = modelNode.PreRotation.value;\n\t\tif ( 'Lcl_Rotation' in modelNode ) transformData.rotation = modelNode.Lcl_Rotation.value;\n\t\tif ( 'PostRotation' in modelNode ) transformData.postRotation = modelNode.PostRotation.value;\n\n\t\tif ( 'Lcl_Scaling' in modelNode ) transformData.scale = modelNode.Lcl_Scaling.value;\n\n\t\tif ( 'ScalingOffset' in modelNode ) transformData.scalingOffset = modelNode.ScalingOffset.value;\n\t\tif ( 'ScalingPivot' in modelNode ) transformData.scalingPivot = modelNode.ScalingPivot.value;\n\n\t\tif ( 'RotationOffset' in modelNode ) transformData.rotationOffset = modelNode.RotationOffset.value;\n\t\tif ( 'RotationPivot' in modelNode ) transformData.rotationPivot = modelNode.RotationPivot.value;\n\n\t\tmodel.userData.transformData = transformData;\n\n\t}\n\n\tsetLookAtProperties( model, modelNode ) {\n\n\t\tif ( 'LookAtProperty' in modelNode ) {\n\n\t\t\tconst children = connections.get( model.ID ).children;\n\n\t\t\tchildren.forEach( function ( child ) {\n\n\t\t\t\tif ( child.relationship === 'LookAtProperty' ) {\n\n\t\t\t\t\tconst lookAtTarget = fbxTree.Objects.Model[ child.ID ];\n\n\t\t\t\t\tif ( 'Lcl_Translation' in lookAtTarget ) {\n\n\t\t\t\t\t\tconst pos = lookAtTarget.Lcl_Translation.value;\n\n\t\t\t\t\t\t// DirectionalLight, SpotLight\n\t\t\t\t\t\tif ( model.target !== undefined ) {\n\n\t\t\t\t\t\t\tmodel.target.position.fromArray( pos );\n\t\t\t\t\t\t\tsceneGraph.add( model.target );\n\n\t\t\t\t\t\t} else { // Cameras and other Object3Ds\n\n\t\t\t\t\t\t\tmodel.lookAt( new Vector3().fromArray( pos ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tbindSkeleton( skeletons, geometryMap, modelMap ) {\n\n\t\tconst bindMatrices = this.parsePoseNodes();\n\n\t\tfor ( const ID in skeletons ) {\n\n\t\t\tconst skeleton = skeletons[ ID ];\n\n\t\t\tconst parents = connections.get( parseInt( skeleton.ID ) ).parents;\n\n\t\t\tparents.forEach( function ( parent ) {\n\n\t\t\t\tif ( geometryMap.has( parent.ID ) ) {\n\n\t\t\t\t\tconst geoID = parent.ID;\n\t\t\t\t\tconst geoRelationships = connections.get( geoID );\n\n\t\t\t\t\tgeoRelationships.parents.forEach( function ( geoConnParent ) {\n\n\t\t\t\t\t\tif ( modelMap.has( geoConnParent.ID ) ) {\n\n\t\t\t\t\t\t\tconst model = modelMap.get( geoConnParent.ID );\n\n\t\t\t\t\t\t\tmodel.bind( new Skeleton( skeleton.bones ), bindMatrices[ geoConnParent.ID ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n\tparsePoseNodes() {\n\n\t\tconst bindMatrices = {};\n\n\t\tif ( 'Pose' in fbxTree.Objects ) {\n\n\t\t\tconst BindPoseNode = fbxTree.Objects.Pose;\n\n\t\t\tfor ( const nodeID in BindPoseNode ) {\n\n\t\t\t\tif ( BindPoseNode[ nodeID ].attrType === 'BindPose' && BindPoseNode[ nodeID ].NbPoseNodes > 0 ) {\n\n\t\t\t\t\tconst poseNodes = BindPoseNode[ nodeID ].PoseNode;\n\n\t\t\t\t\tif ( Array.isArray( poseNodes ) ) {\n\n\t\t\t\t\t\tposeNodes.forEach( function ( poseNode ) {\n\n\t\t\t\t\t\t\tbindMatrices[ poseNode.Node ] = new Matrix4().fromArray( poseNode.Matrix.a );\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tbindMatrices[ poseNodes.Node ] = new Matrix4().fromArray( poseNodes.Matrix.a );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn bindMatrices;\n\n\t}\n\n\t// Parse ambient color in FBXTree.GlobalSettings - if it's not set to black (default), create an ambient light\n\tcreateAmbientLight() {\n\n\t\tif ( 'GlobalSettings' in fbxTree && 'AmbientColor' in fbxTree.GlobalSettings ) {\n\n\t\t\tconst ambientColor = fbxTree.GlobalSettings.AmbientColor.value;\n\t\t\tconst r = ambientColor[ 0 ];\n\t\t\tconst g = ambientColor[ 1 ];\n\t\t\tconst b = ambientColor[ 2 ];\n\n\t\t\tif ( r !== 0 || g !== 0 || b !== 0 ) {\n\n\t\t\t\tconst color = new Color( r, g, b );\n\t\t\t\tsceneGraph.add( new AmbientLight( color, 1 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse Geometry data from FBXTree and return map of BufferGeometries\nclass GeometryParser {\n\n\t// Parse nodes in FBXTree.Objects.Geometry\n\tparse( deformers ) {\n\n\t\tconst geometryMap = new Map();\n\n\t\tif ( 'Geometry' in fbxTree.Objects ) {\n\n\t\t\tconst geoNodes = fbxTree.Objects.Geometry;\n\n\t\t\tfor ( const nodeID in geoNodes ) {\n\n\t\t\t\tconst relationships = connections.get( parseInt( nodeID ) );\n\t\t\t\tconst geo = this.parseGeometry( relationships, geoNodes[ nodeID ], deformers );\n\n\t\t\t\tgeometryMap.set( parseInt( nodeID ), geo );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometryMap;\n\n\t}\n\n\t// Parse single node in FBXTree.Objects.Geometry\n\tparseGeometry( relationships, geoNode, deformers ) {\n\n\t\tswitch ( geoNode.attrType ) {\n\n\t\t\tcase 'Mesh':\n\t\t\t\treturn this.parseMeshGeometry( relationships, geoNode, deformers );\n\t\t\t\tbreak;\n\n\t\t\tcase 'NurbsCurve':\n\t\t\t\treturn this.parseNurbsGeometry( geoNode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\t// Parse single node mesh geometry in FBXTree.Objects.Geometry\n\tparseMeshGeometry( relationships, geoNode, deformers ) {\n\n\t\tconst skeletons = deformers.skeletons;\n\t\tconst morphTargets = [];\n\n\t\tconst modelNodes = relationships.parents.map( function ( parent ) {\n\n\t\t\treturn fbxTree.Objects.Model[ parent.ID ];\n\n\t\t} );\n\n\t\t// don't create geometry if it is not associated with any models\n\t\tif ( modelNodes.length === 0 ) return;\n\n\t\tconst skeleton = relationships.children.reduce( function ( skeleton, child ) {\n\n\t\t\tif ( skeletons[ child.ID ] !== undefined ) skeleton = skeletons[ child.ID ];\n\n\t\t\treturn skeleton;\n\n\t\t}, null );\n\n\t\trelationships.children.forEach( function ( child ) {\n\n\t\t\tif ( deformers.morphTargets[ child.ID ] !== undefined ) {\n\n\t\t\t\tmorphTargets.push( deformers.morphTargets[ child.ID ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\t// Assume one model and get the preRotation from that\n\t\t// if there is more than one model associated with the geometry this may cause problems\n\t\tconst modelNode = modelNodes[ 0 ];\n\n\t\tconst transformData = {};\n\n\t\tif ( 'RotationOrder' in modelNode ) transformData.eulerOrder = getEulerOrder( modelNode.RotationOrder.value );\n\t\tif ( 'InheritType' in modelNode ) transformData.inheritType = parseInt( modelNode.InheritType.value );\n\n\t\tif ( 'GeometricTranslation' in modelNode ) transformData.translation = modelNode.GeometricTranslation.value;\n\t\tif ( 'GeometricRotation' in modelNode ) transformData.rotation = modelNode.GeometricRotation.value;\n\t\tif ( 'GeometricScaling' in modelNode ) transformData.scale = modelNode.GeometricScaling.value;\n\n\t\tconst transform = generateTransform( transformData );\n\n\t\treturn this.genGeometry( geoNode, skeleton, morphTargets, transform );\n\n\t}\n\n\t// Generate a BufferGeometry from a node in FBXTree.Objects.Geometry\n\tgenGeometry( geoNode, skeleton, morphTargets, preTransform ) {\n\n\t\tconst geo = new BufferGeometry();\n\t\tif ( geoNode.attrName ) geo.name = geoNode.attrName;\n\n\t\tconst geoInfo = this.parseGeoNode( geoNode, skeleton );\n\t\tconst buffers = this.genBuffers( geoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( buffers.vertex, 3 );\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tgeo.setAttribute( 'position', positionAttribute );\n\n\t\tif ( buffers.colors.length > 0 ) {\n\n\t\t\tgeo.setAttribute( 'color', new Float32BufferAttribute( buffers.colors, 3 ) );\n\n\t\t}\n\n\t\tif ( skeleton ) {\n\n\t\t\tgeo.setAttribute( 'skinIndex', new Uint16BufferAttribute( buffers.weightsIndices, 4 ) );\n\n\t\t\tgeo.setAttribute( 'skinWeight', new Float32BufferAttribute( buffers.vertexWeights, 4 ) );\n\n\t\t\t// used later to bind the skeleton to the model\n\t\t\tgeo.FBX_Deformer = skeleton;\n\n\t\t}\n\n\t\tif ( buffers.normal.length > 0 ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( preTransform );\n\n\t\t\tconst normalAttribute = new Float32BufferAttribute( buffers.normal, 3 );\n\t\t\tnormalAttribute.applyNormalMatrix( normalMatrix );\n\n\t\t\tgeo.setAttribute( 'normal', normalAttribute );\n\n\t\t}\n\n\t\tbuffers.uvs.forEach( function ( uvBuffer, i ) {\n\n\t\t\t// subsequent uv buffers are called 'uv1', 'uv2', ...\n\t\t\tlet name = 'uv' + ( i + 1 ).toString();\n\n\t\t\t// the first uv buffer is just called 'uv'\n\t\t\tif ( i === 0 ) {\n\n\t\t\t\tname = 'uv';\n\n\t\t\t}\n\n\t\t\tgeo.setAttribute( name, new Float32BufferAttribute( buffers.uvs[ i ], 2 ) );\n\n\t\t} );\n\n\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t// Convert the material indices of each vertex into rendering groups on the geometry.\n\t\t\tlet prevMaterialIndex = buffers.materialIndex[ 0 ];\n\t\t\tlet startIndex = 0;\n\n\t\t\tbuffers.materialIndex.forEach( function ( currentIndex, i ) {\n\n\t\t\t\tif ( currentIndex !== prevMaterialIndex ) {\n\n\t\t\t\t\tgeo.addGroup( startIndex, i - startIndex, prevMaterialIndex );\n\n\t\t\t\t\tprevMaterialIndex = currentIndex;\n\t\t\t\t\tstartIndex = i;\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\t// the loop above doesn't add the last group, do that here.\n\t\t\tif ( geo.groups.length > 0 ) {\n\n\t\t\t\tconst lastGroup = geo.groups[ geo.groups.length - 1 ];\n\t\t\t\tconst lastIndex = lastGroup.start + lastGroup.count;\n\n\t\t\t\tif ( lastIndex !== buffers.materialIndex.length ) {\n\n\t\t\t\t\tgeo.addGroup( lastIndex, buffers.materialIndex.length - lastIndex, prevMaterialIndex );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// case where there are multiple materials but the whole geometry is only\n\t\t\t// using one of them\n\t\t\tif ( geo.groups.length === 0 ) {\n\n\t\t\t\tgeo.addGroup( 0, buffers.materialIndex.length, buffers.materialIndex[ 0 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.addMorphTargets( geo, geoNode, morphTargets, preTransform );\n\n\t\treturn geo;\n\n\t}\n\n\tparseGeoNode( geoNode, skeleton ) {\n\n\t\tconst geoInfo = {};\n\n\t\tgeoInfo.vertexPositions = ( geoNode.Vertices !== undefined ) ? geoNode.Vertices.a : [];\n\t\tgeoInfo.vertexIndices = ( geoNode.PolygonVertexIndex !== undefined ) ? geoNode.PolygonVertexIndex.a : [];\n\n\t\tif ( geoNode.LayerElementColor ) {\n\n\t\t\tgeoInfo.color = this.parseVertexColors( geoNode.LayerElementColor[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementMaterial ) {\n\n\t\t\tgeoInfo.material = this.parseMaterialIndices( geoNode.LayerElementMaterial[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementNormal ) {\n\n\t\t\tgeoInfo.normal = this.parseNormals( geoNode.LayerElementNormal[ 0 ] );\n\n\t\t}\n\n\t\tif ( geoNode.LayerElementUV ) {\n\n\t\t\tgeoInfo.uv = [];\n\n\t\t\tlet i = 0;\n\t\t\twhile ( geoNode.LayerElementUV[ i ] ) {\n\n\t\t\t\tif ( geoNode.LayerElementUV[ i ].UV ) {\n\n\t\t\t\t\tgeoInfo.uv.push( this.parseUVs( geoNode.LayerElementUV[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\ti ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tgeoInfo.weightTable = {};\n\n\t\tif ( skeleton !== null ) {\n\n\t\t\tgeoInfo.skeleton = skeleton;\n\n\t\t\tskeleton.rawBones.forEach( function ( rawBone, i ) {\n\n\t\t\t\t// loop over the bone's vertex indices and weights\n\t\t\t\trawBone.indices.forEach( function ( index, j ) {\n\n\t\t\t\t\tif ( geoInfo.weightTable[ index ] === undefined ) geoInfo.weightTable[ index ] = [];\n\n\t\t\t\t\tgeoInfo.weightTable[ index ].push( {\n\n\t\t\t\t\t\tid: i,\n\t\t\t\t\t\tweight: rawBone.weights[ j ],\n\n\t\t\t\t\t} );\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn geoInfo;\n\n\t}\n\n\tgenBuffers( geoInfo ) {\n\n\t\tconst buffers = {\n\t\t\tvertex: [],\n\t\t\tnormal: [],\n\t\t\tcolors: [],\n\t\t\tuvs: [],\n\t\t\tmaterialIndex: [],\n\t\t\tvertexWeights: [],\n\t\t\tweightsIndices: [],\n\t\t};\n\n\t\tlet polygonIndex = 0;\n\t\tlet faceLength = 0;\n\t\tlet displayedWeightsWarning = false;\n\n\t\t// these will hold data for a single face\n\t\tlet facePositionIndexes = [];\n\t\tlet faceNormals = [];\n\t\tlet faceColors = [];\n\t\tlet faceUVs = [];\n\t\tlet faceWeights = [];\n\t\tlet faceWeightIndices = [];\n\n\t\tconst scope = this;\n\t\tgeoInfo.vertexIndices.forEach( function ( vertexIndex, polygonVertexIndex ) {\n\n\t\t\tlet materialIndex;\n\t\t\tlet endOfFace = false;\n\n\t\t\t// Face index and vertex index arrays are combined in a single array\n\t\t\t// A cube with quad faces looks like this:\n\t\t\t// PolygonVertexIndex: *24 {\n\t\t\t//  a: 0, 1, 3, -3, 2, 3, 5, -5, 4, 5, 7, -7, 6, 7, 1, -1, 1, 7, 5, -4, 6, 0, 2, -5\n\t\t\t//  }\n\t\t\t// Negative numbers mark the end of a face - first face here is 0, 1, 3, -3\n\t\t\t// to find index of last vertex bit shift the index: ^ - 1\n\t\t\tif ( vertexIndex < 0 ) {\n\n\t\t\t\tvertexIndex = vertexIndex ^ - 1; // equivalent to ( x * -1 ) - 1\n\t\t\t\tendOfFace = true;\n\n\t\t\t}\n\n\t\t\tlet weightIndices = [];\n\t\t\tlet weights = [];\n\n\t\t\tfacePositionIndexes.push( vertexIndex * 3, vertexIndex * 3 + 1, vertexIndex * 3 + 2 );\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.color );\n\n\t\t\t\tfaceColors.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tif ( geoInfo.weightTable[ vertexIndex ] !== undefined ) {\n\n\t\t\t\t\tgeoInfo.weightTable[ vertexIndex ].forEach( function ( wt ) {\n\n\t\t\t\t\t\tweights.push( wt.weight );\n\t\t\t\t\t\tweightIndices.push( wt.id );\n\n\t\t\t\t\t} );\n\n\n\t\t\t\t}\n\n\t\t\t\tif ( weights.length > 4 ) {\n\n\t\t\t\t\tif ( ! displayedWeightsWarning ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights.' );\n\t\t\t\t\t\tdisplayedWeightsWarning = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst wIndex = [ 0, 0, 0, 0 ];\n\t\t\t\t\tconst Weight = [ 0, 0, 0, 0 ];\n\n\t\t\t\t\tweights.forEach( function ( weight, weightIndex ) {\n\n\t\t\t\t\t\tlet currentWeight = weight;\n\t\t\t\t\t\tlet currentIndex = weightIndices[ weightIndex ];\n\n\t\t\t\t\t\tWeight.forEach( function ( comparedWeight, comparedWeightIndex, comparedWeightArray ) {\n\n\t\t\t\t\t\t\tif ( currentWeight > comparedWeight ) {\n\n\t\t\t\t\t\t\t\tcomparedWeightArray[ comparedWeightIndex ] = currentWeight;\n\t\t\t\t\t\t\t\tcurrentWeight = comparedWeight;\n\n\t\t\t\t\t\t\t\tconst tmp = wIndex[ comparedWeightIndex ];\n\t\t\t\t\t\t\t\twIndex[ comparedWeightIndex ] = currentIndex;\n\t\t\t\t\t\t\t\tcurrentIndex = tmp;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tweightIndices = wIndex;\n\t\t\t\t\tweights = Weight;\n\n\t\t\t\t}\n\n\t\t\t\t// if the weight array is shorter than 4 pad with 0s\n\t\t\t\twhile ( weights.length < 4 ) {\n\n\t\t\t\t\tweights.push( 0 );\n\t\t\t\t\tweightIndices.push( 0 );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0; i < 4; ++ i ) {\n\n\t\t\t\t\tfaceWeights.push( weights[ i ] );\n\t\t\t\t\tfaceWeightIndices.push( weightIndices[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.normal );\n\n\t\t\t\tfaceNormals.push( data[ 0 ], data[ 1 ], data[ 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tmaterialIndex = getData( polygonVertexIndex, polygonIndex, vertexIndex, geoInfo.material )[ 0 ];\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, i ) {\n\n\t\t\t\t\tconst data = getData( polygonVertexIndex, polygonIndex, vertexIndex, uv );\n\n\t\t\t\t\tif ( faceUVs[ i ] === undefined ) {\n\n\t\t\t\t\t\tfaceUVs[ i ] = [];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfaceUVs[ i ].push( data[ 0 ] );\n\t\t\t\t\tfaceUVs[ i ].push( data[ 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tfaceLength ++;\n\n\t\t\tif ( endOfFace ) {\n\n\t\t\t\tscope.genFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength );\n\n\t\t\t\tpolygonIndex ++;\n\t\t\t\tfaceLength = 0;\n\n\t\t\t\t// reset arrays for the next face\n\t\t\t\tfacePositionIndexes = [];\n\t\t\t\tfaceNormals = [];\n\t\t\t\tfaceColors = [];\n\t\t\t\tfaceUVs = [];\n\t\t\t\tfaceWeights = [];\n\t\t\t\tfaceWeightIndices = [];\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn buffers;\n\n\t}\n\n\t// Generate data for a single face in a geometry. If the face is a quad then split it into 2 tris\n\tgenFace( buffers, geoInfo, facePositionIndexes, materialIndex, faceNormals, faceColors, faceUVs, faceWeights, faceWeightIndices, faceLength ) {\n\n\t\tfor ( let i = 2; i < faceLength; i ++ ) {\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 0 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ ( i - 1 ) * 3 + 2 ] ] );\n\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 1 ] ] );\n\t\t\tbuffers.vertex.push( geoInfo.vertexPositions[ facePositionIndexes[ i * 3 + 2 ] ] );\n\n\t\t\tif ( geoInfo.skeleton ) {\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 0 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 1 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 2 ] );\n\t\t\t\tbuffers.vertexWeights.push( faceWeights[ i * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 0 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ ( i - 1 ) * 4 + 3 ] );\n\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 1 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 2 ] );\n\t\t\t\tbuffers.weightsIndices.push( faceWeightIndices[ i * 4 + 3 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.color ) {\n\n\t\t\t\tbuffers.colors.push( faceColors[ 0 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 1 ] );\n\t\t\t\tbuffers.colors.push( faceColors[ i * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.material && geoInfo.material.mappingType !== 'AllSame' ) {\n\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\t\t\t\tbuffers.materialIndex.push( materialIndex );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.normal ) {\n\n\t\t\t\tbuffers.normal.push( faceNormals[ 0 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ ( i - 1 ) * 3 + 2 ] );\n\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 1 ] );\n\t\t\t\tbuffers.normal.push( faceNormals[ i * 3 + 2 ] );\n\n\t\t\t}\n\n\t\t\tif ( geoInfo.uv ) {\n\n\t\t\t\tgeoInfo.uv.forEach( function ( uv, j ) {\n\n\t\t\t\t\tif ( buffers.uvs[ j ] === undefined ) buffers.uvs[ j ] = [];\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 0 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ ( i - 1 ) * 2 + 1 ] );\n\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 ] );\n\t\t\t\t\tbuffers.uvs[ j ].push( faceUVs[ j ][ i * 2 + 1 ] );\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\taddMorphTargets( parentGeo, parentGeoNode, morphTargets, preTransform ) {\n\n\t\tif ( morphTargets.length === 0 ) return;\n\n\t\tparentGeo.morphTargetsRelative = true;\n\n\t\tparentGeo.morphAttributes.position = [];\n\t\t// parentGeo.morphAttributes.normal = []; // not implemented\n\n\t\tconst scope = this;\n\t\tmorphTargets.forEach( function ( morphTarget ) {\n\n\t\t\tmorphTarget.rawTargets.forEach( function ( rawTarget ) {\n\n\t\t\t\tconst morphGeoNode = fbxTree.Objects.Geometry[ rawTarget.geoID ];\n\n\t\t\t\tif ( morphGeoNode !== undefined ) {\n\n\t\t\t\t\tscope.genMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, rawTarget.name );\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t// a morph geometry node is similar to a standard  node, and the node is also contained\n\t// in FBXTree.Objects.Geometry, however it can only have attributes for position, normal\n\t// and a special attribute Index defining which vertices of the original geometry are affected\n\t// Normal and position attributes only have data for the vertices that are affected by the morph\n\tgenMorphGeometry( parentGeo, parentGeoNode, morphGeoNode, preTransform, name ) {\n\n\t\tconst vertexIndices = ( parentGeoNode.PolygonVertexIndex !== undefined ) ? parentGeoNode.PolygonVertexIndex.a : [];\n\n\t\tconst morphPositionsSparse = ( morphGeoNode.Vertices !== undefined ) ? morphGeoNode.Vertices.a : [];\n\t\tconst indices = ( morphGeoNode.Indexes !== undefined ) ? morphGeoNode.Indexes.a : [];\n\n\t\tconst length = parentGeo.attributes.position.count * 3;\n\t\tconst morphPositions = new Float32Array( length );\n\n\t\tfor ( let i = 0; i < indices.length; i ++ ) {\n\n\t\t\tconst morphIndex = indices[ i ] * 3;\n\n\t\t\tmorphPositions[ morphIndex ] = morphPositionsSparse[ i * 3 ];\n\t\t\tmorphPositions[ morphIndex + 1 ] = morphPositionsSparse[ i * 3 + 1 ];\n\t\t\tmorphPositions[ morphIndex + 2 ] = morphPositionsSparse[ i * 3 + 2 ];\n\n\t\t}\n\n\t\t// TODO: add morph normal support\n\t\tconst morphGeoInfo = {\n\t\t\tvertexIndices: vertexIndices,\n\t\t\tvertexPositions: morphPositions,\n\n\t\t};\n\n\t\tconst morphBuffers = this.genBuffers( morphGeoInfo );\n\n\t\tconst positionAttribute = new Float32BufferAttribute( morphBuffers.vertex, 3 );\n\t\tpositionAttribute.name = name || morphGeoNode.attrName;\n\n\t\tpositionAttribute.applyMatrix4( preTransform );\n\n\t\tparentGeo.morphAttributes.position.push( positionAttribute );\n\n\t}\n\n\t// Parse normal from FBXTree.Objects.Geometry.LayerElementNormal if it exists\n\tparseNormals( NormalNode ) {\n\n\t\tconst mappingType = NormalNode.MappingInformationType;\n\t\tconst referenceType = NormalNode.ReferenceInformationType;\n\t\tconst buffer = NormalNode.Normals.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tif ( 'NormalIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalIndex.a;\n\n\t\t\t} else if ( 'NormalsIndex' in NormalNode ) {\n\n\t\t\t\tindexBuffer = NormalNode.NormalsIndex.a;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 3,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse UVs from FBXTree.Objects.Geometry.LayerElementUV if it exists\n\tparseUVs( UVNode ) {\n\n\t\tconst mappingType = UVNode.MappingInformationType;\n\t\tconst referenceType = UVNode.ReferenceInformationType;\n\t\tconst buffer = UVNode.UV.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = UVNode.UVIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 2,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse Vertex Colors from FBXTree.Objects.Geometry.LayerElementColor if it exists\n\tparseVertexColors( ColorNode ) {\n\n\t\tconst mappingType = ColorNode.MappingInformationType;\n\t\tconst referenceType = ColorNode.ReferenceInformationType;\n\t\tconst buffer = ColorNode.Colors.a;\n\t\tlet indexBuffer = [];\n\t\tif ( referenceType === 'IndexToDirect' ) {\n\n\t\t\tindexBuffer = ColorNode.ColorIndex.a;\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 4,\n\t\t\tbuffer: buffer,\n\t\t\tindices: indexBuffer,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Parse mapping and material data in FBXTree.Objects.Geometry.LayerElementMaterial if it exists\n\tparseMaterialIndices( MaterialNode ) {\n\n\t\tconst mappingType = MaterialNode.MappingInformationType;\n\t\tconst referenceType = MaterialNode.ReferenceInformationType;\n\n\t\tif ( mappingType === 'NoMappingInformation' ) {\n\n\t\t\treturn {\n\t\t\t\tdataSize: 1,\n\t\t\t\tbuffer: [ 0 ],\n\t\t\t\tindices: [ 0 ],\n\t\t\t\tmappingType: 'AllSame',\n\t\t\t\treferenceType: referenceType\n\t\t\t};\n\n\t\t}\n\n\t\tconst materialIndexBuffer = MaterialNode.Materials.a;\n\n\t\t// Since materials are stored as indices, there's a bit of a mismatch between FBX and what\n\t\t// we expect.So we create an intermediate buffer that points to the index in the buffer,\n\t\t// for conforming with the other functions we've written for other data.\n\t\tconst materialIndices = [];\n\n\t\tfor ( let i = 0; i < materialIndexBuffer.length; ++ i ) {\n\n\t\t\tmaterialIndices.push( i );\n\n\t\t}\n\n\t\treturn {\n\t\t\tdataSize: 1,\n\t\t\tbuffer: materialIndexBuffer,\n\t\t\tindices: materialIndices,\n\t\t\tmappingType: mappingType,\n\t\t\treferenceType: referenceType\n\t\t};\n\n\t}\n\n\t// Generate a NurbGeometry from a node in FBXTree.Objects.Geometry\n\tparseNurbsGeometry( geoNode ) {\n\n\t\tif ( NURBSCurve === undefined ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry.' );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst order = parseInt( geoNode.Order );\n\n\t\tif ( isNaN( order ) ) {\n\n\t\t\tconsole.error( 'THREE.FBXLoader: Invalid Order %s given for geometry ID: %s', geoNode.Order, geoNode.id );\n\t\t\treturn new BufferGeometry();\n\n\t\t}\n\n\t\tconst degree = order - 1;\n\n\t\tconst knots = geoNode.KnotVector.a;\n\t\tconst controlPoints = [];\n\t\tconst pointsValues = geoNode.Points.a;\n\n\t\tfor ( let i = 0, l = pointsValues.length; i < l; i += 4 ) {\n\n\t\t\tcontrolPoints.push( new Vector4().fromArray( pointsValues, i ) );\n\n\t\t}\n\n\t\tlet startKnot, endKnot;\n\n\t\tif ( geoNode.Form === 'Closed' ) {\n\n\t\t\tcontrolPoints.push( controlPoints[ 0 ] );\n\n\t\t} else if ( geoNode.Form === 'Periodic' ) {\n\n\t\t\tstartKnot = degree;\n\t\t\tendKnot = knots.length - 1 - startKnot;\n\n\t\t\tfor ( let i = 0; i < degree; ++ i ) {\n\n\t\t\t\tcontrolPoints.push( controlPoints[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst curve = new NURBSCurve( degree, knots, controlPoints, startKnot, endKnot );\n\t\tconst points = curve.getPoints( controlPoints.length * 12 );\n\n\t\treturn new BufferGeometry().setFromPoints( points );\n\n\t}\n\n}\n\n// parse animation data from FBXTree\nclass AnimationParser {\n\n\t// take raw animation clips and turn them into three.js animation clips\n\tparse() {\n\n\t\tconst animationClips = [];\n\n\t\tconst rawClips = this.parseClips();\n\n\t\tif ( rawClips !== undefined ) {\n\n\t\t\tfor ( const key in rawClips ) {\n\n\t\t\t\tconst rawClip = rawClips[ key ];\n\n\t\t\t\tconst clip = this.addClip( rawClip );\n\n\t\t\t\tanimationClips.push( clip );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn animationClips;\n\n\t}\n\n\tparseClips() {\n\n\t\t// since the actual transformation data is stored in FBXTree.Objects.AnimationCurve,\n\t\t// if this is undefined we can safely assume there are no animations\n\t\tif ( fbxTree.Objects.AnimationCurve === undefined ) return undefined;\n\n\t\tconst curveNodesMap = this.parseAnimationCurveNodes();\n\n\t\tthis.parseAnimationCurves( curveNodesMap );\n\n\t\tconst layersMap = this.parseAnimationLayers( curveNodesMap );\n\t\tconst rawClips = this.parseAnimStacks( layersMap );\n\n\t\treturn rawClips;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurveNode\n\t// each AnimationCurveNode holds data for an animation transform for a model (e.g. left arm rotation )\n\t// and is referenced by an AnimationLayer\n\tparseAnimationCurveNodes() {\n\n\t\tconst rawCurveNodes = fbxTree.Objects.AnimationCurveNode;\n\n\t\tconst curveNodesMap = new Map();\n\n\t\tfor ( const nodeID in rawCurveNodes ) {\n\n\t\t\tconst rawCurveNode = rawCurveNodes[ nodeID ];\n\n\t\t\tif ( rawCurveNode.attrName.match( /S|R|T|DeformPercent/ ) !== null ) {\n\n\t\t\t\tconst curveNode = {\n\n\t\t\t\t\tid: rawCurveNode.id,\n\t\t\t\t\tattr: rawCurveNode.attrName,\n\t\t\t\t\tcurves: {},\n\n\t\t\t\t};\n\n\t\t\t\tcurveNodesMap.set( curveNode.id, curveNode );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn curveNodesMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationCurve and connect them up to\n\t// previously parsed AnimationCurveNodes. Each AnimationCurve holds data for a single animated\n\t// axis ( e.g. times and values of x rotation)\n\tparseAnimationCurves( curveNodesMap ) {\n\n\t\tconst rawCurves = fbxTree.Objects.AnimationCurve;\n\n\t\t// TODO: Many values are identical up to roundoff error, but won't be optimised\n\t\t// e.g. position times: [0, 0.4, 0. 8]\n\t\t// position values: [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.23538335023477e-7, 93.67518615722656, -0.9982695579528809, 7.235384487103147e-7, 93.67520904541016, -0.9982695579528809]\n\t\t// clearly, this should be optimised to\n\t\t// times: [0], positions [7.23538335023477e-7, 93.67518615722656, -0.9982695579528809]\n\t\t// this shows up in nearly every FBX file, and generally time array is length > 100\n\n\t\tfor ( const nodeID in rawCurves ) {\n\n\t\t\tconst animationCurve = {\n\n\t\t\t\tid: rawCurves[ nodeID ].id,\n\t\t\t\ttimes: rawCurves[ nodeID ].KeyTime.a.map( convertFBXTimeToSeconds ),\n\t\t\t\tvalues: rawCurves[ nodeID ].KeyValueFloat.a,\n\n\t\t\t};\n\n\t\t\tconst relationships = connections.get( animationCurve.id );\n\n\t\t\tif ( relationships !== undefined ) {\n\n\t\t\t\tconst animationCurveID = relationships.parents[ 0 ].ID;\n\t\t\t\tconst animationCurveRelationship = relationships.parents[ 0 ].relationship;\n\n\t\t\t\tif ( animationCurveRelationship.match( /X/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'x' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Y/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'y' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /Z/ ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'z' ] = animationCurve;\n\n\t\t\t\t} else if ( animationCurveRelationship.match( /d|DeformPercent/ ) && curveNodesMap.has( animationCurveID ) ) {\n\n\t\t\t\t\tcurveNodesMap.get( animationCurveID ).curves[ 'morph' ] = animationCurve;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationLayer. Each layers holds references\n\t// to various AnimationCurveNodes and is referenced by an AnimationStack node\n\t// note: theoretically a stack can have multiple layers, however in practice there always seems to be one per stack\n\tparseAnimationLayers( curveNodesMap ) {\n\n\t\tconst rawLayers = fbxTree.Objects.AnimationLayer;\n\n\t\tconst layersMap = new Map();\n\n\t\tfor ( const nodeID in rawLayers ) {\n\n\t\t\tconst layerCurveNodes = [];\n\n\t\t\tconst connection = connections.get( parseInt( nodeID ) );\n\n\t\t\tif ( connection !== undefined ) {\n\n\t\t\t\t// all the animationCurveNodes used in the layer\n\t\t\t\tconst children = connection.children;\n\n\t\t\t\tchildren.forEach( function ( child, i ) {\n\n\t\t\t\t\tif ( curveNodesMap.has( child.ID ) ) {\n\n\t\t\t\t\t\tconst curveNode = curveNodesMap.get( child.ID );\n\n\t\t\t\t\t\t// check that the curves are defined for at least one axis, otherwise ignore the curveNode\n\t\t\t\t\t\tif ( curveNode.curves.x !== undefined || curveNode.curves.y !== undefined || curveNode.curves.z !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst modelID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tif ( modelID !== undefined ) {\n\n\t\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID.toString() ];\n\n\t\t\t\t\t\t\t\t\tif ( rawModel === undefined ) {\n\n\t\t\t\t\t\t\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered a unused curve.', child );\n\t\t\t\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\t\tID: rawModel.id,\n\t\t\t\t\t\t\t\t\t\tinitialPosition: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialRotation: [ 0, 0, 0 ],\n\t\t\t\t\t\t\t\t\t\tinitialScale: [ 1, 1, 1 ],\n\n\t\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\t\tsceneGraph.traverse( function ( child ) {\n\n\t\t\t\t\t\t\t\t\t\tif ( child.ID === rawModel.id ) {\n\n\t\t\t\t\t\t\t\t\t\t\tnode.transform = child.matrix;\n\n\t\t\t\t\t\t\t\t\t\t\tif ( child.userData.transformData ) node.eulerOrder = child.userData.transformData.eulerOrder;\n\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\t\t\tif ( ! node.transform ) node.transform = new Matrix4();\n\n\t\t\t\t\t\t\t\t\t// if the animated model is pre rotated, we'll have to apply the pre rotations to every\n\t\t\t\t\t\t\t\t\t// animation value as well\n\t\t\t\t\t\t\t\t\tif ( 'PreRotation' in rawModel ) node.preRotation = rawModel.PreRotation.value;\n\t\t\t\t\t\t\t\t\tif ( 'PostRotation' in rawModel ) node.postRotation = rawModel.PostRotation.value;\n\n\t\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] ) layerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t} else if ( curveNode.curves.morph !== undefined ) {\n\n\t\t\t\t\t\t\tif ( layerCurveNodes[ i ] === undefined ) {\n\n\t\t\t\t\t\t\t\tconst deformerID = connections.get( child.ID ).parents.filter( function ( parent ) {\n\n\t\t\t\t\t\t\t\t\treturn parent.relationship !== undefined;\n\n\t\t\t\t\t\t\t\t} )[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst morpherID = connections.get( deformerID ).parents[ 0 ].ID;\n\t\t\t\t\t\t\t\tconst geoID = connections.get( morpherID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\t// assuming geometry is not used in more than one model\n\t\t\t\t\t\t\t\tconst modelID = connections.get( geoID ).parents[ 0 ].ID;\n\n\t\t\t\t\t\t\t\tconst rawModel = fbxTree.Objects.Model[ modelID ];\n\n\t\t\t\t\t\t\t\tconst node = {\n\n\t\t\t\t\t\t\t\t\tmodelName: rawModel.attrName ? PropertyBinding.sanitizeNodeName( rawModel.attrName ) : '',\n\t\t\t\t\t\t\t\t\tmorphName: fbxTree.Objects.Deformer[ deformerID ].attrName,\n\n\t\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\t\tlayerCurveNodes[ i ] = node;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlayerCurveNodes[ i ][ curveNode.attr ] = curveNode;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tlayersMap.set( parseInt( nodeID ), layerCurveNodes );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn layersMap;\n\n\t}\n\n\t// parse nodes in FBXTree.Objects.AnimationStack. These are the top level node in the animation\n\t// hierarchy. Each Stack node will be used to create a AnimationClip\n\tparseAnimStacks( layersMap ) {\n\n\t\tconst rawStacks = fbxTree.Objects.AnimationStack;\n\n\t\t// connect the stacks (clips) up to the layers\n\t\tconst rawClips = {};\n\n\t\tfor ( const nodeID in rawStacks ) {\n\n\t\t\tconst children = connections.get( parseInt( nodeID ) ).children;\n\n\t\t\tif ( children.length > 1 ) {\n\n\t\t\t\t// it seems like stacks will always be associated with a single layer. But just in case there are files\n\t\t\t\t// where there are multiple layers per stack, we'll display a warning\n\t\t\t\tconsole.warn( 'THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.' );\n\n\t\t\t}\n\n\t\t\tconst layer = layersMap.get( children[ 0 ].ID );\n\n\t\t\trawClips[ nodeID ] = {\n\n\t\t\t\tname: rawStacks[ nodeID ].attrName,\n\t\t\t\tlayer: layer,\n\n\t\t\t};\n\n\t\t}\n\n\t\treturn rawClips;\n\n\t}\n\n\taddClip( rawClip ) {\n\n\t\tlet tracks = [];\n\n\t\tconst scope = this;\n\t\trawClip.layer.forEach( function ( rawTracks ) {\n\n\t\t\ttracks = tracks.concat( scope.generateTracks( rawTracks ) );\n\n\t\t} );\n\n\t\treturn new AnimationClip( rawClip.name, - 1, tracks );\n\n\t}\n\n\tgenerateTracks( rawTracks ) {\n\n\t\tconst tracks = [];\n\n\t\tlet initialPosition = new Vector3();\n\t\tlet initialRotation = new Quaternion();\n\t\tlet initialScale = new Vector3();\n\n\t\tif ( rawTracks.transform ) rawTracks.transform.decompose( initialPosition, initialRotation, initialScale );\n\n\t\tinitialPosition = initialPosition.toArray();\n\t\tinitialRotation = new Euler().setFromQuaternion( initialRotation, rawTracks.eulerOrder ).toArray();\n\t\tinitialScale = initialScale.toArray();\n\n\t\tif ( rawTracks.T !== undefined && Object.keys( rawTracks.T.curves ).length > 0 ) {\n\n\t\t\tconst positionTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.T.curves, initialPosition, 'position' );\n\t\t\tif ( positionTrack !== undefined ) tracks.push( positionTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.R !== undefined && Object.keys( rawTracks.R.curves ).length > 0 ) {\n\n\t\t\tconst rotationTrack = this.generateRotationTrack( rawTracks.modelName, rawTracks.R.curves, initialRotation, rawTracks.preRotation, rawTracks.postRotation, rawTracks.eulerOrder );\n\t\t\tif ( rotationTrack !== undefined ) tracks.push( rotationTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.S !== undefined && Object.keys( rawTracks.S.curves ).length > 0 ) {\n\n\t\t\tconst scaleTrack = this.generateVectorTrack( rawTracks.modelName, rawTracks.S.curves, initialScale, 'scale' );\n\t\t\tif ( scaleTrack !== undefined ) tracks.push( scaleTrack );\n\n\t\t}\n\n\t\tif ( rawTracks.DeformPercent !== undefined ) {\n\n\t\t\tconst morphTrack = this.generateMorphTrack( rawTracks );\n\t\t\tif ( morphTrack !== undefined ) tracks.push( morphTrack );\n\n\t\t}\n\n\t\treturn tracks;\n\n\t}\n\n\tgenerateVectorTrack( modelName, curves, initialValue, type ) {\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\treturn new VectorKeyframeTrack( modelName + '.' + type, times, values );\n\n\t}\n\n\tgenerateRotationTrack( modelName, curves, initialValue, preRotation, postRotation, eulerOrder ) {\n\n\t\tif ( curves.x !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.x );\n\t\t\tcurves.x.values = curves.x.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tif ( curves.y !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.y );\n\t\t\tcurves.y.values = curves.y.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tif ( curves.z !== undefined ) {\n\n\t\t\tthis.interpolateRotations( curves.z );\n\t\t\tcurves.z.values = curves.z.values.map( MathUtils.degToRad );\n\n\t\t}\n\n\t\tconst times = this.getTimesForAllAxes( curves );\n\t\tconst values = this.getKeyframeTrackValues( times, curves, initialValue );\n\n\t\tif ( preRotation !== undefined ) {\n\n\t\t\tpreRotation = preRotation.map( MathUtils.degToRad );\n\t\t\tpreRotation.push( eulerOrder );\n\n\t\t\tpreRotation = new Euler().fromArray( preRotation );\n\t\t\tpreRotation = new Quaternion().setFromEuler( preRotation );\n\n\t\t}\n\n\t\tif ( postRotation !== undefined ) {\n\n\t\t\tpostRotation = postRotation.map( MathUtils.degToRad );\n\t\t\tpostRotation.push( eulerOrder );\n\n\t\t\tpostRotation = new Euler().fromArray( postRotation );\n\t\t\tpostRotation = new Quaternion().setFromEuler( postRotation ).invert();\n\n\t\t}\n\n\t\tconst quaternion = new Quaternion();\n\t\tconst euler = new Euler();\n\n\t\tconst quaternionValues = [];\n\n\t\tfor ( let i = 0; i < values.length; i += 3 ) {\n\n\t\t\teuler.set( values[ i ], values[ i + 1 ], values[ i + 2 ], eulerOrder );\n\n\t\t\tquaternion.setFromEuler( euler );\n\n\t\t\tif ( preRotation !== undefined ) quaternion.premultiply( preRotation );\n\t\t\tif ( postRotation !== undefined ) quaternion.multiply( postRotation );\n\n\t\t\tquaternion.toArray( quaternionValues, ( i / 3 ) * 4 );\n\n\t\t}\n\n\t\treturn new QuaternionKeyframeTrack( modelName + '.quaternion', times, quaternionValues );\n\n\t}\n\n\tgenerateMorphTrack( rawTracks ) {\n\n\t\tconst curves = rawTracks.DeformPercent.curves.morph;\n\t\tconst values = curves.values.map( function ( val ) {\n\n\t\t\treturn val / 100;\n\n\t\t} );\n\n\t\tconst morphNum = sceneGraph.getObjectByName( rawTracks.modelName ).morphTargetDictionary[ rawTracks.morphName ];\n\n\t\treturn new NumberKeyframeTrack( rawTracks.modelName + '.morphTargetInfluences[' + morphNum + ']', curves.times, values );\n\n\t}\n\n\t// For all animated objects, times are defined separately for each axis\n\t// Here we'll combine the times into one sorted array without duplicates\n\tgetTimesForAllAxes( curves ) {\n\n\t\tlet times = [];\n\n\t\t// first join together the times for each axis, if defined\n\t\tif ( curves.x !== undefined ) times = times.concat( curves.x.times );\n\t\tif ( curves.y !== undefined ) times = times.concat( curves.y.times );\n\t\tif ( curves.z !== undefined ) times = times.concat( curves.z.times );\n\n\t\t// then sort them\n\t\ttimes = times.sort( function ( a, b ) {\n\n\t\t\treturn a - b;\n\n\t\t} );\n\n\t\t// and remove duplicates\n\t\tif ( times.length > 1 ) {\n\n\t\t\tlet targetIndex = 1;\n\t\t\tlet lastValue = times[ 0 ];\n\t\t\tfor ( let i = 1; i < times.length; i ++ ) {\n\n\t\t\t\tconst currentValue = times[ i ];\n\t\t\t\tif ( currentValue !== lastValue ) {\n\n\t\t\t\t\ttimes[ targetIndex ] = currentValue;\n\t\t\t\t\tlastValue = currentValue;\n\t\t\t\t\ttargetIndex ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttimes = times.slice( 0, targetIndex );\n\n\t\t}\n\n\t\treturn times;\n\n\t}\n\n\tgetKeyframeTrackValues( times, curves, initialValue ) {\n\n\t\tconst prevValue = initialValue;\n\n\t\tconst values = [];\n\n\t\tlet xIndex = - 1;\n\t\tlet yIndex = - 1;\n\t\tlet zIndex = - 1;\n\n\t\ttimes.forEach( function ( time ) {\n\n\t\t\tif ( curves.x ) xIndex = curves.x.times.indexOf( time );\n\t\t\tif ( curves.y ) yIndex = curves.y.times.indexOf( time );\n\t\t\tif ( curves.z ) zIndex = curves.z.times.indexOf( time );\n\n\t\t\t// if there is an x value defined for this frame, use that\n\t\t\tif ( xIndex !== - 1 ) {\n\n\t\t\t\tconst xValue = curves.x.values[ xIndex ];\n\t\t\t\tvalues.push( xValue );\n\t\t\t\tprevValue[ 0 ] = xValue;\n\n\t\t\t} else {\n\n\t\t\t\t// otherwise use the x value from the previous frame\n\t\t\t\tvalues.push( prevValue[ 0 ] );\n\n\t\t\t}\n\n\t\t\tif ( yIndex !== - 1 ) {\n\n\t\t\t\tconst yValue = curves.y.values[ yIndex ];\n\t\t\t\tvalues.push( yValue );\n\t\t\t\tprevValue[ 1 ] = yValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 1 ] );\n\n\t\t\t}\n\n\t\t\tif ( zIndex !== - 1 ) {\n\n\t\t\t\tconst zValue = curves.z.values[ zIndex ];\n\t\t\t\tvalues.push( zValue );\n\t\t\t\tprevValue[ 2 ] = zValue;\n\n\t\t\t} else {\n\n\t\t\t\tvalues.push( prevValue[ 2 ] );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn values;\n\n\t}\n\n\t// Rotations are defined as Euler angles which can have values  of any size\n\t// These will be converted to quaternions which don't support values greater than\n\t// PI, so we'll interpolate large rotations\n\tinterpolateRotations( curve ) {\n\n\t\tfor ( let i = 1; i < curve.values.length; i ++ ) {\n\n\t\t\tconst initialValue = curve.values[ i - 1 ];\n\t\t\tconst valuesSpan = curve.values[ i ] - initialValue;\n\n\t\t\tconst absoluteSpan = Math.abs( valuesSpan );\n\n\t\t\tif ( absoluteSpan >= 180 ) {\n\n\t\t\t\tconst numSubIntervals = absoluteSpan / 180;\n\n\t\t\t\tconst step = valuesSpan / numSubIntervals;\n\t\t\t\tlet nextValue = initialValue + step;\n\n\t\t\t\tconst initialTime = curve.times[ i - 1 ];\n\t\t\t\tconst timeSpan = curve.times[ i ] - initialTime;\n\t\t\t\tconst interval = timeSpan / numSubIntervals;\n\t\t\t\tlet nextTime = initialTime + interval;\n\n\t\t\t\tconst interpolatedTimes = [];\n\t\t\t\tconst interpolatedValues = [];\n\n\t\t\t\twhile ( nextTime < curve.times[ i ] ) {\n\n\t\t\t\t\tinterpolatedTimes.push( nextTime );\n\t\t\t\t\tnextTime += interval;\n\n\t\t\t\t\tinterpolatedValues.push( nextValue );\n\t\t\t\t\tnextValue += step;\n\n\t\t\t\t}\n\n\t\t\t\tcurve.times = inject( curve.times, i, interpolatedTimes );\n\t\t\t\tcurve.values = inject( curve.values, i, interpolatedValues );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\n// parse an FBX file in ASCII format\nclass TextParser {\n\n\tgetPrevNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 2 ];\n\n\t}\n\n\tgetCurrentNode() {\n\n\t\treturn this.nodeStack[ this.currentIndent - 1 ];\n\n\t}\n\n\tgetCurrentProp() {\n\n\t\treturn this.currentProp;\n\n\t}\n\n\tpushStack( node ) {\n\n\t\tthis.nodeStack.push( node );\n\t\tthis.currentIndent += 1;\n\n\t}\n\n\tpopStack() {\n\n\t\tthis.nodeStack.pop();\n\t\tthis.currentIndent -= 1;\n\n\t}\n\n\tsetCurrentProp( val, name ) {\n\n\t\tthis.currentProp = val;\n\t\tthis.currentPropName = name;\n\n\t}\n\n\tparse( text ) {\n\n\t\tthis.currentIndent = 0;\n\n\t\tthis.allNodes = new FBXTree();\n\t\tthis.nodeStack = [];\n\t\tthis.currentProp = [];\n\t\tthis.currentPropName = '';\n\n\t\tconst scope = this;\n\n\t\tconst split = text.split( /[\\r\\n]+/ );\n\n\t\tsplit.forEach( function ( line, i ) {\n\n\t\t\tconst matchComment = line.match( /^[\\s\\t]*;/ );\n\t\t\tconst matchEmpty = line.match( /^[\\s\\t]*$/ );\n\n\t\t\tif ( matchComment || matchEmpty ) return;\n\n\t\t\tconst matchBeginning = line.match( '^\\\\t{' + scope.currentIndent + '}(\\\\w+):(.*){', '' );\n\t\t\tconst matchProperty = line.match( '^\\\\t{' + ( scope.currentIndent ) + '}(\\\\w+):[\\\\s\\\\t\\\\r\\\\n](.*)' );\n\t\t\tconst matchEnd = line.match( '^\\\\t{' + ( scope.currentIndent - 1 ) + '}}' );\n\n\t\t\tif ( matchBeginning ) {\n\n\t\t\t\tscope.parseNodeBegin( line, matchBeginning );\n\n\t\t\t} else if ( matchProperty ) {\n\n\t\t\t\tscope.parseNodeProperty( line, matchProperty, split[ ++ i ] );\n\n\t\t\t} else if ( matchEnd ) {\n\n\t\t\t\tscope.popStack();\n\n\t\t\t} else if ( line.match( /^[^\\s\\t}]/ ) ) {\n\n\t\t\t\t// large arrays are split over multiple lines terminated with a ',' character\n\t\t\t\t// if this is encountered the line needs to be joined to the previous line\n\t\t\t\tscope.parseNodePropertyContinued( line );\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.allNodes;\n\n\t}\n\n\tparseNodeBegin( line, property ) {\n\n\t\tconst nodeName = property[ 1 ].trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\tconst nodeAttrs = property[ 2 ].split( ',' ).map( function ( attr ) {\n\n\t\t\treturn attr.trim().replace( /^\"/, '' ).replace( /\"$/, '' );\n\n\t\t} );\n\n\t\tconst node = { name: nodeName };\n\t\tconst attrs = this.parseNodeAttr( nodeAttrs );\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\t// a top node\n\t\tif ( this.currentIndent === 0 ) {\n\n\t\t\tthis.allNodes.add( nodeName, node );\n\n\t\t} else { // a subnode\n\n\t\t\t// if the subnode already exists, append it\n\t\t\tif ( nodeName in currentNode ) {\n\n\t\t\t\t// special case Pose needs PoseNodes as an array\n\t\t\t\tif ( nodeName === 'PoseNode' ) {\n\n\t\t\t\t\tcurrentNode.PoseNode.push( node );\n\n\t\t\t\t} else if ( currentNode[ nodeName ].id !== undefined ) {\n\n\t\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\t\tcurrentNode[ nodeName ][ currentNode[ nodeName ].id ] = currentNode[ nodeName ];\n\n\t\t\t\t}\n\n\t\t\t\tif ( attrs.id !== '' ) currentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( typeof attrs.id === 'number' ) {\n\n\t\t\t\tcurrentNode[ nodeName ] = {};\n\t\t\t\tcurrentNode[ nodeName ][ attrs.id ] = node;\n\n\t\t\t} else if ( nodeName !== 'Properties70' ) {\n\n\t\t\t\tif ( nodeName === 'PoseNode' )\tcurrentNode[ nodeName ] = [ node ];\n\t\t\t\telse currentNode[ nodeName ] = node;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( typeof attrs.id === 'number' ) node.id = attrs.id;\n\t\tif ( attrs.name !== '' ) node.attrName = attrs.name;\n\t\tif ( attrs.type !== '' ) node.attrType = attrs.type;\n\n\t\tthis.pushStack( node );\n\n\t}\n\n\tparseNodeAttr( attrs ) {\n\n\t\tlet id = attrs[ 0 ];\n\n\t\tif ( attrs[ 0 ] !== '' ) {\n\n\t\t\tid = parseInt( attrs[ 0 ] );\n\n\t\t\tif ( isNaN( id ) ) {\n\n\t\t\t\tid = attrs[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet name = '', type = '';\n\n\t\tif ( attrs.length > 1 ) {\n\n\t\t\tname = attrs[ 1 ].replace( /^(\\w+)::/, '' );\n\t\t\ttype = attrs[ 2 ];\n\n\t\t}\n\n\t\treturn { id: id, name: name, type: type };\n\n\t}\n\n\tparseNodeProperty( line, property, contentLine ) {\n\n\t\tlet propName = property[ 1 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\t\tlet propValue = property[ 2 ].replace( /^\"/, '' ).replace( /\"$/, '' ).trim();\n\n\t\t// for special case: base64 image data follows \"Content: ,\" line\n\t\t//\tContent: ,\n\t\t//\t \"/9j/4RDaRXhpZgAATU0A...\"\n\t\tif ( propName === 'Content' && propValue === ',' ) {\n\n\t\t\tpropValue = contentLine.replace( /\"/g, '' ).replace( /,$/, '' ).trim();\n\n\t\t}\n\n\t\tconst currentNode = this.getCurrentNode();\n\t\tconst parentName = currentNode.name;\n\n\t\tif ( parentName === 'Properties70' ) {\n\n\t\t\tthis.parseNodeSpecialProperty( line, propName, propValue );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Connections\n\t\tif ( propName === 'C' ) {\n\n\t\t\tconst connProps = propValue.split( ',' ).slice( 1 );\n\t\t\tconst from = parseInt( connProps[ 0 ] );\n\t\t\tconst to = parseInt( connProps[ 1 ] );\n\n\t\t\tlet rest = propValue.split( ',' ).slice( 3 );\n\n\t\t\trest = rest.map( function ( elem ) {\n\n\t\t\t\treturn elem.trim().replace( /^\"/, '' );\n\n\t\t\t} );\n\n\t\t\tpropName = 'connections';\n\t\t\tpropValue = [ from, to ];\n\t\t\tappend( propValue, rest );\n\n\t\t\tif ( currentNode[ propName ] === undefined ) {\n\n\t\t\t\tcurrentNode[ propName ] = [];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Node\n\t\tif ( propName === 'Node' ) currentNode.id = propValue;\n\n\t\t// connections\n\t\tif ( propName in currentNode && Array.isArray( currentNode[ propName ] ) ) {\n\n\t\t\tcurrentNode[ propName ].push( propValue );\n\n\t\t} else {\n\n\t\t\tif ( propName !== 'a' ) currentNode[ propName ] = propValue;\n\t\t\telse currentNode.a = propValue;\n\n\t\t}\n\n\t\tthis.setCurrentProp( currentNode, propName );\n\n\t\t// convert string to array, unless it ends in ',' in which case more will be added to it\n\t\tif ( propName === 'a' && propValue.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( propValue );\n\n\t\t}\n\n\t}\n\n\tparseNodePropertyContinued( line ) {\n\n\t\tconst currentNode = this.getCurrentNode();\n\n\t\tcurrentNode.a += line;\n\n\t\t// if the line doesn't end in ',' we have reached the end of the property value\n\t\t// so convert the string to an array\n\t\tif ( line.slice( - 1 ) !== ',' ) {\n\n\t\t\tcurrentNode.a = parseNumberArray( currentNode.a );\n\n\t\t}\n\n\t}\n\n\t// parse \"Property70\"\n\tparseNodeSpecialProperty( line, propName, propValue ) {\n\n\t\t// split this\n\t\t// P: \"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\",1,1,1\n\t\t// into array like below\n\t\t// [\"Lcl Scaling\", \"Lcl Scaling\", \"\", \"A\", \"1,1,1\" ]\n\t\tconst props = propValue.split( '\",' ).map( function ( prop ) {\n\n\t\t\treturn prop.trim().replace( /^\\\"/, '' ).replace( /\\s/, '_' );\n\n\t\t} );\n\n\t\tconst innerPropName = props[ 0 ];\n\t\tconst innerPropType1 = props[ 1 ];\n\t\tconst innerPropType2 = props[ 2 ];\n\t\tconst innerPropFlag = props[ 3 ];\n\t\tlet innerPropValue = props[ 4 ];\n\n\t\t// cast values where needed, otherwise leave as strings\n\t\tswitch ( innerPropType1 ) {\n\n\t\t\tcase 'int':\n\t\t\tcase 'enum':\n\t\t\tcase 'bool':\n\t\t\tcase 'ULongLong':\n\t\t\tcase 'double':\n\t\t\tcase 'Number':\n\t\t\tcase 'FieldOfView':\n\t\t\t\tinnerPropValue = parseFloat( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t\tcase 'Color':\n\t\t\tcase 'ColorRGB':\n\t\t\tcase 'Vector3D':\n\t\t\tcase 'Lcl_Translation':\n\t\t\tcase 'Lcl_Rotation':\n\t\t\tcase 'Lcl_Scaling':\n\t\t\t\tinnerPropValue = parseNumberArray( innerPropValue );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\t// CAUTION: these props must append to parent's parent\n\t\tthis.getPrevNode()[ innerPropName ] = {\n\n\t\t\t'type': innerPropType1,\n\t\t\t'type2': innerPropType2,\n\t\t\t'flag': innerPropFlag,\n\t\t\t'value': innerPropValue\n\n\t\t};\n\n\t\tthis.setCurrentProp( this.getPrevNode(), innerPropName );\n\n\t}\n\n}\n\n// Parse an FBX file in Binary format\nclass BinaryParser {\n\n\tparse( buffer ) {\n\n\t\tconst reader = new BinaryReader( buffer );\n\t\treader.skip( 23 ); // skip magic 23 bytes\n\n\t\tconst version = reader.getUint32();\n\n\t\tif ( version < 6400 ) {\n\n\t\t\tthrow new Error( 'THREE.FBXLoader: FBX version not supported, FileVersion: ' + version );\n\n\t\t}\n\n\t\tconst allNodes = new FBXTree();\n\n\t\twhile ( ! this.endOfContent( reader ) ) {\n\n\t\t\tconst node = this.parseNode( reader, version );\n\t\t\tif ( node !== null ) allNodes.add( node.name, node );\n\n\t\t}\n\n\t\treturn allNodes;\n\n\t}\n\n\t// Check if reader has reached the end of content.\n\tendOfContent( reader ) {\n\n\t\t// footer size: 160bytes + 16-byte alignment padding\n\t\t// - 16bytes: magic\n\t\t// - padding til 16-byte alignment (at least 1byte?)\n\t\t//\t(seems like some exporters embed fixed 15 or 16bytes?)\n\t\t// - 4bytes: magic\n\t\t// - 4bytes: version\n\t\t// - 120bytes: zero\n\t\t// - 16bytes: magic\n\t\tif ( reader.size() % 16 === 0 ) {\n\n\t\t\treturn ( ( reader.getOffset() + 160 + 16 ) & ~ 0xf ) >= reader.size();\n\n\t\t} else {\n\n\t\t\treturn reader.getOffset() + 160 + 16 >= reader.size();\n\n\t\t}\n\n\t}\n\n\t// recursively parse nodes until the end of the file is reached\n\tparseNode( reader, version ) {\n\n\t\tconst node = {};\n\n\t\t// The first three data sizes depends on version.\n\t\tconst endOffset = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\t\tconst numProperties = ( version >= 7500 ) ? reader.getUint64() : reader.getUint32();\n\n\t\t( version >= 7500 ) ? reader.getUint64() : reader.getUint32(); // the returned propertyListLen is not used\n\n\t\tconst nameLen = reader.getUint8();\n\t\tconst name = reader.getString( nameLen );\n\n\t\t// Regards this node as NULL-record if endOffset is zero\n\t\tif ( endOffset === 0 ) return null;\n\n\t\tconst propertyList = [];\n\n\t\tfor ( let i = 0; i < numProperties; i ++ ) {\n\n\t\t\tpropertyList.push( this.parseProperty( reader ) );\n\n\t\t}\n\n\t\t// Regards the first three elements in propertyList as id, attrName, and attrType\n\t\tconst id = propertyList.length > 0 ? propertyList[ 0 ] : '';\n\t\tconst attrName = propertyList.length > 1 ? propertyList[ 1 ] : '';\n\t\tconst attrType = propertyList.length > 2 ? propertyList[ 2 ] : '';\n\n\t\t// check if this node represents just a single property\n\t\t// like (name, 0) set or (name2, [0, 1, 2]) set of {name: 0, name2: [0, 1, 2]}\n\t\tnode.singleProperty = ( numProperties === 1 && reader.getOffset() === endOffset ) ? true : false;\n\n\t\twhile ( endOffset > reader.getOffset() ) {\n\n\t\t\tconst subNode = this.parseNode( reader, version );\n\n\t\t\tif ( subNode !== null ) this.parseSubNode( name, node, subNode );\n\n\t\t}\n\n\t\tnode.propertyList = propertyList; // raw property list used by parent\n\n\t\tif ( typeof id === 'number' ) node.id = id;\n\t\tif ( attrName !== '' ) node.attrName = attrName;\n\t\tif ( attrType !== '' ) node.attrType = attrType;\n\t\tif ( name !== '' ) node.name = name;\n\n\t\treturn node;\n\n\t}\n\n\tparseSubNode( name, node, subNode ) {\n\n\t\t// special case: child node is single property\n\t\tif ( subNode.singleProperty === true ) {\n\n\t\t\tconst value = subNode.propertyList[ 0 ];\n\n\t\t\tif ( Array.isArray( value ) ) {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t\tsubNode.a = value;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = value;\n\n\t\t\t}\n\n\t\t} else if ( name === 'Connections' && subNode.name === 'C' ) {\n\n\t\t\tconst array = [];\n\n\t\t\tsubNode.propertyList.forEach( function ( property, i ) {\n\n\t\t\t\t// first Connection is FBX type (OO, OP, etc.). We'll discard these\n\t\t\t\tif ( i !== 0 ) array.push( property );\n\n\t\t\t} );\n\n\t\t\tif ( node.connections === undefined ) {\n\n\t\t\t\tnode.connections = [];\n\n\t\t\t}\n\n\t\t\tnode.connections.push( array );\n\n\t\t} else if ( subNode.name === 'Properties70' ) {\n\n\t\t\tconst keys = Object.keys( subNode );\n\n\t\t\tkeys.forEach( function ( key ) {\n\n\t\t\t\tnode[ key ] = subNode[ key ];\n\n\t\t\t} );\n\n\t\t} else if ( name === 'Properties70' && subNode.name === 'P' ) {\n\n\t\t\tlet innerPropName = subNode.propertyList[ 0 ];\n\t\t\tlet innerPropType1 = subNode.propertyList[ 1 ];\n\t\t\tconst innerPropType2 = subNode.propertyList[ 2 ];\n\t\t\tconst innerPropFlag = subNode.propertyList[ 3 ];\n\t\t\tlet innerPropValue;\n\n\t\t\tif ( innerPropName.indexOf( 'Lcl ' ) === 0 ) innerPropName = innerPropName.replace( 'Lcl ', 'Lcl_' );\n\t\t\tif ( innerPropType1.indexOf( 'Lcl ' ) === 0 ) innerPropType1 = innerPropType1.replace( 'Lcl ', 'Lcl_' );\n\n\t\t\tif ( innerPropType1 === 'Color' || innerPropType1 === 'ColorRGB' || innerPropType1 === 'Vector' || innerPropType1 === 'Vector3D' || innerPropType1.indexOf( 'Lcl_' ) === 0 ) {\n\n\t\t\t\tinnerPropValue = [\n\t\t\t\t\tsubNode.propertyList[ 4 ],\n\t\t\t\t\tsubNode.propertyList[ 5 ],\n\t\t\t\t\tsubNode.propertyList[ 6 ]\n\t\t\t\t];\n\n\t\t\t} else {\n\n\t\t\t\tinnerPropValue = subNode.propertyList[ 4 ];\n\n\t\t\t}\n\n\t\t\t// this will be copied to parent, see above\n\t\t\tnode[ innerPropName ] = {\n\n\t\t\t\t'type': innerPropType1,\n\t\t\t\t'type2': innerPropType2,\n\t\t\t\t'flag': innerPropFlag,\n\t\t\t\t'value': innerPropValue\n\n\t\t\t};\n\n\t\t} else if ( node[ subNode.name ] === undefined ) {\n\n\t\t\tif ( typeof subNode.id === 'number' ) {\n\n\t\t\t\tnode[ subNode.name ] = {};\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t} else {\n\n\t\t\t\tnode[ subNode.name ] = subNode;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( subNode.name === 'PoseNode' ) {\n\n\t\t\t\tif ( ! Array.isArray( node[ subNode.name ] ) ) {\n\n\t\t\t\t\tnode[ subNode.name ] = [ node[ subNode.name ] ];\n\n\t\t\t\t}\n\n\t\t\t\tnode[ subNode.name ].push( subNode );\n\n\t\t\t} else if ( node[ subNode.name ][ subNode.id ] === undefined ) {\n\n\t\t\t\tnode[ subNode.name ][ subNode.id ] = subNode;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tparseProperty( reader ) {\n\n\t\tconst type = reader.getString( 1 );\n\t\tlet length;\n\n\t\tswitch ( type ) {\n\n\t\t\tcase 'C':\n\t\t\t\treturn reader.getBoolean();\n\n\t\t\tcase 'D':\n\t\t\t\treturn reader.getFloat64();\n\n\t\t\tcase 'F':\n\t\t\t\treturn reader.getFloat32();\n\n\t\t\tcase 'I':\n\t\t\t\treturn reader.getInt32();\n\n\t\t\tcase 'L':\n\t\t\t\treturn reader.getInt64();\n\n\t\t\tcase 'R':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getArrayBuffer( length );\n\n\t\t\tcase 'S':\n\t\t\t\tlength = reader.getUint32();\n\t\t\t\treturn reader.getString( length );\n\n\t\t\tcase 'Y':\n\t\t\t\treturn reader.getInt16();\n\n\t\t\tcase 'b':\n\t\t\tcase 'c':\n\t\t\tcase 'd':\n\t\t\tcase 'f':\n\t\t\tcase 'i':\n\t\t\tcase 'l':\n\n\t\t\t\tconst arrayLength = reader.getUint32();\n\t\t\t\tconst encoding = reader.getUint32(); // 0: non-compressed, 1: compressed\n\t\t\t\tconst compressedLength = reader.getUint32();\n\n\t\t\t\tif ( encoding === 0 ) {\n\n\t\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\t\tcase 'b':\n\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\treturn reader.getBooleanArray( arrayLength );\n\n\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\treturn reader.getFloat64Array( arrayLength );\n\n\t\t\t\t\t\tcase 'f':\n\t\t\t\t\t\t\treturn reader.getFloat32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'i':\n\t\t\t\t\t\t\treturn reader.getInt32Array( arrayLength );\n\n\t\t\t\t\t\tcase 'l':\n\t\t\t\t\t\t\treturn reader.getInt64Array( arrayLength );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( typeof fflate === 'undefined' ) {\n\n\t\t\t\t\tconsole.error( 'THREE.FBXLoader: External library fflate.min.js required.' );\n\n\t\t\t\t}\n\n\t\t\t\tconst data = fflate.unzlibSync( new Uint8Array( reader.getArrayBuffer( compressedLength ) ) ); // eslint-disable-line no-undef\n\t\t\t\tconst reader2 = new BinaryReader( data.buffer );\n\n\t\t\t\tswitch ( type ) {\n\n\t\t\t\t\tcase 'b':\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\treturn reader2.getBooleanArray( arrayLength );\n\n\t\t\t\t\tcase 'd':\n\t\t\t\t\t\treturn reader2.getFloat64Array( arrayLength );\n\n\t\t\t\t\tcase 'f':\n\t\t\t\t\t\treturn reader2.getFloat32Array( arrayLength );\n\n\t\t\t\t\tcase 'i':\n\t\t\t\t\t\treturn reader2.getInt32Array( arrayLength );\n\n\t\t\t\t\tcase 'l':\n\t\t\t\t\t\treturn reader2.getInt64Array( arrayLength );\n\n\t\t\t\t}\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.FBXLoader: Unknown property type ' + type );\n\n\t\t}\n\n\t}\n\n}\n\nclass BinaryReader {\n\n\tconstructor( buffer, littleEndian ) {\n\n\t\tthis.dv = new DataView( buffer );\n\t\tthis.offset = 0;\n\t\tthis.littleEndian = ( littleEndian !== undefined ) ? littleEndian : true;\n\n\t}\n\n\tgetOffset() {\n\n\t\treturn this.offset;\n\n\t}\n\n\tsize() {\n\n\t\treturn this.dv.buffer.byteLength;\n\n\t}\n\n\tskip( length ) {\n\n\t\tthis.offset += length;\n\n\t}\n\n\t// seems like true/false representation depends on exporter.\n\t// true: 1 or 'Y'(=0x59), false: 0 or 'T'(=0x54)\n\t// then sees LSB.\n\tgetBoolean() {\n\n\t\treturn ( this.getUint8() & 1 ) === 1;\n\n\t}\n\n\tgetBooleanArray( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getBoolean() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint8() {\n\n\t\tconst value = this.dv.getUint8( this.offset );\n\t\tthis.offset += 1;\n\t\treturn value;\n\n\t}\n\n\tgetInt16() {\n\n\t\tconst value = this.dv.getInt16( this.offset, this.littleEndian );\n\t\tthis.offset += 2;\n\t\treturn value;\n\n\t}\n\n\tgetInt32() {\n\n\t\tconst value = this.dv.getInt32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetInt32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetUint32() {\n\n\t\tconst value = this.dv.getUint32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\t// JavaScript doesn't support 64-bit integer so calculate this here\n\t// 1 << 32 will return 1 so using multiply operation instead here.\n\t// There's a possibility that this method returns wrong value if the value\n\t// is out of the range between Number.MAX_SAFE_INTEGER and Number.MIN_SAFE_INTEGER.\n\t// TODO: safely handle 64-bit integer\n\tgetInt64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\t// calculate negative value\n\t\tif ( high & 0x80000000 ) {\n\n\t\t\thigh = ~ high & 0xFFFFFFFF;\n\t\t\tlow = ~ low & 0xFFFFFFFF;\n\n\t\t\tif ( low === 0xFFFFFFFF ) high = ( high + 1 ) & 0xFFFFFFFF;\n\n\t\t\tlow = ( low + 1 ) & 0xFFFFFFFF;\n\n\t\t\treturn - ( high * 0x100000000 + low );\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetInt64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getInt64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\t// Note: see getInt64() comment\n\tgetUint64() {\n\n\t\tlet low, high;\n\n\t\tif ( this.littleEndian ) {\n\n\t\t\tlow = this.getUint32();\n\t\t\thigh = this.getUint32();\n\n\t\t} else {\n\n\t\t\thigh = this.getUint32();\n\t\t\tlow = this.getUint32();\n\n\t\t}\n\n\t\treturn high * 0x100000000 + low;\n\n\t}\n\n\tgetFloat32() {\n\n\t\tconst value = this.dv.getFloat32( this.offset, this.littleEndian );\n\t\tthis.offset += 4;\n\t\treturn value;\n\n\t}\n\n\tgetFloat32Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat32() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetFloat64() {\n\n\t\tconst value = this.dv.getFloat64( this.offset, this.littleEndian );\n\t\tthis.offset += 8;\n\t\treturn value;\n\n\t}\n\n\tgetFloat64Array( size ) {\n\n\t\tconst a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta.push( this.getFloat64() );\n\n\t\t}\n\n\t\treturn a;\n\n\t}\n\n\tgetArrayBuffer( size ) {\n\n\t\tconst value = this.dv.buffer.slice( this.offset, this.offset + size );\n\t\tthis.offset += size;\n\t\treturn value;\n\n\t}\n\n\tgetString( size ) {\n\n\t\t// note: safari 9 doesn't support Uint8Array.indexOf; create intermediate array instead\n\t\tlet a = [];\n\n\t\tfor ( let i = 0; i < size; i ++ ) {\n\n\t\t\ta[ i ] = this.getUint8();\n\n\t\t}\n\n\t\tconst nullByte = a.indexOf( 0 );\n\t\tif ( nullByte >= 0 ) a = a.slice( 0, nullByte );\n\n\t\treturn LoaderUtils.decodeText( new Uint8Array( a ) );\n\n\t}\n\n}\n\n// FBXTree holds a representation of the FBX data, returned by the TextParser ( FBX ASCII format)\n// and BinaryParser( FBX Binary format)\nclass FBXTree {\n\n\tadd( key, val ) {\n\n\t\tthis[ key ] = val;\n\n\t}\n\n}\n\n// ************** UTILITY FUNCTIONS **************\n\nfunction isFbxFormatBinary( buffer ) {\n\n\tconst CORRECT = 'Kaydara\\u0020FBX\\u0020Binary\\u0020\\u0020\\0';\n\n\treturn buffer.byteLength >= CORRECT.length && CORRECT === convertArrayBufferToString( buffer, 0, CORRECT.length );\n\n}\n\nfunction isFbxFormatASCII( text ) {\n\n\tconst CORRECT = [ 'K', 'a', 'y', 'd', 'a', 'r', 'a', '\\\\', 'F', 'B', 'X', '\\\\', 'B', 'i', 'n', 'a', 'r', 'y', '\\\\', '\\\\' ];\n\n\tlet cursor = 0;\n\n\tfunction read( offset ) {\n\n\t\tconst result = text[ offset - 1 ];\n\t\ttext = text.slice( cursor + offset );\n\t\tcursor ++;\n\t\treturn result;\n\n\t}\n\n\tfor ( let i = 0; i < CORRECT.length; ++ i ) {\n\n\t\tconst num = read( 1 );\n\t\tif ( num === CORRECT[ i ] ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nfunction getFbxVersion( text ) {\n\n\tconst versionRegExp = /FBXVersion: (\\d+)/;\n\tconst match = text.match( versionRegExp );\n\n\tif ( match ) {\n\n\t\tconst version = parseInt( match[ 1 ] );\n\t\treturn version;\n\n\t}\n\n\tthrow new Error( 'THREE.FBXLoader: Cannot find the version number for the file given.' );\n\n}\n\n// Converts FBX ticks into real time seconds.\nfunction convertFBXTimeToSeconds( time ) {\n\n\treturn time / 46186158000;\n\n}\n\nconst dataArray = [];\n\n// extracts the data from the correct position in the FBX array based on indexing type\nfunction getData( polygonVertexIndex, polygonIndex, vertexIndex, infoObject ) {\n\n\tlet index;\n\n\tswitch ( infoObject.mappingType ) {\n\n\t\tcase 'ByPolygonVertex' :\n\t\t\tindex = polygonVertexIndex;\n\t\t\tbreak;\n\t\tcase 'ByPolygon' :\n\t\t\tindex = polygonIndex;\n\t\t\tbreak;\n\t\tcase 'ByVertice' :\n\t\t\tindex = vertexIndex;\n\t\t\tbreak;\n\t\tcase 'AllSame' :\n\t\t\tindex = infoObject.indices[ 0 ];\n\t\t\tbreak;\n\t\tdefault :\n\t\t\tconsole.warn( 'THREE.FBXLoader: unknown attribute mapping type ' + infoObject.mappingType );\n\n\t}\n\n\tif ( infoObject.referenceType === 'IndexToDirect' ) index = infoObject.indices[ index ];\n\n\tconst from = index * infoObject.dataSize;\n\tconst to = from + infoObject.dataSize;\n\n\treturn slice( dataArray, infoObject.buffer, from, to );\n\n}\n\nconst tempEuler = new Euler();\nconst tempVec = new Vector3();\n\n// generate transformation from FBX transform data\n// ref: https://help.autodesk.com/view/FBX/2017/ENU/?guid=__files_GUID_10CDD63C_79C1_4F2D_BB28_AD2BE65A02ED_htm\n// ref: http://docs.autodesk.com/FBX/2014/ENU/FBX-SDK-Documentation/index.html?url=cpp_ref/_transformations_2main_8cxx-example.html,topicNumber=cpp_ref__transformations_2main_8cxx_example_htmlfc10a1e1-b18d-4e72-9dc0-70d0f1959f5e\nfunction generateTransform( transformData ) {\n\n\tconst lTranslationM = new Matrix4();\n\tconst lPreRotationM = new Matrix4();\n\tconst lRotationM = new Matrix4();\n\tconst lPostRotationM = new Matrix4();\n\n\tconst lScalingM = new Matrix4();\n\tconst lScalingPivotM = new Matrix4();\n\tconst lScalingOffsetM = new Matrix4();\n\tconst lRotationOffsetM = new Matrix4();\n\tconst lRotationPivotM = new Matrix4();\n\n\tconst lParentGX = new Matrix4();\n\tconst lParentLX = new Matrix4();\n\tconst lGlobalT = new Matrix4();\n\n\tconst inheritType = ( transformData.inheritType ) ? transformData.inheritType : 0;\n\n\tif ( transformData.translation ) lTranslationM.setPosition( tempVec.fromArray( transformData.translation ) );\n\n\tif ( transformData.preRotation ) {\n\n\t\tconst array = transformData.preRotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlPreRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.rotation ) {\n\n\t\tconst array = transformData.rotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\n\t}\n\n\tif ( transformData.postRotation ) {\n\n\t\tconst array = transformData.postRotation.map( MathUtils.degToRad );\n\t\tarray.push( transformData.eulerOrder );\n\t\tlPostRotationM.makeRotationFromEuler( tempEuler.fromArray( array ) );\n\t\tlPostRotationM.invert();\n\n\t}\n\n\tif ( transformData.scale ) lScalingM.scale( tempVec.fromArray( transformData.scale ) );\n\n\t// Pivots and offsets\n\tif ( transformData.scalingOffset ) lScalingOffsetM.setPosition( tempVec.fromArray( transformData.scalingOffset ) );\n\tif ( transformData.scalingPivot ) lScalingPivotM.setPosition( tempVec.fromArray( transformData.scalingPivot ) );\n\tif ( transformData.rotationOffset ) lRotationOffsetM.setPosition( tempVec.fromArray( transformData.rotationOffset ) );\n\tif ( transformData.rotationPivot ) lRotationPivotM.setPosition( tempVec.fromArray( transformData.rotationPivot ) );\n\n\t// parent transform\n\tif ( transformData.parentMatrixWorld ) {\n\n\t\tlParentLX.copy( transformData.parentMatrix );\n\t\tlParentGX.copy( transformData.parentMatrixWorld );\n\n\t}\n\n\tconst lLRM = lPreRotationM.clone().multiply( lRotationM ).multiply( lPostRotationM );\n\t// Global Rotation\n\tconst lParentGRM = new Matrix4();\n\tlParentGRM.extractRotation( lParentGX );\n\n\t// Global Shear*Scaling\n\tconst lParentTM = new Matrix4();\n\tlParentTM.copyPosition( lParentGX );\n\n\tconst lParentGRSM = lParentTM.clone().invert().multiply( lParentGX );\n\tconst lParentGSM = lParentGRM.clone().invert().multiply( lParentGRSM );\n\tconst lLSM = lScalingM;\n\n\tconst lGlobalRS = new Matrix4();\n\n\tif ( inheritType === 0 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM ).multiply( lLSM );\n\n\t} else if ( inheritType === 1 ) {\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lParentGSM ).multiply( lLRM ).multiply( lLSM );\n\n\t} else {\n\n\t\tconst lParentLSM = new Matrix4().scale( new Vector3().setFromMatrixScale( lParentLX ) );\n\t\tconst lParentLSM_inv = lParentLSM.clone().invert();\n\t\tconst lParentGSM_noLocal = lParentGSM.clone().multiply( lParentLSM_inv );\n\n\t\tlGlobalRS.copy( lParentGRM ).multiply( lLRM ).multiply( lParentGSM_noLocal ).multiply( lLSM );\n\n\t}\n\n\tconst lRotationPivotM_inv = lRotationPivotM.clone().invert();\n\tconst lScalingPivotM_inv = lScalingPivotM.clone().invert();\n\t// Calculate the local transform matrix\n\tlet lTransform = lTranslationM.clone().multiply( lRotationOffsetM ).multiply( lRotationPivotM ).multiply( lPreRotationM ).multiply( lRotationM ).multiply( lPostRotationM ).multiply( lRotationPivotM_inv ).multiply( lScalingOffsetM ).multiply( lScalingPivotM ).multiply( lScalingM ).multiply( lScalingPivotM_inv );\n\n\tconst lLocalTWithAllPivotAndOffsetInfo = new Matrix4().copyPosition( lTransform );\n\n\tconst lGlobalTranslation = lParentGX.clone().multiply( lLocalTWithAllPivotAndOffsetInfo );\n\tlGlobalT.copyPosition( lGlobalTranslation );\n\n\tlTransform = lGlobalT.clone().multiply( lGlobalRS );\n\n\t// from global to local\n\tlTransform.premultiply( lParentGX.invert() );\n\n\treturn lTransform;\n\n}\n\n// Returns the three.js intrinsic Euler order corresponding to FBX extrinsic Euler order\n// ref: http://help.autodesk.com/view/FBX/2017/ENU/?guid=__cpp_ref_class_fbx_euler_html\nfunction getEulerOrder( order ) {\n\n\torder = order || 0;\n\n\tconst enums = [\n\t\t'ZYX', // -> XYZ extrinsic\n\t\t'YZX', // -> XZY extrinsic\n\t\t'XZY', // -> YZX extrinsic\n\t\t'ZXY', // -> YXZ extrinsic\n\t\t'YXZ', // -> ZXY extrinsic\n\t\t'XYZ', // -> ZYX extrinsic\n\t\t//'SphericXYZ', // not possible to support\n\t];\n\n\tif ( order === 6 ) {\n\n\t\tconsole.warn( 'THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect.' );\n\t\treturn enums[ 0 ];\n\n\t}\n\n\treturn enums[ order ];\n\n}\n\n// Parses comma separated list of numbers and returns them an array.\n// Used internally by the TextParser\nfunction parseNumberArray( value ) {\n\n\tconst array = value.split( ',' ).map( function ( val ) {\n\n\t\treturn parseFloat( val );\n\n\t} );\n\n\treturn array;\n\n}\n\nfunction convertArrayBufferToString( buffer, from, to ) {\n\n\tif ( from === undefined ) from = 0;\n\tif ( to === undefined ) to = buffer.byteLength;\n\n\treturn LoaderUtils.decodeText( new Uint8Array( buffer, from, to ) );\n\n}\n\nfunction append( a, b ) {\n\n\tfor ( let i = 0, j = a.length, l = b.length; i < l; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n}\n\nfunction slice( a, b, from, to ) {\n\n\tfor ( let i = from, j = 0; i < to; i ++, j ++ ) {\n\n\t\ta[ j ] = b[ i ];\n\n\t}\n\n\treturn a;\n\n}\n\n// inject array a2 into array a1 at index\nfunction inject( a1, index, a2 ) {\n\n\treturn a1.slice( 0, index ).concat( a2 ).concat( a1.slice( index ) );\n\n}\n\nexport { FBXLoader };\n","import {\n\tCurve,\n\tVector3,\n\tVector4\n} from 'three';\nimport * as NURBSUtils from '../curves/NURBSUtils.js';\n\n/**\n * NURBS curve object\n *\n * Derives from Curve, overriding getPoint and getTangent.\n *\n * Implementation is based on (x, y [, z=0 [, w=1]]) control points with w=weight.\n *\n **/\n\nclass NURBSCurve extends Curve {\n\n\tconstructor(\n\t\tdegree,\n\t\tknots /* array of reals */,\n\t\tcontrolPoints /* array of Vector(2|3|4) */,\n\t\tstartKnot /* index in knots */,\n\t\tendKnot /* index in knots */\n\t) {\n\n\t\tsuper();\n\n\t\tthis.degree = degree;\n\t\tthis.knots = knots;\n\t\tthis.controlPoints = [];\n\t\t// Used by periodic NURBS to remove hidden spans\n\t\tthis.startKnot = startKnot || 0;\n\t\tthis.endKnot = endKnot || ( this.knots.length - 1 );\n\n\t\tfor ( let i = 0; i < controlPoints.length; ++ i ) {\n\n\t\t\t// ensure Vector4 for control points\n\t\t\tconst point = controlPoints[ i ];\n\t\t\tthis.controlPoints[ i ] = new Vector4( point.x, point.y, point.z, point.w );\n\n\t\t}\n\n\t}\n\n\tgetPoint( t, optionalTarget = new Vector3() ) {\n\n\t\tconst point = optionalTarget;\n\n\t\tconst u = this.knots[ this.startKnot ] + t * ( this.knots[ this.endKnot ] - this.knots[ this.startKnot ] ); // linear mapping t->u\n\n\t\t// following results in (wx, wy, wz, w) homogeneous point\n\t\tconst hpoint = NURBSUtils.calcBSplinePoint( this.degree, this.knots, this.controlPoints, u );\n\n\t\tif ( hpoint.w !== 1.0 ) {\n\n\t\t\t// project to 3D space: (wx, wy, wz, w) -> (x, y, z, 1)\n\t\t\thpoint.divideScalar( hpoint.w );\n\n\t\t}\n\n\t\treturn point.set( hpoint.x, hpoint.y, hpoint.z );\n\n\t}\n\n\tgetTangent( t, optionalTarget = new Vector3() ) {\n\n\t\tconst tangent = optionalTarget;\n\n\t\tconst u = this.knots[ 0 ] + t * ( this.knots[ this.knots.length - 1 ] - this.knots[ 0 ] );\n\t\tconst ders = NURBSUtils.calcNURBSDerivatives( this.degree, this.knots, this.controlPoints, u, 1 );\n\t\ttangent.copy( ders[ 1 ] ).normalize();\n\n\t\treturn tangent;\n\n\t}\n\n}\n\nexport { NURBSCurve };\n","import {\n\tAnimationClip,\n\tBone,\n\tBox3,\n\tBufferAttribute,\n\tBufferGeometry,\n\tClampToEdgeWrapping,\n\tColor,\n\tDirectionalLight,\n\tDoubleSide,\n\tFileLoader,\n\tFrontSide,\n\tGroup,\n\tImageBitmapLoader,\n\tInterleavedBuffer,\n\tInterleavedBufferAttribute,\n\tInterpolant,\n\tInterpolateDiscrete,\n\tInterpolateLinear,\n\tLine,\n\tLineBasicMaterial,\n\tLineLoop,\n\tLineSegments,\n\tLinearFilter,\n\tLinearMipmapLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLoader,\n\tLoaderUtils,\n\tMaterial,\n\tMathUtils,\n\tMatrix4,\n\tMesh,\n\tMeshBasicMaterial,\n\tMeshPhysicalMaterial,\n\tMeshStandardMaterial,\n\tMirroredRepeatWrapping,\n\tNearestFilter,\n\tNearestMipmapLinearFilter,\n\tNearestMipmapNearestFilter,\n\tNumberKeyframeTrack,\n\tObject3D,\n\tOrthographicCamera,\n\tPerspectiveCamera,\n\tPointLight,\n\tPoints,\n\tPointsMaterial,\n\tPropertyBinding,\n\tQuaternion,\n\tQuaternionKeyframeTrack,\n\tRepeatWrapping,\n\tSkeleton,\n\tSkinnedMesh,\n\tSphere,\n\tSpotLight,\n\tTangentSpaceNormalMap,\n\tTexture,\n\tTextureLoader,\n\tTriangleFanDrawMode,\n\tTriangleStripDrawMode,\n\tVector2,\n\tVector3,\n\tVectorKeyframeTrack,\n\tsRGBEncoding\n} from 'three';\n\nclass GLTFLoader extends Loader {\n\n\tconstructor( manager ) {\n\n\t\tsuper( manager );\n\n\t\tthis.dracoLoader = null;\n\t\tthis.ktx2Loader = null;\n\t\tthis.meshoptDecoder = null;\n\n\t\tthis.pluginCallbacks = [];\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsClearcoatExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureBasisUExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFTextureWebPExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSheenExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsTransmissionExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsVolumeExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsIorExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMaterialsSpecularExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFLightsExtension( parser );\n\n\t\t} );\n\n\t\tthis.register( function ( parser ) {\n\n\t\t\treturn new GLTFMeshoptCompression( parser );\n\n\t\t} );\n\n\t}\n\n\tload( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tlet resourcePath;\n\n\t\tif ( this.resourcePath !== '' ) {\n\n\t\t\tresourcePath = this.resourcePath;\n\n\t\t} else if ( this.path !== '' ) {\n\n\t\t\tresourcePath = this.path;\n\n\t\t} else {\n\n\t\t\tresourcePath = LoaderUtils.extractUrlBase( url );\n\n\t\t}\n\n\t\t// Tells the LoadingManager to track an extra item, which resolves after\n\t\t// the model is fully loaded. This means the count of items loaded will\n\t\t// be incorrect, but ensures manager.onLoad() does not fire early.\n\t\tthis.manager.itemStart( url );\n\n\t\tconst _onError = function ( e ) {\n\n\t\t\tif ( onError ) {\n\n\t\t\t\tonError( e );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.error( e );\n\n\t\t\t}\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t};\n\n\t\tconst loader = new FileLoader( this.manager );\n\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setRequestHeader( this.requestHeader );\n\t\tloader.setWithCredentials( this.withCredentials );\n\n\t\tloader.load( url, function ( data ) {\n\n\t\t\ttry {\n\n\t\t\t\tscope.parse( data, resourcePath, function ( gltf ) {\n\n\t\t\t\t\tonLoad( gltf );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, _onError );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\t_onError( e );\n\n\t\t\t}\n\n\t\t}, onProgress, _onError );\n\n\t}\n\n\tsetDRACOLoader( dracoLoader ) {\n\n\t\tthis.dracoLoader = dracoLoader;\n\t\treturn this;\n\n\t}\n\n\tsetDDSLoader() {\n\n\t\tthrow new Error(\n\n\t\t\t'THREE.GLTFLoader: \"MSFT_texture_dds\" no longer supported. Please update to \"KHR_texture_basisu\".'\n\n\t\t);\n\n\t}\n\n\tsetKTX2Loader( ktx2Loader ) {\n\n\t\tthis.ktx2Loader = ktx2Loader;\n\t\treturn this;\n\n\t}\n\n\tsetMeshoptDecoder( meshoptDecoder ) {\n\n\t\tthis.meshoptDecoder = meshoptDecoder;\n\t\treturn this;\n\n\t}\n\n\tregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) === - 1 ) {\n\n\t\t\tthis.pluginCallbacks.push( callback );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tunregister( callback ) {\n\n\t\tif ( this.pluginCallbacks.indexOf( callback ) !== - 1 ) {\n\n\t\t\tthis.pluginCallbacks.splice( this.pluginCallbacks.indexOf( callback ), 1 );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tparse( data, path, onLoad, onError ) {\n\n\t\tlet content;\n\t\tconst extensions = {};\n\t\tconst plugins = {};\n\n\t\tif ( typeof data === 'string' ) {\n\n\t\t\tcontent = data;\n\n\t\t} else {\n\n\t\t\tconst magic = LoaderUtils.decodeText( new Uint8Array( data, 0, 4 ) );\n\n\t\t\tif ( magic === BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\t\ttry {\n\n\t\t\t\t\textensions[ EXTENSIONS.KHR_BINARY_GLTF ] = new GLTFBinaryExtension( data );\n\n\t\t\t\t} catch ( error ) {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tcontent = extensions[ EXTENSIONS.KHR_BINARY_GLTF ].content;\n\n\t\t\t} else {\n\n\t\t\t\tcontent = LoaderUtils.decodeText( new Uint8Array( data ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst json = JSON.parse( content );\n\n\t\tif ( json.asset === undefined || json.asset.version[ 0 ] < 2 ) {\n\n\t\t\tif ( onError ) onError( new Error( 'THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.' ) );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst parser = new GLTFParser( json, {\n\n\t\t\tpath: path || this.resourcePath || '',\n\t\t\tcrossOrigin: this.crossOrigin,\n\t\t\trequestHeader: this.requestHeader,\n\t\t\tmanager: this.manager,\n\t\t\tktx2Loader: this.ktx2Loader,\n\t\t\tmeshoptDecoder: this.meshoptDecoder\n\n\t\t} );\n\n\t\tparser.fileLoader.setRequestHeader( this.requestHeader );\n\n\t\tfor ( let i = 0; i < this.pluginCallbacks.length; i ++ ) {\n\n\t\t\tconst plugin = this.pluginCallbacks[ i ]( parser );\n\t\t\tplugins[ plugin.name ] = plugin;\n\n\t\t\t// Workaround to avoid determining as unknown extension\n\t\t\t// in addUnknownExtensionsToUserData().\n\t\t\t// Remove this workaround if we move all the existing\n\t\t\t// extension handlers to plugin system\n\t\t\textensions[ plugin.name ] = true;\n\n\t\t}\n\n\t\tif ( json.extensionsUsed ) {\n\n\t\t\tfor ( let i = 0; i < json.extensionsUsed.length; ++ i ) {\n\n\t\t\t\tconst extensionName = json.extensionsUsed[ i ];\n\t\t\t\tconst extensionsRequired = json.extensionsRequired || [];\n\n\t\t\t\tswitch ( extensionName ) {\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_UNLIT:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsUnlitExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMaterialsPbrSpecularGlossinessExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFDracoMeshCompressionExtension( json, this.dracoLoader );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_TEXTURE_TRANSFORM:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFTextureTransformExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase EXTENSIONS.KHR_MESH_QUANTIZATION:\n\t\t\t\t\t\textensions[ extensionName ] = new GLTFMeshQuantizationExtension();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tif ( extensionsRequired.indexOf( extensionName ) >= 0 && plugins[ extensionName ] === undefined ) {\n\n\t\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Unknown extension \"' + extensionName + '\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tparser.setExtensions( extensions );\n\t\tparser.setPlugins( plugins );\n\t\tparser.parse( onLoad, onError );\n\n\t}\n\n\tparseAsync( data, path ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.parse( data, path, resolve, reject );\n\n\t\t} );\n\n\t}\n\n}\n\n/* GLTFREGISTRY */\n\nfunction GLTFRegistry() {\n\n\tlet objects = {};\n\n\treturn\t{\n\n\t\tget: function ( key ) {\n\n\t\t\treturn objects[ key ];\n\n\t\t},\n\n\t\tadd: function ( key, object ) {\n\n\t\t\tobjects[ key ] = object;\n\n\t\t},\n\n\t\tremove: function ( key ) {\n\n\t\t\tdelete objects[ key ];\n\n\t\t},\n\n\t\tremoveAll: function () {\n\n\t\t\tobjects = {};\n\n\t\t}\n\n\t};\n\n}\n\n/*********************************/\n/********** EXTENSIONS ***********/\n/*********************************/\n\nconst EXTENSIONS = {\n\tKHR_BINARY_GLTF: 'KHR_binary_glTF',\n\tKHR_DRACO_MESH_COMPRESSION: 'KHR_draco_mesh_compression',\n\tKHR_LIGHTS_PUNCTUAL: 'KHR_lights_punctual',\n\tKHR_MATERIALS_CLEARCOAT: 'KHR_materials_clearcoat',\n\tKHR_MATERIALS_IOR: 'KHR_materials_ior',\n\tKHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: 'KHR_materials_pbrSpecularGlossiness',\n\tKHR_MATERIALS_SHEEN: 'KHR_materials_sheen',\n\tKHR_MATERIALS_SPECULAR: 'KHR_materials_specular',\n\tKHR_MATERIALS_TRANSMISSION: 'KHR_materials_transmission',\n\tKHR_MATERIALS_UNLIT: 'KHR_materials_unlit',\n\tKHR_MATERIALS_VOLUME: 'KHR_materials_volume',\n\tKHR_TEXTURE_BASISU: 'KHR_texture_basisu',\n\tKHR_TEXTURE_TRANSFORM: 'KHR_texture_transform',\n\tKHR_MESH_QUANTIZATION: 'KHR_mesh_quantization',\n\tEXT_TEXTURE_WEBP: 'EXT_texture_webp',\n\tEXT_MESHOPT_COMPRESSION: 'EXT_meshopt_compression'\n};\n\n/**\n * Punctual Lights Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_lights_punctual\n */\nclass GLTFLightsExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_LIGHTS_PUNCTUAL;\n\n\t\t// Object3D instance caches\n\t\tthis.cache = { refs: {}, uses: {} };\n\n\t}\n\n\t_markDefs() {\n\n\t\tconst parser = this.parser;\n\t\tconst nodeDefs = this.parser.json.nodes || [];\n\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.extensions\n\t\t\t\t\t&& nodeDef.extensions[ this.name ]\n\t\t\t\t\t&& nodeDef.extensions[ this.name ].light !== undefined ) {\n\n\t\t\t\tparser._addNodeRef( this.cache, nodeDef.extensions[ this.name ].light );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t_loadLight( lightIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst cacheKey = 'light:' + lightIndex;\n\t\tlet dependency = parser.cache.get( cacheKey );\n\n\t\tif ( dependency ) return dependency;\n\n\t\tconst json = parser.json;\n\t\tconst extensions = ( json.extensions && json.extensions[ this.name ] ) || {};\n\t\tconst lightDefs = extensions.lights || [];\n\t\tconst lightDef = lightDefs[ lightIndex ];\n\t\tlet lightNode;\n\n\t\tconst color = new Color( 0xffffff );\n\n\t\tif ( lightDef.color !== undefined ) color.fromArray( lightDef.color );\n\n\t\tconst range = lightDef.range !== undefined ? lightDef.range : 0;\n\n\t\tswitch ( lightDef.type ) {\n\n\t\t\tcase 'directional':\n\t\t\t\tlightNode = new DirectionalLight( color );\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tcase 'point':\n\t\t\t\tlightNode = new PointLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\tbreak;\n\n\t\t\tcase 'spot':\n\t\t\t\tlightNode = new SpotLight( color );\n\t\t\t\tlightNode.distance = range;\n\t\t\t\t// Handle spotlight properties.\n\t\t\t\tlightDef.spot = lightDef.spot || {};\n\t\t\t\tlightDef.spot.innerConeAngle = lightDef.spot.innerConeAngle !== undefined ? lightDef.spot.innerConeAngle : 0;\n\t\t\t\tlightDef.spot.outerConeAngle = lightDef.spot.outerConeAngle !== undefined ? lightDef.spot.outerConeAngle : Math.PI / 4.0;\n\t\t\t\tlightNode.angle = lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.penumbra = 1.0 - lightDef.spot.innerConeAngle / lightDef.spot.outerConeAngle;\n\t\t\t\tlightNode.target.position.set( 0, 0, - 1 );\n\t\t\t\tlightNode.add( lightNode.target );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Unexpected light type: ' + lightDef.type );\n\n\t\t}\n\n\t\t// Some lights (e.g. spot) default to a position other than the origin. Reset the position\n\t\t// here, because node-level parsing will only override position if explicitly specified.\n\t\tlightNode.position.set( 0, 0, 0 );\n\n\t\tlightNode.decay = 2;\n\n\t\tif ( lightDef.intensity !== undefined ) lightNode.intensity = lightDef.intensity;\n\n\t\tlightNode.name = parser.createUniqueName( lightDef.name || ( 'light_' + lightIndex ) );\n\n\t\tdependency = Promise.resolve( lightNode );\n\n\t\tparser.cache.add( cacheKey, dependency );\n\n\t\treturn dependency;\n\n\t}\n\n\tcreateNodeAttachment( nodeIndex ) {\n\n\t\tconst self = this;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\t\tconst lightDef = ( nodeDef.extensions && nodeDef.extensions[ this.name ] ) || {};\n\t\tconst lightIndex = lightDef.light;\n\n\t\tif ( lightIndex === undefined ) return null;\n\n\t\treturn this._loadLight( lightIndex ).then( function ( light ) {\n\n\t\t\treturn parser._getNodeRef( self.cache, lightIndex, light );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Unlit Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_unlit\n */\nclass GLTFMaterialsUnlitExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_UNLIT;\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn MeshBasicMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness;\n\n\t\tif ( metallicRoughness ) {\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Clearcoat Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_clearcoat\n */\nclass GLTFMaterialsClearcoatExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_CLEARCOAT;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.clearcoatFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoat = extension.clearcoatFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatMap', extension.clearcoatTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.clearcoatRoughness = extension.clearcoatRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.clearcoatRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatRoughnessMap', extension.clearcoatRoughnessTexture ) );\n\n\t\t}\n\n\t\tif ( extension.clearcoatNormalTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'clearcoatNormalMap', extension.clearcoatNormalTexture ) );\n\n\t\t\tif ( extension.clearcoatNormalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = extension.clearcoatNormalTexture.scale;\n\n\t\t\t\tmaterialParams.clearcoatNormalScale = new Vector2( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Sheen Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Khronos/KHR_materials_sheen\n */\nclass GLTFMaterialsSheenExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SHEEN;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tmaterialParams.sheenColor = new Color( 0, 0, 0 );\n\t\tmaterialParams.sheenRoughness = 0;\n\t\tmaterialParams.sheen = 1;\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.sheenColorFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenColor.fromArray( extension.sheenColorFactor );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessFactor !== undefined ) {\n\n\t\t\tmaterialParams.sheenRoughness = extension.sheenRoughnessFactor;\n\n\t\t}\n\n\t\tif ( extension.sheenColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenColorMap', extension.sheenColorTexture ) );\n\n\t\t}\n\n\t\tif ( extension.sheenRoughnessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'sheenRoughnessMap', extension.sheenRoughnessTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Transmission Materials Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_transmission\n * Draft: https://github.com/KhronosGroup/glTF/pull/1698\n */\nclass GLTFMaterialsTransmissionExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_TRANSMISSION;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tif ( extension.transmissionFactor !== undefined ) {\n\n\t\t\tmaterialParams.transmission = extension.transmissionFactor;\n\n\t\t}\n\n\t\tif ( extension.transmissionTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'transmissionMap', extension.transmissionTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials Volume Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_volume\n */\nclass GLTFMaterialsVolumeExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_VOLUME;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.thickness = extension.thicknessFactor !== undefined ? extension.thicknessFactor : 0;\n\n\t\tif ( extension.thicknessTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'thicknessMap', extension.thicknessTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.attenuationDistance = extension.attenuationDistance || 0;\n\n\t\tconst colorArray = extension.attenuationColor || [ 1, 1, 1 ];\n\t\tmaterialParams.attenuationColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * Materials ior Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_ior\n */\nclass GLTFMaterialsIorExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_IOR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.ior = extension.ior !== undefined ? extension.ior : 1.5;\n\n\t\treturn Promise.resolve();\n\n\t}\n\n}\n\n/**\n * Materials specular Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_materials_specular\n */\nclass GLTFMaterialsSpecularExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_SPECULAR;\n\n\t}\n\n\tgetMaterialType( materialIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) return null;\n\n\t\treturn MeshPhysicalMaterial;\n\n\t}\n\n\textendMaterialParams( materialIndex, materialParams ) {\n\n\t\tconst parser = this.parser;\n\t\tconst materialDef = parser.json.materials[ materialIndex ];\n\n\t\tif ( ! materialDef.extensions || ! materialDef.extensions[ this.name ] ) {\n\n\t\t\treturn Promise.resolve();\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tconst extension = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.specularIntensity = extension.specularFactor !== undefined ? extension.specularFactor : 1.0;\n\n\t\tif ( extension.specularTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularIntensityMap', extension.specularTexture ) );\n\n\t\t}\n\n\t\tconst colorArray = extension.specularColorFactor || [ 1, 1, 1 ];\n\t\tmaterialParams.specularColor = new Color( colorArray[ 0 ], colorArray[ 1 ], colorArray[ 2 ] );\n\n\t\tif ( extension.specularColorTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularColorMap', extension.specularColorTexture ).then( function ( texture ) {\n\n\t\t\t\ttexture.encoding = sRGBEncoding;\n\n\t\t\t} ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n}\n\n/**\n * BasisU Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_basisu\n */\nclass GLTFTextureBasisUExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_BASISU;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ this.name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ this.name ];\n\t\tconst source = json.images[ extension.source ];\n\t\tconst loader = parser.options.ktx2Loader;\n\n\t\tif ( ! loader ) {\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures' );\n\n\t\t\t} else {\n\n\t\t\t\t// Assumes that the extension is optional and that a fallback texture is present\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n}\n\n/**\n * WebP Texture Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_texture_webp\n */\nclass GLTFTextureWebPExtension {\n\n\tconstructor( parser ) {\n\n\t\tthis.parser = parser;\n\t\tthis.name = EXTENSIONS.EXT_TEXTURE_WEBP;\n\t\tthis.isSupported = null;\n\n\t}\n\n\tloadTexture( textureIndex ) {\n\n\t\tconst name = this.name;\n\t\tconst parser = this.parser;\n\t\tconst json = parser.json;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tif ( ! textureDef.extensions || ! textureDef.extensions[ name ] ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst extension = textureDef.extensions[ name ];\n\t\tconst source = json.images[ extension.source ];\n\n\t\tlet loader = parser.textureLoader;\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = parser.options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.detectSupport().then( function ( isSupported ) {\n\n\t\t\tif ( isSupported ) return parser.loadTextureImage( textureIndex, source, loader );\n\n\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( name ) >= 0 ) {\n\n\t\t\t\tthrow new Error( 'THREE.GLTFLoader: WebP required by asset but unsupported.' );\n\n\t\t\t}\n\n\t\t\t// Fall back to PNG or JPEG.\n\t\t\treturn parser.loadTexture( textureIndex );\n\n\t\t} );\n\n\t}\n\n\tdetectSupport() {\n\n\t\tif ( ! this.isSupported ) {\n\n\t\t\tthis.isSupported = new Promise( function ( resolve ) {\n\n\t\t\t\tconst image = new Image();\n\n\t\t\t\t// Lossy test image. Support for lossy images doesn't guarantee support for all\n\t\t\t\t// WebP images, unfortunately.\n\t\t\t\timage.src = 'data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA';\n\n\t\t\t\timage.onload = image.onerror = function () {\n\n\t\t\t\t\tresolve( image.height === 1 );\n\n\t\t\t\t};\n\n\t\t\t} );\n\n\t\t}\n\n\t\treturn this.isSupported;\n\n\t}\n\n}\n\n/**\n * meshopt BufferView Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Vendor/EXT_meshopt_compression\n */\nclass GLTFMeshoptCompression {\n\n\tconstructor( parser ) {\n\n\t\tthis.name = EXTENSIONS.EXT_MESHOPT_COMPRESSION;\n\t\tthis.parser = parser;\n\n\t}\n\n\tloadBufferView( index ) {\n\n\t\tconst json = this.parser.json;\n\t\tconst bufferView = json.bufferViews[ index ];\n\n\t\tif ( bufferView.extensions && bufferView.extensions[ this.name ] ) {\n\n\t\t\tconst extensionDef = bufferView.extensions[ this.name ];\n\n\t\t\tconst buffer = this.parser.getDependency( 'buffer', extensionDef.buffer );\n\t\t\tconst decoder = this.parser.options.meshoptDecoder;\n\n\t\t\tif ( ! decoder || ! decoder.supported ) {\n\n\t\t\t\tif ( json.extensionsRequired && json.extensionsRequired.indexOf( this.name ) >= 0 ) {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Assumes that the extension is optional and that fallback buffer data is present\n\t\t\t\t\treturn null;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn Promise.all( [ buffer, decoder.ready ] ).then( function ( res ) {\n\n\t\t\t\tconst byteOffset = extensionDef.byteOffset || 0;\n\t\t\t\tconst byteLength = extensionDef.byteLength || 0;\n\n\t\t\t\tconst count = extensionDef.count;\n\t\t\t\tconst stride = extensionDef.byteStride;\n\n\t\t\t\tconst result = new ArrayBuffer( count * stride );\n\t\t\t\tconst source = new Uint8Array( res[ 0 ], byteOffset, byteLength );\n\n\t\t\t\tdecoder.decodeGltfBuffer( new Uint8Array( result ), count, stride, source, extensionDef.mode, extensionDef.filter );\n\t\t\t\treturn result;\n\n\t\t\t} );\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t}\n\n}\n\n/* BINARY EXTENSION */\nconst BINARY_EXTENSION_HEADER_MAGIC = 'glTF';\nconst BINARY_EXTENSION_HEADER_LENGTH = 12;\nconst BINARY_EXTENSION_CHUNK_TYPES = { JSON: 0x4E4F534A, BIN: 0x004E4942 };\n\nclass GLTFBinaryExtension {\n\n\tconstructor( data ) {\n\n\t\tthis.name = EXTENSIONS.KHR_BINARY_GLTF;\n\t\tthis.content = null;\n\t\tthis.body = null;\n\n\t\tconst headerView = new DataView( data, 0, BINARY_EXTENSION_HEADER_LENGTH );\n\n\t\tthis.header = {\n\t\t\tmagic: LoaderUtils.decodeText( new Uint8Array( data.slice( 0, 4 ) ) ),\n\t\t\tversion: headerView.getUint32( 4, true ),\n\t\t\tlength: headerView.getUint32( 8, true )\n\t\t};\n\n\t\tif ( this.header.magic !== BINARY_EXTENSION_HEADER_MAGIC ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported glTF-Binary header.' );\n\n\t\t} else if ( this.header.version < 2.0 ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Legacy binary file detected.' );\n\n\t\t}\n\n\t\tconst chunkContentsLength = this.header.length - BINARY_EXTENSION_HEADER_LENGTH;\n\t\tconst chunkView = new DataView( data, BINARY_EXTENSION_HEADER_LENGTH );\n\t\tlet chunkIndex = 0;\n\n\t\twhile ( chunkIndex < chunkContentsLength ) {\n\n\t\t\tconst chunkLength = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tconst chunkType = chunkView.getUint32( chunkIndex, true );\n\t\t\tchunkIndex += 4;\n\n\t\t\tif ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.JSON ) {\n\n\t\t\t\tconst contentArray = new Uint8Array( data, BINARY_EXTENSION_HEADER_LENGTH + chunkIndex, chunkLength );\n\t\t\t\tthis.content = LoaderUtils.decodeText( contentArray );\n\n\t\t\t} else if ( chunkType === BINARY_EXTENSION_CHUNK_TYPES.BIN ) {\n\n\t\t\t\tconst byteOffset = BINARY_EXTENSION_HEADER_LENGTH + chunkIndex;\n\t\t\t\tthis.body = data.slice( byteOffset, byteOffset + chunkLength );\n\n\t\t\t}\n\n\t\t\t// Clients must ignore chunks with unknown types.\n\n\t\t\tchunkIndex += chunkLength;\n\n\t\t}\n\n\t\tif ( this.content === null ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: JSON content not found.' );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * DRACO Mesh Compression Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_draco_mesh_compression\n */\nclass GLTFDracoMeshCompressionExtension {\n\n\tconstructor( json, dracoLoader ) {\n\n\t\tif ( ! dracoLoader ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: No DRACOLoader instance provided.' );\n\n\t\t}\n\n\t\tthis.name = EXTENSIONS.KHR_DRACO_MESH_COMPRESSION;\n\t\tthis.json = json;\n\t\tthis.dracoLoader = dracoLoader;\n\t\tthis.dracoLoader.preload();\n\n\t}\n\n\tdecodePrimitive( primitive, parser ) {\n\n\t\tconst json = this.json;\n\t\tconst dracoLoader = this.dracoLoader;\n\t\tconst bufferViewIndex = primitive.extensions[ this.name ].bufferView;\n\t\tconst gltfAttributeMap = primitive.extensions[ this.name ].attributes;\n\t\tconst threeAttributeMap = {};\n\t\tconst attributeNormalizedMap = {};\n\t\tconst attributeTypeMap = {};\n\n\t\tfor ( const attributeName in gltfAttributeMap ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tthreeAttributeMap[ threeAttributeName ] = gltfAttributeMap[ attributeName ];\n\n\t\t}\n\n\t\tfor ( const attributeName in primitive.attributes ) {\n\n\t\t\tconst threeAttributeName = ATTRIBUTES[ attributeName ] || attributeName.toLowerCase();\n\n\t\t\tif ( gltfAttributeMap[ attributeName ] !== undefined ) {\n\n\t\t\t\tconst accessorDef = json.accessors[ primitive.attributes[ attributeName ] ];\n\t\t\t\tconst componentType = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t\tattributeTypeMap[ threeAttributeName ] = componentType;\n\t\t\t\tattributeNormalizedMap[ threeAttributeName ] = accessorDef.normalized === true;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn parser.getDependency( 'bufferView', bufferViewIndex ).then( function ( bufferView ) {\n\n\t\t\treturn new Promise( function ( resolve ) {\n\n\t\t\t\tdracoLoader.decodeDracoFile( bufferView, function ( geometry ) {\n\n\t\t\t\t\tfor ( const attributeName in geometry.attributes ) {\n\n\t\t\t\t\t\tconst attribute = geometry.attributes[ attributeName ];\n\t\t\t\t\t\tconst normalized = attributeNormalizedMap[ attributeName ];\n\n\t\t\t\t\t\tif ( normalized !== undefined ) attribute.normalized = normalized;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve( geometry );\n\n\t\t\t\t}, threeAttributeMap, attributeTypeMap );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Texture Transform Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_texture_transform\n */\nclass GLTFTextureTransformExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_TEXTURE_TRANSFORM;\n\n\t}\n\n\textendTexture( texture, transform ) {\n\n\t\tif ( transform.texCoord !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV sets in \"' + this.name + '\" extension not yet supported.' );\n\n\t\t}\n\n\t\tif ( transform.offset === undefined && transform.rotation === undefined && transform.scale === undefined ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21819.\n\t\t\treturn texture;\n\n\t\t}\n\n\t\ttexture = texture.clone();\n\n\t\tif ( transform.offset !== undefined ) {\n\n\t\t\ttexture.offset.fromArray( transform.offset );\n\n\t\t}\n\n\t\tif ( transform.rotation !== undefined ) {\n\n\t\t\ttexture.rotation = transform.rotation;\n\n\t\t}\n\n\t\tif ( transform.scale !== undefined ) {\n\n\t\t\ttexture.repeat.fromArray( transform.scale );\n\n\t\t}\n\n\t\ttexture.needsUpdate = true;\n\n\t\treturn texture;\n\n\t}\n\n}\n\n/**\n * Specular-Glossiness Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/main/extensions/2.0/Archived/KHR_materials_pbrSpecularGlossiness\n */\n\n/**\n * A sub class of StandardMaterial with some of the functionality\n * changed via the `onBeforeCompile` callback\n * @pailhead\n */\nclass GLTFMeshStandardSGMaterial extends MeshStandardMaterial {\n\n\tconstructor( params ) {\n\n\t\tsuper();\n\n\t\tthis.isGLTFSpecularGlossinessMaterial = true;\n\n\t\t//various chunks that need replacing\n\t\tconst specularMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tuniform sampler2D specularMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapParsFragmentChunk = [\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tuniform sampler2D glossinessMap;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst specularMapFragmentChunk = [\n\t\t\t'vec3 specularFactor = specular;',\n\t\t\t'#ifdef USE_SPECULARMAP',\n\t\t\t'\tvec4 texelSpecular = texture2D( specularMap, vUv );',\n\t\t\t'\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tspecularFactor *= texelSpecular.rgb;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst glossinessMapFragmentChunk = [\n\t\t\t'float glossinessFactor = glossiness;',\n\t\t\t'#ifdef USE_GLOSSINESSMAP',\n\t\t\t'\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );',\n\t\t\t'\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture',\n\t\t\t'\tglossinessFactor *= texelGlossiness.a;',\n\t\t\t'#endif'\n\t\t].join( '\\n' );\n\n\t\tconst lightPhysicalFragmentChunk = [\n\t\t\t'PhysicalMaterial material;',\n\t\t\t'material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );',\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t\t'material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.',\n\t\t\t'material.roughness += geometryRoughness;',\n\t\t\t'material.roughness = min( material.roughness, 1.0 );',\n\t\t\t'material.specularColor = specularFactor;',\n\t\t].join( '\\n' );\n\n\t\tconst uniforms = {\n\t\t\tspecular: { value: new Color().setHex( 0xffffff ) },\n\t\t\tglossiness: { value: 1 },\n\t\t\tspecularMap: { value: null },\n\t\t\tglossinessMap: { value: null }\n\t\t};\n\n\t\tthis._extraUniforms = uniforms;\n\n\t\tthis.onBeforeCompile = function ( shader ) {\n\n\t\t\tfor ( const uniformName in uniforms ) {\n\n\t\t\t\tshader.uniforms[ uniformName ] = uniforms[ uniformName ];\n\n\t\t\t}\n\n\t\t\tshader.fragmentShader = shader.fragmentShader\n\t\t\t\t.replace( 'uniform float roughness;', 'uniform vec3 specular;' )\n\t\t\t\t.replace( 'uniform float metalness;', 'uniform float glossiness;' )\n\t\t\t\t.replace( '#include <roughnessmap_pars_fragment>', specularMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_pars_fragment>', glossinessMapParsFragmentChunk )\n\t\t\t\t.replace( '#include <roughnessmap_fragment>', specularMapFragmentChunk )\n\t\t\t\t.replace( '#include <metalnessmap_fragment>', glossinessMapFragmentChunk )\n\t\t\t\t.replace( '#include <lights_physical_fragment>', lightPhysicalFragmentChunk );\n\n\t\t};\n\n\t\tObject.defineProperties( this, {\n\n\t\t\tspecular: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specular.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specular.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tspecularMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.specularMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.specularMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_SPECULARMAP = ''; // USE_UV is set by the renderer for specular maps\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_SPECULARMAP;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossiness: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossiness.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossiness.value = v;\n\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tglossinessMap: {\n\t\t\t\tget: function () {\n\n\t\t\t\t\treturn uniforms.glossinessMap.value;\n\n\t\t\t\t},\n\t\t\t\tset: function ( v ) {\n\n\t\t\t\t\tuniforms.glossinessMap.value = v;\n\n\t\t\t\t\tif ( v ) {\n\n\t\t\t\t\t\tthis.defines.USE_GLOSSINESSMAP = '';\n\t\t\t\t\t\tthis.defines.USE_UV = '';\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdelete this.defines.USE_GLOSSINESSMAP;\n\t\t\t\t\t\tdelete this.defines.USE_UV;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t} );\n\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\n\t\tthis.setValues( params );\n\n\t}\n\n\tcopy( source ) {\n\n\t\tsuper.copy( source );\n\n\t\tthis.specularMap = source.specularMap;\n\t\tthis.specular.copy( source.specular );\n\t\tthis.glossinessMap = source.glossinessMap;\n\t\tthis.glossiness = source.glossiness;\n\t\tdelete this.metalness;\n\t\tdelete this.roughness;\n\t\tdelete this.metalnessMap;\n\t\tdelete this.roughnessMap;\n\t\treturn this;\n\n\t}\n\n}\n\n\nclass GLTFMaterialsPbrSpecularGlossinessExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS;\n\n\t\tthis.specularGlossinessParams = [\n\t\t\t'color',\n\t\t\t'map',\n\t\t\t'lightMap',\n\t\t\t'lightMapIntensity',\n\t\t\t'aoMap',\n\t\t\t'aoMapIntensity',\n\t\t\t'emissive',\n\t\t\t'emissiveIntensity',\n\t\t\t'emissiveMap',\n\t\t\t'bumpMap',\n\t\t\t'bumpScale',\n\t\t\t'normalMap',\n\t\t\t'normalMapType',\n\t\t\t'displacementMap',\n\t\t\t'displacementScale',\n\t\t\t'displacementBias',\n\t\t\t'specularMap',\n\t\t\t'specular',\n\t\t\t'glossinessMap',\n\t\t\t'glossiness',\n\t\t\t'alphaMap',\n\t\t\t'envMap',\n\t\t\t'envMapIntensity',\n\t\t\t'refractionRatio',\n\t\t];\n\n\t}\n\n\tgetMaterialType() {\n\n\t\treturn GLTFMeshStandardSGMaterial;\n\n\t}\n\n\textendParams( materialParams, materialDef, parser ) {\n\n\t\tconst pbrSpecularGlossiness = materialDef.extensions[ this.name ];\n\n\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\tmaterialParams.opacity = 1.0;\n\n\t\tconst pending = [];\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.diffuseFactor ) ) {\n\n\t\t\tconst array = pbrSpecularGlossiness.diffuseFactor;\n\n\t\t\tmaterialParams.color.fromArray( array );\n\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.diffuseTexture !== undefined ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'map', pbrSpecularGlossiness.diffuseTexture ) );\n\n\t\t}\n\n\t\tmaterialParams.emissive = new Color( 0.0, 0.0, 0.0 );\n\t\tmaterialParams.glossiness = pbrSpecularGlossiness.glossinessFactor !== undefined ? pbrSpecularGlossiness.glossinessFactor : 1.0;\n\t\tmaterialParams.specular = new Color( 1.0, 1.0, 1.0 );\n\n\t\tif ( Array.isArray( pbrSpecularGlossiness.specularFactor ) ) {\n\n\t\t\tmaterialParams.specular.fromArray( pbrSpecularGlossiness.specularFactor );\n\n\t\t}\n\n\t\tif ( pbrSpecularGlossiness.specularGlossinessTexture !== undefined ) {\n\n\t\t\tconst specGlossMapDef = pbrSpecularGlossiness.specularGlossinessTexture;\n\t\t\tpending.push( parser.assignTexture( materialParams, 'glossinessMap', specGlossMapDef ) );\n\t\t\tpending.push( parser.assignTexture( materialParams, 'specularMap', specGlossMapDef ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\tcreateMaterial( materialParams ) {\n\n\t\tconst material = new GLTFMeshStandardSGMaterial( materialParams );\n\t\tmaterial.fog = true;\n\n\t\tmaterial.color = materialParams.color;\n\n\t\tmaterial.map = materialParams.map === undefined ? null : materialParams.map;\n\n\t\tmaterial.lightMap = null;\n\t\tmaterial.lightMapIntensity = 1.0;\n\n\t\tmaterial.aoMap = materialParams.aoMap === undefined ? null : materialParams.aoMap;\n\t\tmaterial.aoMapIntensity = 1.0;\n\n\t\tmaterial.emissive = materialParams.emissive;\n\t\tmaterial.emissiveIntensity = 1.0;\n\t\tmaterial.emissiveMap = materialParams.emissiveMap === undefined ? null : materialParams.emissiveMap;\n\n\t\tmaterial.bumpMap = materialParams.bumpMap === undefined ? null : materialParams.bumpMap;\n\t\tmaterial.bumpScale = 1;\n\n\t\tmaterial.normalMap = materialParams.normalMap === undefined ? null : materialParams.normalMap;\n\t\tmaterial.normalMapType = TangentSpaceNormalMap;\n\n\t\tif ( materialParams.normalScale ) material.normalScale = materialParams.normalScale;\n\n\t\tmaterial.displacementMap = null;\n\t\tmaterial.displacementScale = 1;\n\t\tmaterial.displacementBias = 0;\n\n\t\tmaterial.specularMap = materialParams.specularMap === undefined ? null : materialParams.specularMap;\n\t\tmaterial.specular = materialParams.specular;\n\n\t\tmaterial.glossinessMap = materialParams.glossinessMap === undefined ? null : materialParams.glossinessMap;\n\t\tmaterial.glossiness = materialParams.glossiness;\n\n\t\tmaterial.alphaMap = null;\n\n\t\tmaterial.envMap = materialParams.envMap === undefined ? null : materialParams.envMap;\n\t\tmaterial.envMapIntensity = 1.0;\n\n\t\tmaterial.refractionRatio = 0.98;\n\n\t\treturn material;\n\n\t}\n\n}\n\n/**\n * Mesh Quantization Extension\n *\n * Specification: https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization\n */\nclass GLTFMeshQuantizationExtension {\n\n\tconstructor() {\n\n\t\tthis.name = EXTENSIONS.KHR_MESH_QUANTIZATION;\n\n\t}\n\n}\n\n/*********************************/\n/********** INTERPOLATION ********/\n/*********************************/\n\n// Spline Interpolation\n// Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#appendix-c-spline-interpolation\nclass GLTFCubicSplineInterpolant extends Interpolant {\n\n\tconstructor( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\t\tsuper( parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\t}\n\n\tcopySampleValue_( index ) {\n\n\t\t// Copies a sample value to the result buffer. See description of glTF\n\t\t// CUBICSPLINE values layout in interpolate_() function below.\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tvalueSize = this.valueSize,\n\t\t\toffset = index * valueSize * 3 + valueSize;\n\n\t\tfor ( let i = 0; i !== valueSize; i ++ ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n}\n\nGLTFCubicSplineInterpolant.prototype.beforeStart_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.afterEnd_ = GLTFCubicSplineInterpolant.prototype.copySampleValue_;\n\nGLTFCubicSplineInterpolant.prototype.interpolate_ = function ( i1, t0, t, t1 ) {\n\n\tconst result = this.resultBuffer;\n\tconst values = this.sampleValues;\n\tconst stride = this.valueSize;\n\n\tconst stride2 = stride * 2;\n\tconst stride3 = stride * 3;\n\n\tconst td = t1 - t0;\n\n\tconst p = ( t - t0 ) / td;\n\tconst pp = p * p;\n\tconst ppp = pp * p;\n\n\tconst offset1 = i1 * stride3;\n\tconst offset0 = offset1 - stride3;\n\n\tconst s2 = - 2 * ppp + 3 * pp;\n\tconst s3 = ppp - pp;\n\tconst s0 = 1 - s2;\n\tconst s1 = s3 - pp + p;\n\n\t// Layout of keyframe output values for CUBICSPLINE animations:\n\t//   [ inTangent_1, splineVertex_1, outTangent_1, inTangent_2, splineVertex_2, ... ]\n\tfor ( let i = 0; i !== stride; i ++ ) {\n\n\t\tconst p0 = values[ offset0 + i + stride ]; // splineVertex_k\n\t\tconst m0 = values[ offset0 + i + stride2 ] * td; // outTangent_k * (t_k+1 - t_k)\n\t\tconst p1 = values[ offset1 + i + stride ]; // splineVertex_k+1\n\t\tconst m1 = values[ offset1 + i ] * td; // inTangent_k+1 * (t_k+1 - t_k)\n\n\t\tresult[ i ] = s0 * p0 + s1 * m0 + s2 * p1 + s3 * m1;\n\n\t}\n\n\treturn result;\n\n};\n\nconst _q = new Quaternion();\n\nclass GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant {\n\n\tinterpolate_( i1, t0, t, t1 ) {\n\n\t\tconst result = super.interpolate_( i1, t0, t, t1 );\n\n\t\t_q.fromArray( result ).normalize().toArray( result );\n\n\t\treturn result;\n\n\t}\n\n}\n\n\n/*********************************/\n/********** INTERNALS ************/\n/*********************************/\n\n/* CONSTANTS */\n\nconst WEBGL_CONSTANTS = {\n\tFLOAT: 5126,\n\t//FLOAT_MAT2: 35674,\n\tFLOAT_MAT3: 35675,\n\tFLOAT_MAT4: 35676,\n\tFLOAT_VEC2: 35664,\n\tFLOAT_VEC3: 35665,\n\tFLOAT_VEC4: 35666,\n\tLINEAR: 9729,\n\tREPEAT: 10497,\n\tSAMPLER_2D: 35678,\n\tPOINTS: 0,\n\tLINES: 1,\n\tLINE_LOOP: 2,\n\tLINE_STRIP: 3,\n\tTRIANGLES: 4,\n\tTRIANGLE_STRIP: 5,\n\tTRIANGLE_FAN: 6,\n\tUNSIGNED_BYTE: 5121,\n\tUNSIGNED_SHORT: 5123\n};\n\nconst WEBGL_COMPONENT_TYPES = {\n\t5120: Int8Array,\n\t5121: Uint8Array,\n\t5122: Int16Array,\n\t5123: Uint16Array,\n\t5125: Uint32Array,\n\t5126: Float32Array\n};\n\nconst WEBGL_FILTERS = {\n\t9728: NearestFilter,\n\t9729: LinearFilter,\n\t9984: NearestMipmapNearestFilter,\n\t9985: LinearMipmapNearestFilter,\n\t9986: NearestMipmapLinearFilter,\n\t9987: LinearMipmapLinearFilter\n};\n\nconst WEBGL_WRAPPINGS = {\n\t33071: ClampToEdgeWrapping,\n\t33648: MirroredRepeatWrapping,\n\t10497: RepeatWrapping\n};\n\nconst WEBGL_TYPE_SIZES = {\n\t'SCALAR': 1,\n\t'VEC2': 2,\n\t'VEC3': 3,\n\t'VEC4': 4,\n\t'MAT2': 4,\n\t'MAT3': 9,\n\t'MAT4': 16\n};\n\nconst ATTRIBUTES = {\n\tPOSITION: 'position',\n\tNORMAL: 'normal',\n\tTANGENT: 'tangent',\n\tTEXCOORD_0: 'uv',\n\tTEXCOORD_1: 'uv2',\n\tCOLOR_0: 'color',\n\tWEIGHTS_0: 'skinWeight',\n\tJOINTS_0: 'skinIndex',\n};\n\nconst PATH_PROPERTIES = {\n\tscale: 'scale',\n\ttranslation: 'position',\n\trotation: 'quaternion',\n\tweights: 'morphTargetInfluences'\n};\n\nconst INTERPOLATION = {\n\tCUBICSPLINE: undefined, // We use a custom interpolant (GLTFCubicSplineInterpolation) for CUBICSPLINE tracks. Each\n\t\t                        // keyframe track will be initialized with a default interpolation type, then modified.\n\tLINEAR: InterpolateLinear,\n\tSTEP: InterpolateDiscrete\n};\n\nconst ALPHA_MODES = {\n\tOPAQUE: 'OPAQUE',\n\tMASK: 'MASK',\n\tBLEND: 'BLEND'\n};\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#default-material\n */\nfunction createDefaultMaterial( cache ) {\n\n\tif ( cache[ 'DefaultMaterial' ] === undefined ) {\n\n\t\tcache[ 'DefaultMaterial' ] = new MeshStandardMaterial( {\n\t\t\tcolor: 0xFFFFFF,\n\t\t\temissive: 0x000000,\n\t\t\tmetalness: 1,\n\t\t\troughness: 1,\n\t\t\ttransparent: false,\n\t\t\tdepthTest: true,\n\t\t\tside: FrontSide\n\t\t} );\n\n\t}\n\n\treturn cache[ 'DefaultMaterial' ];\n\n}\n\nfunction addUnknownExtensionsToUserData( knownExtensions, object, objectDef ) {\n\n\t// Add unknown glTF extensions to an object's userData.\n\n\tfor ( const name in objectDef.extensions ) {\n\n\t\tif ( knownExtensions[ name ] === undefined ) {\n\n\t\t\tobject.userData.gltfExtensions = object.userData.gltfExtensions || {};\n\t\t\tobject.userData.gltfExtensions[ name ] = objectDef.extensions[ name ];\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @param {Object3D|Material|BufferGeometry} object\n * @param {GLTF.definition} gltfDef\n */\nfunction assignExtrasToUserData( object, gltfDef ) {\n\n\tif ( gltfDef.extras !== undefined ) {\n\n\t\tif ( typeof gltfDef.extras === 'object' ) {\n\n\t\t\tObject.assign( object.userData, gltfDef.extras );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Ignoring primitive type .extras, ' + gltfDef.extras );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#morph-targets\n *\n * @param {BufferGeometry} geometry\n * @param {Array<GLTF.Target>} targets\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addMorphTargets( geometry, targets, parser ) {\n\n\tlet hasMorphPosition = false;\n\tlet hasMorphNormal = false;\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( target.POSITION !== undefined ) hasMorphPosition = true;\n\t\tif ( target.NORMAL !== undefined ) hasMorphNormal = true;\n\n\t\tif ( hasMorphPosition && hasMorphNormal ) break;\n\n\t}\n\n\tif ( ! hasMorphPosition && ! hasMorphNormal ) return Promise.resolve( geometry );\n\n\tconst pendingPositionAccessors = [];\n\tconst pendingNormalAccessors = [];\n\n\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\tconst target = targets[ i ];\n\n\t\tif ( hasMorphPosition ) {\n\n\t\t\tconst pendingAccessor = target.POSITION !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.POSITION )\n\t\t\t\t: geometry.attributes.position;\n\n\t\t\tpendingPositionAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t\tif ( hasMorphNormal ) {\n\n\t\t\tconst pendingAccessor = target.NORMAL !== undefined\n\t\t\t\t? parser.getDependency( 'accessor', target.NORMAL )\n\t\t\t\t: geometry.attributes.normal;\n\n\t\t\tpendingNormalAccessors.push( pendingAccessor );\n\n\t\t}\n\n\t}\n\n\treturn Promise.all( [\n\t\tPromise.all( pendingPositionAccessors ),\n\t\tPromise.all( pendingNormalAccessors )\n\t] ).then( function ( accessors ) {\n\n\t\tconst morphPositions = accessors[ 0 ];\n\t\tconst morphNormals = accessors[ 1 ];\n\n\t\tif ( hasMorphPosition ) geometry.morphAttributes.position = morphPositions;\n\t\tif ( hasMorphNormal ) geometry.morphAttributes.normal = morphNormals;\n\t\tgeometry.morphTargetsRelative = true;\n\n\t\treturn geometry;\n\n\t} );\n\n}\n\n/**\n * @param {Mesh} mesh\n * @param {GLTF.Mesh} meshDef\n */\nfunction updateMorphTargets( mesh, meshDef ) {\n\n\tmesh.updateMorphTargets();\n\n\tif ( meshDef.weights !== undefined ) {\n\n\t\tfor ( let i = 0, il = meshDef.weights.length; i < il; i ++ ) {\n\n\t\t\tmesh.morphTargetInfluences[ i ] = meshDef.weights[ i ];\n\n\t\t}\n\n\t}\n\n\t// .extras has user-defined data, so check that .extras.targetNames is an array.\n\tif ( meshDef.extras && Array.isArray( meshDef.extras.targetNames ) ) {\n\n\t\tconst targetNames = meshDef.extras.targetNames;\n\n\t\tif ( mesh.morphTargetInfluences.length === targetNames.length ) {\n\n\t\t\tmesh.morphTargetDictionary = {};\n\n\t\t\tfor ( let i = 0, il = targetNames.length; i < il; i ++ ) {\n\n\t\t\t\tmesh.morphTargetDictionary[ targetNames[ i ] ] = i;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.' );\n\n\t\t}\n\n\t}\n\n}\n\nfunction createPrimitiveKey( primitiveDef ) {\n\n\tconst dracoExtension = primitiveDef.extensions && primitiveDef.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ];\n\tlet geometryKey;\n\n\tif ( dracoExtension ) {\n\n\t\tgeometryKey = 'draco:' + dracoExtension.bufferView\n\t\t\t\t+ ':' + dracoExtension.indices\n\t\t\t\t+ ':' + createAttributesKey( dracoExtension.attributes );\n\n\t} else {\n\n\t\tgeometryKey = primitiveDef.indices + ':' + createAttributesKey( primitiveDef.attributes ) + ':' + primitiveDef.mode;\n\n\t}\n\n\treturn geometryKey;\n\n}\n\nfunction createAttributesKey( attributes ) {\n\n\tlet attributesKey = '';\n\n\tconst keys = Object.keys( attributes ).sort();\n\n\tfor ( let i = 0, il = keys.length; i < il; i ++ ) {\n\n\t\tattributesKey += keys[ i ] + ':' + attributes[ keys[ i ] ] + ';';\n\n\t}\n\n\treturn attributesKey;\n\n}\n\nfunction getNormalizedComponentScale( constructor ) {\n\n\t// Reference:\n\t// https://github.com/KhronosGroup/glTF/tree/master/extensions/2.0/Khronos/KHR_mesh_quantization#encoding-quantized-data\n\n\tswitch ( constructor ) {\n\n\t\tcase Int8Array:\n\t\t\treturn 1 / 127;\n\n\t\tcase Uint8Array:\n\t\t\treturn 1 / 255;\n\n\t\tcase Int16Array:\n\t\t\treturn 1 / 32767;\n\n\t\tcase Uint16Array:\n\t\t\treturn 1 / 65535;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Unsupported normalized accessor component type.' );\n\n\t}\n\n}\n\n/* GLTF PARSER */\n\nclass GLTFParser {\n\n\tconstructor( json = {}, options = {} ) {\n\n\t\tthis.json = json;\n\t\tthis.extensions = {};\n\t\tthis.plugins = {};\n\t\tthis.options = options;\n\n\t\t// loader object cache\n\t\tthis.cache = new GLTFRegistry();\n\n\t\t// associations between Three.js objects and glTF elements\n\t\tthis.associations = new Map();\n\n\t\t// BufferGeometry caching\n\t\tthis.primitiveCache = {};\n\n\t\t// Object3D instance caches\n\t\tthis.meshCache = { refs: {}, uses: {} };\n\t\tthis.cameraCache = { refs: {}, uses: {} };\n\t\tthis.lightCache = { refs: {}, uses: {} };\n\n\t\tthis.textureCache = {};\n\n\t\t// Track node names, to ensure no duplicates\n\t\tthis.nodeNamesUsed = {};\n\n\t\t// Use an ImageBitmapLoader if imageBitmaps are supported. Moves much of the\n\t\t// expensive work of uploading a texture to the GPU off the main thread.\n\t\tif ( typeof createImageBitmap !== 'undefined' && /Firefox|^((?!chrome|android).)*safari/i.test( navigator.userAgent ) === false ) {\n\n\t\t\tthis.textureLoader = new ImageBitmapLoader( this.options.manager );\n\n\t\t} else {\n\n\t\t\tthis.textureLoader = new TextureLoader( this.options.manager );\n\n\t\t}\n\n\t\tthis.textureLoader.setCrossOrigin( this.options.crossOrigin );\n\t\tthis.textureLoader.setRequestHeader( this.options.requestHeader );\n\n\t\tthis.fileLoader = new FileLoader( this.options.manager );\n\t\tthis.fileLoader.setResponseType( 'arraybuffer' );\n\n\t\tif ( this.options.crossOrigin === 'use-credentials' ) {\n\n\t\t\tthis.fileLoader.setWithCredentials( true );\n\n\t\t}\n\n\t}\n\n\tsetExtensions( extensions ) {\n\n\t\tthis.extensions = extensions;\n\n\t}\n\n\tsetPlugins( plugins ) {\n\n\t\tthis.plugins = plugins;\n\n\t}\n\n\tparse( onLoad, onError ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\t// Clear the loader cache\n\t\tthis.cache.removeAll();\n\n\t\t// Mark the special nodes/meshes in json for efficient parse\n\t\tthis._invokeAll( function ( ext ) {\n\n\t\t\treturn ext._markDefs && ext._markDefs();\n\n\t\t} );\n\n\t\tPromise.all( this._invokeAll( function ( ext ) {\n\n\t\t\treturn ext.beforeRoot && ext.beforeRoot();\n\n\t\t} ) ).then( function () {\n\n\t\t\treturn Promise.all( [\n\n\t\t\t\tparser.getDependencies( 'scene' ),\n\t\t\t\tparser.getDependencies( 'animation' ),\n\t\t\t\tparser.getDependencies( 'camera' ),\n\n\t\t\t] );\n\n\t\t} ).then( function ( dependencies ) {\n\n\t\t\tconst result = {\n\t\t\t\tscene: dependencies[ 0 ][ json.scene || 0 ],\n\t\t\t\tscenes: dependencies[ 0 ],\n\t\t\t\tanimations: dependencies[ 1 ],\n\t\t\t\tcameras: dependencies[ 2 ],\n\t\t\t\tasset: json.asset,\n\t\t\t\tparser: parser,\n\t\t\t\tuserData: {}\n\t\t\t};\n\n\t\t\taddUnknownExtensionsToUserData( extensions, result, json );\n\n\t\t\tassignExtrasToUserData( result, json );\n\n\t\t\tPromise.all( parser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.afterRoot && ext.afterRoot( result );\n\n\t\t\t} ) ).then( function () {\n\n\t\t\t\tonLoad( result );\n\n\t\t\t} );\n\n\t\t} ).catch( onError );\n\n\t}\n\n\t/**\n\t * Marks the special nodes/meshes in json for efficient parse.\n\t */\n\t_markDefs() {\n\n\t\tconst nodeDefs = this.json.nodes || [];\n\t\tconst skinDefs = this.json.skins || [];\n\t\tconst meshDefs = this.json.meshes || [];\n\n\t\t// Nothing in the node definition indicates whether it is a Bone or an\n\t\t// Object3D. Use the skins' joint references to mark bones.\n\t\tfor ( let skinIndex = 0, skinLength = skinDefs.length; skinIndex < skinLength; skinIndex ++ ) {\n\n\t\t\tconst joints = skinDefs[ skinIndex ].joints;\n\n\t\t\tfor ( let i = 0, il = joints.length; i < il; i ++ ) {\n\n\t\t\t\tnodeDefs[ joints[ i ] ].isBone = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Iterate over all nodes, marking references to shared resources,\n\t\t// as well as skeleton joints.\n\t\tfor ( let nodeIndex = 0, nodeLength = nodeDefs.length; nodeIndex < nodeLength; nodeIndex ++ ) {\n\n\t\t\tconst nodeDef = nodeDefs[ nodeIndex ];\n\n\t\t\tif ( nodeDef.mesh !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.meshCache, nodeDef.mesh );\n\n\t\t\t\t// Nothing in the mesh definition indicates whether it is\n\t\t\t\t// a SkinnedMesh or Mesh. Use the node's mesh reference\n\t\t\t\t// to mark SkinnedMesh if node has skin.\n\t\t\t\tif ( nodeDef.skin !== undefined ) {\n\n\t\t\t\t\tmeshDefs[ nodeDef.mesh ].isSkinnedMesh = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tthis._addNodeRef( this.cameraCache, nodeDef.camera );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t/**\n\t * Counts references to shared node / Object3D resources. These resources\n\t * can be reused, or \"instantiated\", at multiple nodes in the scene\n\t * hierarchy. Mesh, Camera, and Light instances are instantiated and must\n\t * be marked. Non-scenegraph resources (like Materials, Geometries, and\n\t * Textures) can be reused directly and are not marked here.\n\t *\n\t * Example: CesiumMilkTruck sample model reuses \"Wheel\" meshes.\n\t */\n\t_addNodeRef( cache, index ) {\n\n\t\tif ( index === undefined ) return;\n\n\t\tif ( cache.refs[ index ] === undefined ) {\n\n\t\t\tcache.refs[ index ] = cache.uses[ index ] = 0;\n\n\t\t}\n\n\t\tcache.refs[ index ] ++;\n\n\t}\n\n\t/** Returns a reference to a shared resource, cloning it if necessary. */\n\t_getNodeRef( cache, index, object ) {\n\n\t\tif ( cache.refs[ index ] <= 1 ) return object;\n\n\t\tconst ref = object.clone();\n\n\t\t// Propagates mappings to the cloned object, prevents mappings on the\n\t\t// original object from being lost.\n\t\tconst updateMappings = ( original, clone ) => {\n\n\t\t\tconst mappings = this.associations.get( original );\n\t\t\tif ( mappings != null ) {\n\n\t\t\t\tthis.associations.set( clone, mappings );\n\n\t\t\t}\n\n\t\t\tfor ( const [ i, child ] of original.children.entries() ) {\n\n\t\t\t\tupdateMappings( child, clone.children[ i ] );\n\n\t\t\t}\n\n\t\t};\n\n\t\tupdateMappings( object, ref );\n\n\t\tref.name += '_instance_' + ( cache.uses[ index ] ++ );\n\n\t\treturn ref;\n\n\t}\n\n\t_invokeOne( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.push( this );\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) return result;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t_invokeAll( func ) {\n\n\t\tconst extensions = Object.values( this.plugins );\n\t\textensions.unshift( this );\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0; i < extensions.length; i ++ ) {\n\n\t\t\tconst result = func( extensions[ i ] );\n\n\t\t\tif ( result ) pending.push( result );\n\n\t\t}\n\n\t\treturn pending;\n\n\t}\n\n\t/**\n\t * Requests the specified dependency asynchronously, with caching.\n\t * @param {string} type\n\t * @param {number} index\n\t * @return {Promise<Object3D|Material|THREE.Texture|AnimationClip|ArrayBuffer|Object>}\n\t */\n\tgetDependency( type, index ) {\n\n\t\tconst cacheKey = type + ':' + index;\n\t\tlet dependency = this.cache.get( cacheKey );\n\n\t\tif ( ! dependency ) {\n\n\t\t\tswitch ( type ) {\n\n\t\t\t\tcase 'scene':\n\t\t\t\t\tdependency = this.loadScene( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'node':\n\t\t\t\t\tdependency = this.loadNode( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'mesh':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMesh && ext.loadMesh( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'accessor':\n\t\t\t\t\tdependency = this.loadAccessor( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bufferView':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadBufferView && ext.loadBufferView( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'buffer':\n\t\t\t\t\tdependency = this.loadBuffer( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'material':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadMaterial && ext.loadMaterial( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'texture':\n\t\t\t\t\tdependency = this._invokeOne( function ( ext ) {\n\n\t\t\t\t\t\treturn ext.loadTexture && ext.loadTexture( index );\n\n\t\t\t\t\t} );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'skin':\n\t\t\t\t\tdependency = this.loadSkin( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'animation':\n\t\t\t\t\tdependency = this.loadAnimation( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'camera':\n\t\t\t\t\tdependency = this.loadCamera( index );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error( 'Unknown type: ' + type );\n\n\t\t\t}\n\n\t\t\tthis.cache.add( cacheKey, dependency );\n\n\t\t}\n\n\t\treturn dependency;\n\n\t}\n\n\t/**\n\t * Requests all dependencies of the specified type asynchronously, with caching.\n\t * @param {string} type\n\t * @return {Promise<Array<Object>>}\n\t */\n\tgetDependencies( type ) {\n\n\t\tlet dependencies = this.cache.get( type );\n\n\t\tif ( ! dependencies ) {\n\n\t\t\tconst parser = this;\n\t\t\tconst defs = this.json[ type + ( type === 'mesh' ? 'es' : 's' ) ] || [];\n\n\t\t\tdependencies = Promise.all( defs.map( function ( def, index ) {\n\n\t\t\t\treturn parser.getDependency( type, index );\n\n\t\t\t} ) );\n\n\t\t\tthis.cache.add( type, dependencies );\n\n\t\t}\n\n\t\treturn dependencies;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBuffer( bufferIndex ) {\n\n\t\tconst bufferDef = this.json.buffers[ bufferIndex ];\n\t\tconst loader = this.fileLoader;\n\n\t\tif ( bufferDef.type && bufferDef.type !== 'arraybuffer' ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: ' + bufferDef.type + ' buffer type is not supported.' );\n\n\t\t}\n\n\t\t// If present, GLB container is required to be the first buffer.\n\t\tif ( bufferDef.uri === undefined && bufferIndex === 0 ) {\n\n\t\t\treturn Promise.resolve( this.extensions[ EXTENSIONS.KHR_BINARY_GLTF ].body );\n\n\t\t}\n\n\t\tconst options = this.options;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tloader.load( LoaderUtils.resolveURL( bufferDef.uri, options.path ), resolve, undefined, function () {\n\n\t\t\t\treject( new Error( 'THREE.GLTFLoader: Failed to load buffer \"' + bufferDef.uri + '\".' ) );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#buffers-and-buffer-views\n\t * @param {number} bufferViewIndex\n\t * @return {Promise<ArrayBuffer>}\n\t */\n\tloadBufferView( bufferViewIndex ) {\n\n\t\tconst bufferViewDef = this.json.bufferViews[ bufferViewIndex ];\n\n\t\treturn this.getDependency( 'buffer', bufferViewDef.buffer ).then( function ( buffer ) {\n\n\t\t\tconst byteLength = bufferViewDef.byteLength || 0;\n\t\t\tconst byteOffset = bufferViewDef.byteOffset || 0;\n\t\t\treturn buffer.slice( byteOffset, byteOffset + byteLength );\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#accessors\n\t * @param {number} accessorIndex\n\t * @return {Promise<BufferAttribute|InterleavedBufferAttribute>}\n\t */\n\tloadAccessor( accessorIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\n\t\tconst accessorDef = this.json.accessors[ accessorIndex ];\n\n\t\tif ( accessorDef.bufferView === undefined && accessorDef.sparse === undefined ) {\n\n\t\t\t// Ignore empty accessors, which may be used to declare runtime\n\t\t\t// information about attributes coming from another source (e.g. Draco\n\t\t\t// compression extension).\n\t\t\treturn Promise.resolve( null );\n\n\t\t}\n\n\t\tconst pendingBufferViews = [];\n\n\t\tif ( accessorDef.bufferView !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.bufferView ) );\n\n\t\t} else {\n\n\t\t\tpendingBufferViews.push( null );\n\n\t\t}\n\n\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.indices.bufferView ) );\n\t\t\tpendingBufferViews.push( this.getDependency( 'bufferView', accessorDef.sparse.values.bufferView ) );\n\n\t\t}\n\n\t\treturn Promise.all( pendingBufferViews ).then( function ( bufferViews ) {\n\n\t\t\tconst bufferView = bufferViews[ 0 ];\n\n\t\t\tconst itemSize = WEBGL_TYPE_SIZES[ accessorDef.type ];\n\t\t\tconst TypedArray = WEBGL_COMPONENT_TYPES[ accessorDef.componentType ];\n\n\t\t\t// For VEC3: itemSize is 3, elementBytes is 4, itemBytes is 12.\n\t\t\tconst elementBytes = TypedArray.BYTES_PER_ELEMENT;\n\t\t\tconst itemBytes = elementBytes * itemSize;\n\t\t\tconst byteOffset = accessorDef.byteOffset || 0;\n\t\t\tconst byteStride = accessorDef.bufferView !== undefined ? json.bufferViews[ accessorDef.bufferView ].byteStride : undefined;\n\t\t\tconst normalized = accessorDef.normalized === true;\n\t\t\tlet array, bufferAttribute;\n\n\t\t\t// The buffer is not interleaved if the stride is the item size in bytes.\n\t\t\tif ( byteStride && byteStride !== itemBytes ) {\n\n\t\t\t\t// Each \"slice\" of the buffer, as defined by 'count' elements of 'byteStride' bytes, gets its own InterleavedBuffer\n\t\t\t\t// This makes sure that IBA.count reflects accessor.count properly\n\t\t\t\tconst ibSlice = Math.floor( byteOffset / byteStride );\n\t\t\t\tconst ibCacheKey = 'InterleavedBuffer:' + accessorDef.bufferView + ':' + accessorDef.componentType + ':' + ibSlice + ':' + accessorDef.count;\n\t\t\t\tlet ib = parser.cache.get( ibCacheKey );\n\n\t\t\t\tif ( ! ib ) {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, ibSlice * byteStride, accessorDef.count * byteStride / elementBytes );\n\n\t\t\t\t\t// Integer parameters to IB/IBA are in array elements, not bytes.\n\t\t\t\t\tib = new InterleavedBuffer( array, byteStride / elementBytes );\n\n\t\t\t\t\tparser.cache.add( ibCacheKey, ib );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( ib, itemSize, ( byteOffset % byteStride ) / elementBytes, normalized );\n\n\t\t\t} else {\n\n\t\t\t\tif ( bufferView === null ) {\n\n\t\t\t\t\tarray = new TypedArray( accessorDef.count * itemSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tarray = new TypedArray( bufferView, byteOffset, accessorDef.count * itemSize );\n\n\t\t\t\t}\n\n\t\t\t\tbufferAttribute = new BufferAttribute( array, itemSize, normalized );\n\n\t\t\t}\n\n\t\t\t// https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#sparse-accessors\n\t\t\tif ( accessorDef.sparse !== undefined ) {\n\n\t\t\t\tconst itemSizeIndices = WEBGL_TYPE_SIZES.SCALAR;\n\t\t\t\tconst TypedArrayIndices = WEBGL_COMPONENT_TYPES[ accessorDef.sparse.indices.componentType ];\n\n\t\t\t\tconst byteOffsetIndices = accessorDef.sparse.indices.byteOffset || 0;\n\t\t\t\tconst byteOffsetValues = accessorDef.sparse.values.byteOffset || 0;\n\n\t\t\t\tconst sparseIndices = new TypedArrayIndices( bufferViews[ 1 ], byteOffsetIndices, accessorDef.sparse.count * itemSizeIndices );\n\t\t\t\tconst sparseValues = new TypedArray( bufferViews[ 2 ], byteOffsetValues, accessorDef.sparse.count * itemSize );\n\n\t\t\t\tif ( bufferView !== null ) {\n\n\t\t\t\t\t// Avoid modifying the original ArrayBuffer, if the bufferView wasn't initialized with zeroes.\n\t\t\t\t\tbufferAttribute = new BufferAttribute( bufferAttribute.array.slice(), bufferAttribute.itemSize, bufferAttribute.normalized );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, il = sparseIndices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst index = sparseIndices[ i ];\n\n\t\t\t\t\tbufferAttribute.setX( index, sparseValues[ i * itemSize ] );\n\t\t\t\t\tif ( itemSize >= 2 ) bufferAttribute.setY( index, sparseValues[ i * itemSize + 1 ] );\n\t\t\t\t\tif ( itemSize >= 3 ) bufferAttribute.setZ( index, sparseValues[ i * itemSize + 2 ] );\n\t\t\t\t\tif ( itemSize >= 4 ) bufferAttribute.setW( index, sparseValues[ i * itemSize + 3 ] );\n\t\t\t\t\tif ( itemSize >= 5 ) throw new Error( 'THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn bufferAttribute;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#textures\n\t * @param {number} textureIndex\n\t * @return {Promise<THREE.Texture>}\n\t */\n\tloadTexture( textureIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\t\tconst textureDef = json.textures[ textureIndex ];\n\t\tconst source = json.images[ textureDef.source ];\n\n\t\tlet loader = this.textureLoader;\n\n\t\tif ( source.uri ) {\n\n\t\t\tconst handler = options.manager.getHandler( source.uri );\n\t\t\tif ( handler !== null ) loader = handler;\n\n\t\t}\n\n\t\treturn this.loadTextureImage( textureIndex, source, loader );\n\n\t}\n\n\tloadTextureImage( textureIndex, source, loader ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst options = this.options;\n\n\t\tconst textureDef = json.textures[ textureIndex ];\n\n\t\tconst cacheKey = ( source.uri || source.bufferView ) + ':' + textureDef.sampler;\n\n\t\tif ( this.textureCache[ cacheKey ] ) {\n\n\t\t\t// See https://github.com/mrdoob/three.js/issues/21559.\n\t\t\treturn this.textureCache[ cacheKey ];\n\n\t\t}\n\n\t\tconst URL = self.URL || self.webkitURL;\n\n\t\tlet sourceURI = source.uri || '';\n\t\tlet isObjectURL = false;\n\n\t\tif ( source.bufferView !== undefined ) {\n\n\t\t\t// Load binary image data from bufferView, if provided.\n\n\t\t\tsourceURI = parser.getDependency( 'bufferView', source.bufferView ).then( function ( bufferView ) {\n\n\t\t\t\tisObjectURL = true;\n\t\t\t\tconst blob = new Blob( [ bufferView ], { type: source.mimeType } );\n\t\t\t\tsourceURI = URL.createObjectURL( blob );\n\t\t\t\treturn sourceURI;\n\n\t\t\t} );\n\n\t\t} else if ( source.uri === undefined ) {\n\n\t\t\tthrow new Error( 'THREE.GLTFLoader: Image ' + textureIndex + ' is missing URI and bufferView' );\n\n\t\t}\n\n\t\tconst promise = Promise.resolve( sourceURI ).then( function ( sourceURI ) {\n\n\t\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\t\tlet onLoad = resolve;\n\n\t\t\t\tif ( loader.isImageBitmapLoader === true ) {\n\n\t\t\t\t\tonLoad = function ( imageBitmap ) {\n\n\t\t\t\t\t\tconst texture = new Texture( imageBitmap );\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\t\tresolve( texture );\n\n\t\t\t\t\t};\n\n\t\t\t\t}\n\n\t\t\t\tloader.load( LoaderUtils.resolveURL( sourceURI, options.path ), onLoad, undefined, reject );\n\n\t\t\t} );\n\n\t\t} ).then( function ( texture ) {\n\n\t\t\t// Clean up resources and configure Texture.\n\n\t\t\tif ( isObjectURL === true ) {\n\n\t\t\t\tURL.revokeObjectURL( sourceURI );\n\n\t\t\t}\n\n\t\t\ttexture.flipY = false;\n\n\t\t\tif ( textureDef.name ) texture.name = textureDef.name;\n\n\t\t\tconst samplers = json.samplers || {};\n\t\t\tconst sampler = samplers[ textureDef.sampler ] || {};\n\n\t\t\ttexture.magFilter = WEBGL_FILTERS[ sampler.magFilter ] || LinearFilter;\n\t\t\ttexture.minFilter = WEBGL_FILTERS[ sampler.minFilter ] || LinearMipmapLinearFilter;\n\t\t\ttexture.wrapS = WEBGL_WRAPPINGS[ sampler.wrapS ] || RepeatWrapping;\n\t\t\ttexture.wrapT = WEBGL_WRAPPINGS[ sampler.wrapT ] || RepeatWrapping;\n\n\t\t\tparser.associations.set( texture, { textures: textureIndex } );\n\n\t\t\treturn texture;\n\n\t\t} ).catch( function () {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader: Couldn\\'t load texture', sourceURI );\n\t\t\treturn null;\n\n\t\t} );\n\n\t\tthis.textureCache[ cacheKey ] = promise;\n\n\t\treturn promise;\n\n\t}\n\n\t/**\n\t * Asynchronously assigns a texture to the given material parameters.\n\t * @param {Object} materialParams\n\t * @param {string} mapName\n\t * @param {Object} mapDef\n\t * @return {Promise<Texture>}\n\t */\n\tassignTexture( materialParams, mapName, mapDef ) {\n\n\t\tconst parser = this;\n\n\t\treturn this.getDependency( 'texture', mapDef.index ).then( function ( texture ) {\n\n\t\t\t// Materials sample aoMap from UV set 1 and other maps from UV set 0 - this can't be configured\n\t\t\t// However, we will copy UV set 0 to UV set 1 on demand for aoMap\n\t\t\tif ( mapDef.texCoord !== undefined && mapDef.texCoord != 0 && ! ( mapName === 'aoMap' && mapDef.texCoord == 1 ) ) {\n\n\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Custom UV set ' + mapDef.texCoord + ' for texture ' + mapName + ' not yet supported.' );\n\n\t\t\t}\n\n\t\t\tif ( parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] ) {\n\n\t\t\t\tconst transform = mapDef.extensions !== undefined ? mapDef.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ] : undefined;\n\n\t\t\t\tif ( transform ) {\n\n\t\t\t\t\tconst gltfReference = parser.associations.get( texture );\n\t\t\t\t\ttexture = parser.extensions[ EXTENSIONS.KHR_TEXTURE_TRANSFORM ].extendTexture( texture, transform );\n\t\t\t\t\tparser.associations.set( texture, gltfReference );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmaterialParams[ mapName ] = texture;\n\n\t\t\treturn texture;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Assigns final material to a Mesh, Line, or Points instance. The instance\n\t * already has a material (generated from the glTF material options alone)\n\t * but reuse of the same glTF material may require multiple threejs materials\n\t * to accommodate different primitive types, defines, etc. New materials will\n\t * be created if necessary, and reused from a cache.\n\t * @param  {Object3D} mesh Mesh, Line, or Points instance.\n\t */\n\tassignFinalMaterial( mesh ) {\n\n\t\tconst geometry = mesh.geometry;\n\t\tlet material = mesh.material;\n\n\t\tconst useDerivativeTangents = geometry.attributes.tangent === undefined;\n\t\tconst useVertexColors = geometry.attributes.color !== undefined;\n\t\tconst useFlatShading = geometry.attributes.normal === undefined;\n\n\t\tif ( mesh.isPoints ) {\n\n\t\t\tconst cacheKey = 'PointsMaterial:' + material.uuid;\n\n\t\t\tlet pointsMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! pointsMaterial ) {\n\n\t\t\t\tpointsMaterial = new PointsMaterial();\n\t\t\t\tMaterial.prototype.copy.call( pointsMaterial, material );\n\t\t\t\tpointsMaterial.color.copy( material.color );\n\t\t\t\tpointsMaterial.map = material.map;\n\t\t\t\tpointsMaterial.sizeAttenuation = false; // glTF spec says points should be 1px\n\n\t\t\t\tthis.cache.add( cacheKey, pointsMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = pointsMaterial;\n\n\t\t} else if ( mesh.isLine ) {\n\n\t\t\tconst cacheKey = 'LineBasicMaterial:' + material.uuid;\n\n\t\t\tlet lineMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! lineMaterial ) {\n\n\t\t\t\tlineMaterial = new LineBasicMaterial();\n\t\t\t\tMaterial.prototype.copy.call( lineMaterial, material );\n\t\t\t\tlineMaterial.color.copy( material.color );\n\n\t\t\t\tthis.cache.add( cacheKey, lineMaterial );\n\n\t\t\t}\n\n\t\t\tmaterial = lineMaterial;\n\n\t\t}\n\n\t\t// Clone the material if it will be modified\n\t\tif ( useDerivativeTangents || useVertexColors || useFlatShading ) {\n\n\t\t\tlet cacheKey = 'ClonedMaterial:' + material.uuid + ':';\n\n\t\t\tif ( material.isGLTFSpecularGlossinessMaterial ) cacheKey += 'specular-glossiness:';\n\t\t\tif ( useDerivativeTangents ) cacheKey += 'derivative-tangents:';\n\t\t\tif ( useVertexColors ) cacheKey += 'vertex-colors:';\n\t\t\tif ( useFlatShading ) cacheKey += 'flat-shading:';\n\n\t\t\tlet cachedMaterial = this.cache.get( cacheKey );\n\n\t\t\tif ( ! cachedMaterial ) {\n\n\t\t\t\tcachedMaterial = material.clone();\n\n\t\t\t\tif ( useVertexColors ) cachedMaterial.vertexColors = true;\n\t\t\t\tif ( useFlatShading ) cachedMaterial.flatShading = true;\n\n\t\t\t\tif ( useDerivativeTangents ) {\n\n\t\t\t\t\t// https://github.com/mrdoob/three.js/issues/11438#issuecomment-507003995\n\t\t\t\t\tif ( cachedMaterial.normalScale ) cachedMaterial.normalScale.y *= - 1;\n\t\t\t\t\tif ( cachedMaterial.clearcoatNormalScale ) cachedMaterial.clearcoatNormalScale.y *= - 1;\n\n\t\t\t\t}\n\n\t\t\t\tthis.cache.add( cacheKey, cachedMaterial );\n\n\t\t\t\tthis.associations.set( cachedMaterial, this.associations.get( material ) );\n\n\t\t\t}\n\n\t\t\tmaterial = cachedMaterial;\n\n\t\t}\n\n\t\t// workarounds for mesh and geometry\n\n\t\tif ( material.aoMap && geometry.attributes.uv2 === undefined && geometry.attributes.uv !== undefined ) {\n\n\t\t\tgeometry.setAttribute( 'uv2', geometry.attributes.uv );\n\n\t\t}\n\n\t\tmesh.material = material;\n\n\t}\n\n\tgetMaterialType( /* materialIndex */ ) {\n\n\t\treturn MeshStandardMaterial;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#materials\n\t * @param {number} materialIndex\n\t * @return {Promise<Material>}\n\t */\n\tloadMaterial( materialIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst materialDef = json.materials[ materialIndex ];\n\n\t\tlet materialType;\n\t\tconst materialParams = {};\n\t\tconst materialExtensions = materialDef.extensions || {};\n\n\t\tconst pending = [];\n\n\t\tif ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ] ) {\n\n\t\t\tconst sgExtension = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ];\n\t\t\tmaterialType = sgExtension.getMaterialType();\n\t\t\tpending.push( sgExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else if ( materialExtensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ] ) {\n\n\t\t\tconst kmuExtension = extensions[ EXTENSIONS.KHR_MATERIALS_UNLIT ];\n\t\t\tmaterialType = kmuExtension.getMaterialType();\n\t\t\tpending.push( kmuExtension.extendParams( materialParams, materialDef, parser ) );\n\n\t\t} else {\n\n\t\t\t// Specification:\n\t\t\t// https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#metallic-roughness-material\n\n\t\t\tconst metallicRoughness = materialDef.pbrMetallicRoughness || {};\n\n\t\t\tmaterialParams.color = new Color( 1.0, 1.0, 1.0 );\n\t\t\tmaterialParams.opacity = 1.0;\n\n\t\t\tif ( Array.isArray( metallicRoughness.baseColorFactor ) ) {\n\n\t\t\t\tconst array = metallicRoughness.baseColorFactor;\n\n\t\t\t\tmaterialParams.color.fromArray( array );\n\t\t\t\tmaterialParams.opacity = array[ 3 ];\n\n\t\t\t}\n\n\t\t\tif ( metallicRoughness.baseColorTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'map', metallicRoughness.baseColorTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialParams.metalness = metallicRoughness.metallicFactor !== undefined ? metallicRoughness.metallicFactor : 1.0;\n\t\t\tmaterialParams.roughness = metallicRoughness.roughnessFactor !== undefined ? metallicRoughness.roughnessFactor : 1.0;\n\n\t\t\tif ( metallicRoughness.metallicRoughnessTexture !== undefined ) {\n\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'metalnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\t\t\t\tpending.push( parser.assignTexture( materialParams, 'roughnessMap', metallicRoughness.metallicRoughnessTexture ) );\n\n\t\t\t}\n\n\t\t\tmaterialType = this._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.getMaterialType && ext.getMaterialType( materialIndex );\n\n\t\t\t} );\n\n\t\t\tpending.push( Promise.all( this._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.extendMaterialParams && ext.extendMaterialParams( materialIndex, materialParams );\n\n\t\t\t} ) ) );\n\n\t\t}\n\n\t\tif ( materialDef.doubleSided === true ) {\n\n\t\t\tmaterialParams.side = DoubleSide;\n\n\t\t}\n\n\t\tconst alphaMode = materialDef.alphaMode || ALPHA_MODES.OPAQUE;\n\n\t\tif ( alphaMode === ALPHA_MODES.BLEND ) {\n\n\t\t\tmaterialParams.transparent = true;\n\n\t\t\t// See: https://github.com/mrdoob/three.js/issues/17706\n\t\t\tmaterialParams.depthWrite = false;\n\n\t\t} else {\n\n\t\t\tmaterialParams.transparent = false;\n\n\t\t\tif ( alphaMode === ALPHA_MODES.MASK ) {\n\n\t\t\t\tmaterialParams.alphaTest = materialDef.alphaCutoff !== undefined ? materialDef.alphaCutoff : 0.5;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.normalTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'normalMap', materialDef.normalTexture ) );\n\n\t\t\tmaterialParams.normalScale = new Vector2( 1, 1 );\n\n\t\t\tif ( materialDef.normalTexture.scale !== undefined ) {\n\n\t\t\t\tconst scale = materialDef.normalTexture.scale;\n\n\t\t\t\tmaterialParams.normalScale.set( scale, scale );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.occlusionTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'aoMap', materialDef.occlusionTexture ) );\n\n\t\t\tif ( materialDef.occlusionTexture.strength !== undefined ) {\n\n\t\t\t\tmaterialParams.aoMapIntensity = materialDef.occlusionTexture.strength;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( materialDef.emissiveFactor !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tmaterialParams.emissive = new Color().fromArray( materialDef.emissiveFactor );\n\n\t\t}\n\n\t\tif ( materialDef.emissiveTexture !== undefined && materialType !== MeshBasicMaterial ) {\n\n\t\t\tpending.push( parser.assignTexture( materialParams, 'emissiveMap', materialDef.emissiveTexture ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\tlet material;\n\n\t\t\tif ( materialType === GLTFMeshStandardSGMaterial ) {\n\n\t\t\t\tmaterial = extensions[ EXTENSIONS.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS ].createMaterial( materialParams );\n\n\t\t\t} else {\n\n\t\t\t\tmaterial = new materialType( materialParams );\n\n\t\t\t}\n\n\t\t\tif ( materialDef.name ) material.name = materialDef.name;\n\n\t\t\t// baseColorTexture, emissiveTexture, and specularGlossinessTexture use sRGB encoding.\n\t\t\tif ( material.map ) material.map.encoding = sRGBEncoding;\n\t\t\tif ( material.emissiveMap ) material.emissiveMap.encoding = sRGBEncoding;\n\n\t\t\tassignExtrasToUserData( material, materialDef );\n\n\t\t\tparser.associations.set( material, { materials: materialIndex } );\n\n\t\t\tif ( materialDef.extensions ) addUnknownExtensionsToUserData( extensions, material, materialDef );\n\n\t\t\treturn material;\n\n\t\t} );\n\n\t}\n\n\t/** When Object3D instances are targeted by animation, they need unique names. */\n\tcreateUniqueName( originalName ) {\n\n\t\tconst sanitizedName = PropertyBinding.sanitizeNodeName( originalName || '' );\n\n\t\tlet name = sanitizedName;\n\n\t\tfor ( let i = 1; this.nodeNamesUsed[ name ]; ++ i ) {\n\n\t\t\tname = sanitizedName + '_' + i;\n\n\t\t}\n\n\t\tthis.nodeNamesUsed[ name ] = true;\n\n\t\treturn name;\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#geometry\n\t *\n\t * Creates BufferGeometries from primitives.\n\t *\n\t * @param {Array<GLTF.Primitive>} primitives\n\t * @return {Promise<Array<BufferGeometry>>}\n\t */\n\tloadGeometries( primitives ) {\n\n\t\tconst parser = this;\n\t\tconst extensions = this.extensions;\n\t\tconst cache = this.primitiveCache;\n\n\t\tfunction createDracoPrimitive( primitive ) {\n\n\t\t\treturn extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ]\n\t\t\t\t.decodePrimitive( primitive, parser )\n\t\t\t\t.then( function ( geometry ) {\n\n\t\t\t\t\treturn addPrimitiveAttributes( geometry, primitive, parser );\n\n\t\t\t\t} );\n\n\t\t}\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst primitive = primitives[ i ];\n\t\t\tconst cacheKey = createPrimitiveKey( primitive );\n\n\t\t\t// See if we've already created this geometry\n\t\t\tconst cached = cache[ cacheKey ];\n\n\t\t\tif ( cached ) {\n\n\t\t\t\t// Use the cached geometry if it exists\n\t\t\t\tpending.push( cached.promise );\n\n\t\t\t} else {\n\n\t\t\t\tlet geometryPromise;\n\n\t\t\t\tif ( primitive.extensions && primitive.extensions[ EXTENSIONS.KHR_DRACO_MESH_COMPRESSION ] ) {\n\n\t\t\t\t\t// Use DRACO geometry if available\n\t\t\t\t\tgeometryPromise = createDracoPrimitive( primitive );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Otherwise create a new geometry\n\t\t\t\t\tgeometryPromise = addPrimitiveAttributes( new BufferGeometry(), primitive, parser );\n\n\t\t\t\t}\n\n\t\t\t\t// Cache this geometry\n\t\t\t\tcache[ cacheKey ] = { primitive: primitive, promise: geometryPromise };\n\n\t\t\t\tpending.push( geometryPromise );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/blob/master/specification/2.0/README.md#meshes\n\t * @param {number} meshIndex\n\t * @return {Promise<Group|Mesh|SkinnedMesh>}\n\t */\n\tloadMesh( meshIndex ) {\n\n\t\tconst parser = this;\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\n\t\tconst meshDef = json.meshes[ meshIndex ];\n\t\tconst primitives = meshDef.primitives;\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = primitives.length; i < il; i ++ ) {\n\n\t\t\tconst material = primitives[ i ].material === undefined\n\t\t\t\t? createDefaultMaterial( this.cache )\n\t\t\t\t: this.getDependency( 'material', primitives[ i ].material );\n\n\t\t\tpending.push( material );\n\n\t\t}\n\n\t\tpending.push( parser.loadGeometries( primitives ) );\n\n\t\treturn Promise.all( pending ).then( function ( results ) {\n\n\t\t\tconst materials = results.slice( 0, results.length - 1 );\n\t\t\tconst geometries = results[ results.length - 1 ];\n\n\t\t\tconst meshes = [];\n\n\t\t\tfor ( let i = 0, il = geometries.length; i < il; i ++ ) {\n\n\t\t\t\tconst geometry = geometries[ i ];\n\t\t\t\tconst primitive = primitives[ i ];\n\n\t\t\t\t// 1. create Mesh\n\n\t\t\t\tlet mesh;\n\n\t\t\t\tconst material = materials[ i ];\n\n\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLES ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ||\n\t\t\t\t\t\tprimitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ||\n\t\t\t\t\t\tprimitive.mode === undefined ) {\n\n\t\t\t\t\t// .isSkinnedMesh isn't in glTF spec. See ._markDefs()\n\t\t\t\t\tmesh = meshDef.isSkinnedMesh === true\n\t\t\t\t\t\t? new SkinnedMesh( geometry, material )\n\t\t\t\t\t\t: new Mesh( geometry, material );\n\n\t\t\t\t\tif ( mesh.isSkinnedMesh === true && ! mesh.geometry.attributes.skinWeight.normalized ) {\n\n\t\t\t\t\t\t// we normalize floating point skin weight array to fix malformed assets (see #15319)\n\t\t\t\t\t\t// it's important to skip this for non-float32 data since normalizeSkinWeights assumes non-normalized inputs\n\t\t\t\t\t\tmesh.normalizeSkinWeights();\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_STRIP ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleStripDrawMode );\n\n\t\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.TRIANGLE_FAN ) {\n\n\t\t\t\t\t\tmesh.geometry = toTrianglesDrawMode( mesh.geometry, TriangleFanDrawMode );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINES ) {\n\n\t\t\t\t\tmesh = new LineSegments( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_STRIP ) {\n\n\t\t\t\t\tmesh = new Line( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.LINE_LOOP ) {\n\n\t\t\t\t\tmesh = new LineLoop( geometry, material );\n\n\t\t\t\t} else if ( primitive.mode === WEBGL_CONSTANTS.POINTS ) {\n\n\t\t\t\t\tmesh = new Points( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'THREE.GLTFLoader: Primitive mode unsupported: ' + primitive.mode );\n\n\t\t\t\t}\n\n\t\t\t\tif ( Object.keys( mesh.geometry.morphAttributes ).length > 0 ) {\n\n\t\t\t\t\tupdateMorphTargets( mesh, meshDef );\n\n\t\t\t\t}\n\n\t\t\t\tmesh.name = parser.createUniqueName( meshDef.name || ( 'mesh_' + meshIndex ) );\n\n\t\t\t\tassignExtrasToUserData( mesh, meshDef );\n\n\t\t\t\tif ( primitive.extensions ) addUnknownExtensionsToUserData( extensions, mesh, primitive );\n\n\t\t\t\tparser.assignFinalMaterial( mesh );\n\n\t\t\t\tmeshes.push( mesh );\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tparser.associations.set( meshes[ i ], {\n\t\t\t\t\tmeshes: meshIndex,\n\t\t\t\t\tprimitives: i\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\tif ( meshes.length === 1 ) {\n\n\t\t\t\treturn meshes[ 0 ];\n\n\t\t\t}\n\n\t\t\tconst group = new Group();\n\n\t\t\tparser.associations.set( group, { meshes: meshIndex } );\n\n\t\t\tfor ( let i = 0, il = meshes.length; i < il; i ++ ) {\n\n\t\t\t\tgroup.add( meshes[ i ] );\n\n\t\t\t}\n\n\t\t\treturn group;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#cameras\n\t * @param {number} cameraIndex\n\t * @return {Promise<THREE.Camera>}\n\t */\n\tloadCamera( cameraIndex ) {\n\n\t\tlet camera;\n\t\tconst cameraDef = this.json.cameras[ cameraIndex ];\n\t\tconst params = cameraDef[ cameraDef.type ];\n\n\t\tif ( ! params ) {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing camera parameters.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( cameraDef.type === 'perspective' ) {\n\n\t\t\tcamera = new PerspectiveCamera( MathUtils.radToDeg( params.yfov ), params.aspectRatio || 1, params.znear || 1, params.zfar || 2e6 );\n\n\t\t} else if ( cameraDef.type === 'orthographic' ) {\n\n\t\t\tcamera = new OrthographicCamera( - params.xmag, params.xmag, params.ymag, - params.ymag, params.znear, params.zfar );\n\n\t\t}\n\n\t\tif ( cameraDef.name ) camera.name = this.createUniqueName( cameraDef.name );\n\n\t\tassignExtrasToUserData( camera, cameraDef );\n\n\t\treturn Promise.resolve( camera );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#skins\n\t * @param {number} skinIndex\n\t * @return {Promise<Object>}\n\t */\n\tloadSkin( skinIndex ) {\n\n\t\tconst skinDef = this.json.skins[ skinIndex ];\n\n\t\tconst skinEntry = { joints: skinDef.joints };\n\n\t\tif ( skinDef.inverseBindMatrices === undefined ) {\n\n\t\t\treturn Promise.resolve( skinEntry );\n\n\t\t}\n\n\t\treturn this.getDependency( 'accessor', skinDef.inverseBindMatrices ).then( function ( accessor ) {\n\n\t\t\tskinEntry.inverseBindMatrices = accessor;\n\n\t\t\treturn skinEntry;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#animations\n\t * @param {number} animationIndex\n\t * @return {Promise<AnimationClip>}\n\t */\n\tloadAnimation( animationIndex ) {\n\n\t\tconst json = this.json;\n\n\t\tconst animationDef = json.animations[ animationIndex ];\n\n\t\tconst pendingNodes = [];\n\t\tconst pendingInputAccessors = [];\n\t\tconst pendingOutputAccessors = [];\n\t\tconst pendingSamplers = [];\n\t\tconst pendingTargets = [];\n\n\t\tfor ( let i = 0, il = animationDef.channels.length; i < il; i ++ ) {\n\n\t\t\tconst channel = animationDef.channels[ i ];\n\t\t\tconst sampler = animationDef.samplers[ channel.sampler ];\n\t\t\tconst target = channel.target;\n\t\t\tconst name = target.node !== undefined ? target.node : target.id; // NOTE: target.id is deprecated.\n\t\t\tconst input = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.input ] : sampler.input;\n\t\t\tconst output = animationDef.parameters !== undefined ? animationDef.parameters[ sampler.output ] : sampler.output;\n\n\t\t\tpendingNodes.push( this.getDependency( 'node', name ) );\n\t\t\tpendingInputAccessors.push( this.getDependency( 'accessor', input ) );\n\t\t\tpendingOutputAccessors.push( this.getDependency( 'accessor', output ) );\n\t\t\tpendingSamplers.push( sampler );\n\t\t\tpendingTargets.push( target );\n\n\t\t}\n\n\t\treturn Promise.all( [\n\n\t\t\tPromise.all( pendingNodes ),\n\t\t\tPromise.all( pendingInputAccessors ),\n\t\t\tPromise.all( pendingOutputAccessors ),\n\t\t\tPromise.all( pendingSamplers ),\n\t\t\tPromise.all( pendingTargets )\n\n\t\t] ).then( function ( dependencies ) {\n\n\t\t\tconst nodes = dependencies[ 0 ];\n\t\t\tconst inputAccessors = dependencies[ 1 ];\n\t\t\tconst outputAccessors = dependencies[ 2 ];\n\t\t\tconst samplers = dependencies[ 3 ];\n\t\t\tconst targets = dependencies[ 4 ];\n\n\t\t\tconst tracks = [];\n\n\t\t\tfor ( let i = 0, il = nodes.length; i < il; i ++ ) {\n\n\t\t\t\tconst node = nodes[ i ];\n\t\t\t\tconst inputAccessor = inputAccessors[ i ];\n\t\t\t\tconst outputAccessor = outputAccessors[ i ];\n\t\t\t\tconst sampler = samplers[ i ];\n\t\t\t\tconst target = targets[ i ];\n\n\t\t\t\tif ( node === undefined ) continue;\n\n\t\t\t\tnode.updateMatrix();\n\t\t\t\tnode.matrixAutoUpdate = true;\n\n\t\t\t\tlet TypedKeyframeTrack;\n\n\t\t\t\tswitch ( PATH_PROPERTIES[ target.path ] ) {\n\n\t\t\t\t\tcase PATH_PROPERTIES.weights:\n\n\t\t\t\t\t\tTypedKeyframeTrack = NumberKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.rotation:\n\n\t\t\t\t\t\tTypedKeyframeTrack = QuaternionKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase PATH_PROPERTIES.position:\n\t\t\t\t\tcase PATH_PROPERTIES.scale:\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tTypedKeyframeTrack = VectorKeyframeTrack;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\tconst targetName = node.name ? node.name : node.uuid;\n\n\t\t\t\tconst interpolation = sampler.interpolation !== undefined ? INTERPOLATION[ sampler.interpolation ] : InterpolateLinear;\n\n\t\t\t\tconst targetNames = [];\n\n\t\t\t\tif ( PATH_PROPERTIES[ target.path ] === PATH_PROPERTIES.weights ) {\n\n\t\t\t\t\tnode.traverse( function ( object ) {\n\n\t\t\t\t\t\tif ( object.morphTargetInfluences ) {\n\n\t\t\t\t\t\t\ttargetNames.push( object.name ? object.name : object.uuid );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttargetNames.push( targetName );\n\n\t\t\t\t}\n\n\t\t\t\tlet outputArray = outputAccessor.array;\n\n\t\t\t\tif ( outputAccessor.normalized ) {\n\n\t\t\t\t\tconst scale = getNormalizedComponentScale( outputArray.constructor );\n\t\t\t\t\tconst scaled = new Float32Array( outputArray.length );\n\n\t\t\t\t\tfor ( let j = 0, jl = outputArray.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tscaled[ j ] = outputArray[ j ] * scale;\n\n\t\t\t\t\t}\n\n\t\t\t\t\toutputArray = scaled;\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let j = 0, jl = targetNames.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst track = new TypedKeyframeTrack(\n\t\t\t\t\t\ttargetNames[ j ] + '.' + PATH_PROPERTIES[ target.path ],\n\t\t\t\t\t\tinputAccessor.array,\n\t\t\t\t\t\toutputArray,\n\t\t\t\t\t\tinterpolation\n\t\t\t\t\t);\n\n\t\t\t\t\t// Override interpolation with custom factory method.\n\t\t\t\t\tif ( sampler.interpolation === 'CUBICSPLINE' ) {\n\n\t\t\t\t\t\ttrack.createInterpolant = function InterpolantFactoryMethodGLTFCubicSpline( result ) {\n\n\t\t\t\t\t\t\t// A CUBICSPLINE keyframe in glTF has three output values for each input value,\n\t\t\t\t\t\t\t// representing inTangent, splineVertex, and outTangent. As a result, track.getValueSize()\n\t\t\t\t\t\t\t// must be divided by three to get the interpolant's sampleSize argument.\n\n\t\t\t\t\t\t\tconst interpolantType = ( this instanceof QuaternionKeyframeTrack ) ? GLTFCubicSplineQuaternionInterpolant : GLTFCubicSplineInterpolant;\n\n\t\t\t\t\t\t\treturn new interpolantType( this.times, this.values, this.getValueSize() / 3, result );\n\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t// Mark as CUBICSPLINE. `track.getInterpolation()` doesn't support custom interpolants.\n\t\t\t\t\t\ttrack.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( track );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst name = animationDef.name ? animationDef.name : 'animation_' + animationIndex;\n\n\t\t\treturn new AnimationClip( name, undefined, tracks );\n\n\t\t} );\n\n\t}\n\n\tcreateNodeMesh( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst parser = this;\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\tif ( nodeDef.mesh === undefined ) return null;\n\n\t\treturn parser.getDependency( 'mesh', nodeDef.mesh ).then( function ( mesh ) {\n\n\t\t\tconst node = parser._getNodeRef( parser.meshCache, nodeDef.mesh, mesh );\n\n\t\t\t// if weights are provided on the node, override weights on the mesh.\n\t\t\tif ( nodeDef.weights !== undefined ) {\n\n\t\t\t\tnode.traverse( function ( o ) {\n\n\t\t\t\t\tif ( ! o.isMesh ) return;\n\n\t\t\t\t\tfor ( let i = 0, il = nodeDef.weights.length; i < il; i ++ ) {\n\n\t\t\t\t\t\to.morphTargetInfluences[ i ] = nodeDef.weights[ i ];\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#nodes-and-hierarchy\n\t * @param {number} nodeIndex\n\t * @return {Promise<Object3D>}\n\t */\n\tloadNode( nodeIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst parser = this;\n\n\t\tconst nodeDef = json.nodes[ nodeIndex ];\n\n\t\t// reserve node's name before its dependencies, so the root has the intended name.\n\t\tconst nodeName = nodeDef.name ? parser.createUniqueName( nodeDef.name ) : '';\n\n\t\treturn ( function () {\n\n\t\t\tconst pending = [];\n\n\t\t\tconst meshPromise = parser._invokeOne( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeMesh && ext.createNodeMesh( nodeIndex );\n\n\t\t\t} );\n\n\t\t\tif ( meshPromise ) {\n\n\t\t\t\tpending.push( meshPromise );\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.camera !== undefined ) {\n\n\t\t\t\tpending.push( parser.getDependency( 'camera', nodeDef.camera ).then( function ( camera ) {\n\n\t\t\t\t\treturn parser._getNodeRef( parser.cameraCache, nodeDef.camera, camera );\n\n\t\t\t\t} ) );\n\n\t\t\t}\n\n\t\t\tparser._invokeAll( function ( ext ) {\n\n\t\t\t\treturn ext.createNodeAttachment && ext.createNodeAttachment( nodeIndex );\n\n\t\t\t} ).forEach( function ( promise ) {\n\n\t\t\t\tpending.push( promise );\n\n\t\t\t} );\n\n\t\t\treturn Promise.all( pending );\n\n\t\t}() ).then( function ( objects ) {\n\n\t\t\tlet node;\n\n\t\t\t// .isBone isn't in glTF spec. See ._markDefs\n\t\t\tif ( nodeDef.isBone === true ) {\n\n\t\t\t\tnode = new Bone();\n\n\t\t\t} else if ( objects.length > 1 ) {\n\n\t\t\t\tnode = new Group();\n\n\t\t\t} else if ( objects.length === 1 ) {\n\n\t\t\t\tnode = objects[ 0 ];\n\n\t\t\t} else {\n\n\t\t\t\tnode = new Object3D();\n\n\t\t\t}\n\n\t\t\tif ( node !== objects[ 0 ] ) {\n\n\t\t\t\tfor ( let i = 0, il = objects.length; i < il; i ++ ) {\n\n\t\t\t\t\tnode.add( objects[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( nodeDef.name ) {\n\n\t\t\t\tnode.userData.name = nodeDef.name;\n\t\t\t\tnode.name = nodeName;\n\n\t\t\t}\n\n\t\t\tassignExtrasToUserData( node, nodeDef );\n\n\t\t\tif ( nodeDef.extensions ) addUnknownExtensionsToUserData( extensions, node, nodeDef );\n\n\t\t\tif ( nodeDef.matrix !== undefined ) {\n\n\t\t\t\tconst matrix = new Matrix4();\n\t\t\t\tmatrix.fromArray( nodeDef.matrix );\n\t\t\t\tnode.applyMatrix4( matrix );\n\n\t\t\t} else {\n\n\t\t\t\tif ( nodeDef.translation !== undefined ) {\n\n\t\t\t\t\tnode.position.fromArray( nodeDef.translation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.rotation !== undefined ) {\n\n\t\t\t\t\tnode.quaternion.fromArray( nodeDef.rotation );\n\n\t\t\t\t}\n\n\t\t\t\tif ( nodeDef.scale !== undefined ) {\n\n\t\t\t\t\tnode.scale.fromArray( nodeDef.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( ! parser.associations.has( node ) ) {\n\n\t\t\t\tparser.associations.set( node, {} );\n\n\t\t\t}\n\n\t\t\tparser.associations.get( node ).nodes = nodeIndex;\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t}\n\n\t/**\n\t * Specification: https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#scenes\n\t * @param {number} sceneIndex\n\t * @return {Promise<Group>}\n\t */\n\tloadScene( sceneIndex ) {\n\n\t\tconst json = this.json;\n\t\tconst extensions = this.extensions;\n\t\tconst sceneDef = this.json.scenes[ sceneIndex ];\n\t\tconst parser = this;\n\n\t\t// Loader returns Group, not Scene.\n\t\t// See: https://github.com/mrdoob/three.js/issues/18342#issuecomment-578981172\n\t\tconst scene = new Group();\n\t\tif ( sceneDef.name ) scene.name = parser.createUniqueName( sceneDef.name );\n\n\t\tassignExtrasToUserData( scene, sceneDef );\n\n\t\tif ( sceneDef.extensions ) addUnknownExtensionsToUserData( extensions, scene, sceneDef );\n\n\t\tconst nodeIds = sceneDef.nodes || [];\n\n\t\tconst pending = [];\n\n\t\tfor ( let i = 0, il = nodeIds.length; i < il; i ++ ) {\n\n\t\t\tpending.push( buildNodeHierarchy( nodeIds[ i ], scene, json, parser ) );\n\n\t\t}\n\n\t\treturn Promise.all( pending ).then( function () {\n\n\t\t\t// Removes dangling associations, associations that reference a node that\n\t\t\t// didn't make it into the scene.\n\t\t\tconst reduceAssociations = ( node ) => {\n\n\t\t\t\tconst reducedAssociations = new Map();\n\n\t\t\t\tfor ( const [ key, value ] of parser.associations ) {\n\n\t\t\t\t\tif ( key instanceof Material || key instanceof Texture ) {\n\n\t\t\t\t\t\treducedAssociations.set( key, value );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tnode.traverse( ( node ) => {\n\n\t\t\t\t\tconst mappings = parser.associations.get( node );\n\n\t\t\t\t\tif ( mappings != null ) {\n\n\t\t\t\t\t\treducedAssociations.set( node, mappings );\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\treturn reducedAssociations;\n\n\t\t\t};\n\n\t\t\tparser.associations = reduceAssociations( scene );\n\n\t\t\treturn scene;\n\n\t\t} );\n\n\t}\n\n}\n\nfunction buildNodeHierarchy( nodeId, parentObject, json, parser ) {\n\n\tconst nodeDef = json.nodes[ nodeId ];\n\n\treturn parser.getDependency( 'node', nodeId ).then( function ( node ) {\n\n\t\tif ( nodeDef.skin === undefined ) return node;\n\n\t\t// build skeleton here as well\n\n\t\tlet skinEntry;\n\n\t\treturn parser.getDependency( 'skin', nodeDef.skin ).then( function ( skin ) {\n\n\t\t\tskinEntry = skin;\n\n\t\t\tconst pendingJoints = [];\n\n\t\t\tfor ( let i = 0, il = skinEntry.joints.length; i < il; i ++ ) {\n\n\t\t\t\tpendingJoints.push( parser.getDependency( 'node', skinEntry.joints[ i ] ) );\n\n\t\t\t}\n\n\t\t\treturn Promise.all( pendingJoints );\n\n\t\t} ).then( function ( jointNodes ) {\n\n\t\t\tnode.traverse( function ( mesh ) {\n\n\t\t\t\tif ( ! mesh.isMesh ) return;\n\n\t\t\t\tconst bones = [];\n\t\t\t\tconst boneInverses = [];\n\n\t\t\t\tfor ( let j = 0, jl = jointNodes.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst jointNode = jointNodes[ j ];\n\n\t\t\t\t\tif ( jointNode ) {\n\n\t\t\t\t\t\tbones.push( jointNode );\n\n\t\t\t\t\t\tconst mat = new Matrix4();\n\n\t\t\t\t\t\tif ( skinEntry.inverseBindMatrices !== undefined ) {\n\n\t\t\t\t\t\t\tmat.fromArray( skinEntry.inverseBindMatrices.array, j * 16 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tboneInverses.push( mat );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Joint \"%s\" could not be found.', skinEntry.joints[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tmesh.bind( new Skeleton( bones, boneInverses ), mesh.matrixWorld );\n\n\t\t\t} );\n\n\t\t\treturn node;\n\n\t\t} );\n\n\t} ).then( function ( node ) {\n\n\t\t// build node hierachy\n\n\t\tparentObject.add( node );\n\n\t\tconst pending = [];\n\n\t\tif ( nodeDef.children ) {\n\n\t\t\tconst children = nodeDef.children;\n\n\t\t\tfor ( let i = 0, il = children.length; i < il; i ++ ) {\n\n\t\t\t\tconst child = children[ i ];\n\t\t\t\tpending.push( buildNodeHierarchy( child, node, json, parser ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn Promise.all( pending );\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n */\nfunction computeBounds( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst box = new Box3();\n\n\tif ( attributes.POSITION !== undefined ) {\n\n\t\tconst accessor = parser.json.accessors[ attributes.POSITION ];\n\n\t\tconst min = accessor.min;\n\t\tconst max = accessor.max;\n\n\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\tbox.set(\n\t\t\t\tnew Vector3( min[ 0 ], min[ 1 ], min[ 2 ] ),\n\t\t\t\tnew Vector3( max[ 0 ], max[ 1 ], max[ 2 ] )\n\t\t\t);\n\n\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\tbox.min.multiplyScalar( boxScale );\n\t\t\t\tbox.max.multiplyScalar( boxScale );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\treturn;\n\n\t\t}\n\n\t} else {\n\n\t\treturn;\n\n\t}\n\n\tconst targets = primitiveDef.targets;\n\n\tif ( targets !== undefined ) {\n\n\t\tconst maxDisplacement = new Vector3();\n\t\tconst vector = new Vector3();\n\n\t\tfor ( let i = 0, il = targets.length; i < il; i ++ ) {\n\n\t\t\tconst target = targets[ i ];\n\n\t\t\tif ( target.POSITION !== undefined ) {\n\n\t\t\t\tconst accessor = parser.json.accessors[ target.POSITION ];\n\t\t\t\tconst min = accessor.min;\n\t\t\t\tconst max = accessor.max;\n\n\t\t\t\t// glTF requires 'min' and 'max', but VRM (which extends glTF) currently ignores that requirement.\n\n\t\t\t\tif ( min !== undefined && max !== undefined ) {\n\n\t\t\t\t\t// we need to get max of absolute components because target weight is [-1,1]\n\t\t\t\t\tvector.setX( Math.max( Math.abs( min[ 0 ] ), Math.abs( max[ 0 ] ) ) );\n\t\t\t\t\tvector.setY( Math.max( Math.abs( min[ 1 ] ), Math.abs( max[ 1 ] ) ) );\n\t\t\t\t\tvector.setZ( Math.max( Math.abs( min[ 2 ] ), Math.abs( max[ 2 ] ) ) );\n\n\n\t\t\t\t\tif ( accessor.normalized ) {\n\n\t\t\t\t\t\tconst boxScale = getNormalizedComponentScale( WEBGL_COMPONENT_TYPES[ accessor.componentType ] );\n\t\t\t\t\t\tvector.multiplyScalar( boxScale );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// Note: this assumes that the sum of all weights is at most 1. This isn't quite correct - it's more conservative\n\t\t\t\t\t// to assume that each target can have a max weight of 1. However, for some use cases - notably, when morph targets\n\t\t\t\t\t// are used to implement key-frame animations and as such only two are active at a time - this results in very large\n\t\t\t\t\t// boxes. So for now we make a box that's sometimes a touch too small but is hopefully mostly of reasonable size.\n\t\t\t\t\tmaxDisplacement.max( vector );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.GLTFLoader: Missing min/max properties for accessor POSITION.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// As per comment above this box isn't conservative, but has a reasonable size for a very large number of morph targets.\n\t\tbox.expandByVector( maxDisplacement );\n\n\t}\n\n\tgeometry.boundingBox = box;\n\n\tconst sphere = new Sphere();\n\n\tbox.getCenter( sphere.center );\n\tsphere.radius = box.min.distanceTo( box.max ) / 2;\n\n\tgeometry.boundingSphere = sphere;\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {GLTF.Primitive} primitiveDef\n * @param {GLTFParser} parser\n * @return {Promise<BufferGeometry>}\n */\nfunction addPrimitiveAttributes( geometry, primitiveDef, parser ) {\n\n\tconst attributes = primitiveDef.attributes;\n\n\tconst pending = [];\n\n\tfunction assignAttributeAccessor( accessorIndex, attributeName ) {\n\n\t\treturn parser.getDependency( 'accessor', accessorIndex )\n\t\t\t.then( function ( accessor ) {\n\n\t\t\t\tgeometry.setAttribute( attributeName, accessor );\n\n\t\t\t} );\n\n\t}\n\n\tfor ( const gltfAttributeName in attributes ) {\n\n\t\tconst threeAttributeName = ATTRIBUTES[ gltfAttributeName ] || gltfAttributeName.toLowerCase();\n\n\t\t// Skip attributes already provided by e.g. Draco extension.\n\t\tif ( threeAttributeName in geometry.attributes ) continue;\n\n\t\tpending.push( assignAttributeAccessor( attributes[ gltfAttributeName ], threeAttributeName ) );\n\n\t}\n\n\tif ( primitiveDef.indices !== undefined && ! geometry.index ) {\n\n\t\tconst accessor = parser.getDependency( 'accessor', primitiveDef.indices ).then( function ( accessor ) {\n\n\t\t\tgeometry.setIndex( accessor );\n\n\t\t} );\n\n\t\tpending.push( accessor );\n\n\t}\n\n\tassignExtrasToUserData( geometry, primitiveDef );\n\n\tcomputeBounds( geometry, primitiveDef, parser );\n\n\treturn Promise.all( pending ).then( function () {\n\n\t\treturn primitiveDef.targets !== undefined\n\t\t\t? addMorphTargets( geometry, primitiveDef.targets, parser )\n\t\t\t: geometry;\n\n\t} );\n\n}\n\n/**\n * @param {BufferGeometry} geometry\n * @param {Number} drawMode\n * @return {BufferGeometry}\n */\nfunction toTrianglesDrawMode( geometry, drawMode ) {\n\n\tlet index = geometry.getIndex();\n\n\t// generate index if not present\n\n\tif ( index === null ) {\n\n\t\tconst indices = [];\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\t\tindices.push( i );\n\n\t\t\t}\n\n\t\t\tgeometry.setIndex( indices );\n\t\t\tindex = geometry.getIndex();\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible.' );\n\t\t\treturn geometry;\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst numberOfTriangles = index.count - 2;\n\tconst newIndices = [];\n\n\tif ( drawMode === TriangleFanDrawMode ) {\n\n\t\t// gl.TRIANGLE_FAN\n\n\t\tfor ( let i = 1; i <= numberOfTriangles; i ++ ) {\n\n\t\t\tnewIndices.push( index.getX( 0 ) );\n\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\n\t\t}\n\n\t} else {\n\n\t\t// gl.TRIANGLE_STRIP\n\n\t\tfor ( let i = 0; i < numberOfTriangles; i ++ ) {\n\n\t\t\tif ( i % 2 === 0 ) {\n\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\n\n\t\t\t} else {\n\n\t\t\t\tnewIndices.push( index.getX( i + 2 ) );\n\t\t\t\tnewIndices.push( index.getX( i + 1 ) );\n\t\t\t\tnewIndices.push( index.getX( i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tif ( ( newIndices.length / 3 ) !== numberOfTriangles ) {\n\n\t\tconsole.error( 'THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.' );\n\n\t}\n\n\t// build final geometry\n\n\tconst newGeometry = geometry.clone();\n\tnewGeometry.setIndex( newIndices );\n\n\treturn newGeometry;\n\n}\n\nexport { GLTFLoader };\n",null,null,null,null,null,null,null,null,null,"import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Reflector extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Reflector';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Reflector.ReflectorShader;\n\n\t\t//\n\n\t\tconst reflectorPlane = new Plane();\n\t\tconst normal = new Vector3();\n\t\tconst reflectorWorldPosition = new Vector3();\n\t\tconst cameraWorldPosition = new Vector3();\n\t\tconst rotationMatrix = new Matrix4();\n\t\tconst lookAtPosition = new Vector3( 0, 0, - 1 );\n\t\tconst clipPlane = new Vector4();\n\n\t\tconst view = new Vector3();\n\t\tconst target = new Vector3();\n\t\tconst q = new Vector4();\n\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst virtualCamera = new PerspectiveCamera();\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\tconst material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\tvertexShader: shader.vertexShader\n\t\t} );\n\n\t\tmaterial.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tmaterial.uniforms[ 'color' ].value = color;\n\t\tmaterial.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\tthis.material = material;\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\treflectorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\tnormal.set( 0, 0, 1 );\n\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\tview.subVectors( reflectorWorldPosition, cameraWorldPosition );\n\n\t\t\t// Avoid rendering when reflector is facing away\n\n\t\t\tif ( view.dot( normal ) > 0 ) return;\n\n\t\t\tview.reflect( normal ).negate();\n\t\t\tview.add( reflectorWorldPosition );\n\n\t\t\trotationMatrix.extractRotation( camera.matrixWorld );\n\n\t\t\tlookAtPosition.set( 0, 0, - 1 );\n\t\t\tlookAtPosition.applyMatrix4( rotationMatrix );\n\t\t\tlookAtPosition.add( cameraWorldPosition );\n\n\t\t\ttarget.subVectors( reflectorWorldPosition, lookAtPosition );\n\t\t\ttarget.reflect( normal ).negate();\n\t\t\ttarget.add( reflectorWorldPosition );\n\n\t\t\tvirtualCamera.position.copy( view );\n\t\t\tvirtualCamera.up.set( 0, 1, 0 );\n\t\t\tvirtualCamera.up.applyMatrix4( rotationMatrix );\n\t\t\tvirtualCamera.up.reflect( normal );\n\t\t\tvirtualCamera.lookAt( target );\n\n\t\t\tvirtualCamera.far = camera.far; // Used in WebGLBackground\n\n\t\t\tvirtualCamera.updateMatrixWorld();\n\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\n\t\t\t// Update the texture matrix\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\t\t\ttextureMatrix.multiply( virtualCamera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( virtualCamera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t\t// Now update projection matrix with new clip plane, implementing code from: http://www.terathon.com/code/oblique.html\n\t\t\t// Paper explaining this technique: http://www.terathon.com/lengyel/Lengyel-Oblique.pdf\n\t\t\treflectorPlane.setFromNormalAndCoplanarPoint( normal, reflectorWorldPosition );\n\t\t\treflectorPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\tclipPlane.set( reflectorPlane.normal.x, reflectorPlane.normal.y, reflectorPlane.normal.z, reflectorPlane.constant );\n\n\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\tq.x = ( Math.sign( clipPlane.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\tq.y = ( Math.sign( clipPlane.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\tq.z = - 1.0;\n\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t// Calculate the scaled plane vector\n\t\t\tclipPlane.multiplyScalar( 2.0 / clipPlane.dot( q ) );\n\n\t\t\t// Replacing the third row of the projection matrix\n\t\t\tprojectionMatrix.elements[ 2 ] = clipPlane.x;\n\t\t\tprojectionMatrix.elements[ 6 ] = clipPlane.y;\n\t\t\tprojectionMatrix.elements[ 10 ] = clipPlane.z + 1.0 - clipBias;\n\t\t\tprojectionMatrix.elements[ 14 ] = clipPlane.w;\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // Avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // Avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\n\t\t\trenderer.state.buffers.depth.setMask( true ); // make sure the depth buffer is writable so it can be properly cleared, see #18897\n\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// Restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nReflector.prototype.isReflector = true;\n\nReflector.ReflectorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\t\tuniform mat4 textureMatrix;\n\t\tvarying vec4 vUv;\n\n\t\t#include <common>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t\t#include <logdepthbuf_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\t\tvarying vec4 vUv;\n\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n};\n\nexport { Reflector };\n","import {\n\tColor,\n\tMatrix4,\n\tMesh,\n\tPerspectiveCamera,\n\tPlane,\n\tQuaternion,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector3,\n\tVector4,\n\tWebGLRenderTarget\n} from 'three';\n\nclass Refractor extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Refractor';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0x7F7F7F );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst shader = options.shader || Refractor.RefractorShader;\n\n\t\t//\n\n\t\tconst virtualCamera = new PerspectiveCamera();\n\t\tvirtualCamera.matrixAutoUpdate = false;\n\t\tvirtualCamera.userData.refractor = true;\n\n\t\t//\n\n\t\tconst refractorPlane = new Plane();\n\t\tconst textureMatrix = new Matrix4();\n\n\t\t// render target\n\n\t\tconst renderTarget = new WebGLRenderTarget( textureWidth, textureHeight );\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true // ensures, refractors are drawn from farthest to closest\n\t\t} );\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'tDiffuse' ].value = renderTarget.texture;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// functions\n\n\t\tconst visible = ( function () {\n\n\t\t\tconst refractorWorldPosition = new Vector3();\n\t\t\tconst cameraWorldPosition = new Vector3();\n\t\t\tconst rotationMatrix = new Matrix4();\n\n\t\t\tconst view = new Vector3();\n\t\t\tconst normal = new Vector3();\n\n\t\t\treturn function visible( camera ) {\n\n\t\t\t\trefractorWorldPosition.setFromMatrixPosition( scope.matrixWorld );\n\t\t\t\tcameraWorldPosition.setFromMatrixPosition( camera.matrixWorld );\n\n\t\t\t\tview.subVectors( refractorWorldPosition, cameraWorldPosition );\n\n\t\t\t\trotationMatrix.extractRotation( scope.matrixWorld );\n\n\t\t\t\tnormal.set( 0, 0, 1 );\n\t\t\t\tnormal.applyMatrix4( rotationMatrix );\n\n\t\t\t\treturn view.dot( normal ) < 0;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateRefractorPlane = ( function () {\n\n\t\t\tconst normal = new Vector3();\n\t\t\tconst position = new Vector3();\n\t\t\tconst quaternion = new Quaternion();\n\t\t\tconst scale = new Vector3();\n\n\t\t\treturn function updateRefractorPlane() {\n\n\t\t\t\tscope.matrixWorld.decompose( position, quaternion, scale );\n\t\t\t\tnormal.set( 0, 0, 1 ).applyQuaternion( quaternion ).normalize();\n\n\t\t\t\t// flip the normal because we want to cull everything above the plane\n\n\t\t\t\tnormal.negate();\n\n\t\t\t\trefractorPlane.setFromNormalAndCoplanarPoint( normal, position );\n\n\t\t\t};\n\n\t\t} )();\n\n\t\tconst updateVirtualCamera = ( function () {\n\n\t\t\tconst clipPlane = new Plane();\n\t\t\tconst clipVector = new Vector4();\n\t\t\tconst q = new Vector4();\n\n\t\t\treturn function updateVirtualCamera( camera ) {\n\n\t\t\t\tvirtualCamera.matrixWorld.copy( camera.matrixWorld );\n\t\t\t\tvirtualCamera.matrixWorldInverse.copy( virtualCamera.matrixWorld ).invert();\n\t\t\t\tvirtualCamera.projectionMatrix.copy( camera.projectionMatrix );\n\t\t\t\tvirtualCamera.far = camera.far; // used in WebGLBackground\n\n\t\t\t\t// The following code creates an oblique view frustum for clipping.\n\t\t\t\t// see: Lengyel, Eric. Oblique View Frustum Depth Projection and Clipping.\n\t\t\t\t// Journal of Game Development, Vol. 1, No. 2 (2005), Charles River Media, pp. 516\n\n\t\t\t\tclipPlane.copy( refractorPlane );\n\t\t\t\tclipPlane.applyMatrix4( virtualCamera.matrixWorldInverse );\n\n\t\t\t\tclipVector.set( clipPlane.normal.x, clipPlane.normal.y, clipPlane.normal.z, clipPlane.constant );\n\n\t\t\t\t// calculate the clip-space corner point opposite the clipping plane and\n\t\t\t\t// transform it into camera space by multiplying it by the inverse of the projection matrix\n\n\t\t\t\tconst projectionMatrix = virtualCamera.projectionMatrix;\n\n\t\t\t\tq.x = ( Math.sign( clipVector.x ) + projectionMatrix.elements[ 8 ] ) / projectionMatrix.elements[ 0 ];\n\t\t\t\tq.y = ( Math.sign( clipVector.y ) + projectionMatrix.elements[ 9 ] ) / projectionMatrix.elements[ 5 ];\n\t\t\t\tq.z = - 1.0;\n\t\t\t\tq.w = ( 1.0 + projectionMatrix.elements[ 10 ] ) / projectionMatrix.elements[ 14 ];\n\n\t\t\t\t// calculate the scaled plane vector\n\n\t\t\t\tclipVector.multiplyScalar( 2.0 / clipVector.dot( q ) );\n\n\t\t\t\t// replacing the third row of the projection matrix\n\n\t\t\t\tprojectionMatrix.elements[ 2 ] = clipVector.x;\n\t\t\t\tprojectionMatrix.elements[ 6 ] = clipVector.y;\n\t\t\t\tprojectionMatrix.elements[ 10 ] = clipVector.z + 1.0 - clipBias;\n\t\t\t\tprojectionMatrix.elements[ 14 ] = clipVector.w;\n\n\t\t\t};\n\n\t\t} )();\n\n\t\t// This will update the texture matrix that is used for projective texture mapping in the shader.\n\t\t// see: http://developer.download.nvidia.com/assets/gamedev/docs/projective_texture_mapping.pdf\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\t// this matrix does range mapping to [ 0, 1 ]\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\t// we use \"Object Linear Texgen\", so we need to multiply the texture matrix T\n\t\t\t// (matrix above) with the projection and view matrix of the virtual camera\n\t\t\t// and the model matrix of the refractor\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\t//\n\n\t\tfunction render( renderer, scene, camera ) {\n\n\t\t\tscope.visible = false;\n\n\t\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\t\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\t\tconst currentShadowAutoUpdate = renderer.shadowMap.autoUpdate;\n\n\t\t\trenderer.xr.enabled = false; // avoid camera modification\n\t\t\trenderer.shadowMap.autoUpdate = false; // avoid re-computing shadows\n\n\t\t\trenderer.setRenderTarget( renderTarget );\n\t\t\tif ( renderer.autoClear === false ) renderer.clear();\n\t\t\trenderer.render( scene, virtualCamera );\n\n\t\t\trenderer.xr.enabled = currentXrEnabled;\n\t\t\trenderer.shadowMap.autoUpdate = currentShadowAutoUpdate;\n\t\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\t\t// restore viewport\n\n\t\t\tconst viewport = camera.viewport;\n\n\t\t\tif ( viewport !== undefined ) {\n\n\t\t\t\trenderer.state.viewport( viewport );\n\n\t\t\t}\n\n\t\t\tscope.visible = true;\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t// Render\n\n\t\t\trenderTarget.texture.encoding = renderer.outputEncoding;\n\n\t\t\t// ensure refractors are rendered only once per frame\n\n\t\t\tif ( camera.userData.refractor === true ) return;\n\n\t\t\t// avoid rendering when the refractor is viewed from behind\n\n\t\t\tif ( ! visible( camera ) === true ) return;\n\n\t\t\t// update\n\n\t\t\tupdateRefractorPlane();\n\n\t\t\tupdateTextureMatrix( camera );\n\n\t\t\tupdateVirtualCamera( camera );\n\n\t\t\trender( renderer, scene, camera );\n\n\t\t};\n\n\t\tthis.getRenderTarget = function () {\n\n\t\t\treturn renderTarget;\n\n\t\t};\n\n\t\tthis.dispose = function () {\n\n\t\t\trenderTarget.dispose();\n\t\t\tscope.material.dispose();\n\n\t\t};\n\n\t}\n\n}\n\nRefractor.prototype.isRefractor = true;\n\nRefractor.RefractorShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tDiffuse': {\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\tvalue: null\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = textureMatrix * vec4( position, 1.0 );\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec3 color;\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec4 vUv;\n\n\t\tfloat blendOverlay( float base, float blend ) {\n\n\t\t\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );\n\n\t\t}\n\n\t\tvec3 blendOverlay( vec3 base, vec3 blend ) {\n\n\t\t\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 base = texture2DProj( tDiffuse, vUv );\n\t\t\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );\n\n\t\t}`\n\n};\n\nexport { Refractor };\n","import {\n\tClock,\n\tColor,\n\tMatrix4,\n\tMesh,\n\tRepeatWrapping,\n\tShaderMaterial,\n\tTextureLoader,\n\tUniformsLib,\n\tUniformsUtils,\n\tVector2,\n\tVector4\n} from 'three';\nimport { Reflector } from '../objects/Reflector.js';\nimport { Refractor } from '../objects/Refractor.js';\n\n/**\n * References:\n *\thttps://alex.vlachos.com/graphics/Vlachos-SIGGRAPH10-WaterFlow.pdf\n *\thttp://graphicsrunner.blogspot.de/2010/08/water-using-flow-maps.html\n *\n */\n\nclass Water extends Mesh {\n\n\tconstructor( geometry, options = {} ) {\n\n\t\tsuper( geometry );\n\n\t\tthis.type = 'Water';\n\n\t\tconst scope = this;\n\n\t\tconst color = ( options.color !== undefined ) ? new Color( options.color ) : new Color( 0xFFFFFF );\n\t\tconst textureWidth = options.textureWidth || 512;\n\t\tconst textureHeight = options.textureHeight || 512;\n\t\tconst clipBias = options.clipBias || 0;\n\t\tconst flowDirection = options.flowDirection || new Vector2( 1, 0 );\n\t\tconst flowSpeed = options.flowSpeed || 0.03;\n\t\tconst reflectivity = options.reflectivity || 0.02;\n\t\tconst scale = options.scale || 1;\n\t\tconst shader = options.shader || Water.WaterShader;\n\n\t\tconst textureLoader = new TextureLoader();\n\n\t\tconst flowMap = options.flowMap || undefined;\n\t\tconst normalMap0 = options.normalMap0 || textureLoader.load( 'textures/water/Water_1_M_Normal.jpg' );\n\t\tconst normalMap1 = options.normalMap1 || textureLoader.load( 'textures/water/Water_2_M_Normal.jpg' );\n\n\t\tconst cycle = 0.15; // a cycle of a flow map phase\n\t\tconst halfCycle = cycle * 0.5;\n\t\tconst textureMatrix = new Matrix4();\n\t\tconst clock = new Clock();\n\n\t\t// internal components\n\n\t\tif ( Reflector === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Reflector not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( Refractor === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Water: Required component Refractor not found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst reflector = new Reflector( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\tconst refractor = new Refractor( geometry, {\n\t\t\ttextureWidth: textureWidth,\n\t\t\ttextureHeight: textureHeight,\n\t\t\tclipBias: clipBias\n\t\t} );\n\n\t\treflector.matrixAutoUpdate = false;\n\t\trefractor.matrixAutoUpdate = false;\n\n\t\t// material\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: UniformsUtils.merge( [\n\t\t\t\tUniformsLib[ 'fog' ],\n\t\t\t\tshader.uniforms\n\t\t\t] ),\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader,\n\t\t\ttransparent: true,\n\t\t\tfog: true\n\t\t} );\n\n\t\tif ( flowMap !== undefined ) {\n\n\t\t\tthis.material.defines.USE_FLOWMAP = '';\n\t\t\tthis.material.uniforms[ 'tFlowMap' ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: flowMap\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tthis.material.uniforms[ 'flowDirection' ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: flowDirection\n\t\t\t};\n\n\t\t}\n\n\t\t// maps\n\n\t\tnormalMap0.wrapS = normalMap0.wrapT = RepeatWrapping;\n\t\tnormalMap1.wrapS = normalMap1.wrapT = RepeatWrapping;\n\n\t\tthis.material.uniforms[ 'tReflectionMap' ].value = reflector.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tRefractionMap' ].value = refractor.getRenderTarget().texture;\n\t\tthis.material.uniforms[ 'tNormalMap0' ].value = normalMap0;\n\t\tthis.material.uniforms[ 'tNormalMap1' ].value = normalMap1;\n\n\t\t// water\n\n\t\tthis.material.uniforms[ 'color' ].value = color;\n\t\tthis.material.uniforms[ 'reflectivity' ].value = reflectivity;\n\t\tthis.material.uniforms[ 'textureMatrix' ].value = textureMatrix;\n\n\t\t// inital values\n\n\t\tthis.material.uniforms[ 'config' ].value.x = 0; // flowMapOffset0\n\t\tthis.material.uniforms[ 'config' ].value.y = halfCycle; // flowMapOffset1\n\t\tthis.material.uniforms[ 'config' ].value.z = halfCycle; // halfCycle\n\t\tthis.material.uniforms[ 'config' ].value.w = scale; // scale\n\n\t\t// functions\n\n\t\tfunction updateTextureMatrix( camera ) {\n\n\t\t\ttextureMatrix.set(\n\t\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t\t);\n\n\t\t\ttextureMatrix.multiply( camera.projectionMatrix );\n\t\t\ttextureMatrix.multiply( camera.matrixWorldInverse );\n\t\t\ttextureMatrix.multiply( scope.matrixWorld );\n\n\t\t}\n\n\t\tfunction updateFlow() {\n\n\t\t\tconst delta = clock.getDelta();\n\t\t\tconst config = scope.material.uniforms[ 'config' ];\n\n\t\t\tconfig.value.x += flowSpeed * delta; // flowMapOffset0\n\t\t\tconfig.value.y = config.value.x + halfCycle; // flowMapOffset1\n\n\t\t\t// Important: The distance between offsets should be always the value of \"halfCycle\".\n\t\t\t// Moreover, both offsets should be in the range of [ 0, cycle ].\n\t\t\t// This approach ensures a smooth water flow and avoids \"reset\" effects.\n\n\t\t\tif ( config.value.x >= cycle ) {\n\n\t\t\t\tconfig.value.x = 0;\n\t\t\t\tconfig.value.y = halfCycle;\n\n\t\t\t} else if ( config.value.y >= cycle ) {\n\n\t\t\t\tconfig.value.y = config.value.y - cycle;\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tthis.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\tupdateTextureMatrix( camera );\n\t\t\tupdateFlow();\n\n\t\t\tscope.visible = false;\n\n\t\t\treflector.matrixWorld.copy( scope.matrixWorld );\n\t\t\trefractor.matrixWorld.copy( scope.matrixWorld );\n\n\t\t\treflector.onBeforeRender( renderer, scene, camera );\n\t\t\trefractor.onBeforeRender( renderer, scene, camera );\n\n\t\t\tscope.visible = true;\n\n\t\t};\n\n\t}\n\n}\n\nWater.prototype.isWater = true;\n\nWater.WaterShader = {\n\n\tuniforms: {\n\n\t\t'color': {\n\t\t\ttype: 'c',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'reflectivity': {\n\t\t\ttype: 'f',\n\t\t\tvalue: 0\n\t\t},\n\n\t\t'tReflectionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tRefractionMap': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap0': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'tNormalMap1': {\n\t\t\ttype: 't',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'textureMatrix': {\n\t\t\ttype: 'm4',\n\t\t\tvalue: null\n\t\t},\n\n\t\t'config': {\n\t\t\ttype: 'v4',\n\t\t\tvalue: new Vector4()\n\t\t}\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\n\t\tuniform mat4 textureMatrix;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tvCoord = textureMatrix * vec4( position, 1.0 );\n\n\t\t\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\t\t\tvToEye = cameraPosition - worldPosition.xyz;\n\n\t\t\tvec4 mvPosition =  viewMatrix * worldPosition; // used in fog_vertex\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\t#include <common>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\n\t\tuniform sampler2D tReflectionMap;\n\t\tuniform sampler2D tRefractionMap;\n\t\tuniform sampler2D tNormalMap0;\n\t\tuniform sampler2D tNormalMap1;\n\n\t\t#ifdef USE_FLOWMAP\n\t\t\tuniform sampler2D tFlowMap;\n\t\t#else\n\t\t\tuniform vec2 flowDirection;\n\t\t#endif\n\n\t\tuniform vec3 color;\n\t\tuniform float reflectivity;\n\t\tuniform vec4 config;\n\n\t\tvarying vec4 vCoord;\n\t\tvarying vec2 vUv;\n\t\tvarying vec3 vToEye;\n\n\t\tvoid main() {\n\n\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\tfloat flowMapOffset0 = config.x;\n\t\t\tfloat flowMapOffset1 = config.y;\n\t\t\tfloat halfCycle = config.z;\n\t\t\tfloat scale = config.w;\n\n\t\t\tvec3 toEye = normalize( vToEye );\n\n\t\t\t// determine flow direction\n\t\t\tvec2 flow;\n\t\t\t#ifdef USE_FLOWMAP\n\t\t\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;\n\t\t\t#else\n\t\t\t\tflow = flowDirection;\n\t\t\t#endif\n\t\t\tflow.x *= - 1.0;\n\n\t\t\t// sample normal maps (distort uvs with flowdata)\n\t\t\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );\n\t\t\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );\n\n\t\t\t// linear interpolate to get the final normal color\n\t\t\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;\n\t\t\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );\n\n\t\t\t// calculate normal vector\n\t\t\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n\n\t\t\t// calculate the fresnel term to blend reflection and refraction maps\n\t\t\tfloat theta = max( dot( toEye, normal ), 0.0 );\n\t\t\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );\n\n\t\t\t// calculate final uv coords\n\t\t\tvec3 coord = vCoord.xyz / vCoord.w;\n\t\t\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;\n\n\t\t\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );\n\t\t\tvec4 refractColor = texture2D( tRefractionMap, uv );\n\n\t\t\t// multiply water color with the mix of both textures\n\t\t\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\n\t\t}`\n\n};\n\nexport { Water };\n",null,null,"class VRButton {\n\n\tstatic createButton( renderer, options ) {\n\n\t\tif ( options ) {\n\n\t\t\tconsole.error( 'THREE.VRButton: The \"options\" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.' );\n\n\t\t}\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking', 'layers' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t\tif ( supported && VRButton.xrSessionIsGranted ) {\n\n\t\t\t\t\tbutton.click();\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n\tstatic xrSessionIsGranted = false;\n\n\tstatic registerSessionGrantedListener() {\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tnavigator.xr.addEventListener( 'sessiongranted', () => {\n\n\t\t\t\tVRButton.xrSessionIsGranted = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\nVRButton.registerSessionGrantedListener();\n\nexport { VRButton };\n","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n\n  return target;\n}","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tSphereGeometry,\n} from 'three';\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nclass XRControllerModel extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t}\n\n\tsetEnvironmentMap( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tvalueNode.quaternion.slerpQuaternions(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nclass XRControllerModelFactory {\n\n\tconstructor( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tcreateControllerModel( controller ) {\n\n\t\tconst controllerModel = new XRControllerModel();\n\t\tlet scene = null;\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\txrInputSource,\n\t\t\t\t\tprofile,\n\t\t\t\t\tassetPath\n\t\t\t\t);\n\n\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\tthrow new Error( 'GLTFLoader not set.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t() => {\n\n\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\tconsole.warn( err );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\tcontrollerModel.motionController = null;\n\t\t\tcontrollerModel.remove( scene );\n\t\t\tscene = null;\n\n\t\t} );\n\n\t\treturn controllerModel;\n\n\t}\n\n}\n\nexport { XRControllerModelFactory };\n",null,null,null,null,null,null,null,null,null,null,"import {\n\tLine3,\n\tPlane,\n\tTriangle,\n\tVector3\n} from 'three';\n\n/**\n * Ported from: https://github.com/maurizzzio/quickhull3d/ by Mauricio Poppe (https://github.com/maurizzzio)\n */\n\nconst Visible = 0;\nconst Deleted = 1;\n\nconst _v1 = new Vector3();\nconst _line3 = new Line3();\nconst _plane = new Plane();\nconst _closestPoint = new Vector3();\nconst _triangle = new Triangle();\n\nclass ConvexHull {\n\n\tconstructor() {\n\n\t\tthis.tolerance = - 1;\n\n\t\tthis.faces = []; // the generated faces of the convex hull\n\t\tthis.newFaces = []; // this array holds the faces that are generated within a single iteration\n\n\t\t// the vertex lists work as follows:\n\t\t//\n\t\t// let 'a' and 'b' be 'Face' instances\n\t\t// let 'v' be points wrapped as instance of 'Vertex'\n\t\t//\n\t\t//     [v, v, ..., v, v, v, ...]\n\t\t//      ^             ^\n\t\t//      |             |\n\t\t//  a.outside     b.outside\n\t\t//\n\t\tthis.assigned = new VertexList();\n\t\tthis.unassigned = new VertexList();\n\n\t\tthis.vertices = []; \t// vertices of the hull (internal representation of given geometry data)\n\n\t}\n\n\tsetFromPoints( points ) {\n\n\t\t// The algorithm needs at least four points.\n\n\t\tif ( points.length >= 4 ) {\n\n\t\t\tthis.makeEmpty();\n\n\t\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\t\tthis.vertices.push( new VertexNode( points[ i ] ) );\n\n\t\t\t}\n\n\t\t\tthis.compute();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tsetFromObject( object ) {\n\n\t\tconst points = [];\n\n\t\tobject.updateMatrixWorld( true );\n\n\t\tobject.traverse( function ( node ) {\n\n\t\t\tconst geometry = node.geometry;\n\n\t\t\tif ( geometry !== undefined ) {\n\n\t\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.ConvexHull no longer supports Geometry. Use THREE.BufferGeometry instead.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t} else if ( geometry.isBufferGeometry ) {\n\n\t\t\t\t\tconst attribute = geometry.attributes.position;\n\n\t\t\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\t\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst point = new Vector3();\n\n\t\t\t\t\t\t\tpoint.fromBufferAttribute( attribute, i ).applyMatrix4( node.matrixWorld );\n\n\t\t\t\t\t\t\tpoints.push( point );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n\tcontainsPoint( point ) {\n\n\t\tconst faces = this.faces;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// compute signed distance and check on what half space the point lies\n\n\t\t\tif ( face.distanceToPoint( point ) > this.tolerance ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tintersectRay( ray, target ) {\n\n\t\t// based on \"Fast Ray-Convex Polyhedron Intersection\"  by Eric Haines, GRAPHICS GEMS II\n\n\t\tconst faces = this.faces;\n\n\t\tlet tNear = - Infinity;\n\t\tlet tFar = Infinity;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// interpret faces as planes for the further computation\n\n\t\t\tconst vN = face.distanceToPoint( ray.origin );\n\t\t\tconst vD = face.normal.dot( ray.direction );\n\n\t\t\t// if the origin is on the positive side of a plane (so the plane can \"see\" the origin) and\n\t\t\t// the ray is turned away or parallel to the plane, there is no intersection\n\n\t\t\tif ( vN > 0 && vD >= 0 ) return null;\n\n\t\t\t// compute the distance from the rays origin to the intersection with the plane\n\n\t\t\tconst t = ( vD !== 0 ) ? ( - vN / vD ) : 0;\n\n\t\t\t// only proceed if the distance is positive. a negative distance means the intersection point\n\t\t\t// lies \"behind\" the origin\n\n\t\t\tif ( t <= 0 ) continue;\n\n\t\t\t// now categorized plane as front-facing or back-facing\n\n\t\t\tif ( vD > 0 ) {\n\n\t\t\t\t//  plane faces away from the ray, so this plane is a back-face\n\n\t\t\t\ttFar = Math.min( t, tFar );\n\n\t\t\t} else {\n\n\t\t\t\t// front-face\n\n\t\t\t\ttNear = Math.max( t, tNear );\n\n\t\t\t}\n\n\t\t\tif ( tNear > tFar ) {\n\n\t\t\t\t// if tNear ever is greater than tFar, the ray must miss the convex hull\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// evaluate intersection point\n\n\t\t// always try tNear first since its the closer intersection point\n\n\t\tif ( tNear !== - Infinity ) {\n\n\t\t\tray.at( tNear, target );\n\n\t\t} else {\n\n\t\t\tray.at( tFar, target );\n\n\t\t}\n\n\t\treturn target;\n\n\t}\n\n\tintersectsRay( ray ) {\n\n\t\treturn this.intersectRay( ray, _v1 ) !== null;\n\n\t}\n\n\tmakeEmpty() {\n\n\t\tthis.faces = [];\n\t\tthis.vertices = [];\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the 'assigned' list of vertices and assigns it to the given face\n\n\taddVertexToFace( vertex, face ) {\n\n\t\tvertex.face = face;\n\n\t\tif ( face.outside === null ) {\n\n\t\t\tthis.assigned.append( vertex );\n\n\t\t} else {\n\n\t\t\tthis.assigned.insertBefore( face.outside, vertex );\n\n\t\t}\n\n\t\tface.outside = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the 'assigned' list of vertices and from the given face\n\n\tremoveVertexFromFace( vertex, face ) {\n\n\t\tif ( vertex === face.outside ) {\n\n\t\t\t// fix face.outside link\n\n\t\t\tif ( vertex.next !== null && vertex.next.face === face ) {\n\n\t\t\t\t// face has at least 2 outside vertices, move the 'outside' reference\n\n\t\t\t\tface.outside = vertex.next;\n\n\t\t\t} else {\n\n\t\t\t\t// vertex was the only outside vertex that face had\n\n\t\t\t\tface.outside = null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.assigned.remove( vertex );\n\n\t\treturn this;\n\n\t}\n\n\t// Removes all the visible vertices that a given face is able to see which are stored in the 'assigned' vertext list\n\n\tremoveAllVerticesFromFace( face ) {\n\n\t\tif ( face.outside !== null ) {\n\n\t\t\t// reference to the first and last vertex of this face\n\n\t\t\tconst start = face.outside;\n\t\t\tlet end = face.outside;\n\n\t\t\twhile ( end.next !== null && end.next.face === face ) {\n\n\t\t\t\tend = end.next;\n\n\t\t\t}\n\n\t\t\tthis.assigned.removeSubList( start, end );\n\n\t\t\t// fix references\n\n\t\t\tstart.prev = end.next = null;\n\t\t\tface.outside = null;\n\n\t\t\treturn start;\n\n\t\t}\n\n\t}\n\n\t// Removes all the visible vertices that 'face' is able to see\n\n\tdeleteFaceVertices( face, absorbingFace ) {\n\n\t\tconst faceVertices = this.removeAllVerticesFromFace( face );\n\n\t\tif ( faceVertices !== undefined ) {\n\n\t\t\tif ( absorbingFace === undefined ) {\n\n\t\t\t\t// mark the vertices to be reassigned to some other face\n\n\t\t\t\tthis.unassigned.appendChain( faceVertices );\n\n\n\t\t\t} else {\n\n\t\t\t\t// if there's an absorbing face try to assign as many vertices as possible to it\n\n\t\t\t\tlet vertex = faceVertices;\n\n\t\t\t\tdo {\n\n\t\t\t\t\t// we need to buffer the subsequent vertex at this point because the 'vertex.next' reference\n\t\t\t\t\t// will be changed by upcoming method calls\n\n\t\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\t\tconst distance = absorbingFace.distanceToPoint( vertex.point );\n\n\t\t\t\t\t// check if 'vertex' is able to see 'absorbingFace'\n\n\t\t\t\t\tif ( distance > this.tolerance ) {\n\n\t\t\t\t\t\tthis.addVertexToFace( vertex, absorbingFace );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.unassigned.append( vertex );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// now assign next vertex\n\n\t\t\t\t\tvertex = nextVertex;\n\n\t\t\t\t} while ( vertex !== null );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Reassigns as many vertices as possible from the unassigned list to the new faces\n\n\tresolveUnassignedPoints( newFaces ) {\n\n\t\tif ( this.unassigned.isEmpty() === false ) {\n\n\t\t\tlet vertex = this.unassigned.first();\n\n\t\t\tdo {\n\n\t\t\t\t// buffer 'next' reference, see .deleteFaceVertices()\n\n\t\t\t\tconst nextVertex = vertex.next;\n\n\t\t\t\tlet maxDistance = this.tolerance;\n\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let i = 0; i < newFaces.length; i ++ ) {\n\n\t\t\t\t\tconst face = newFaces[ i ];\n\n\t\t\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\t\t\tconst distance = face.distanceToPoint( vertex.point );\n\n\t\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\t\tmaxFace = face;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( maxDistance > 1000 * this.tolerance ) break;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// 'maxFace' can be null e.g. if there are identical vertices\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t\tvertex = nextVertex;\n\n\t\t\t} while ( vertex !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Computes the extremes of a simplex which will be the initial hull\n\n\tcomputeExtremes() {\n\n\t\tconst min = new Vector3();\n\t\tconst max = new Vector3();\n\n\t\tconst minVertices = [];\n\t\tconst maxVertices = [];\n\n\t\t// initially assume that the first vertex is the min/max\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tminVertices[ i ] = maxVertices[ i ] = this.vertices[ 0 ];\n\n\t\t}\n\n\t\tmin.copy( this.vertices[ 0 ].point );\n\t\tmax.copy( this.vertices[ 0 ].point );\n\n\t\t// compute the min/max vertex on all six directions\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tconst point = vertex.point;\n\n\t\t\t// update the min coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) < min.getComponent( j ) ) {\n\n\t\t\t\t\tmin.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tminVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// update the max coordinates\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tif ( point.getComponent( j ) > max.getComponent( j ) ) {\n\n\t\t\t\t\tmax.setComponent( j, point.getComponent( j ) );\n\t\t\t\t\tmaxVertices[ j ] = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use min/max vectors to compute an optimal epsilon\n\n\t\tthis.tolerance = 3 * Number.EPSILON * (\n\t\t\tMath.max( Math.abs( min.x ), Math.abs( max.x ) ) +\n\t\t\tMath.max( Math.abs( min.y ), Math.abs( max.y ) ) +\n\t\t\tMath.max( Math.abs( min.z ), Math.abs( max.z ) )\n\t\t);\n\n\t\treturn { min: minVertices, max: maxVertices };\n\n\t}\n\n\t// Computes the initial simplex assigning to its faces all the points\n\t// that are candidates to form part of the hull\n\n\tcomputeInitialHull() {\n\n\t\tconst vertices = this.vertices;\n\t\tconst extremes = this.computeExtremes();\n\t\tconst min = extremes.min;\n\t\tconst max = extremes.max;\n\n\t\t// 1. Find the two vertices 'v0' and 'v1' with the greatest 1d separation\n\t\t// (max.x - min.x)\n\t\t// (max.y - min.y)\n\t\t// (max.z - min.z)\n\n\t\tlet maxDistance = 0;\n\t\tlet index = 0;\n\n\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\tconst distance = max[ i ].point.getComponent( i ) - min[ i ].point.getComponent( i );\n\n\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\tmaxDistance = distance;\n\t\t\t\tindex = i;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst v0 = min[ index ];\n\t\tconst v1 = max[ index ];\n\t\tlet v2;\n\t\tlet v3;\n\n\t\t// 2. The next vertex 'v2' is the one farthest to the line formed by 'v0' and 'v1'\n\n\t\tmaxDistance = 0;\n\t\t_line3.set( v0.point, v1.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 ) {\n\n\t\t\t\t_line3.closestPointToPoint( vertex.point, true, _closestPoint );\n\n\t\t\t\tconst distance = _closestPoint.distanceToSquared( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv2 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// 3. The next vertex 'v3' is the one farthest to the plane 'v0', 'v1', 'v2'\n\n\t\tmaxDistance = - 1;\n\t\t_plane.setFromCoplanarPoints( v0.point, v1.point, v2.point );\n\n\t\tfor ( let i = 0, l = this.vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 ) {\n\n\t\t\t\tconst distance = Math.abs( _plane.distanceToPoint( vertex.point ) );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\tv3 = vertex;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst faces = [];\n\n\t\tif ( _plane.distanceToPoint( v3.point ) < 0 ) {\n\n\t\t\t// the face is not able to see the point so 'plane.normal' is pointing outside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v1, v2 ),\n\t\t\t\tFace.create( v3, v1, v0 ),\n\t\t\t\tFace.create( v3, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v2 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( j ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ], 1 <= i <= 3\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 1 ).setTwin( faces[ j + 1 ].getEdge( 0 ) );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// the face is able to see the point so 'plane.normal' is pointing inside the tetrahedron\n\n\t\t\tfaces.push(\n\t\t\t\tFace.create( v0, v2, v1 ),\n\t\t\t\tFace.create( v3, v0, v1 ),\n\t\t\t\tFace.create( v3, v1, v2 ),\n\t\t\t\tFace.create( v3, v2, v0 )\n\t\t\t);\n\n\t\t\t// set the twin edge\n\n\t\t\tfor ( let i = 0; i < 3; i ++ ) {\n\n\t\t\t\tconst j = ( i + 1 ) % 3;\n\n\t\t\t\t// join face[ i ] i > 0, with the first face\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 2 ).setTwin( faces[ 0 ].getEdge( ( 3 - i ) % 3 ) );\n\n\t\t\t\t// join face[ i ] with face[ i + 1 ]\n\n\t\t\t\tfaces[ i + 1 ].getEdge( 0 ).setTwin( faces[ j + 1 ].getEdge( 1 ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// the initial hull is the tetrahedron\n\n\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ] );\n\n\t\t}\n\n\t\t// initial assignment of vertices to the faces of the tetrahedron\n\n\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = vertices[ i ];\n\n\t\t\tif ( vertex !== v0 && vertex !== v1 && vertex !== v2 && vertex !== v3 ) {\n\n\t\t\t\tmaxDistance = this.tolerance;\n\t\t\t\tlet maxFace = null;\n\n\t\t\t\tfor ( let j = 0; j < 4; j ++ ) {\n\n\t\t\t\t\tconst distance = this.faces[ j ].distanceToPoint( vertex.point );\n\n\t\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\t\tmaxFace = this.faces[ j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( maxFace !== null ) {\n\n\t\t\t\t\tthis.addVertexToFace( vertex, maxFace );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes inactive faces\n\n\treindexFaces() {\n\n\t\tconst activeFaces = [];\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tif ( face.mark === Visible ) {\n\n\t\t\t\tactiveFaces.push( face );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.faces = activeFaces;\n\n\t\treturn this;\n\n\t}\n\n\t// Finds the next vertex to create faces with the current hull\n\n\tnextVertexToAdd() {\n\n\t\t// if the 'assigned' list of vertices is empty, no vertices are left. return with 'undefined'\n\n\t\tif ( this.assigned.isEmpty() === false ) {\n\n\t\t\tlet eyeVertex, maxDistance = 0;\n\n\t\t\t// grap the first available face and start with the first visible vertex of that face\n\n\t\t\tconst eyeFace = this.assigned.first().face;\n\t\t\tlet vertex = eyeFace.outside;\n\n\t\t\t// now calculate the farthest vertex that face can see\n\n\t\t\tdo {\n\n\t\t\t\tconst distance = eyeFace.distanceToPoint( vertex.point );\n\n\t\t\t\tif ( distance > maxDistance ) {\n\n\t\t\t\t\tmaxDistance = distance;\n\t\t\t\t\teyeVertex = vertex;\n\n\t\t\t\t}\n\n\t\t\t\tvertex = vertex.next;\n\n\t\t\t} while ( vertex !== null && vertex.face === eyeFace );\n\n\t\t\treturn eyeVertex;\n\n\t\t}\n\n\t}\n\n\t// Computes a chain of half edges in CCW order called the 'horizon'.\n\t// For an edge to be part of the horizon it must join a face that can see\n\t// 'eyePoint' and a face that cannot see 'eyePoint'.\n\n\tcomputeHorizon( eyePoint, crossEdge, face, horizon ) {\n\n\t\t// moves face's vertices to the 'unassigned' vertex list\n\n\t\tthis.deleteFaceVertices( face );\n\n\t\tface.mark = Deleted;\n\n\t\tlet edge;\n\n\t\tif ( crossEdge === null ) {\n\n\t\t\tedge = crossEdge = face.getEdge( 0 );\n\n\t\t} else {\n\n\t\t\t// start from the next edge since 'crossEdge' was already analyzed\n\t\t\t// (actually 'crossEdge.twin' was the edge who called this method recursively)\n\n\t\t\tedge = crossEdge.next;\n\n\t\t}\n\n\t\tdo {\n\n\t\t\tconst twinEdge = edge.twin;\n\t\t\tconst oppositeFace = twinEdge.face;\n\n\t\t\tif ( oppositeFace.mark === Visible ) {\n\n\t\t\t\tif ( oppositeFace.distanceToPoint( eyePoint ) > this.tolerance ) {\n\n\t\t\t\t\t// the opposite face can see the vertex, so proceed with next edge\n\n\t\t\t\t\tthis.computeHorizon( eyePoint, twinEdge, oppositeFace, horizon );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// the opposite face can't see the vertex, so this edge is part of the horizon\n\n\t\t\t\t\thorizon.push( edge );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tedge = edge.next;\n\n\t\t} while ( edge !== crossEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Creates a face with the vertices 'eyeVertex.point', 'horizonEdge.tail' and 'horizonEdge.head' in CCW order\n\n\taddAdjoiningFace( eyeVertex, horizonEdge ) {\n\n\t\t// all the half edges are created in ccw order thus the face is always pointing outside the hull\n\n\t\tconst face = Face.create( eyeVertex, horizonEdge.tail(), horizonEdge.head() );\n\n\t\tthis.faces.push( face );\n\n\t\t// join face.getEdge( - 1 ) with the horizon's opposite edge face.getEdge( - 1 ) = face.getEdge( 2 )\n\n\t\tface.getEdge( - 1 ).setTwin( horizonEdge.twin );\n\n\t\treturn face.getEdge( 0 ); // the half edge whose vertex is the eyeVertex\n\n\n\t}\n\n\t//  Adds 'horizon.length' faces to the hull, each face will be linked with the\n\t//  horizon opposite face and the face on the left/right\n\n\taddNewFaces( eyeVertex, horizon ) {\n\n\t\tthis.newFaces = [];\n\n\t\tlet firstSideEdge = null;\n\t\tlet previousSideEdge = null;\n\n\t\tfor ( let i = 0; i < horizon.length; i ++ ) {\n\n\t\t\tconst horizonEdge = horizon[ i ];\n\n\t\t\t// returns the right side edge\n\n\t\t\tconst sideEdge = this.addAdjoiningFace( eyeVertex, horizonEdge );\n\n\t\t\tif ( firstSideEdge === null ) {\n\n\t\t\t\tfirstSideEdge = sideEdge;\n\n\t\t\t} else {\n\n\t\t\t\t// joins face.getEdge( 1 ) with previousFace.getEdge( 0 )\n\n\t\t\t\tsideEdge.next.setTwin( previousSideEdge );\n\n\t\t\t}\n\n\t\t\tthis.newFaces.push( sideEdge.face );\n\t\t\tpreviousSideEdge = sideEdge;\n\n\t\t}\n\n\t\t// perform final join of new faces\n\n\t\tfirstSideEdge.next.setTwin( previousSideEdge );\n\n\t\treturn this;\n\n\t}\n\n\t// Adds a vertex to the hull\n\n\taddVertexToHull( eyeVertex ) {\n\n\t\tconst horizon = [];\n\n\t\tthis.unassigned.clear();\n\n\t\t// remove 'eyeVertex' from 'eyeVertex.face' so that it can't be added to the 'unassigned' vertex list\n\n\t\tthis.removeVertexFromFace( eyeVertex, eyeVertex.face );\n\n\t\tthis.computeHorizon( eyeVertex.point, null, eyeVertex.face, horizon );\n\n\t\tthis.addNewFaces( eyeVertex, horizon );\n\n\t\t// reassign 'unassigned' vertices to the new faces\n\n\t\tthis.resolveUnassignedPoints( this.newFaces );\n\n\t\treturn\tthis;\n\n\t}\n\n\tcleanup() {\n\n\t\tthis.assigned.clear();\n\t\tthis.unassigned.clear();\n\t\tthis.newFaces = [];\n\n\t\treturn this;\n\n\t}\n\n\tcompute() {\n\n\t\tlet vertex;\n\n\t\tthis.computeInitialHull();\n\n\t\t// add all available vertices gradually to the hull\n\n\t\twhile ( ( vertex = this.nextVertexToAdd() ) !== undefined ) {\n\n\t\t\tthis.addVertexToHull( vertex );\n\n\t\t}\n\n\t\tthis.reindexFaces();\n\n\t\tthis.cleanup();\n\n\t\treturn this;\n\n\t}\n\n}\n\n//\n\nclass Face {\n\n\tconstructor() {\n\n\t\tthis.normal = new Vector3();\n\t\tthis.midpoint = new Vector3();\n\t\tthis.area = 0;\n\n\t\tthis.constant = 0; // signed distance from face to the origin\n\t\tthis.outside = null; // reference to a vertex in a vertex list this face can see\n\t\tthis.mark = Visible;\n\t\tthis.edge = null;\n\n\t}\n\n\tstatic create( a, b, c ) {\n\n\t\tconst face = new Face();\n\n\t\tconst e0 = new HalfEdge( a, face );\n\t\tconst e1 = new HalfEdge( b, face );\n\t\tconst e2 = new HalfEdge( c, face );\n\n\t\t// join edges\n\n\t\te0.next = e2.prev = e1;\n\t\te1.next = e0.prev = e2;\n\t\te2.next = e1.prev = e0;\n\n\t\t// main half edge reference\n\n\t\tface.edge = e0;\n\n\t\treturn face.compute();\n\n\t}\n\n\tgetEdge( i ) {\n\n\t\tlet edge = this.edge;\n\n\t\twhile ( i > 0 ) {\n\n\t\t\tedge = edge.next;\n\t\t\ti --;\n\n\t\t}\n\n\t\twhile ( i < 0 ) {\n\n\t\t\tedge = edge.prev;\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn edge;\n\n\t}\n\n\tcompute() {\n\n\t\tconst a = this.edge.tail();\n\t\tconst b = this.edge.head();\n\t\tconst c = this.edge.next.head();\n\n\t\t_triangle.set( a.point, b.point, c.point );\n\n\t\t_triangle.getNormal( this.normal );\n\t\t_triangle.getMidpoint( this.midpoint );\n\t\tthis.area = _triangle.getArea();\n\n\t\tthis.constant = this.normal.dot( this.midpoint );\n\n\t\treturn this;\n\n\t}\n\n\tdistanceToPoint( point ) {\n\n\t\treturn this.normal.dot( point ) - this.constant;\n\n\t}\n\n}\n\n// Entity for a Doubly-Connected Edge List (DCEL).\n\nclass HalfEdge {\n\n\n\tconstructor( vertex, face ) {\n\n\t\tthis.vertex = vertex;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.twin = null;\n\t\tthis.face = face;\n\n\t}\n\n\thead() {\n\n\t\treturn this.vertex;\n\n\t}\n\n\ttail() {\n\n\t\treturn this.prev ? this.prev.vertex : null;\n\n\t}\n\n\tlength() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceTo( head.point );\n\n\t\t}\n\n\t\treturn - 1;\n\n\t}\n\n\tlengthSquared() {\n\n\t\tconst head = this.head();\n\t\tconst tail = this.tail();\n\n\t\tif ( tail !== null ) {\n\n\t\t\treturn tail.point.distanceToSquared( head.point );\n\n\t\t}\n\n\t\treturn - 1;\n\n\t}\n\n\tsetTwin( edge ) {\n\n\t\tthis.twin = edge;\n\t\tedge.twin = this;\n\n\t\treturn this;\n\n\t}\n\n}\n\n// A vertex as a double linked list node.\n\nclass VertexNode {\n\n\tconstructor( point ) {\n\n\t\tthis.point = point;\n\t\tthis.prev = null;\n\t\tthis.next = null;\n\t\tthis.face = null; // the face that is able to see this vertex\n\n\t}\n\n}\n\n// A double linked list that contains vertex nodes.\n\nclass VertexList {\n\n\tconstructor() {\n\n\t\tthis.head = null;\n\t\tthis.tail = null;\n\n\t}\n\n\tfirst() {\n\n\t\treturn this.head;\n\n\t}\n\n\tlast() {\n\n\t\treturn this.tail;\n\n\t}\n\n\tclear() {\n\n\t\tthis.head = this.tail = null;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex before the target vertex\n\n\tinsertBefore( target, vertex ) {\n\n\t\tvertex.prev = target.prev;\n\t\tvertex.next = target;\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex;\n\n\t\t}\n\n\t\ttarget.prev = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Inserts a vertex after the target vertex\n\n\tinsertAfter( target, vertex ) {\n\n\t\tvertex.prev = target;\n\t\tvertex.next = target.next;\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex;\n\n\t\t}\n\n\t\ttarget.next = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a vertex to the end of the linked list\n\n\tappend( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\t\tvertex.next = null; // the tail has no subsequent vertex\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Appends a chain of vertices where 'vertex' is the head.\n\n\tappendChain( vertex ) {\n\n\t\tif ( this.head === null ) {\n\n\t\t\tthis.head = vertex;\n\n\t\t} else {\n\n\t\t\tthis.tail.next = vertex;\n\n\t\t}\n\n\t\tvertex.prev = this.tail;\n\n\t\t// ensure that the 'tail' reference points to the last vertex of the chain\n\n\t\twhile ( vertex.next !== null ) {\n\n\t\t\tvertex = vertex.next;\n\n\t\t}\n\n\t\tthis.tail = vertex;\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a vertex from the linked list\n\n\tremove( vertex ) {\n\n\t\tif ( vertex.prev === null ) {\n\n\t\t\tthis.head = vertex.next;\n\n\t\t} else {\n\n\t\t\tvertex.prev.next = vertex.next;\n\n\t\t}\n\n\t\tif ( vertex.next === null ) {\n\n\t\t\tthis.tail = vertex.prev;\n\n\t\t} else {\n\n\t\t\tvertex.next.prev = vertex.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\t// Removes a list of vertices whose 'head' is 'a' and whose 'tail' is b\n\n\tremoveSubList( a, b ) {\n\n\t\tif ( a.prev === null ) {\n\n\t\t\tthis.head = b.next;\n\n\t\t} else {\n\n\t\t\ta.prev.next = b.next;\n\n\t\t}\n\n\t\tif ( b.next === null ) {\n\n\t\t\tthis.tail = a.prev;\n\n\t\t} else {\n\n\t\t\tb.next.prev = a.prev;\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n\tisEmpty() {\n\n\t\treturn this.head === null;\n\n\t}\n\n}\n\nexport { ConvexHull };\n","import {\n\tBufferGeometry,\n\tFloat32BufferAttribute\n} from 'three';\nimport { ConvexHull } from '../math/ConvexHull.js';\n\nclass ConvexGeometry extends BufferGeometry {\n\n\tconstructor( points = [] ) {\n\n\t\tsuper();\n\n\t\t// buffers\n\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\n\t\tif ( ConvexHull === undefined ) {\n\n\t\t\tconsole.error( 'THREE.ConvexBufferGeometry: ConvexBufferGeometry relies on ConvexHull' );\n\n\t\t}\n\n\t\tconst convexHull = new ConvexHull().setFromPoints( points );\n\n\t\t// generate vertices and normals\n\n\t\tconst faces = convexHull.faces;\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\t\t\tlet edge = face.edge;\n\n\t\t\t// we move along a doubly-connected edge list to access all face points (see HalfEdge docs)\n\n\t\t\tdo {\n\n\t\t\t\tconst point = edge.head().point;\n\n\t\t\t\tvertices.push( point.x, point.y, point.z );\n\t\t\t\tnormals.push( face.normal.x, face.normal.y, face.normal.z );\n\n\t\t\t\tedge = edge.next;\n\n\t\t\t} while ( edge !== face.edge );\n\n\t\t}\n\n\t\t// build geometry\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\n\t}\n\n}\n\nexport { ConvexGeometry };\n",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"/**\n * RGB Shift Shader\n * Shifts red and blue channels from center in opposite directions\n * Ported from http://kriss.cx/tom/2009/05/rgb-shift/\n * by Tom Butterworth / http://kriss.cx/tom/\n *\n * amount: shift distance (1 is width of input)\n * angle: shift angle in radians\n */\n\nconst DigitalGlitch = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null }, //diffuse texture\n\t\t'tDisp': { value: null }, //displacement texture for digital glitch squares\n\t\t'byp': { value: 0 }, //apply the glitch ?\n\t\t'amount': { value: 0.08 },\n\t\t'angle': { value: 0.02 },\n\t\t'seed': { value: 0.02 },\n\t\t'seed_x': { value: 0.02 }, //-1,1\n\t\t'seed_y': { value: 0.02 }, //-1,1\n\t\t'distortion_x': { value: 0.5 },\n\t\t'distortion_y': { value: 0.6 },\n\t\t'col_s': { value: 0.05 }\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\t\tvoid main() {\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform int byp; //should we apply the glitch ?\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform sampler2D tDisp;\n\n\t\tuniform float amount;\n\t\tuniform float angle;\n\t\tuniform float seed;\n\t\tuniform float seed_x;\n\t\tuniform float seed_y;\n\t\tuniform float distortion_x;\n\t\tuniform float distortion_y;\n\t\tuniform float col_s;\n\n\t\tvarying vec2 vUv;\n\n\n\t\tfloat rand(vec2 co){\n\t\t\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tif(byp<1) {\n\t\t\t\tvec2 p = vUv;\n\t\t\t\tfloat xs = floor(gl_FragCoord.x / 0.5);\n\t\t\t\tfloat ys = floor(gl_FragCoord.y / 0.5);\n\t\t\t\t//based on staffantans glitch shader for unity https://github.com/staffantan/unityglitch\n\t\t\t\tfloat disp = texture2D(tDisp, p*seed*seed).r;\n\t\t\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {\n\t\t\t\t\tif(seed_x>0.){\n\t\t\t\t\t\tp.y = 1. - (p.y + distortion_y);\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.y = distortion_y;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {\n\t\t\t\t\tif(seed_y>0.){\n\t\t\t\t\t\tp.x=distortion_x;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tp.x = 1. - (p.x + distortion_x);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tp.x+=disp*seed_x*(seed/5.);\n\t\t\t\tp.y+=disp*seed_y*(seed/5.);\n\t\t\t\t//base from RGB shift shader\n\t\t\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));\n\t\t\t\tvec4 cr = texture2D(tDiffuse, p + offset);\n\t\t\t\tvec4 cga = texture2D(tDiffuse, p);\n\t\t\t\tvec4 cb = texture2D(tDiffuse, p - offset);\n\t\t\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);\n\t\t\t\t//add noise\n\t\t\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);\n\t\t\t\tgl_FragColor = gl_FragColor+ snow;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tgl_FragColor=texture2D (tDiffuse, vUv);\n\t\t\t}\n\t\t}`\n\n};\n\nexport { DigitalGlitch };\n","var Stats = function () {\n\n\tvar mode = 0;\n\n\tvar container = document.createElement( 'div' );\n\tcontainer.style.cssText = 'position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000';\n\tcontainer.addEventListener( 'click', function ( event ) {\n\n\t\tevent.preventDefault();\n\t\tshowPanel( ++ mode % container.children.length );\n\n\t}, false );\n\n\t//\n\n\tfunction addPanel( panel ) {\n\n\t\tcontainer.appendChild( panel.dom );\n\t\treturn panel;\n\n\t}\n\n\tfunction showPanel( id ) {\n\n\t\tfor ( var i = 0; i < container.children.length; i ++ ) {\n\n\t\t\tcontainer.children[ i ].style.display = i === id ? 'block' : 'none';\n\n\t\t}\n\n\t\tmode = id;\n\n\t}\n\n\t//\n\n\tvar beginTime = ( performance || Date ).now(), prevTime = beginTime, frames = 0;\n\n\tvar fpsPanel = addPanel( new Stats.Panel( 'FPS', '#0ff', '#002' ) );\n\tvar msPanel = addPanel( new Stats.Panel( 'MS', '#0f0', '#020' ) );\n\n\tif ( self.performance && self.performance.memory ) {\n\n\t\tvar memPanel = addPanel( new Stats.Panel( 'MB', '#f08', '#201' ) );\n\n\t}\n\n\tshowPanel( 0 );\n\n\treturn {\n\n\t\tREVISION: 16,\n\n\t\tdom: container,\n\n\t\taddPanel: addPanel,\n\t\tshowPanel: showPanel,\n\n\t\tbegin: function () {\n\n\t\t\tbeginTime = ( performance || Date ).now();\n\n\t\t},\n\n\t\tend: function () {\n\n\t\t\tframes ++;\n\n\t\t\tvar time = ( performance || Date ).now();\n\n\t\t\tmsPanel.update( time - beginTime, 200 );\n\n\t\t\tif ( time >= prevTime + 1000 ) {\n\n\t\t\t\tfpsPanel.update( ( frames * 1000 ) / ( time - prevTime ), 100 );\n\n\t\t\t\tprevTime = time;\n\t\t\t\tframes = 0;\n\n\t\t\t\tif ( memPanel ) {\n\n\t\t\t\t\tvar memory = performance.memory;\n\t\t\t\t\tmemPanel.update( memory.usedJSHeapSize / 1048576, memory.jsHeapSizeLimit / 1048576 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn time;\n\n\t\t},\n\n\t\tupdate: function () {\n\n\t\t\tbeginTime = this.end();\n\n\t\t},\n\n\t\t// Backwards Compatibility\n\n\t\tdomElement: container,\n\t\tsetMode: showPanel\n\n\t};\n\n};\n\nStats.Panel = function ( name, fg, bg ) {\n\n\tvar min = Infinity, max = 0, round = Math.round;\n\tvar PR = round( window.devicePixelRatio || 1 );\n\n\tvar WIDTH = 80 * PR, HEIGHT = 48 * PR,\n\t\tTEXT_X = 3 * PR, TEXT_Y = 2 * PR,\n\t\tGRAPH_X = 3 * PR, GRAPH_Y = 15 * PR,\n\t\tGRAPH_WIDTH = 74 * PR, GRAPH_HEIGHT = 30 * PR;\n\n\tvar canvas = document.createElement( 'canvas' );\n\tcanvas.width = WIDTH;\n\tcanvas.height = HEIGHT;\n\tcanvas.style.cssText = 'width:80px;height:48px';\n\n\tvar context = canvas.getContext( '2d' );\n\tcontext.font = 'bold ' + ( 9 * PR ) + 'px Helvetica,Arial,sans-serif';\n\tcontext.textBaseline = 'top';\n\n\tcontext.fillStyle = bg;\n\tcontext.fillRect( 0, 0, WIDTH, HEIGHT );\n\n\tcontext.fillStyle = fg;\n\tcontext.fillText( name, TEXT_X, TEXT_Y );\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\tcontext.fillStyle = bg;\n\tcontext.globalAlpha = 0.9;\n\tcontext.fillRect( GRAPH_X, GRAPH_Y, GRAPH_WIDTH, GRAPH_HEIGHT );\n\n\treturn {\n\n\t\tdom: canvas,\n\n\t\tupdate: function ( value, maxValue ) {\n\n\t\t\tmin = Math.min( min, value );\n\t\t\tmax = Math.max( max, value );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 1;\n\t\t\tcontext.fillRect( 0, 0, WIDTH, GRAPH_Y );\n\t\t\tcontext.fillStyle = fg;\n\t\t\tcontext.fillText( round( value ) + ' ' + name + ' (' + round( min ) + '-' + round( max ) + ')', TEXT_X, TEXT_Y );\n\n\t\t\tcontext.drawImage( canvas, GRAPH_X + PR, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT, GRAPH_X, GRAPH_Y, GRAPH_WIDTH - PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, GRAPH_HEIGHT );\n\n\t\t\tcontext.fillStyle = bg;\n\t\t\tcontext.globalAlpha = 0.9;\n\t\t\tcontext.fillRect( GRAPH_X + GRAPH_WIDTH - PR, GRAPH_Y, PR, round( ( 1 - ( value / maxValue ) ) * GRAPH_HEIGHT ) );\n\n\t\t}\n\n\t};\n\n};\n\nexport default Stats;\n","import {\n\tDataTexture,\n\tFloatType,\n\tMathUtils,\n\tRedFormat,\n\tLuminanceFormat,\n\tShaderMaterial,\n\tUniformsUtils\n} from 'three';\nimport { Pass, FullScreenQuad } from './Pass.js';\nimport { DigitalGlitch } from '../shaders/DigitalGlitch.js';\n\nclass GlitchPass extends Pass {\n\n\tconstructor( dt_size = 64 ) {\n\n\t\tsuper();\n\n\t\tif ( DigitalGlitch === undefined ) console.error( 'THREE.GlitchPass relies on DigitalGlitch' );\n\n\t\tconst shader = DigitalGlitch;\n\n\t\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\t\tthis.uniforms[ 'tDisp' ].value = this.generateHeightmap( dt_size );\n\n\t\tthis.material = new ShaderMaterial( {\n\t\t\tuniforms: this.uniforms,\n\t\t\tvertexShader: shader.vertexShader,\n\t\t\tfragmentShader: shader.fragmentShader\n\t\t} );\n\n\t\tthis.fsQuad = new FullScreenQuad( this.material );\n\n\t\tthis.goWild = false;\n\t\tthis.curF = 0;\n\t\tthis.generateTrigger();\n\n\t}\n\n\trender( renderer, writeBuffer, readBuffer /*, deltaTime, maskActive */ ) {\n\n\t\tif ( renderer.capabilities.isWebGL2 === false ) this.uniforms[ 'tDisp' ].value.format = LuminanceFormat;\n\n\t\tthis.uniforms[ 'tDiffuse' ].value = readBuffer.texture;\n\t\tthis.uniforms[ 'seed' ].value = Math.random();//default seeding\n\t\tthis.uniforms[ 'byp' ].value = 0;\n\n\t\tif ( this.curF % this.randX == 0 || this.goWild == true ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 30;\n\t\t\tthis.uniforms[ 'angle' ].value = MathUtils.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'seed_x' ].value = MathUtils.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = MathUtils.randFloat( - 1, 1 );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = MathUtils.randFloat( 0, 1 );\n\t\t\tthis.curF = 0;\n\t\t\tthis.generateTrigger();\n\n\t\t} else if ( this.curF % this.randX < this.randX / 5 ) {\n\n\t\t\tthis.uniforms[ 'amount' ].value = Math.random() / 90;\n\t\t\tthis.uniforms[ 'angle' ].value = MathUtils.randFloat( - Math.PI, Math.PI );\n\t\t\tthis.uniforms[ 'distortion_x' ].value = MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'distortion_y' ].value = MathUtils.randFloat( 0, 1 );\n\t\t\tthis.uniforms[ 'seed_x' ].value = MathUtils.randFloat( - 0.3, 0.3 );\n\t\t\tthis.uniforms[ 'seed_y' ].value = MathUtils.randFloat( - 0.3, 0.3 );\n\n\t\t} else if ( this.goWild == false ) {\n\n\t\t\tthis.uniforms[ 'byp' ].value = 1;\n\n\t\t}\n\n\t\tthis.curF ++;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n\tgenerateTrigger() {\n\n\t\tthis.randX = MathUtils.randInt( 120, 240 );\n\n\t}\n\n\tgenerateHeightmap( dt_size ) {\n\n\t\tconst data_arr = new Float32Array( dt_size * dt_size );\n\t\tconst length = dt_size * dt_size;\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst val = MathUtils.randFloat( 0, 1 );\n\t\t\tdata_arr[ i ] = val;\n\n\t\t}\n\n\t\tconst texture = new DataTexture( data_arr, dt_size, dt_size, RedFormat, FloatType );\n\t\ttexture.needsUpdate = true;\n\t\treturn texture;\n\n\t}\n\n}\n\nexport { GlitchPass };\n","import {\n\tVector2\n} from 'three';\n\n/**\n * Dot screen shader\n * based on glfx.js sepia shader\n * https://github.com/evanw/glfx.js\n */\n\nconst DotScreenShader = {\n\n\tuniforms: {\n\n\t\t'tDiffuse': { value: null },\n\t\t'tSize': { value: new Vector2( 256, 256 ) },\n\t\t'center': { value: new Vector2( 0.5, 0.5 ) },\n\t\t'angle': { value: 1.57 },\n\t\t'scale': { value: 1.0 }\n\n\t},\n\n\tvertexShader: /* glsl */`\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}`,\n\n\tfragmentShader: /* glsl */`\n\n\t\tuniform vec2 center;\n\t\tuniform float angle;\n\t\tuniform float scale;\n\t\tuniform vec2 tSize;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tfloat pattern() {\n\n\t\t\tfloat s = sin( angle ), c = cos( angle );\n\n\t\t\tvec2 tex = vUv * tSize - center;\n\t\t\tvec2 point = vec2( c * tex.x - s * tex.y, s * tex.x + c * tex.y ) * scale;\n\n\t\t\treturn ( sin( point.x ) * sin( point.y ) ) * 4.0;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvec4 color = texture2D( tDiffuse, vUv );\n\n\t\t\tfloat average = ( color.r + color.g + color.b ) / 3.0;\n\n\t\t\tgl_FragColor = vec4( vec3( average * 10.0 - 5.0 + pattern() ), color.a );\n\n\t\t}`\n\n};\n\nexport { DotScreenShader };\n","let debug = false\nlet statistiques = true\n\n\nimport {  Scene3D, THREE  } from 'enable3d'\nimport Stats from 'three/examples/jsm/libs/stats.module'\n\n\n\nconst stats = Stats()\nlet raycaster,  scene\n// let INTERSECTED;\n//\n//\n// const pointer = new THREE.Vector2();\nlet mouse = { x : 0, y : 0 }\n\nexport class MainScene extends Scene3D {\n  constructor() {\n    super('MainScene')\n  }\n\n  async init() {\n    console.log('init')\n    this.renderer.setPixelRatio(1)\n    this.renderer.setSize(window.innerWidth, window.innerHeight)\n    if (statistiques){\n      document.body.appendChild(stats.dom)\n    }\n  }\n\n  async preload() {\n    console.log('preload')\n  }\n\n  create() {\n\n    console.log('create')\n\n    // set up scene (light, ground, grid, sky, orbitControls)\n    this.warpSpeed() //'-orbitControls'\n\n    this.debug = debug\n    if (debug == true ){\n      this.physics.debug?.enable()     // enable physics debug\n    }\n    this.camera.position.set(0, 14, 20)\n\n    const blocks = []\n\n       const addTower = () => {\n         const material = this.add.material({ lambert: { color: 0xa04000 } })\n\n         for (let i = 0; i < 12; i++) {\n           if (i % 2 == 0) {\n             blocks.push(\n               this.physics.add.box({ y: i * 0.85, z: -1.3, width: 4, height: 0.65 }, { custom: material }),\n               this.physics.add.box({ y: i * 0.85, z: 0, width: 4, height: 0.65 }, { custom: material }),\n               this.physics.add.box({ y: i * 0.85, z: 1.3, width: 4, height: 0.65 }, { custom: material })\n             )\n           } else {\n             blocks.push(\n               this.physics.add.box({ y: i * 0.85, x: -1.3, depth: 4, height: 0.65 }, { custom: material }),\n               this.physics.add.box({ y: i * 0.85, x: 0, depth: 4, height: 0.65 }, { custom: material }),\n               this.physics.add.box({ y: i * 0.85, x: 1.3, depth: 4, height: 0.65 }, { custom: material })\n             )\n           }\n         }\n         blocks.forEach(block => {\n           block.body.setFriction(0.8)\n         })\n       }\n       addTower()\n\n    scene = this\n    raycaster = new THREE.Raycaster();\n    this.renderer.domElement.addEventListener( 'click', this.raycast, false );\n    // raycaster.setFromCamera( pointer, this.camera );\n    // const intersects = raycaster.intersectObjects( this.scene.children, false );\n    //\n    // if ( intersects.length > 0 ) {\n    //   console.log(intersects)\n    //   if ( INTERSECTED != intersects[ 0 ].object ) {\n    //\n    //     // if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );\n    //     // INTERSECTED = intersects[ 0 ].object;\n    //     // INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();\n    //     // INTERSECTED.material.emissive.setHex( 0xff0000 );\n    //   }\n    //\n    // } else {\n    //\n    //   // if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );\n    //\n    //   INTERSECTED = null;\n    //\n    // }\n    // const closest = () => {\n    //   const raycaster = this.physics.add.raycaster('closest') // 'closest' is the default\n    //\n    //   // raycaster.setRayFromWorld(-2, 5, 2)\n    //   // raycaster.setRayToWorld(2, -10, 0)\n    //   raycaster.rayTest()\n    //\n    //   if (raycaster.hasHit()) {\n    //     const { x, y, z } = raycaster.getHitPointWorld()\n    //     const { name } = raycaster.getCollisionObject()\n    //     console.log('closest:', `${name}:`, `x:${x.toFixed(2)}`, `y:${y.toFixed(2)}`, `z:${z.toFixed(2)}`)\n    //   }\n    //\n    //   // destroy the raycaster if you do not use it anymore\n    //   // (but you can of course reuse it multiple times)\n    //   raycaster.destroy()\n    // }\n    // window.addEventListener('click', async function (e) {\n    //   console.log(e)\n    //   //  closest()\n    // })\n    //\n    // document.addEventListener( 'mousemove', this.onPointerMove );\n\n  }\n\n  // onPointerMove( event ) {\n  //   pointer.x = ( event.clientX / window.innerWidth ) * 2 - 1;\n  //   pointer.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\n  // //  console.log(pointer)\n  // }\n  raycast ( e ) {\n\n    //1. sets the mouse position with a coordinate system where the center\n    //   of the screen is the origin\n    // console.log(e.clientX, e.clientY)\n    // mouse.x = ( e.clientX / window.innerWidth ) * 2 - 1;\n    // mouse.y = - ( e.clientY / window.innerHeight ) * 2 + 1;\n    var rect = scene.renderer.domElement.getBoundingClientRect();\n    mouse.x = ( ( e.clientX - rect.left ) / ( rect.right - rect.left ) ) * 2 - 1;\n    mouse.y = - ( ( e.clientY - rect.top ) / ( rect.bottom - rect.top) ) * 2 + 1\n\n    //2. set the picking ray from the camera position and mouse coordinates\n    raycaster.setFromCamera( mouse, scene.camera );\n\n    //3. compute intersections\n    // console.log(scene)\n    var intersects = raycaster.intersectObjects( scene.scene.children );\n\n    for ( var i = 0; i < intersects.length; i++ ) {\n      let name = intersects[ i ].object.name\n      if(name.length > 0 && name != \"ground\"){\n          console.log( name, intersects[ i ] );\n      }\n\n      /*\n      An intersection has the following properties :\n      - object : intersected object (THREE.Mesh)\n      - distance : distance from camera to intersection (number)\n      - face : intersected face (THREE.Face3)\n      - faceIndex : intersected face index (number)\n      - point : intersection point (THREE.Vector3)\n      - uv : intersection point in the object's UV coordinates (THREE.Vector2)\n      */\n    }\n\n  }\n\n\n\n\n  update() {\n\n    if (statistiques){\n      stats.update()\n    }\n  }\n\n\n\n}\n","<template>\n  <div>\n    Physic World\n    <div class=\"home\" id=\"myCanvas\">\n  </div>\n  </div>\n</template>\n\n<script>\nimport { Project,  PhysicsLoader, /*  ExtendedObject3D, ExtendedMesh, CatmullRomCurve3*/ } from 'enable3d'\nimport { MainScene } from '@/components/worlds/physic/MainScene.js'\n\nexport default {\n  name: \"PhysicWorld\",\n  created(){\n  console.log(process.env.BASE_URL)\n  PhysicsLoader('lib/ammo', () => new Project(\n    {\n      scenes: [MainScene],\n      // gravity: { x: 0, y: -9.81, z: 4},\n      // antialias: true,\n      // maxSubSteps: 10, //20, //10\n      // fixedTimeStep: 1/240, //1 / 360, // 1/240\n    }\n  ))\n}\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhysicWorld.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./PhysicWorld.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./PhysicWorld.vue?vue&type=template&id=32dd0ef1&\"\nimport script from \"./PhysicWorld.vue?vue&type=script&lang=js&\"\nexport * from \"./PhysicWorld.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS = require('../internals/typed-array-constructors-require-wrappers');\n\nvar aTypedArrayConstructor = ArrayBufferViewCore.aTypedArrayConstructor;\nvar exportTypedArrayStaticMethod = ArrayBufferViewCore.exportTypedArrayStaticMethod;\n\n// `%TypedArray%.of` method\n// https://tc39.es/ecma262/#sec-%typedarray%.of\nexportTypedArrayStaticMethod('of', function of(/* ...items */) {\n  var index = 0;\n  var length = arguments.length;\n  var result = new (aTypedArrayConstructor(this))(length);\n  while (length > index) result[index] = arguments[index++];\n  return result;\n}, TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS);\n",null,"/*!\n * matter-js 0.17.1 by @liabru\n * http://brm.io/matter-js/\n * License MIT\n * \n * The MIT License (MIT)\n * \n * Copyright (c) Liam Brummitt and contributors.\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Matter\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Matter\"] = factory();\n\telse\n\t\troot[\"Matter\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// define __esModule on exports\n/******/ \t__webpack_require__.r = function(exports) {\n/******/ \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n/******/ \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n/******/ \t\t}\n/******/ \t\tObject.defineProperty(exports, '__esModule', { value: true });\n/******/ \t};\n/******/\n/******/ \t// create a fake namespace object\n/******/ \t// mode & 1: value is a module id, require it\n/******/ \t// mode & 2: merge all properties of value into the ns\n/******/ \t// mode & 4: return value when already ns object\n/******/ \t// mode & 8|1: behave like require\n/******/ \t__webpack_require__.t = function(value, mode) {\n/******/ \t\tif(mode & 1) value = __webpack_require__(value);\n/******/ \t\tif(mode & 8) return value;\n/******/ \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n/******/ \t\tvar ns = Object.create(null);\n/******/ \t\t__webpack_require__.r(ns);\n/******/ \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n/******/ \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n/******/ \t\treturn ns;\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 22);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Common` module contains utility functions that are common to all modules.\n*\n* @class Common\n*/\n\nvar Common = {};\n\nmodule.exports = Common;\n\n(function() {\n\n    Common._nextId = 0;\n    Common._seed = 0;\n    Common._nowStartTime = +(new Date());\n    Common._warnedOnce = {};\n    Common._decomp = null;\n    \n    /**\n     * Extends the object in the first argument using the object in the second argument.\n     * @method extend\n     * @param {} obj\n     * @param {boolean} deep\n     * @return {} obj extended\n     */\n    Common.extend = function(obj, deep) {\n        var argsStart,\n            args,\n            deepClone;\n\n        if (typeof deep === 'boolean') {\n            argsStart = 2;\n            deepClone = deep;\n        } else {\n            argsStart = 1;\n            deepClone = true;\n        }\n\n        for (var i = argsStart; i < arguments.length; i++) {\n            var source = arguments[i];\n\n            if (source) {\n                for (var prop in source) {\n                    if (deepClone && source[prop] && source[prop].constructor === Object) {\n                        if (!obj[prop] || obj[prop].constructor === Object) {\n                            obj[prop] = obj[prop] || {};\n                            Common.extend(obj[prop], deepClone, source[prop]);\n                        } else {\n                            obj[prop] = source[prop];\n                        }\n                    } else {\n                        obj[prop] = source[prop];\n                    }\n                }\n            }\n        }\n        \n        return obj;\n    };\n\n    /**\n     * Creates a new clone of the object, if deep is true references will also be cloned.\n     * @method clone\n     * @param {} obj\n     * @param {bool} deep\n     * @return {} obj cloned\n     */\n    Common.clone = function(obj, deep) {\n        return Common.extend({}, deep, obj);\n    };\n\n    /**\n     * Returns the list of keys for the given object.\n     * @method keys\n     * @param {} obj\n     * @return {string[]} keys\n     */\n    Common.keys = function(obj) {\n        if (Object.keys)\n            return Object.keys(obj);\n\n        // avoid hasOwnProperty for performance\n        var keys = [];\n        for (var key in obj)\n            keys.push(key);\n        return keys;\n    };\n\n    /**\n     * Returns the list of values for the given object.\n     * @method values\n     * @param {} obj\n     * @return {array} Array of the objects property values\n     */\n    Common.values = function(obj) {\n        var values = [];\n        \n        if (Object.keys) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length; i++) {\n                values.push(obj[keys[i]]);\n            }\n            return values;\n        }\n        \n        // avoid hasOwnProperty for performance\n        for (var key in obj)\n            values.push(obj[key]);\n        return values;\n    };\n\n    /**\n     * Gets a value from `base` relative to the `path` string.\n     * @method get\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} The object at the given path\n     */\n    Common.get = function(obj, path, begin, end) {\n        path = path.split('.').slice(begin, end);\n\n        for (var i = 0; i < path.length; i += 1) {\n            obj = obj[path[i]];\n        }\n\n        return obj;\n    };\n\n    /**\n     * Sets a value on `base` relative to the given `path` string.\n     * @method set\n     * @param {} obj The base object\n     * @param {string} path The path relative to `base`, e.g. 'Foo.Bar.baz'\n     * @param {} val The value to set\n     * @param {number} [begin] Path slice begin\n     * @param {number} [end] Path slice end\n     * @return {} Pass through `val` for chaining\n     */\n    Common.set = function(obj, path, val, begin, end) {\n        var parts = path.split('.').slice(begin, end);\n        Common.get(obj, path, 0, -1)[parts[parts.length - 1]] = val;\n        return val;\n    };\n\n    /**\n     * Shuffles the given array in-place.\n     * The function uses a seeded random generator.\n     * @method shuffle\n     * @param {array} array\n     * @return {array} array shuffled randomly\n     */\n    Common.shuffle = function(array) {\n        for (var i = array.length - 1; i > 0; i--) {\n            var j = Math.floor(Common.random() * (i + 1));\n            var temp = array[i];\n            array[i] = array[j];\n            array[j] = temp;\n        }\n        return array;\n    };\n\n    /**\n     * Randomly chooses a value from a list with equal probability.\n     * The function uses a seeded random generator.\n     * @method choose\n     * @param {array} choices\n     * @return {object} A random choice object from the array\n     */\n    Common.choose = function(choices) {\n        return choices[Math.floor(Common.random() * choices.length)];\n    };\n\n    /**\n     * Returns true if the object is a HTMLElement, otherwise false.\n     * @method isElement\n     * @param {object} obj\n     * @return {boolean} True if the object is a HTMLElement, otherwise false\n     */\n    Common.isElement = function(obj) {\n        if (typeof HTMLElement !== 'undefined') {\n            return obj instanceof HTMLElement;\n        }\n\n        return !!(obj && obj.nodeType && obj.nodeName);\n    };\n\n    /**\n     * Returns true if the object is an array.\n     * @method isArray\n     * @param {object} obj\n     * @return {boolean} True if the object is an array, otherwise false\n     */\n    Common.isArray = function(obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    /**\n     * Returns true if the object is a function.\n     * @method isFunction\n     * @param {object} obj\n     * @return {boolean} True if the object is a function, otherwise false\n     */\n    Common.isFunction = function(obj) {\n        return typeof obj === \"function\";\n    };\n\n    /**\n     * Returns true if the object is a plain object.\n     * @method isPlainObject\n     * @param {object} obj\n     * @return {boolean} True if the object is a plain object, otherwise false\n     */\n    Common.isPlainObject = function(obj) {\n        return typeof obj === 'object' && obj.constructor === Object;\n    };\n\n    /**\n     * Returns true if the object is a string.\n     * @method isString\n     * @param {object} obj\n     * @return {boolean} True if the object is a string, otherwise false\n     */\n    Common.isString = function(obj) {\n        return toString.call(obj) === '[object String]';\n    };\n    \n    /**\n     * Returns the given value clamped between a minimum and maximum value.\n     * @method clamp\n     * @param {number} value\n     * @param {number} min\n     * @param {number} max\n     * @return {number} The value clamped between min and max inclusive\n     */\n    Common.clamp = function(value, min, max) {\n        if (value < min)\n            return min;\n        if (value > max)\n            return max;\n        return value;\n    };\n    \n    /**\n     * Returns the sign of the given value.\n     * @method sign\n     * @param {number} value\n     * @return {number} -1 if negative, +1 if 0 or positive\n     */\n    Common.sign = function(value) {\n        return value < 0 ? -1 : 1;\n    };\n    \n    /**\n     * Returns the current timestamp since the time origin (e.g. from page load).\n     * The result is in milliseconds and will use high-resolution timing if available.\n     * @method now\n     * @return {number} the current timestamp in milliseconds\n     */\n    Common.now = function() {\n        if (typeof window !== 'undefined' && window.performance) {\n            if (window.performance.now) {\n                return window.performance.now();\n            } else if (window.performance.webkitNow) {\n                return window.performance.webkitNow();\n            }\n        }\n\n        if (Date.now) {\n            return Date.now();\n        }\n\n        return (new Date()) - Common._nowStartTime;\n    };\n    \n    /**\n     * Returns a random value between a minimum and a maximum value inclusive.\n     * The function uses a seeded random generator.\n     * @method random\n     * @param {number} min\n     * @param {number} max\n     * @return {number} A random number between min and max inclusive\n     */\n    Common.random = function(min, max) {\n        min = (typeof min !== \"undefined\") ? min : 0;\n        max = (typeof max !== \"undefined\") ? max : 1;\n        return min + _seededRandom() * (max - min);\n    };\n\n    var _seededRandom = function() {\n        // https://en.wikipedia.org/wiki/Linear_congruential_generator\n        Common._seed = (Common._seed * 9301 + 49297) % 233280;\n        return Common._seed / 233280;\n    };\n\n    /**\n     * Converts a CSS hex colour string into an integer.\n     * @method colorToNumber\n     * @param {string} colorString\n     * @return {number} An integer representing the CSS hex string\n     */\n    Common.colorToNumber = function(colorString) {\n        colorString = colorString.replace('#','');\n\n        if (colorString.length == 3) {\n            colorString = colorString.charAt(0) + colorString.charAt(0)\n                        + colorString.charAt(1) + colorString.charAt(1)\n                        + colorString.charAt(2) + colorString.charAt(2);\n        }\n\n        return parseInt(colorString, 16);\n    };\n\n    /**\n     * The console logging level to use, where each level includes all levels above and excludes the levels below.\n     * The default level is 'debug' which shows all console messages.  \n     *\n     * Possible level values are:\n     * - 0 = None\n     * - 1 = Debug\n     * - 2 = Info\n     * - 3 = Warn\n     * - 4 = Error\n     * @property Common.logLevel\n     * @type {Number}\n     * @default 1\n     */\n    Common.logLevel = 1;\n\n    /**\n     * Shows a `console.log` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method log\n     * @param ...objs {} The objects to log.\n     */\n    Common.log = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.log.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.info` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method info\n     * @param ...objs {} The objects to log.\n     */\n    Common.info = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 2) {\n            console.info.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Shows a `console.warn` message only if the current `Common.logLevel` allows it.\n     * The message will be prefixed with 'matter-js' to make it easily identifiable.\n     * @method warn\n     * @param ...objs {} The objects to log.\n     */\n    Common.warn = function() {\n        if (console && Common.logLevel > 0 && Common.logLevel <= 3) {\n            console.warn.apply(console, ['matter-js:'].concat(Array.prototype.slice.call(arguments)));\n        }\n    };\n\n    /**\n     * Uses `Common.warn` to log the given message one time only.\n     * @method warnOnce\n     * @param ...objs {} The objects to log.\n     */\n    Common.warnOnce = function() {\n        var message = Array.prototype.slice.call(arguments).join(' ');\n\n        if (!Common._warnedOnce[message]) {\n            Common.warn(message);\n            Common._warnedOnce[message] = true;\n        }\n    };\n\n    /**\n     * Shows a deprecated console warning when the function on the given object is called.\n     * The target function will be replaced with a new function that first shows the warning\n     * and then calls the original function.\n     * @method deprecated\n     * @param {object} obj The object or module\n     * @param {string} name The property name of the function on obj\n     * @param {string} warning The one-time message to show if the function is called\n     */\n    Common.deprecated = function(obj, prop, warning) {\n        obj[prop] = Common.chain(function() {\n            Common.warnOnce(' deprecated ', warning);\n        }, obj[prop]);\n    };\n\n    /**\n     * Returns the next unique sequential ID.\n     * @method nextId\n     * @return {Number} Unique sequential ID\n     */\n    Common.nextId = function() {\n        return Common._nextId++;\n    };\n\n    /**\n     * A cross browser compatible indexOf implementation.\n     * @method indexOf\n     * @param {array} haystack\n     * @param {object} needle\n     * @return {number} The position of needle in haystack, otherwise -1.\n     */\n    Common.indexOf = function(haystack, needle) {\n        if (haystack.indexOf)\n            return haystack.indexOf(needle);\n\n        for (var i = 0; i < haystack.length; i++) {\n            if (haystack[i] === needle)\n                return i;\n        }\n\n        return -1;\n    };\n\n    /**\n     * A cross browser compatible array map implementation.\n     * @method map\n     * @param {array} list\n     * @param {function} func\n     * @return {array} Values from list transformed by func.\n     */\n    Common.map = function(list, func) {\n        if (list.map) {\n            return list.map(func);\n        }\n\n        var mapped = [];\n\n        for (var i = 0; i < list.length; i += 1) {\n            mapped.push(func(list[i]));\n        }\n\n        return mapped;\n    };\n\n    /**\n     * Takes a directed graph and returns the partially ordered set of vertices in topological order.\n     * Circular dependencies are allowed.\n     * @method topologicalSort\n     * @param {object} graph\n     * @return {array} Partially ordered set of vertices in topological order.\n     */\n    Common.topologicalSort = function(graph) {\n        // https://github.com/mgechev/javascript-algorithms\n        // Copyright (c) Minko Gechev (MIT license)\n        // Modifications: tidy formatting and naming\n        var result = [],\n            visited = [],\n            temp = [];\n\n        for (var node in graph) {\n            if (!visited[node] && !temp[node]) {\n                Common._topologicalSort(node, visited, temp, graph, result);\n            }\n        }\n\n        return result;\n    };\n\n    Common._topologicalSort = function(node, visited, temp, graph, result) {\n        var neighbors = graph[node] || [];\n        temp[node] = true;\n\n        for (var i = 0; i < neighbors.length; i += 1) {\n            var neighbor = neighbors[i];\n\n            if (temp[neighbor]) {\n                // skip circular dependencies\n                continue;\n            }\n\n            if (!visited[neighbor]) {\n                Common._topologicalSort(neighbor, visited, temp, graph, result);\n            }\n        }\n\n        temp[node] = false;\n        visited[node] = true;\n\n        result.push(node);\n    };\n\n    /**\n     * Takes _n_ functions as arguments and returns a new function that calls them in order.\n     * The arguments applied when calling the new function will also be applied to every function passed.\n     * The value of `this` refers to the last value returned in the chain that was not `undefined`.\n     * Therefore if a passed function does not return a value, the previously returned value is maintained.\n     * After all passed functions have been called the new function returns the last returned value (if any).\n     * If any of the passed functions are a chain, then the chain will be flattened.\n     * @method chain\n     * @param ...funcs {function} The functions to chain.\n     * @return {function} A new function that calls the passed functions in order.\n     */\n    Common.chain = function() {\n        var funcs = [];\n\n        for (var i = 0; i < arguments.length; i += 1) {\n            var func = arguments[i];\n\n            if (func._chained) {\n                // flatten already chained functions\n                funcs.push.apply(funcs, func._chained);\n            } else {\n                funcs.push(func);\n            }\n        }\n\n        var chain = function() {\n            // https://github.com/GoogleChrome/devtools-docs/issues/53#issuecomment-51941358\n            var lastResult,\n                args = new Array(arguments.length);\n\n            for (var i = 0, l = arguments.length; i < l; i++) {\n                args[i] = arguments[i];\n            }\n\n            for (i = 0; i < funcs.length; i += 1) {\n                var result = funcs[i].apply(lastResult, args);\n\n                if (typeof result !== 'undefined') {\n                    lastResult = result;\n                }\n            }\n\n            return lastResult;\n        };\n\n        chain._chained = funcs;\n\n        return chain;\n    };\n\n    /**\n     * Chains a function to excute before the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathBefore\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain before the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathBefore = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            func,\n            Common.get(base, path)\n        ));\n    };\n\n    /**\n     * Chains a function to excute after the original function on the given `path` relative to `base`.\n     * See also docs for `Common.chain`.\n     * @method chainPathAfter\n     * @param {} base The base object\n     * @param {string} path The path relative to `base`\n     * @param {function} func The function to chain after the original\n     * @return {function} The chained function that replaced the original\n     */\n    Common.chainPathAfter = function(base, path, func) {\n        return Common.set(base, path, Common.chain(\n            Common.get(base, path),\n            func\n        ));\n    };\n\n    /**\n     * Provide the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module to enable\n     * concave vertex decomposition support when using `Bodies.fromVertices` e.g. `Common.setDecomp(require('poly-decomp'))`.\n     * @method setDecomp\n     * @param {} decomp The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module.\n     */\n    Common.setDecomp = function(decomp) {\n        Common._decomp = decomp;\n    };\n\n    /**\n     * Returns the [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module provided through `Common.setDecomp`,\n     * otherwise returns the global `decomp` if set.\n     * @method getDecomp\n     * @return {} The [poly-decomp](https://github.com/schteppe/poly-decomp.js) library module if provided.\n     */\n    Common.getDecomp = function() {\n        // get user provided decomp if set\n        var decomp = Common._decomp;\n\n        try {\n            // otherwise from window global\n            if (!decomp && typeof window !== 'undefined') {\n                decomp = window.decomp;\n            }\n    \n            // otherwise from node global\n            if (!decomp && typeof global !== 'undefined') {\n                decomp = global.decomp;\n            }\n        } catch (e) {\n            // decomp not available\n            decomp = null;\n        }\n\n        return decomp;\n    };\n})();\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Bounds` module contains methods for creating and manipulating axis-aligned bounding boxes (AABB).\n*\n* @class Bounds\n*/\n\nvar Bounds = {};\n\nmodule.exports = Bounds;\n\n(function() {\n\n    /**\n     * Creates a new axis-aligned bounding box (AABB) for the given vertices.\n     * @method create\n     * @param {vertices} vertices\n     * @return {bounds} A new bounds object\n     */\n    Bounds.create = function(vertices) {\n        var bounds = { \n            min: { x: 0, y: 0 }, \n            max: { x: 0, y: 0 }\n        };\n\n        if (vertices)\n            Bounds.update(bounds, vertices);\n        \n        return bounds;\n    };\n\n    /**\n     * Updates bounds using the given vertices and extends the bounds given a velocity.\n     * @method update\n     * @param {bounds} bounds\n     * @param {vertices} vertices\n     * @param {vector} velocity\n     */\n    Bounds.update = function(bounds, vertices, velocity) {\n        bounds.min.x = Infinity;\n        bounds.max.x = -Infinity;\n        bounds.min.y = Infinity;\n        bounds.max.y = -Infinity;\n\n        for (var i = 0; i < vertices.length; i++) {\n            var vertex = vertices[i];\n            if (vertex.x > bounds.max.x) bounds.max.x = vertex.x;\n            if (vertex.x < bounds.min.x) bounds.min.x = vertex.x;\n            if (vertex.y > bounds.max.y) bounds.max.y = vertex.y;\n            if (vertex.y < bounds.min.y) bounds.min.y = vertex.y;\n        }\n        \n        if (velocity) {\n            if (velocity.x > 0) {\n                bounds.max.x += velocity.x;\n            } else {\n                bounds.min.x += velocity.x;\n            }\n            \n            if (velocity.y > 0) {\n                bounds.max.y += velocity.y;\n            } else {\n                bounds.min.y += velocity.y;\n            }\n        }\n    };\n\n    /**\n     * Returns true if the bounds contains the given point.\n     * @method contains\n     * @param {bounds} bounds\n     * @param {vector} point\n     * @return {boolean} True if the bounds contain the point, otherwise false\n     */\n    Bounds.contains = function(bounds, point) {\n        return point.x >= bounds.min.x && point.x <= bounds.max.x \n               && point.y >= bounds.min.y && point.y <= bounds.max.y;\n    };\n\n    /**\n     * Returns true if the two bounds intersect.\n     * @method overlaps\n     * @param {bounds} boundsA\n     * @param {bounds} boundsB\n     * @return {boolean} True if the bounds overlap, otherwise false\n     */\n    Bounds.overlaps = function(boundsA, boundsB) {\n        return (boundsA.min.x <= boundsB.max.x && boundsA.max.x >= boundsB.min.x\n                && boundsA.max.y >= boundsB.min.y && boundsA.min.y <= boundsB.max.y);\n    };\n\n    /**\n     * Translates the bounds by the given vector.\n     * @method translate\n     * @param {bounds} bounds\n     * @param {vector} vector\n     */\n    Bounds.translate = function(bounds, vector) {\n        bounds.min.x += vector.x;\n        bounds.max.x += vector.x;\n        bounds.min.y += vector.y;\n        bounds.max.y += vector.y;\n    };\n\n    /**\n     * Shifts the bounds to the given position.\n     * @method shift\n     * @param {bounds} bounds\n     * @param {vector} position\n     */\n    Bounds.shift = function(bounds, position) {\n        var deltaX = bounds.max.x - bounds.min.x,\n            deltaY = bounds.max.y - bounds.min.y;\n            \n        bounds.min.x = position.x;\n        bounds.max.x = position.x + deltaX;\n        bounds.min.y = position.y;\n        bounds.max.y = position.y + deltaY;\n    };\n    \n})();\n\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Vector` module contains methods for creating and manipulating vectors.\n* Vectors are the basis of all the geometry related operations in the engine.\n* A `Matter.Vector` object is of the form `{ x: 0, y: 0 }`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vector\n*/\n\n// TODO: consider params for reusing vector objects\n\nvar Vector = {};\n\nmodule.exports = Vector;\n\n(function() {\n\n    /**\n     * Creates a new vector.\n     * @method create\n     * @param {number} x\n     * @param {number} y\n     * @return {vector} A new vector\n     */\n    Vector.create = function(x, y) {\n        return { x: x || 0, y: y || 0 };\n    };\n\n    /**\n     * Returns a new vector with `x` and `y` copied from the given `vector`.\n     * @method clone\n     * @param {vector} vector\n     * @return {vector} A new cloned vector\n     */\n    Vector.clone = function(vector) {\n        return { x: vector.x, y: vector.y };\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector.\n     * @method magnitude\n     * @param {vector} vector\n     * @return {number} The magnitude of the vector\n     */\n    Vector.magnitude = function(vector) {\n        return Math.sqrt((vector.x * vector.x) + (vector.y * vector.y));\n    };\n\n    /**\n     * Returns the magnitude (length) of a vector (therefore saving a `sqrt` operation).\n     * @method magnitudeSquared\n     * @param {vector} vector\n     * @return {number} The squared magnitude of the vector\n     */\n    Vector.magnitudeSquared = function(vector) {\n        return (vector.x * vector.x) + (vector.y * vector.y);\n    };\n\n    /**\n     * Rotates the vector about (0, 0) by specified angle.\n     * @method rotate\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} [output]\n     * @return {vector} The vector rotated about (0, 0)\n     */\n    Vector.rotate = function(vector, angle, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = vector.x * cos - vector.y * sin;\n        output.y = vector.x * sin + vector.y * cos;\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Rotates the vector about a specified point by specified angle.\n     * @method rotateAbout\n     * @param {vector} vector\n     * @param {number} angle\n     * @param {vector} point\n     * @param {vector} [output]\n     * @return {vector} A new vector rotated about the point\n     */\n    Vector.rotateAbout = function(vector, angle, point, output) {\n        var cos = Math.cos(angle), sin = Math.sin(angle);\n        if (!output) output = {};\n        var x = point.x + ((vector.x - point.x) * cos - (vector.y - point.y) * sin);\n        output.y = point.y + ((vector.x - point.x) * sin + (vector.y - point.y) * cos);\n        output.x = x;\n        return output;\n    };\n\n    /**\n     * Normalises a vector (such that its magnitude is `1`).\n     * @method normalise\n     * @param {vector} vector\n     * @return {vector} A new vector normalised\n     */\n    Vector.normalise = function(vector) {\n        var magnitude = Vector.magnitude(vector);\n        if (magnitude === 0)\n            return { x: 0, y: 0 };\n        return { x: vector.x / magnitude, y: vector.y / magnitude };\n    };\n\n    /**\n     * Returns the dot-product of two vectors.\n     * @method dot\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The dot product of the two vectors\n     */\n    Vector.dot = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.x) + (vectorA.y * vectorB.y);\n    };\n\n    /**\n     * Returns the cross-product of two vectors.\n     * @method cross\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The cross product of the two vectors\n     */\n    Vector.cross = function(vectorA, vectorB) {\n        return (vectorA.x * vectorB.y) - (vectorA.y * vectorB.x);\n    };\n\n    /**\n     * Returns the cross-product of three vectors.\n     * @method cross3\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} vectorC\n     * @return {number} The cross product of the three vectors\n     */\n    Vector.cross3 = function(vectorA, vectorB, vectorC) {\n        return (vectorB.x - vectorA.x) * (vectorC.y - vectorA.y) - (vectorB.y - vectorA.y) * (vectorC.x - vectorA.x);\n    };\n\n    /**\n     * Adds the two vectors.\n     * @method add\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB added\n     */\n    Vector.add = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x + vectorB.x;\n        output.y = vectorA.y + vectorB.y;\n        return output;\n    };\n\n    /**\n     * Subtracts the two vectors.\n     * @method sub\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @param {vector} [output]\n     * @return {vector} A new vector of vectorA and vectorB subtracted\n     */\n    Vector.sub = function(vectorA, vectorB, output) {\n        if (!output) output = {};\n        output.x = vectorA.x - vectorB.x;\n        output.y = vectorA.y - vectorB.y;\n        return output;\n    };\n\n    /**\n     * Multiplies a vector and a scalar.\n     * @method mult\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector multiplied by scalar\n     */\n    Vector.mult = function(vector, scalar) {\n        return { x: vector.x * scalar, y: vector.y * scalar };\n    };\n\n    /**\n     * Divides a vector and a scalar.\n     * @method div\n     * @param {vector} vector\n     * @param {number} scalar\n     * @return {vector} A new vector divided by scalar\n     */\n    Vector.div = function(vector, scalar) {\n        return { x: vector.x / scalar, y: vector.y / scalar };\n    };\n\n    /**\n     * Returns the perpendicular vector. Set `negate` to true for the perpendicular in the opposite direction.\n     * @method perp\n     * @param {vector} vector\n     * @param {bool} [negate=false]\n     * @return {vector} The perpendicular vector\n     */\n    Vector.perp = function(vector, negate) {\n        negate = negate === true ? -1 : 1;\n        return { x: negate * -vector.y, y: negate * vector.x };\n    };\n\n    /**\n     * Negates both components of a vector such that it points in the opposite direction.\n     * @method neg\n     * @param {vector} vector\n     * @return {vector} The negated vector\n     */\n    Vector.neg = function(vector) {\n        return { x: -vector.x, y: -vector.y };\n    };\n\n    /**\n     * Returns the angle between the vector `vectorB - vectorA` and the x-axis in radians.\n     * @method angle\n     * @param {vector} vectorA\n     * @param {vector} vectorB\n     * @return {number} The angle in radians\n     */\n    Vector.angle = function(vectorA, vectorB) {\n        return Math.atan2(vectorB.y - vectorA.y, vectorB.x - vectorA.x);\n    };\n\n    /**\n     * Temporary vector pool (not thread-safe).\n     * @property _temp\n     * @type {vector[]}\n     * @private\n     */\n    Vector._temp = [\n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create(), \n        Vector.create(), Vector.create()\n    ];\n\n})();\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Vertices` module contains methods for creating and manipulating sets of vertices.\n* A set of vertices is an array of `Matter.Vector` with additional indexing properties inserted by `Vertices.create`.\n* A `Matter.Body` maintains a set of vertices to represent the shape of the object (its convex hull).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Vertices\n*/\n\nvar Vertices = {};\n\nmodule.exports = Vertices;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of `Matter.Body` compatible vertices.\n     * The `points` argument accepts an array of `Matter.Vector` points orientated around the origin `(0, 0)`, for example:\n     *\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\n     *\n     * The `Vertices.create` method returns a new array of vertices, which are similar to Matter.Vector objects,\n     * but with some additional references required for efficient collision detection routines.\n     *\n     * Vertices must be specified in clockwise order.\n     *\n     * Note that the `body` argument is not optional, a `Matter.Body` reference must be provided.\n     *\n     * @method create\n     * @param {vector[]} points\n     * @param {body} body\n     */\n    Vertices.create = function(points, body) {\n        var vertices = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i],\n                vertex = {\n                    x: point.x,\n                    y: point.y,\n                    index: i,\n                    body: body,\n                    isInternal: false\n                };\n\n            vertices.push(vertex);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Parses a string containing ordered x y pairs separated by spaces (and optionally commas), \n     * into a `Matter.Vertices` object for the given `Matter.Body`.\n     * For parsing SVG paths, see `Svg.pathToVertices`.\n     * @method fromPath\n     * @param {string} path\n     * @param {body} body\n     * @return {vertices} vertices\n     */\n    Vertices.fromPath = function(path, body) {\n        var pathPattern = /L?\\s*([-\\d.e]+)[\\s,]*([-\\d.e]+)*/ig,\n            points = [];\n\n        path.replace(pathPattern, function(match, x, y) {\n            points.push({ x: parseFloat(x), y: parseFloat(y) });\n        });\n\n        return Vertices.create(points, body);\n    };\n\n    /**\n     * Returns the centre (centroid) of the set of vertices.\n     * @method centre\n     * @param {vertices} vertices\n     * @return {vector} The centre point\n     */\n    Vertices.centre = function(vertices) {\n        var area = Vertices.area(vertices, true),\n            centre = { x: 0, y: 0 },\n            cross,\n            temp,\n            j;\n\n        for (var i = 0; i < vertices.length; i++) {\n            j = (i + 1) % vertices.length;\n            cross = Vector.cross(vertices[i], vertices[j]);\n            temp = Vector.mult(Vector.add(vertices[i], vertices[j]), cross);\n            centre = Vector.add(centre, temp);\n        }\n\n        return Vector.div(centre, 6 * area);\n    };\n\n    /**\n     * Returns the average (mean) of the set of vertices.\n     * @method mean\n     * @param {vertices} vertices\n     * @return {vector} The average point\n     */\n    Vertices.mean = function(vertices) {\n        var average = { x: 0, y: 0 };\n\n        for (var i = 0; i < vertices.length; i++) {\n            average.x += vertices[i].x;\n            average.y += vertices[i].y;\n        }\n\n        return Vector.div(average, vertices.length);\n    };\n\n    /**\n     * Returns the area of the set of vertices.\n     * @method area\n     * @param {vertices} vertices\n     * @param {bool} signed\n     * @return {number} The area\n     */\n    Vertices.area = function(vertices, signed) {\n        var area = 0,\n            j = vertices.length - 1;\n\n        for (var i = 0; i < vertices.length; i++) {\n            area += (vertices[j].x - vertices[i].x) * (vertices[j].y + vertices[i].y);\n            j = i;\n        }\n\n        if (signed)\n            return area / 2;\n\n        return Math.abs(area) / 2;\n    };\n\n    /**\n     * Returns the moment of inertia (second moment of area) of the set of vertices given the total mass.\n     * @method inertia\n     * @param {vertices} vertices\n     * @param {number} mass\n     * @return {number} The polygon's moment of inertia\n     */\n    Vertices.inertia = function(vertices, mass) {\n        var numerator = 0,\n            denominator = 0,\n            v = vertices,\n            cross,\n            j;\n\n        // find the polygon's moment of inertia, using second moment of area\n        // from equations at http://www.physicsforums.com/showthread.php?t=25293\n        for (var n = 0; n < v.length; n++) {\n            j = (n + 1) % v.length;\n            cross = Math.abs(Vector.cross(v[j], v[n]));\n            numerator += cross * (Vector.dot(v[j], v[j]) + Vector.dot(v[j], v[n]) + Vector.dot(v[n], v[n]));\n            denominator += cross;\n        }\n\n        return (mass / 6) * (numerator / denominator);\n    };\n\n    /**\n     * Translates the set of vertices in-place.\n     * @method translate\n     * @param {vertices} vertices\n     * @param {vector} vector\n     * @param {number} scalar\n     */\n    Vertices.translate = function(vertices, vector, scalar) {\n        var i;\n        if (scalar) {\n            for (i = 0; i < vertices.length; i++) {\n                vertices[i].x += vector.x * scalar;\n                vertices[i].y += vector.y * scalar;\n            }\n        } else {\n            for (i = 0; i < vertices.length; i++) {\n                vertices[i].x += vector.x;\n                vertices[i].y += vector.y;\n            }\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Rotates the set of vertices in-place.\n     * @method rotate\n     * @param {vertices} vertices\n     * @param {number} angle\n     * @param {vector} point\n     */\n    Vertices.rotate = function(vertices, angle, point) {\n        if (angle === 0)\n            return;\n\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle);\n\n        for (var i = 0; i < vertices.length; i++) {\n            var vertice = vertices[i],\n                dx = vertice.x - point.x,\n                dy = vertice.y - point.y;\n                \n            vertice.x = point.x + (dx * cos - dy * sin);\n            vertice.y = point.y + (dx * sin + dy * cos);\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Returns `true` if the `point` is inside the set of `vertices`.\n     * @method contains\n     * @param {vertices} vertices\n     * @param {vector} point\n     * @return {boolean} True if the vertices contains point, otherwise false\n     */\n    Vertices.contains = function(vertices, point) {\n        for (var i = 0; i < vertices.length; i++) {\n            var vertice = vertices[i],\n                nextVertice = vertices[(i + 1) % vertices.length];\n            if ((point.x - vertice.x) * (nextVertice.y - vertice.y) + (point.y - vertice.y) * (vertice.x - nextVertice.x) > 0) {\n                return false;\n            }\n        }\n\n        return true;\n    };\n\n    /**\n     * Scales the vertices from a point (default is centre) in-place.\n     * @method scale\n     * @param {vertices} vertices\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     */\n    Vertices.scale = function(vertices, scaleX, scaleY, point) {\n        if (scaleX === 1 && scaleY === 1)\n            return vertices;\n\n        point = point || Vertices.centre(vertices);\n\n        var vertex,\n            delta;\n\n        for (var i = 0; i < vertices.length; i++) {\n            vertex = vertices[i];\n            delta = Vector.sub(vertex, point);\n            vertices[i].x = point.x + delta.x * scaleX;\n            vertices[i].y = point.y + delta.y * scaleY;\n        }\n\n        return vertices;\n    };\n\n    /**\n     * Chamfers a set of vertices by giving them rounded corners, returns a new set of vertices.\n     * The radius parameter is a single number or an array to specify the radius for each vertex.\n     * @method chamfer\n     * @param {vertices} vertices\n     * @param {number[]} radius\n     * @param {number} quality\n     * @param {number} qualityMin\n     * @param {number} qualityMax\n     */\n    Vertices.chamfer = function(vertices, radius, quality, qualityMin, qualityMax) {\n        if (typeof radius === 'number') {\n            radius = [radius];\n        } else {\n            radius = radius || [8];\n        }\n\n        // quality defaults to -1, which is auto\n        quality = (typeof quality !== 'undefined') ? quality : -1;\n        qualityMin = qualityMin || 2;\n        qualityMax = qualityMax || 14;\n\n        var newVertices = [];\n\n        for (var i = 0; i < vertices.length; i++) {\n            var prevVertex = vertices[i - 1 >= 0 ? i - 1 : vertices.length - 1],\n                vertex = vertices[i],\n                nextVertex = vertices[(i + 1) % vertices.length],\n                currentRadius = radius[i < radius.length ? i : radius.length - 1];\n\n            if (currentRadius === 0) {\n                newVertices.push(vertex);\n                continue;\n            }\n\n            var prevNormal = Vector.normalise({ \n                x: vertex.y - prevVertex.y, \n                y: prevVertex.x - vertex.x\n            });\n\n            var nextNormal = Vector.normalise({ \n                x: nextVertex.y - vertex.y, \n                y: vertex.x - nextVertex.x\n            });\n\n            var diagonalRadius = Math.sqrt(2 * Math.pow(currentRadius, 2)),\n                radiusVector = Vector.mult(Common.clone(prevNormal), currentRadius),\n                midNormal = Vector.normalise(Vector.mult(Vector.add(prevNormal, nextNormal), 0.5)),\n                scaledVertex = Vector.sub(vertex, Vector.mult(midNormal, diagonalRadius));\n\n            var precision = quality;\n\n            if (quality === -1) {\n                // automatically decide precision\n                precision = Math.pow(currentRadius, 0.32) * 1.75;\n            }\n\n            precision = Common.clamp(precision, qualityMin, qualityMax);\n\n            // use an even value for precision, more likely to reduce axes by using symmetry\n            if (precision % 2 === 1)\n                precision += 1;\n\n            var alpha = Math.acos(Vector.dot(prevNormal, nextNormal)),\n                theta = alpha / precision;\n\n            for (var j = 0; j < precision; j++) {\n                newVertices.push(Vector.add(Vector.rotate(radiusVector, theta * j), scaledVertex));\n            }\n        }\n\n        return newVertices;\n    };\n\n    /**\n     * Sorts the input vertices into clockwise order in place.\n     * @method clockwiseSort\n     * @param {vertices} vertices\n     * @return {vertices} vertices\n     */\n    Vertices.clockwiseSort = function(vertices) {\n        var centre = Vertices.mean(vertices);\n\n        vertices.sort(function(vertexA, vertexB) {\n            return Vector.angle(centre, vertexA) - Vector.angle(centre, vertexB);\n        });\n\n        return vertices;\n    };\n\n    /**\n     * Returns true if the vertices form a convex shape (vertices must be in clockwise order).\n     * @method isConvex\n     * @param {vertices} vertices\n     * @return {bool} `true` if the `vertices` are convex, `false` if not (or `null` if not computable).\n     */\n    Vertices.isConvex = function(vertices) {\n        // http://paulbourke.net/geometry/polygonmesh/\n        // Copyright (c) Paul Bourke (use permitted)\n\n        var flag = 0,\n            n = vertices.length,\n            i,\n            j,\n            k,\n            z;\n\n        if (n < 3)\n            return null;\n\n        for (i = 0; i < n; i++) {\n            j = (i + 1) % n;\n            k = (i + 2) % n;\n            z = (vertices[j].x - vertices[i].x) * (vertices[k].y - vertices[j].y);\n            z -= (vertices[j].y - vertices[i].y) * (vertices[k].x - vertices[j].x);\n\n            if (z < 0) {\n                flag |= 1;\n            } else if (z > 0) {\n                flag |= 2;\n            }\n\n            if (flag === 3) {\n                return false;\n            }\n        }\n\n        if (flag !== 0){\n            return true;\n        } else {\n            return null;\n        }\n    };\n\n    /**\n     * Returns the convex hull of the input vertices as a new array of points.\n     * @method hull\n     * @param {vertices} vertices\n     * @return [vertex] vertices\n     */\n    Vertices.hull = function(vertices) {\n        // http://geomalgorithms.com/a10-_hull-1.html\n\n        var upper = [],\n            lower = [], \n            vertex,\n            i;\n\n        // sort vertices on x-axis (y-axis for ties)\n        vertices = vertices.slice(0);\n        vertices.sort(function(vertexA, vertexB) {\n            var dx = vertexA.x - vertexB.x;\n            return dx !== 0 ? dx : vertexA.y - vertexB.y;\n        });\n\n        // build lower hull\n        for (i = 0; i < vertices.length; i += 1) {\n            vertex = vertices[i];\n\n            while (lower.length >= 2 \n                   && Vector.cross3(lower[lower.length - 2], lower[lower.length - 1], vertex) <= 0) {\n                lower.pop();\n            }\n\n            lower.push(vertex);\n        }\n\n        // build upper hull\n        for (i = vertices.length - 1; i >= 0; i -= 1) {\n            vertex = vertices[i];\n\n            while (upper.length >= 2 \n                   && Vector.cross3(upper[upper.length - 2], upper[upper.length - 1], vertex) <= 0) {\n                upper.pop();\n            }\n\n            upper.push(vertex);\n        }\n\n        // concatenation of the lower and upper hulls gives the convex hull\n        // omit last points because they are repeated at the beginning of the other list\n        upper.pop();\n        lower.pop();\n\n        return upper.concat(lower);\n    };\n\n})();\n\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Events` module contains methods to fire and listen to events on other objects.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Events\n*/\n\nvar Events = {};\n\nmodule.exports = Events;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Subscribes a callback function to the given object's `eventName`.\n     * @method on\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.on = function(object, eventNames, callback) {\n        var names = eventNames.split(' '),\n            name;\n\n        for (var i = 0; i < names.length; i++) {\n            name = names[i];\n            object.events = object.events || {};\n            object.events[name] = object.events[name] || [];\n            object.events[name].push(callback);\n        }\n\n        return callback;\n    };\n\n    /**\n     * Removes the given event callback. If no callback, clears all callbacks in `eventNames`. If no `eventNames`, clears all events.\n     * @method off\n     * @param {} object\n     * @param {string} eventNames\n     * @param {function} callback\n     */\n    Events.off = function(object, eventNames, callback) {\n        if (!eventNames) {\n            object.events = {};\n            return;\n        }\n\n        // handle Events.off(object, callback)\n        if (typeof eventNames === 'function') {\n            callback = eventNames;\n            eventNames = Common.keys(object.events).join(' ');\n        }\n\n        var names = eventNames.split(' ');\n\n        for (var i = 0; i < names.length; i++) {\n            var callbacks = object.events[names[i]],\n                newCallbacks = [];\n\n            if (callback && callbacks) {\n                for (var j = 0; j < callbacks.length; j++) {\n                    if (callbacks[j] !== callback)\n                        newCallbacks.push(callbacks[j]);\n                }\n            }\n\n            object.events[names[i]] = newCallbacks;\n        }\n    };\n\n    /**\n     * Fires all the callbacks subscribed to the given object's `eventName`, in the order they subscribed, if any.\n     * @method trigger\n     * @param {} object\n     * @param {string} eventNames\n     * @param {} event\n     */\n    Events.trigger = function(object, eventNames, event) {\n        var names,\n            name,\n            callbacks,\n            eventClone;\n\n        var events = object.events;\n        \n        if (events && Common.keys(events).length > 0) {\n            if (!event)\n                event = {};\n\n            names = eventNames.split(' ');\n\n            for (var i = 0; i < names.length; i++) {\n                name = names[i];\n                callbacks = events[name];\n\n                if (callbacks) {\n                    eventClone = Common.clone(event, false);\n                    eventClone.name = name;\n                    eventClone.source = object;\n\n                    for (var j = 0; j < callbacks.length; j++) {\n                        callbacks[j].apply(object, [eventClone]);\n                    }\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* A composite is a collection of `Matter.Body`, `Matter.Constraint` and other `Matter.Composite` objects.\n*\n* They are a container that can represent complex objects made of multiple parts, even if they are not physically connected.\n* A composite could contain anything from a single body all the way up to a whole world.\n* \n* When making any changes to composites, use the included functions rather than changing their properties directly.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composite\n*/\n\nvar Composite = {};\n\nmodule.exports = Composite;\n\nvar Events = __webpack_require__(4);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Body = __webpack_require__(6);\n\n(function() {\n\n    /**\n     * Creates a new composite. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properites section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} [options]\n     * @return {composite} A new composite\n     */\n    Composite.create = function(options) {\n        return Common.extend({ \n            id: Common.nextId(),\n            type: 'composite',\n            parent: null,\n            isModified: false,\n            bodies: [], \n            constraints: [], \n            composites: [],\n            label: 'Composite',\n            plugin: {}\n        }, options);\n    };\n\n    /**\n     * Sets the composite's `isModified` flag. \n     * If `updateParents` is true, all parents will be set (default: false).\n     * If `updateChildren` is true, all children will be set (default: false).\n     * @method setModified\n     * @param {composite} composite\n     * @param {boolean} isModified\n     * @param {boolean} [updateParents=false]\n     * @param {boolean} [updateChildren=false]\n     */\n    Composite.setModified = function(composite, isModified, updateParents, updateChildren) {\n        composite.isModified = isModified;\n\n        if (updateParents && composite.parent) {\n            Composite.setModified(composite.parent, isModified, updateParents, updateChildren);\n        }\n\n        if (updateChildren) {\n            for(var i = 0; i < composite.composites.length; i++) {\n                var childComposite = composite.composites[i];\n                Composite.setModified(childComposite, isModified, updateParents, updateChildren);\n            }\n        }\n    };\n\n    /**\n     * Generic single or multi-add function. Adds a single or an array of body(s), constraint(s) or composite(s) to the given composite.\n     * Triggers `beforeAdd` and `afterAdd` events on the `composite`.\n     * @method add\n     * @param {composite} composite\n     * @param {object|array} object A single or an array of body(s), constraint(s) or composite(s)\n     * @return {composite} The original composite with the objects added\n     */\n    Composite.add = function(composite, object) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeAdd', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                // skip adding compound parts\n                if (obj.parent !== obj) {\n                    Common.warn('Composite.add: skipped adding a compound body part (you must add its parent instead)');\n                    break;\n                }\n\n                Composite.addBody(composite, obj);\n                break;\n            case 'constraint':\n                Composite.addConstraint(composite, obj);\n                break;\n            case 'composite':\n                Composite.addComposite(composite, obj);\n                break;\n            case 'mouseConstraint':\n                Composite.addConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterAdd', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Generic remove function. Removes one or many body(s), constraint(s) or a composite(s) to the given composite.\n     * Optionally searching its children recursively.\n     * Triggers `beforeRemove` and `afterRemove` events on the `composite`.\n     * @method remove\n     * @param {composite} composite\n     * @param {object|array} object\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the objects removed\n     */\n    Composite.remove = function(composite, object, deep) {\n        var objects = [].concat(object);\n\n        Events.trigger(composite, 'beforeRemove', { object: object });\n\n        for (var i = 0; i < objects.length; i++) {\n            var obj = objects[i];\n\n            switch (obj.type) {\n\n            case 'body':\n                Composite.removeBody(composite, obj, deep);\n                break;\n            case 'constraint':\n                Composite.removeConstraint(composite, obj, deep);\n                break;\n            case 'composite':\n                Composite.removeComposite(composite, obj, deep);\n                break;\n            case 'mouseConstraint':\n                Composite.removeConstraint(composite, obj.constraint);\n                break;\n\n            }\n        }\n\n        Events.trigger(composite, 'afterRemove', { object: object });\n\n        return composite;\n    };\n\n    /**\n     * Adds a composite to the given composite.\n     * @private\n     * @method addComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @return {composite} The original compositeA with the objects from compositeB added\n     */\n    Composite.addComposite = function(compositeA, compositeB) {\n        compositeA.composites.push(compositeB);\n        compositeB.parent = compositeA;\n        Composite.setModified(compositeA, true, true, false);\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeComposite\n     * @param {composite} compositeA\n     * @param {composite} compositeB\n     * @param {boolean} [deep=false]\n     * @return {composite} The original compositeA with the composite removed\n     */\n    Composite.removeComposite = function(compositeA, compositeB, deep) {\n        var position = Common.indexOf(compositeA.composites, compositeB);\n        if (position !== -1) {\n            Composite.removeCompositeAt(compositeA, position);\n            Composite.setModified(compositeA, true, true, false);\n        }\n\n        if (deep) {\n            for (var i = 0; i < compositeA.composites.length; i++){\n                Composite.removeComposite(compositeA.composites[i], compositeB, true);\n            }\n        }\n\n        return compositeA;\n    };\n\n    /**\n     * Removes a composite from the given composite.\n     * @private\n     * @method removeCompositeAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the composite removed\n     */\n    Composite.removeCompositeAt = function(composite, position) {\n        composite.composites.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a body to the given composite.\n     * @private\n     * @method addBody\n     * @param {composite} composite\n     * @param {body} body\n     * @return {composite} The original composite with the body added\n     */\n    Composite.addBody = function(composite, body) {\n        composite.bodies.push(body);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeBody\n     * @param {composite} composite\n     * @param {body} body\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBody = function(composite, body, deep) {\n        var position = Common.indexOf(composite.bodies, body);\n        if (position !== -1) {\n            Composite.removeBodyAt(composite, position);\n            Composite.setModified(composite, true, true, false);\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeBody(composite.composites[i], body, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeBodyAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the body removed\n     */\n    Composite.removeBodyAt = function(composite, position) {\n        composite.bodies.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Adds a constraint to the given composite.\n     * @private\n     * @method addConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @return {composite} The original composite with the constraint added\n     */\n    Composite.addConstraint = function(composite, constraint) {\n        composite.constraints.push(constraint);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes a constraint from the given composite, and optionally searching its children recursively.\n     * @private\n     * @method removeConstraint\n     * @param {composite} composite\n     * @param {constraint} constraint\n     * @param {boolean} [deep=false]\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraint = function(composite, constraint, deep) {\n        var position = Common.indexOf(composite.constraints, constraint);\n        if (position !== -1) {\n            Composite.removeConstraintAt(composite, position);\n        }\n\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.removeConstraint(composite.composites[i], constraint, true);\n            }\n        }\n\n        return composite;\n    };\n\n    /**\n     * Removes a body from the given composite.\n     * @private\n     * @method removeConstraintAt\n     * @param {composite} composite\n     * @param {number} position\n     * @return {composite} The original composite with the constraint removed\n     */\n    Composite.removeConstraintAt = function(composite, position) {\n        composite.constraints.splice(position, 1);\n        Composite.setModified(composite, true, true, false);\n        return composite;\n    };\n\n    /**\n     * Removes all bodies, constraints and composites from the given composite.\n     * Optionally clearing its children recursively.\n     * @method clear\n     * @param {composite} composite\n     * @param {boolean} keepStatic\n     * @param {boolean} [deep=false]\n     */\n    Composite.clear = function(composite, keepStatic, deep) {\n        if (deep) {\n            for (var i = 0; i < composite.composites.length; i++){\n                Composite.clear(composite.composites[i], keepStatic, true);\n            }\n        }\n        \n        if (keepStatic) {\n            composite.bodies = composite.bodies.filter(function(body) { return body.isStatic; });\n        } else {\n            composite.bodies.length = 0;\n        }\n\n        composite.constraints.length = 0;\n        composite.composites.length = 0;\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Returns all bodies in the given composite, including all bodies in its children, recursively.\n     * @method allBodies\n     * @param {composite} composite\n     * @return {body[]} All the bodies\n     */\n    Composite.allBodies = function(composite) {\n        var bodies = [].concat(composite.bodies);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            bodies = bodies.concat(Composite.allBodies(composite.composites[i]));\n\n        return bodies;\n    };\n\n    /**\n     * Returns all constraints in the given composite, including all constraints in its children, recursively.\n     * @method allConstraints\n     * @param {composite} composite\n     * @return {constraint[]} All the constraints\n     */\n    Composite.allConstraints = function(composite) {\n        var constraints = [].concat(composite.constraints);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            constraints = constraints.concat(Composite.allConstraints(composite.composites[i]));\n\n        return constraints;\n    };\n\n    /**\n     * Returns all composites in the given composite, including all composites in its children, recursively.\n     * @method allComposites\n     * @param {composite} composite\n     * @return {composite[]} All the composites\n     */\n    Composite.allComposites = function(composite) {\n        var composites = [].concat(composite.composites);\n\n        for (var i = 0; i < composite.composites.length; i++)\n            composites = composites.concat(Composite.allComposites(composite.composites[i]));\n\n        return composites;\n    };\n\n    /**\n     * Searches the composite recursively for an object matching the type and id supplied, null if not found.\n     * @method get\n     * @param {composite} composite\n     * @param {number} id\n     * @param {string} type\n     * @return {object} The requested object, if found\n     */\n    Composite.get = function(composite, id, type) {\n        var objects,\n            object;\n\n        switch (type) {\n        case 'body':\n            objects = Composite.allBodies(composite);\n            break;\n        case 'constraint':\n            objects = Composite.allConstraints(composite);\n            break;\n        case 'composite':\n            objects = Composite.allComposites(composite).concat(composite);\n            break;\n        }\n\n        if (!objects)\n            return null;\n\n        object = objects.filter(function(object) { \n            return object.id.toString() === id.toString(); \n        });\n\n        return object.length === 0 ? null : object[0];\n    };\n\n    /**\n     * Moves the given object(s) from compositeA to compositeB (equal to a remove followed by an add).\n     * @method move\n     * @param {compositeA} compositeA\n     * @param {object[]} objects\n     * @param {compositeB} compositeB\n     * @return {composite} Returns compositeA\n     */\n    Composite.move = function(compositeA, objects, compositeB) {\n        Composite.remove(compositeA, objects);\n        Composite.add(compositeB, objects);\n        return compositeA;\n    };\n\n    /**\n     * Assigns new ids for all objects in the composite, recursively.\n     * @method rebase\n     * @param {composite} composite\n     * @return {composite} Returns composite\n     */\n    Composite.rebase = function(composite) {\n        var objects = Composite.allBodies(composite)\n            .concat(Composite.allConstraints(composite))\n            .concat(Composite.allComposites(composite));\n\n        for (var i = 0; i < objects.length; i++) {\n            objects[i].id = Common.nextId();\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Translates all children in the composite by a given vector relative to their current positions, \n     * without imparting any velocity.\n     * @method translate\n     * @param {composite} composite\n     * @param {vector} translation\n     * @param {bool} [recursive=true]\n     */\n    Composite.translate = function(composite, translation, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            Body.translate(bodies[i], translation);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Rotates all children in the composite by a given angle about the given point, without imparting any angular velocity.\n     * @method rotate\n     * @param {composite} composite\n     * @param {number} rotation\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.rotate = function(composite, rotation, point, recursive) {\n        var cos = Math.cos(rotation),\n            sin = Math.sin(rotation),\n            bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            });\n\n            Body.rotate(body, rotation);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Scales all children in the composite, including updating physical properties (mass, area, axes, inertia), from a world-space point.\n     * @method scale\n     * @param {composite} composite\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} point\n     * @param {bool} [recursive=true]\n     */\n    Composite.scale = function(composite, scaleX, scaleY, point, recursive) {\n        var bodies = recursive ? Composite.allBodies(composite) : composite.bodies;\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + dx * scaleX,\n                y: point.y + dy * scaleY\n            });\n\n            Body.scale(body, scaleX, scaleY);\n        }\n\n        Composite.setModified(composite, true, true, false);\n\n        return composite;\n    };\n\n    /**\n     * Returns the union of the bounds of all of the composite's bodies.\n     * @method bounds\n     * @param {composite} composite The composite.\n     * @returns {bounds} The composite bounds.\n     */\n    Composite.bounds = function(composite) {\n        var bodies = Composite.allBodies(composite),\n            vertices = [];\n\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i];\n            vertices.push(body.bounds.min, body.bounds.max);\n        }\n\n        return Bounds.create(vertices);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, before objects have been added.\n    *\n    * @event beforeAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.add` is made, after objects have been added.\n    *\n    * @event afterAdd\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been added (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, before objects have been removed.\n    *\n    * @event beforeRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) to be removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a call to `Composite.remove` is made, after objects have been removed.\n    *\n    * @event afterRemove\n    * @param {} event An event object\n    * @param {} event.object The object(s) that have been removed (may be a single body, constraint, composite or a mixed array of these)\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"composite\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage composites.\n     *\n     * @property label\n     * @type string\n     * @default \"Composite\"\n     */\n\n    /**\n     * A flag that specifies whether the composite has been modified during the current step.\n     * Most `Matter.Composite` methods will automatically set this flag to `true` to inform the engine of changes to be handled.\n     * If you need to change it manually, you should use the `Composite.setModified` method.\n     *\n     * @property isModified\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * The `Composite` that is the parent of this composite. It is automatically managed by the `Matter.Composite` methods.\n     *\n     * @property parent\n     * @type composite\n     * @default null\n     */\n\n    /**\n     * An array of `Body` that are _direct_ children of this composite.\n     * To add or remove bodies you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allBodies` method.\n     *\n     * @property bodies\n     * @type body[]\n     * @default []\n     */\n\n    /**\n     * An array of `Constraint` that are _direct_ children of this composite.\n     * To add or remove constraints you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allConstraints` method.\n     *\n     * @property constraints\n     * @type constraint[]\n     * @default []\n     */\n\n    /**\n     * An array of `Composite` that are _direct_ children of this composite.\n     * To add or remove composites you should use `Composite.add` and `Composite.remove` methods rather than directly modifying this property.\n     * If you wish to recursively find all descendants, you should use the `Composite.allComposites` method.\n     *\n     * @property composites\n     * @type composite[]\n     * @default []\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Body` module contains methods for creating and manipulating body models.\n* A `Matter.Body` is a rigid body that can be simulated by a `Matter.Engine`.\n* Factories for commonly used body configurations (such as rectangles, circles and other polygons) can be found in the module `Matter.Bodies`.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n\n* @class Body\n*/\n\nvar Body = {};\n\nmodule.exports = Body;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Render = __webpack_require__(16);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(10);\n\n(function() {\n\n    Body._inertiaScale = 4;\n    Body._nextCollidingGroupId = 1;\n    Body._nextNonCollidingGroupId = -1;\n    Body._nextCategory = 0x0001;\n\n    /**\n     * Creates a new rigid body model. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * Vertices must be specified in clockwise order.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {body} body\n     */\n    Body.create = function(options) {\n        var defaults = {\n            id: Common.nextId(),\n            type: 'body',\n            label: 'Body',\n            parts: [],\n            plugin: {},\n            angle: 0,\n            vertices: Vertices.fromPath('L 0 0 L 40 0 L 40 40 L 0 40'),\n            position: { x: 0, y: 0 },\n            force: { x: 0, y: 0 },\n            torque: 0,\n            positionImpulse: { x: 0, y: 0 },\n            constraintImpulse: { x: 0, y: 0, angle: 0 },\n            totalContacts: 0,\n            speed: 0,\n            angularSpeed: 0,\n            velocity: { x: 0, y: 0 },\n            angularVelocity: 0,\n            isSensor: false,\n            isStatic: false,\n            isSleeping: false,\n            motion: 0,\n            sleepThreshold: 60,\n            density: 0.001,\n            restitution: 0,\n            friction: 0.1,\n            frictionStatic: 0.5,\n            frictionAir: 0.01,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            },\n            slop: 0.05,\n            timeScale: 1,\n            render: {\n                visible: true,\n                opacity: 1,\n                strokeStyle: null,\n                fillStyle: null,\n                lineWidth: null,\n                sprite: {\n                    xScale: 1,\n                    yScale: 1,\n                    xOffset: 0,\n                    yOffset: 0\n                }\n            },\n            events: null,\n            bounds: null,\n            chamfer: null,\n            circleRadius: 0,\n            positionPrev: null,\n            anglePrev: 0,\n            parent: null,\n            axes: null,\n            area: 0,\n            mass: 0,\n            inertia: 0,\n            _original: null\n        };\n\n        var body = Common.extend(defaults, options);\n\n        _initProperties(body, options);\n\n        return body;\n    };\n\n    /**\n     * Returns the next unique group index for which bodies will collide.\n     * If `isNonColliding` is `true`, returns the next unique group index for which bodies will _not_ collide.\n     * See `body.collisionFilter` for more information.\n     * @method nextGroup\n     * @param {bool} [isNonColliding=false]\n     * @return {Number} Unique group index\n     */\n    Body.nextGroup = function(isNonColliding) {\n        if (isNonColliding)\n            return Body._nextNonCollidingGroupId--;\n\n        return Body._nextCollidingGroupId++;\n    };\n\n    /**\n     * Returns the next unique category bitfield (starting after the initial default category `0x0001`).\n     * There are 32 available. See `body.collisionFilter` for more information.\n     * @method nextCategory\n     * @return {Number} Unique category bitfield\n     */\n    Body.nextCategory = function() {\n        Body._nextCategory = Body._nextCategory << 1;\n        return Body._nextCategory;\n    };\n\n    /**\n     * Initialises body properties.\n     * @method _initProperties\n     * @private\n     * @param {body} body\n     * @param {} [options]\n     */\n    var _initProperties = function(body, options) {\n        options = options || {};\n\n        // init required properties (order is important)\n        Body.set(body, {\n            bounds: body.bounds || Bounds.create(body.vertices),\n            positionPrev: body.positionPrev || Vector.clone(body.position),\n            anglePrev: body.anglePrev || body.angle,\n            vertices: body.vertices,\n            parts: body.parts || [body],\n            isStatic: body.isStatic,\n            isSleeping: body.isSleeping,\n            parent: body.parent || body\n        });\n\n        Vertices.rotate(body.vertices, body.angle, body.position);\n        Axes.rotate(body.axes, body.angle);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n\n        // allow options to override the automatically calculated properties\n        Body.set(body, {\n            axes: options.axes || body.axes,\n            area: options.area || body.area,\n            mass: options.mass || body.mass,\n            inertia: options.inertia || body.inertia\n        });\n\n        // render properties\n        var defaultFillStyle = (body.isStatic ? '#14151f' : Common.choose(['#f19648', '#f5d259', '#f55a3c', '#063e7b', '#ececd1'])),\n            defaultStrokeStyle = body.isStatic ? '#555' : '#ccc',\n            defaultLineWidth = body.isStatic && body.render.fillStyle === null ? 1 : 0;\n        body.render.fillStyle = body.render.fillStyle || defaultFillStyle;\n        body.render.strokeStyle = body.render.strokeStyle || defaultStrokeStyle;\n        body.render.lineWidth = body.render.lineWidth || defaultLineWidth;\n        body.render.sprite.xOffset += -(body.bounds.min.x - body.position.x) / (body.bounds.max.x - body.bounds.min.x);\n        body.render.sprite.yOffset += -(body.bounds.min.y - body.position.y) / (body.bounds.max.y - body.bounds.min.y);\n    };\n\n    /**\n     * Given a property and a value (or map of), sets the property(s) on the body, using the appropriate setter functions if they exist.\n     * Prefer to use the actual setter functions in performance critical situations.\n     * @method set\n     * @param {body} body\n     * @param {} settings A property name (or map of properties and values) to set on the body.\n     * @param {} value The value to set if `settings` is a single property name.\n     */\n    Body.set = function(body, settings, value) {\n        var property;\n\n        if (typeof settings === 'string') {\n            property = settings;\n            settings = {};\n            settings[property] = value;\n        }\n\n        for (property in settings) {\n            if (!Object.prototype.hasOwnProperty.call(settings, property))\n                continue;\n\n            value = settings[property];\n            switch (property) {\n\n            case 'isStatic':\n                Body.setStatic(body, value);\n                break;\n            case 'isSleeping':\n                Sleeping.set(body, value);\n                break;\n            case 'mass':\n                Body.setMass(body, value);\n                break;\n            case 'density':\n                Body.setDensity(body, value);\n                break;\n            case 'inertia':\n                Body.setInertia(body, value);\n                break;\n            case 'vertices':\n                Body.setVertices(body, value);\n                break;\n            case 'position':\n                Body.setPosition(body, value);\n                break;\n            case 'angle':\n                Body.setAngle(body, value);\n                break;\n            case 'velocity':\n                Body.setVelocity(body, value);\n                break;\n            case 'angularVelocity':\n                Body.setAngularVelocity(body, value);\n                break;\n            case 'parts':\n                Body.setParts(body, value);\n                break;\n            case 'centre':\n                Body.setCentre(body, value);\n                break;\n            default:\n                body[property] = value;\n\n            }\n        }\n    };\n\n    /**\n     * Sets the body as static, including isStatic flag and setting mass and inertia to Infinity.\n     * @method setStatic\n     * @param {body} body\n     * @param {bool} isStatic\n     */\n    Body.setStatic = function(body, isStatic) {\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.isStatic = isStatic;\n\n            if (isStatic) {\n                part._original = {\n                    restitution: part.restitution,\n                    friction: part.friction,\n                    mass: part.mass,\n                    inertia: part.inertia,\n                    density: part.density,\n                    inverseMass: part.inverseMass,\n                    inverseInertia: part.inverseInertia\n                };\n\n                part.restitution = 0;\n                part.friction = 1;\n                part.mass = part.inertia = part.density = Infinity;\n                part.inverseMass = part.inverseInertia = 0;\n\n                part.positionPrev.x = part.position.x;\n                part.positionPrev.y = part.position.y;\n                part.anglePrev = part.angle;\n                part.angularVelocity = 0;\n                part.speed = 0;\n                part.angularSpeed = 0;\n                part.motion = 0;\n            } else if (part._original) {\n                part.restitution = part._original.restitution;\n                part.friction = part._original.friction;\n                part.mass = part._original.mass;\n                part.inertia = part._original.inertia;\n                part.density = part._original.density;\n                part.inverseMass = part._original.inverseMass;\n                part.inverseInertia = part._original.inverseInertia;\n\n                part._original = null;\n            }\n        }\n    };\n\n    /**\n     * Sets the mass of the body. Inverse mass, density and inertia are automatically updated to reflect the change.\n     * @method setMass\n     * @param {body} body\n     * @param {number} mass\n     */\n    Body.setMass = function(body, mass) {\n        var moment = body.inertia / (body.mass / 6);\n        body.inertia = moment * (mass / 6);\n        body.inverseInertia = 1 / body.inertia;\n\n        body.mass = mass;\n        body.inverseMass = 1 / body.mass;\n        body.density = body.mass / body.area;\n    };\n\n    /**\n     * Sets the density of the body. Mass and inertia are automatically updated to reflect the change.\n     * @method setDensity\n     * @param {body} body\n     * @param {number} density\n     */\n    Body.setDensity = function(body, density) {\n        Body.setMass(body, density * body.area);\n        body.density = density;\n    };\n\n    /**\n     * Sets the moment of inertia (i.e. second moment of area) of the body. \n     * Inverse inertia is automatically updated to reflect the change. Mass is not changed.\n     * @method setInertia\n     * @param {body} body\n     * @param {number} inertia\n     */\n    Body.setInertia = function(body, inertia) {\n        body.inertia = inertia;\n        body.inverseInertia = 1 / body.inertia;\n    };\n\n    /**\n     * Sets the body's vertices and updates body properties accordingly, including inertia, area and mass (with respect to `body.density`).\n     * Vertices will be automatically transformed to be orientated around their centre of mass as the origin.\n     * They are then automatically translated to world space based on `body.position`.\n     *\n     * The `vertices` argument should be passed as an array of `Matter.Vector` points (or a `Matter.Vertices` array).\n     * Vertices must form a convex hull, concave hulls are not supported.\n     *\n     * @method setVertices\n     * @param {body} body\n     * @param {vector[]} vertices\n     */\n    Body.setVertices = function(body, vertices) {\n        // change vertices\n        if (vertices[0].body === body) {\n            body.vertices = vertices;\n        } else {\n            body.vertices = Vertices.create(vertices, body);\n        }\n\n        // update properties\n        body.axes = Axes.fromVertices(body.vertices);\n        body.area = Vertices.area(body.vertices);\n        Body.setMass(body, body.density * body.area);\n\n        // orient vertices around the centre of mass at origin (0, 0)\n        var centre = Vertices.centre(body.vertices);\n        Vertices.translate(body.vertices, centre, -1);\n\n        // update inertia while vertices are at origin (0, 0)\n        Body.setInertia(body, Body._inertiaScale * Vertices.inertia(body.vertices, body.mass));\n\n        // update geometry\n        Vertices.translate(body.vertices, body.position);\n        Bounds.update(body.bounds, body.vertices, body.velocity);\n    };\n\n    /**\n     * Sets the parts of the `body` and updates mass, inertia and centroid.\n     * Each part will have its parent set to `body`.\n     * By default the convex hull will be automatically computed and set on `body`, unless `autoHull` is set to `false.`\n     * Note that this method will ensure that the first part in `body.parts` will always be the `body`.\n     * @method setParts\n     * @param {body} body\n     * @param [body] parts\n     * @param {bool} [autoHull=true]\n     */\n    Body.setParts = function(body, parts, autoHull) {\n        var i;\n\n        // add all the parts, ensuring that the first part is always the parent body\n        parts = parts.slice(0);\n        body.parts.length = 0;\n        body.parts.push(body);\n        body.parent = body;\n\n        for (i = 0; i < parts.length; i++) {\n            var part = parts[i];\n            if (part !== body) {\n                part.parent = body;\n                body.parts.push(part);\n            }\n        }\n\n        if (body.parts.length === 1)\n            return;\n\n        autoHull = typeof autoHull !== 'undefined' ? autoHull : true;\n\n        // find the convex hull of all parts to set on the parent body\n        if (autoHull) {\n            var vertices = [];\n            for (i = 0; i < parts.length; i++) {\n                vertices = vertices.concat(parts[i].vertices);\n            }\n\n            Vertices.clockwiseSort(vertices);\n\n            var hull = Vertices.hull(vertices),\n                hullCentre = Vertices.centre(hull);\n\n            Body.setVertices(body, hull);\n            Vertices.translate(body.vertices, hullCentre);\n        }\n\n        // sum the properties of all compound parts of the parent body\n        var total = Body._totalProperties(body);\n\n        body.area = total.area;\n        body.parent = body;\n        body.position.x = total.centre.x;\n        body.position.y = total.centre.y;\n        body.positionPrev.x = total.centre.x;\n        body.positionPrev.y = total.centre.y;\n\n        Body.setMass(body, total.mass);\n        Body.setInertia(body, total.inertia);\n        Body.setPosition(body, total.centre);\n    };\n\n    /**\n     * Set the centre of mass of the body. \n     * The `centre` is a vector in world-space unless `relative` is set, in which case it is a translation.\n     * The centre of mass is the point the body rotates about and can be used to simulate non-uniform density.\n     * This is equal to moving `body.position` but not the `body.vertices`.\n     * Invalid if the `centre` falls outside the body's convex hull.\n     * @method setCentre\n     * @param {body} body\n     * @param {vector} centre\n     * @param {bool} relative\n     */\n    Body.setCentre = function(body, centre, relative) {\n        if (!relative) {\n            body.positionPrev.x = centre.x - (body.position.x - body.positionPrev.x);\n            body.positionPrev.y = centre.y - (body.position.y - body.positionPrev.y);\n            body.position.x = centre.x;\n            body.position.y = centre.y;\n        } else {\n            body.positionPrev.x += centre.x;\n            body.positionPrev.y += centre.y;\n            body.position.x += centre.x;\n            body.position.y += centre.y;\n        }\n    };\n\n    /**\n     * Sets the position of the body instantly. Velocity, angle, force etc. are unchanged.\n     * @method setPosition\n     * @param {body} body\n     * @param {vector} position\n     */\n    Body.setPosition = function(body, position) {\n        var delta = Vector.sub(position, body.position);\n        body.positionPrev.x += delta.x;\n        body.positionPrev.y += delta.y;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.position.x += delta.x;\n            part.position.y += delta.y;\n            Vertices.translate(part.vertices, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Sets the angle of the body instantly. Angular velocity, position, force etc. are unchanged.\n     * @method setAngle\n     * @param {body} body\n     * @param {number} angle\n     */\n    Body.setAngle = function(body, angle) {\n        var delta = angle - body.angle;\n        body.anglePrev += delta;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n            part.angle += delta;\n            Vertices.rotate(part.vertices, delta, body.position);\n            Axes.rotate(part.axes, delta);\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n            if (i > 0) {\n                Vector.rotateAbout(part.position, delta, body.position, part.position);\n            }\n        }\n    };\n\n    /**\n     * Sets the linear velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\n     * @method setVelocity\n     * @param {body} body\n     * @param {vector} velocity\n     */\n    Body.setVelocity = function(body, velocity) {\n        body.positionPrev.x = body.position.x - velocity.x;\n        body.positionPrev.y = body.position.y - velocity.y;\n        body.velocity.x = velocity.x;\n        body.velocity.y = velocity.y;\n        body.speed = Vector.magnitude(body.velocity);\n    };\n\n    /**\n     * Sets the angular velocity of the body instantly. Position, angle, force etc. are unchanged. See also `Body.applyForce`.\n     * @method setAngularVelocity\n     * @param {body} body\n     * @param {number} velocity\n     */\n    Body.setAngularVelocity = function(body, velocity) {\n        body.anglePrev = body.angle - velocity;\n        body.angularVelocity = velocity;\n        body.angularSpeed = Math.abs(body.angularVelocity);\n    };\n\n    /**\n     * Moves a body by a given vector relative to its current position, without imparting any velocity.\n     * @method translate\n     * @param {body} body\n     * @param {vector} translation\n     */\n    Body.translate = function(body, translation) {\n        Body.setPosition(body, Vector.add(body.position, translation));\n    };\n\n    /**\n     * Rotates a body by a given angle relative to its current angle, without imparting any angular velocity.\n     * @method rotate\n     * @param {body} body\n     * @param {number} rotation\n     * @param {vector} [point]\n     */\n    Body.rotate = function(body, rotation, point) {\n        if (!point) {\n            Body.setAngle(body, body.angle + rotation);\n        } else {\n            var cos = Math.cos(rotation),\n                sin = Math.sin(rotation),\n                dx = body.position.x - point.x,\n                dy = body.position.y - point.y;\n                \n            Body.setPosition(body, {\n                x: point.x + (dx * cos - dy * sin),\n                y: point.y + (dx * sin + dy * cos)\n            });\n\n            Body.setAngle(body, body.angle + rotation);\n        }\n    };\n\n    /**\n     * Scales the body, including updating physical properties (mass, area, axes, inertia), from a world-space point (default is body centre).\n     * @method scale\n     * @param {body} body\n     * @param {number} scaleX\n     * @param {number} scaleY\n     * @param {vector} [point]\n     */\n    Body.scale = function(body, scaleX, scaleY, point) {\n        var totalArea = 0,\n            totalInertia = 0;\n\n        point = point || body.position;\n\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            // scale vertices\n            Vertices.scale(part.vertices, scaleX, scaleY, point);\n\n            // update properties\n            part.axes = Axes.fromVertices(part.vertices);\n            part.area = Vertices.area(part.vertices);\n            Body.setMass(part, body.density * part.area);\n\n            // update inertia (requires vertices to be at origin)\n            Vertices.translate(part.vertices, { x: -part.position.x, y: -part.position.y });\n            Body.setInertia(part, Body._inertiaScale * Vertices.inertia(part.vertices, part.mass));\n            Vertices.translate(part.vertices, { x: part.position.x, y: part.position.y });\n\n            if (i > 0) {\n                totalArea += part.area;\n                totalInertia += part.inertia;\n            }\n\n            // scale position\n            part.position.x = point.x + (part.position.x - point.x) * scaleX;\n            part.position.y = point.y + (part.position.y - point.y) * scaleY;\n\n            // update bounds\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n\n        // handle parent body\n        if (body.parts.length > 1) {\n            body.area = totalArea;\n\n            if (!body.isStatic) {\n                Body.setMass(body, body.density * totalArea);\n                Body.setInertia(body, totalInertia);\n            }\n        }\n\n        // handle circles\n        if (body.circleRadius) { \n            if (scaleX === scaleY) {\n                body.circleRadius *= scaleX;\n            } else {\n                // body is no longer a circle\n                body.circleRadius = null;\n            }\n        }\n    };\n\n    /**\n     * Performs a simulation step for the given `body`, including updating position and angle using Verlet integration.\n     * @method update\n     * @param {body} body\n     * @param {number} deltaTime\n     * @param {number} timeScale\n     * @param {number} correction\n     */\n    Body.update = function(body, deltaTime, timeScale, correction) {\n        var deltaTimeSquared = Math.pow(deltaTime * timeScale * body.timeScale, 2);\n\n        // from the previous step\n        var frictionAir = 1 - body.frictionAir * timeScale * body.timeScale,\n            velocityPrevX = body.position.x - body.positionPrev.x,\n            velocityPrevY = body.position.y - body.positionPrev.y;\n\n        // update velocity with Verlet integration\n        body.velocity.x = (velocityPrevX * frictionAir * correction) + (body.force.x / body.mass) * deltaTimeSquared;\n        body.velocity.y = (velocityPrevY * frictionAir * correction) + (body.force.y / body.mass) * deltaTimeSquared;\n\n        body.positionPrev.x = body.position.x;\n        body.positionPrev.y = body.position.y;\n        body.position.x += body.velocity.x;\n        body.position.y += body.velocity.y;\n\n        // update angular velocity with Verlet integration\n        body.angularVelocity = ((body.angle - body.anglePrev) * frictionAir * correction) + (body.torque / body.inertia) * deltaTimeSquared;\n        body.anglePrev = body.angle;\n        body.angle += body.angularVelocity;\n\n        // track speed and acceleration\n        body.speed = Vector.magnitude(body.velocity);\n        body.angularSpeed = Math.abs(body.angularVelocity);\n\n        // transform the body geometry\n        for (var i = 0; i < body.parts.length; i++) {\n            var part = body.parts[i];\n\n            Vertices.translate(part.vertices, body.velocity);\n            \n            if (i > 0) {\n                part.position.x += body.velocity.x;\n                part.position.y += body.velocity.y;\n            }\n\n            if (body.angularVelocity !== 0) {\n                Vertices.rotate(part.vertices, body.angularVelocity, body.position);\n                Axes.rotate(part.axes, body.angularVelocity);\n                if (i > 0) {\n                    Vector.rotateAbout(part.position, body.angularVelocity, body.position, part.position);\n                }\n            }\n\n            Bounds.update(part.bounds, part.vertices, body.velocity);\n        }\n    };\n\n    /**\n     * Applies a force to a body from a given world-space position, including resulting torque.\n     * @method applyForce\n     * @param {body} body\n     * @param {vector} position\n     * @param {vector} force\n     */\n    Body.applyForce = function(body, position, force) {\n        body.force.x += force.x;\n        body.force.y += force.y;\n        var offset = { x: position.x - body.position.x, y: position.y - body.position.y };\n        body.torque += offset.x * force.y - offset.y * force.x;\n    };\n\n    /**\n     * Returns the sums of the properties of all compound parts of the parent body.\n     * @method _totalProperties\n     * @private\n     * @param {body} body\n     * @return {}\n     */\n    Body._totalProperties = function(body) {\n        // from equations at:\n        // https://ecourses.ou.edu/cgi-bin/ebook.cgi?doc=&topic=st&chap_sec=07.2&page=theory\n        // http://output.to/sideway/default.asp?qno=121100087\n\n        var properties = {\n            mass: 0,\n            area: 0,\n            inertia: 0,\n            centre: { x: 0, y: 0 }\n        };\n\n        // sum the properties of all compound parts of the parent body\n        for (var i = body.parts.length === 1 ? 0 : 1; i < body.parts.length; i++) {\n            var part = body.parts[i],\n                mass = part.mass !== Infinity ? part.mass : 1;\n\n            properties.mass += mass;\n            properties.area += part.area;\n            properties.inertia += part.inertia;\n            properties.centre = Vector.add(properties.centre, Vector.mult(part.position, mass));\n        }\n\n        properties.centre = Vector.div(properties.centre, properties.mass);\n\n        return properties;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when a body starts sleeping (where `this` is the body).\n    *\n    * @event sleepStart\n    * @this {body} The body that has started sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when a body ends sleeping (where `this` is the body).\n    *\n    * @event sleepEnd\n    * @this {body} The body that has ended sleeping\n    * @param {} event An event object\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Body.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"body\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Body\"\n     */\n\n    /**\n     * An array of bodies that make up this body. \n     * The first body in the array must always be a self reference to the current body instance.\n     * All bodies in the `parts` array together form a single rigid compound body.\n     * Parts are allowed to overlap, have gaps or holes or even form concave bodies.\n     * Parts themselves should never be added to a `World`, only the parent body should be.\n     * Use `Body.setParts` when setting parts to ensure correct updates of all properties.\n     *\n     * @property parts\n     * @type body[]\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * A self reference if the body is _not_ a part of another body.\n     * Otherwise this is a reference to the body that this is a part of.\n     * See `body.parts`.\n     *\n     * @property parent\n     * @type body\n     */\n\n    /**\n     * A `Number` specifying the angle of the body, in radians.\n     *\n     * @property angle\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * An array of `Vector` objects that specify the convex hull of the rigid body.\n     * These should be provided about the origin `(0, 0)`. E.g.\n     *\n     *     [{ x: 0, y: 0 }, { x: 25, y: 50 }, { x: 50, y: 0 }]\n     *\n     * When passed via `Body.create`, the vertices are translated relative to `body.position` (i.e. world-space, and constantly updated by `Body.update` during simulation).\n     * The `Vector` objects are also augmented with additional properties required for efficient collision detection. \n     *\n     * Other properties such as `inertia` and `bounds` are automatically calculated from the passed vertices (unless provided via `options`).\n     * Concave hulls are not currently supported. The module `Matter.Vertices` contains useful methods for working with vertices.\n     *\n     * @property vertices\n     * @type vector[]\n     */\n\n    /**\n     * A `Vector` that specifies the current world-space position of the body.\n     *\n     * @property position\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that specifies the force to apply in the current step. It is zeroed after every `Body.update`. See also `Body.applyForce`.\n     *\n     * @property force\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that specifies the torque (turning force) to apply in the current step. It is zeroed after every `Body.update`.\n     *\n     * @property torque\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that _measures_ the current speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.velocity`).\n     *\n     * @readOnly\n     * @property speed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that _measures_ the current angular speed of the body after the last `Body.update`. It is read-only and always positive (it's the magnitude of `body.angularVelocity`).\n     *\n     * @readOnly\n     * @property angularSpeed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Vector` that _measures_ the current velocity of the body after the last `Body.update`. It is read-only. \n     * If you need to modify a body's velocity directly, you should either apply a force or simply change the body's `position` (as the engine uses position-Verlet integration).\n     *\n     * @readOnly\n     * @property velocity\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that _measures_ the current angular velocity of the body after the last `Body.update`. It is read-only. \n     * If you need to modify a body's angular velocity directly, you should apply a torque or simply change the body's `angle` (as the engine uses position-Verlet integration).\n     *\n     * @readOnly\n     * @property angularVelocity\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A flag that indicates whether a body is considered static. A static body can never change position or angle and is completely fixed.\n     * If you need to set a body as static after its creation, you should use `Body.setStatic` as this requires more than just setting this flag.\n     *\n     * @property isStatic\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag that indicates whether a body is a sensor. Sensor triggers collision events, but doesn't react with colliding body physically.\n     *\n     * @property isSensor\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag that indicates whether the body is considered sleeping. A sleeping body acts similar to a static body, except it is only temporary and can be awoken.\n     * If you need to set a body as sleeping, you should use `Sleeping.set` as this requires more than just setting this flag.\n     *\n     * @property isSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A `Number` that _measures_ the amount of movement a body currently has (a combination of `speed` and `angularSpeed`). It is read-only and always positive.\n     * It is used and updated by the `Matter.Sleeping` module during simulation to decide if a body has come to rest.\n     *\n     * @readOnly\n     * @property motion\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the number of updates in which this body must have near-zero velocity before it is set as sleeping by the `Matter.Sleeping` module (if sleeping is enabled by the engine).\n     *\n     * @property sleepThreshold\n     * @type number\n     * @default 60\n     */\n\n    /**\n     * A `Number` that defines the density of the body, that is its mass per unit area.\n     * If you pass the density via `Body.create` the `mass` property is automatically calculated for you based on the size (area) of the object.\n     * This is generally preferable to simply setting mass and allows for more intuitive definition of materials (e.g. rock has a higher density than wood).\n     *\n     * @property density\n     * @type number\n     * @default 0.001\n     */\n\n    /**\n     * A `Number` that defines the mass of the body, although it may be more appropriate to specify the `density` property instead.\n     * If you modify this value, you must also modify the `body.inverseMass` property (`1 / mass`).\n     *\n     * @property mass\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the inverse mass of the body (`1 / mass`).\n     * If you modify this value, you must also modify the `body.mass` property.\n     *\n     * @property inverseMass\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the moment of inertia (i.e. second moment of area) of the body.\n     * It is automatically calculated from the given convex hull (`vertices` array) and density in `Body.create`.\n     * If you modify this value, you must also modify the `body.inverseInertia` property (`1 / inertia`).\n     *\n     * @property inertia\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the inverse moment of inertia of the body (`1 / inertia`).\n     * If you modify this value, you must also modify the `body.inertia` property.\n     *\n     * @property inverseInertia\n     * @type number\n     */\n\n    /**\n     * A `Number` that defines the restitution (elasticity) of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means collisions may be perfectly inelastic and no bouncing may occur. \n     * A value of `0.8` means the body may bounce back with approximately 80% of its kinetic energy.\n     * Note that collision response is based on _pairs_ of bodies, and that `restitution` values are _combined_ with the following formula:\n     *\n     *     Math.max(bodyA.restitution, bodyB.restitution)\n     *\n     * @property restitution\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that defines the friction of the body. The value is always positive and is in the range `(0, 1)`.\n     * A value of `0` means that the body may slide indefinitely.\n     * A value of `1` means the body may come to a stop almost instantly after a force is applied.\n     *\n     * The effects of the value may be non-linear. \n     * High values may be unstable depending on the body.\n     * The engine uses a Coulomb friction model including static and kinetic friction.\n     * Note that collision response is based on _pairs_ of bodies, and that `friction` values are _combined_ with the following formula:\n     *\n     *     Math.min(bodyA.friction, bodyB.friction)\n     *\n     * @property friction\n     * @type number\n     * @default 0.1\n     */\n\n    /**\n     * A `Number` that defines the static friction of the body (in the Coulomb friction model). \n     * A value of `0` means the body will never 'stick' when it is nearly stationary and only dynamic `friction` is used.\n     * The higher the value (e.g. `10`), the more force it will take to initially get the body moving when nearly stationary.\n     * This value is multiplied with the `friction` property to make it easier to change `friction` and maintain an appropriate amount of static friction.\n     *\n     * @property frictionStatic\n     * @type number\n     * @default 0.5\n     */\n\n    /**\n     * A `Number` that defines the air friction of the body (air resistance). \n     * A value of `0` means the body will never slow as it moves through space.\n     * The higher the value, the faster a body slows when moving through space.\n     * The effects of the value are non-linear. \n     *\n     * @property frictionAir\n     * @type number\n     * @default 0.01\n     */\n\n    /**\n     * An `Object` that specifies the collision filtering properties of this body.\n     *\n     * Collisions between two bodies will obey the following rules:\n     * - If the two bodies have the same non-zero value of `collisionFilter.group`,\n     *   they will always collide if the value is positive, and they will never collide\n     *   if the value is negative.\n     * - If the two bodies have different values of `collisionFilter.group` or if one\n     *   (or both) of the bodies has a value of 0, then the category/mask rules apply as follows:\n     *\n     * Each body belongs to a collision category, given by `collisionFilter.category`. This\n     * value is used as a bit field and the category should have only one bit set, meaning that\n     * the value of this property is a power of two in the range [1, 2^31]. Thus, there are 32\n     * different collision categories available.\n     *\n     * Each body also defines a collision bitmask, given by `collisionFilter.mask` which specifies\n     * the categories it collides with (the value is the bitwise AND value of all these categories).\n     *\n     * Using the category/mask rules, two bodies `A` and `B` collide if each includes the other's\n     * category in its mask, i.e. `(categoryA & maskB) !== 0` and `(categoryB & maskA) !== 0`\n     * are both true.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n    /**\n     * An Integer `Number`, that specifies the collision group this body belongs to.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.group\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * A bit field that specifies the collision category this body belongs to.\n     * The category value should have only one bit set, for example `0x0001`.\n     * This means there are up to 32 unique collision categories available.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.category\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * A bit mask that specifies the collision categories this body may collide with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter.mask\n     * @type object\n     * @default -1\n     */\n\n    /**\n     * A `Number` that specifies a tolerance on how far a body is allowed to 'sink' or rotate into other bodies.\n     * Avoid changing this value unless you understand the purpose of `slop` in physics engines.\n     * The default should generally suffice, although very large bodies may require larger values for stable stacking.\n     *\n     * @property slop\n     * @type number\n     * @default 0.05\n     */\n\n    /**\n     * A `Number` that allows per-body time scaling, e.g. a force-field where bodies inside are in slow-motion, while others are at full speed.\n     *\n     * @property timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the body should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * Sets the opacity to use when rendering.\n     *\n     * @property render.opacity\n     * @type number\n     * @default 1\n    */\n\n    /**\n     * An `Object` that defines the sprite properties to use when rendering, if any.\n     *\n     * @property render.sprite\n     * @type object\n     */\n\n    /**\n     * An `String` that defines the path to the image to use as the sprite texture, if any.\n     *\n     * @property render.sprite.texture\n     * @type string\n     */\n     \n    /**\n     * A `Number` that defines the scaling in the x-axis for the sprite, if any.\n     *\n     * @property render.sprite.xScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that defines the scaling in the y-axis for the sprite, if any.\n     *\n     * @property render.sprite.yScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n      * A `Number` that defines the offset in the x-axis for the sprite (normalised by texture width).\n      *\n      * @property render.sprite.xOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n      * A `Number` that defines the offset in the y-axis for the sprite (normalised by texture height).\n      *\n      * @property render.sprite.yOffset\n      * @type number\n      * @default 0\n      */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the body outline (if a sprite is not defined).\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `String` that defines the fill style to use when rendering the body (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.fillStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the body outline (if a sprite is not defined).\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * An array of unique axis vectors (edge normals) used for collision detection.\n     * These are automatically calculated from the given convex hull (`vertices` array) in `Body.create`.\n     * They are constantly updated by `Body.update` during the simulation.\n     *\n     * @property axes\n     * @type vector[]\n     */\n     \n    /**\n     * A `Number` that _measures_ the area of the body's convex hull, calculated at creation by `Body.create`.\n     *\n     * @property area\n     * @type string\n     * @default \n     */\n\n    /**\n     * A `Bounds` object that defines the AABB region for the body.\n     * It is automatically calculated from the given convex hull (`vertices` array) in `Body.create` and constantly updated by `Body.update` during simulation.\n     *\n     * @property bounds\n     * @type bounds\n     */\n\n})();\n\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Sleeping` module contains methods to manage the sleeping state of bodies.\n*\n* @class Sleeping\n*/\n\nvar Sleeping = {};\n\nmodule.exports = Sleeping;\n\nvar Events = __webpack_require__(4);\n\n(function() {\n\n    Sleeping._motionWakeThreshold = 0.18;\n    Sleeping._motionSleepThreshold = 0.08;\n    Sleeping._minBias = 0.9;\n\n    /**\n     * Puts bodies to sleep or wakes them up depending on their motion.\n     * @method update\n     * @param {body[]} bodies\n     * @param {number} timeScale\n     */\n    Sleeping.update = function(bodies, timeScale) {\n        var timeFactor = timeScale * timeScale * timeScale;\n\n        // update bodies sleeping status\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                motion = body.speed * body.speed + body.angularSpeed * body.angularSpeed;\n\n            // wake up bodies if they have a force applied\n            if (body.force.x !== 0 || body.force.y !== 0) {\n                Sleeping.set(body, false);\n                continue;\n            }\n\n            var minMotion = Math.min(body.motion, motion),\n                maxMotion = Math.max(body.motion, motion);\n        \n            // biased average motion estimation between frames\n            body.motion = Sleeping._minBias * minMotion + (1 - Sleeping._minBias) * maxMotion;\n            \n            if (body.sleepThreshold > 0 && body.motion < Sleeping._motionSleepThreshold * timeFactor) {\n                body.sleepCounter += 1;\n                \n                if (body.sleepCounter >= body.sleepThreshold)\n                    Sleeping.set(body, true);\n            } else if (body.sleepCounter > 0) {\n                body.sleepCounter -= 1;\n            }\n        }\n    };\n\n    /**\n     * Given a set of colliding pairs, wakes the sleeping bodies involved.\n     * @method afterCollisions\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Sleeping.afterCollisions = function(pairs, timeScale) {\n        var timeFactor = timeScale * timeScale * timeScale;\n\n        // wake up bodies involved in collisions\n        for (var i = 0; i < pairs.length; i++) {\n            var pair = pairs[i];\n            \n            // don't wake inactive pairs\n            if (!pair.isActive)\n                continue;\n\n            var collision = pair.collision,\n                bodyA = collision.bodyA.parent, \n                bodyB = collision.bodyB.parent;\n        \n            // don't wake if at least one body is static\n            if ((bodyA.isSleeping && bodyB.isSleeping) || bodyA.isStatic || bodyB.isStatic)\n                continue;\n        \n            if (bodyA.isSleeping || bodyB.isSleeping) {\n                var sleepingBody = (bodyA.isSleeping && !bodyA.isStatic) ? bodyA : bodyB,\n                    movingBody = sleepingBody === bodyA ? bodyB : bodyA;\n\n                if (!sleepingBody.isStatic && movingBody.motion > Sleeping._motionWakeThreshold * timeFactor) {\n                    Sleeping.set(sleepingBody, false);\n                }\n            }\n        }\n    };\n  \n    /**\n     * Set a body as sleeping or awake.\n     * @method set\n     * @param {body} body\n     * @param {boolean} isSleeping\n     */\n    Sleeping.set = function(body, isSleeping) {\n        var wasSleeping = body.isSleeping;\n\n        if (isSleeping) {\n            body.isSleeping = true;\n            body.sleepCounter = body.sleepThreshold;\n\n            body.positionImpulse.x = 0;\n            body.positionImpulse.y = 0;\n\n            body.positionPrev.x = body.position.x;\n            body.positionPrev.y = body.position.y;\n\n            body.anglePrev = body.angle;\n            body.speed = 0;\n            body.angularSpeed = 0;\n            body.motion = 0;\n\n            if (!wasSleeping) {\n                Events.trigger(body, 'sleepStart');\n            }\n        } else {\n            body.isSleeping = false;\n            body.sleepCounter = 0;\n\n            if (wasSleeping) {\n                Events.trigger(body, 'sleepEnd');\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Constraint` module contains methods for creating and manipulating constraints.\n* Constraints are used for specifying that a fixed distance must be maintained between two bodies (or a body and a fixed world-space position).\n* The stiffness of constraints can be modified to create springs or elastic.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Constraint\n*/\n\nvar Constraint = {};\n\nmodule.exports = Constraint;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Sleeping = __webpack_require__(7);\nvar Bounds = __webpack_require__(1);\nvar Axes = __webpack_require__(10);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Constraint._warming = 0.4;\n    Constraint._torqueDampen = 1;\n    Constraint._minLength = 0.000001;\n\n    /**\n     * Creates a new constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * To simulate a revolute constraint (or pin joint) set `length: 0` and a high `stiffness` value (e.g. `0.7` or above).\n     * If the constraint is unstable, try lowering the `stiffness` value and / or increasing `engine.constraintIterations`.\n     * For compound bodies, constraints must be applied to the parent body (not one of its parts).\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {} options\n     * @return {constraint} constraint\n     */\n    Constraint.create = function(options) {\n        var constraint = options;\n\n        // if bodies defined but no points, use body centre\n        if (constraint.bodyA && !constraint.pointA)\n            constraint.pointA = { x: 0, y: 0 };\n        if (constraint.bodyB && !constraint.pointB)\n            constraint.pointB = { x: 0, y: 0 };\n\n        // calculate static length using initial world space points\n        var initialPointA = constraint.bodyA ? Vector.add(constraint.bodyA.position, constraint.pointA) : constraint.pointA,\n            initialPointB = constraint.bodyB ? Vector.add(constraint.bodyB.position, constraint.pointB) : constraint.pointB,\n            length = Vector.magnitude(Vector.sub(initialPointA, initialPointB));\n    \n        constraint.length = typeof constraint.length !== 'undefined' ? constraint.length : length;\n\n        // option defaults\n        constraint.id = constraint.id || Common.nextId();\n        constraint.label = constraint.label || 'Constraint';\n        constraint.type = 'constraint';\n        constraint.stiffness = constraint.stiffness || (constraint.length > 0 ? 1 : 0.7);\n        constraint.damping = constraint.damping || 0;\n        constraint.angularStiffness = constraint.angularStiffness || 0;\n        constraint.angleA = constraint.bodyA ? constraint.bodyA.angle : constraint.angleA;\n        constraint.angleB = constraint.bodyB ? constraint.bodyB.angle : constraint.angleB;\n        constraint.plugin = {};\n\n        // render\n        var render = {\n            visible: true,\n            lineWidth: 2,\n            strokeStyle: '#ffffff',\n            type: 'line',\n            anchors: true\n        };\n\n        if (constraint.length === 0 && constraint.stiffness > 0.1) {\n            render.type = 'pin';\n            render.anchors = false;\n        } else if (constraint.stiffness < 0.9) {\n            render.type = 'spring';\n        }\n\n        constraint.render = Common.extend(render, constraint.render);\n\n        return constraint;\n    };\n\n    /**\n     * Prepares for solving by constraint warming.\n     * @private\n     * @method preSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.preSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i += 1) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            body.position.x += impulse.x;\n            body.position.y += impulse.y;\n            body.angle += impulse.angle;\n        }\n    };\n\n    /**\n     * Solves all constraints in a list of collisions.\n     * @private\n     * @method solveAll\n     * @param {constraint[]} constraints\n     * @param {number} timeScale\n     */\n    Constraint.solveAll = function(constraints, timeScale) {\n        // Solve fixed constraints first.\n        for (var i = 0; i < constraints.length; i += 1) {\n            var constraint = constraints[i],\n                fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic),\n                fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (fixedA || fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n\n        // Solve free constraints last.\n        for (i = 0; i < constraints.length; i += 1) {\n            constraint = constraints[i];\n            fixedA = !constraint.bodyA || (constraint.bodyA && constraint.bodyA.isStatic);\n            fixedB = !constraint.bodyB || (constraint.bodyB && constraint.bodyB.isStatic);\n\n            if (!fixedA && !fixedB) {\n                Constraint.solve(constraints[i], timeScale);\n            }\n        }\n    };\n\n    /**\n     * Solves a distance constraint with Gauss-Siedel method.\n     * @private\n     * @method solve\n     * @param {constraint} constraint\n     * @param {number} timeScale\n     */\n    Constraint.solve = function(constraint, timeScale) {\n        var bodyA = constraint.bodyA,\n            bodyB = constraint.bodyB,\n            pointA = constraint.pointA,\n            pointB = constraint.pointB;\n\n        if (!bodyA && !bodyB)\n            return;\n\n        // update reference angle\n        if (bodyA && !bodyA.isStatic) {\n            Vector.rotate(pointA, bodyA.angle - constraint.angleA, pointA);\n            constraint.angleA = bodyA.angle;\n        }\n        \n        // update reference angle\n        if (bodyB && !bodyB.isStatic) {\n            Vector.rotate(pointB, bodyB.angle - constraint.angleB, pointB);\n            constraint.angleB = bodyB.angle;\n        }\n\n        var pointAWorld = pointA,\n            pointBWorld = pointB;\n\n        if (bodyA) pointAWorld = Vector.add(bodyA.position, pointA);\n        if (bodyB) pointBWorld = Vector.add(bodyB.position, pointB);\n\n        if (!pointAWorld || !pointBWorld)\n            return;\n\n        var delta = Vector.sub(pointAWorld, pointBWorld),\n            currentLength = Vector.magnitude(delta);\n\n        // prevent singularity\n        if (currentLength < Constraint._minLength) {\n            currentLength = Constraint._minLength;\n        }\n\n        // solve distance constraint with Gauss-Siedel method\n        var difference = (currentLength - constraint.length) / currentLength,\n            stiffness = constraint.stiffness < 1 ? constraint.stiffness * timeScale : constraint.stiffness,\n            force = Vector.mult(delta, difference * stiffness),\n            massTotal = (bodyA ? bodyA.inverseMass : 0) + (bodyB ? bodyB.inverseMass : 0),\n            inertiaTotal = (bodyA ? bodyA.inverseInertia : 0) + (bodyB ? bodyB.inverseInertia : 0),\n            resistanceTotal = massTotal + inertiaTotal,\n            torque,\n            share,\n            normal,\n            normalVelocity,\n            relativeVelocity;\n\n        if (constraint.damping) {\n            var zero = Vector.create();\n            normal = Vector.div(delta, currentLength);\n\n            relativeVelocity = Vector.sub(\n                bodyB && Vector.sub(bodyB.position, bodyB.positionPrev) || zero,\n                bodyA && Vector.sub(bodyA.position, bodyA.positionPrev) || zero\n            );\n\n            normalVelocity = Vector.dot(normal, relativeVelocity);\n        }\n\n        if (bodyA && !bodyA.isStatic) {\n            share = bodyA.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyA.constraintImpulse.x -= force.x * share;\n            bodyA.constraintImpulse.y -= force.y * share;\n\n            // apply forces\n            bodyA.position.x -= force.x * share;\n            bodyA.position.y -= force.y * share;\n\n            // apply damping\n            if (constraint.damping) {\n                bodyA.positionPrev.x -= constraint.damping * normal.x * normalVelocity * share;\n                bodyA.positionPrev.y -= constraint.damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointA, force) / resistanceTotal) * Constraint._torqueDampen * bodyA.inverseInertia * (1 - constraint.angularStiffness);\n            bodyA.constraintImpulse.angle -= torque;\n            bodyA.angle -= torque;\n        }\n\n        if (bodyB && !bodyB.isStatic) {\n            share = bodyB.inverseMass / massTotal;\n\n            // keep track of applied impulses for post solving\n            bodyB.constraintImpulse.x += force.x * share;\n            bodyB.constraintImpulse.y += force.y * share;\n            \n            // apply forces\n            bodyB.position.x += force.x * share;\n            bodyB.position.y += force.y * share;\n\n            // apply damping\n            if (constraint.damping) {\n                bodyB.positionPrev.x += constraint.damping * normal.x * normalVelocity * share;\n                bodyB.positionPrev.y += constraint.damping * normal.y * normalVelocity * share;\n            }\n\n            // apply torque\n            torque = (Vector.cross(pointB, force) / resistanceTotal) * Constraint._torqueDampen * bodyB.inverseInertia * (1 - constraint.angularStiffness);\n            bodyB.constraintImpulse.angle += torque;\n            bodyB.angle += torque;\n        }\n\n    };\n\n    /**\n     * Performs body updates required after solving constraints.\n     * @private\n     * @method postSolveAll\n     * @param {body[]} bodies\n     */\n    Constraint.postSolveAll = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                impulse = body.constraintImpulse;\n\n            if (body.isStatic || (impulse.x === 0 && impulse.y === 0 && impulse.angle === 0)) {\n                continue;\n            }\n\n            Sleeping.set(body, false);\n\n            // update geometry and reset\n            for (var j = 0; j < body.parts.length; j++) {\n                var part = body.parts[j];\n                \n                Vertices.translate(part.vertices, impulse);\n\n                if (j > 0) {\n                    part.position.x += impulse.x;\n                    part.position.y += impulse.y;\n                }\n\n                if (impulse.angle !== 0) {\n                    Vertices.rotate(part.vertices, impulse.angle, body.position);\n                    Axes.rotate(part.axes, impulse.angle);\n                    if (j > 0) {\n                        Vector.rotateAbout(part.position, impulse.angle, body.position, part.position);\n                    }\n                }\n\n                Bounds.update(part.bounds, part.vertices, body.velocity);\n            }\n\n            // dampen the cached impulse for warming next step\n            impulse.angle *= Constraint._warming;\n            impulse.x *= Constraint._warming;\n            impulse.y *= Constraint._warming;\n        }\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointA`, accounting for `constraint.bodyA`.\n     * @method pointAWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointAWorld = function(constraint) {\n        return {\n            x: (constraint.bodyA ? constraint.bodyA.position.x : 0) + constraint.pointA.x,\n            y: (constraint.bodyA ? constraint.bodyA.position.y : 0) + constraint.pointA.y\n        };\n    };\n\n    /**\n     * Returns the world-space position of `constraint.pointB`, accounting for `constraint.bodyB`.\n     * @method pointBWorld\n     * @param {constraint} constraint\n     * @returns {vector} the world-space position\n     */\n    Constraint.pointBWorld = function(constraint) {\n        return {\n            x: (constraint.bodyB ? constraint.bodyB.position.x : 0) + constraint.pointB.x,\n            y: (constraint.bodyB ? constraint.bodyB.position.y : 0) + constraint.pointB.y\n        };\n    };\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` uniquely identifying number generated in `Composite.create` by `Common.nextId`.\n     *\n     * @property id\n     * @type number\n     */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * An arbitrary `String` name to help the user identify and manage bodies.\n     *\n     * @property label\n     * @type string\n     * @default \"Constraint\"\n     */\n\n    /**\n     * An `Object` that defines the rendering properties to be consumed by the module `Matter.Render`.\n     *\n     * @property render\n     * @type object\n     */\n\n    /**\n     * A flag that indicates if the constraint should be rendered.\n     *\n     * @property render.visible\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A `Number` that defines the line width to use when rendering the constraint outline.\n     * A value of `0` means no outline will be rendered.\n     *\n     * @property render.lineWidth\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A `String` that defines the stroke style to use when rendering the constraint outline.\n     * It is the same as when using a canvas, so it accepts CSS style property values.\n     *\n     * @property render.strokeStyle\n     * @type string\n     * @default a random colour\n     */\n\n    /**\n     * A `String` that defines the constraint rendering type. \n     * The possible values are 'line', 'pin', 'spring'.\n     * An appropriate render type will be automatically chosen unless one is given in options.\n     *\n     * @property render.type\n     * @type string\n     * @default 'line'\n     */\n\n    /**\n     * A `Boolean` that defines if the constraint's anchor points should be rendered.\n     *\n     * @property render.anchors\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * The first possible `Body` that this constraint is attached to.\n     *\n     * @property bodyA\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The second possible `Body` that this constraint is attached to.\n     *\n     * @property bodyB\n     * @type body\n     * @default null\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyA` if defined, otherwise a world-space position.\n     *\n     * @property pointA\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Vector` that specifies the offset of the constraint from center of the `constraint.bodyB` if defined, otherwise a world-space position.\n     *\n     * @property pointB\n     * @type vector\n     * @default { x: 0, y: 0 }\n     */\n\n    /**\n     * A `Number` that specifies the stiffness of the constraint, i.e. the rate at which it returns to its resting `constraint.length`.\n     * A value of `1` means the constraint should be very stiff.\n     * A value of `0.2` means the constraint acts like a soft spring.\n     *\n     * @property stiffness\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the damping of the constraint, \n     * i.e. the amount of resistance applied to each body based on their velocities to limit the amount of oscillation.\n     * Damping will only be apparent when the constraint also has a very low `stiffness`.\n     * A value of `0.1` means the constraint will apply heavy damping, resulting in little to no oscillation.\n     * A value of `0` means the constraint will apply no damping.\n     *\n     * @property damping\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that specifies the target resting length of the constraint. \n     * It is calculated automatically in `Constraint.create` from initial positions of the `constraint.bodyA` and `constraint.bodyB`.\n     *\n     * @property length\n     * @type number\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n})();\n\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pair` module contains methods for creating and manipulating collision pairs.\n*\n* @class Pair\n*/\n\nvar Pair = {};\n\nmodule.exports = Pair;\n\nvar Contact = __webpack_require__(17);\n\n(function() {\n    \n    /**\n     * Creates a pair.\n     * @method create\n     * @param {collision} collision\n     * @param {number} timestamp\n     * @return {pair} A new pair\n     */\n    Pair.create = function(collision, timestamp) {\n        var bodyA = collision.bodyA,\n            bodyB = collision.bodyB,\n            parentA = collision.parentA,\n            parentB = collision.parentB;\n\n        var pair = {\n            id: Pair.id(bodyA, bodyB),\n            bodyA: bodyA,\n            bodyB: bodyB,\n            contacts: {},\n            activeContacts: [],\n            separation: 0,\n            isActive: true,\n            confirmedActive: true,\n            isSensor: bodyA.isSensor || bodyB.isSensor,\n            timeCreated: timestamp,\n            timeUpdated: timestamp,\n            inverseMass: parentA.inverseMass + parentB.inverseMass,\n            friction: Math.min(parentA.friction, parentB.friction),\n            frictionStatic: Math.max(parentA.frictionStatic, parentB.frictionStatic),\n            restitution: Math.max(parentA.restitution, parentB.restitution),\n            slop: Math.max(parentA.slop, parentB.slop)\n        };\n\n        Pair.update(pair, collision, timestamp);\n\n        return pair;\n    };\n\n    /**\n     * Updates a pair given a collision.\n     * @method update\n     * @param {pair} pair\n     * @param {collision} collision\n     * @param {number} timestamp\n     */\n    Pair.update = function(pair, collision, timestamp) {\n        var contacts = pair.contacts,\n            supports = collision.supports,\n            activeContacts = pair.activeContacts,\n            parentA = collision.parentA,\n            parentB = collision.parentB;\n        \n        pair.collision = collision;\n        pair.inverseMass = parentA.inverseMass + parentB.inverseMass;\n        pair.friction = Math.min(parentA.friction, parentB.friction);\n        pair.frictionStatic = Math.max(parentA.frictionStatic, parentB.frictionStatic);\n        pair.restitution = Math.max(parentA.restitution, parentB.restitution);\n        pair.slop = Math.max(parentA.slop, parentB.slop);\n        activeContacts.length = 0;\n        \n        if (collision.collided) {\n            for (var i = 0; i < supports.length; i++) {\n                var support = supports[i],\n                    contactId = Contact.id(support),\n                    contact = contacts[contactId];\n\n                if (contact) {\n                    activeContacts.push(contact);\n                } else {\n                    activeContacts.push(contacts[contactId] = Contact.create(support));\n                }\n            }\n\n            pair.separation = collision.depth;\n            Pair.setActive(pair, true, timestamp);\n        } else {\n            if (pair.isActive === true)\n                Pair.setActive(pair, false, timestamp);\n        }\n    };\n    \n    /**\n     * Set a pair as active or inactive.\n     * @method setActive\n     * @param {pair} pair\n     * @param {bool} isActive\n     * @param {number} timestamp\n     */\n    Pair.setActive = function(pair, isActive, timestamp) {\n        if (isActive) {\n            pair.isActive = true;\n            pair.timeUpdated = timestamp;\n        } else {\n            pair.isActive = false;\n            pair.activeContacts.length = 0;\n        }\n    };\n\n    /**\n     * Get the id for the given pair.\n     * @method id\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @return {string} Unique pairId\n     */\n    Pair.id = function(bodyA, bodyB) {\n        if (bodyA.id < bodyB.id) {\n            return 'A' + bodyA.id + 'B' + bodyB.id;\n        } else {\n            return 'A' + bodyB.id + 'B' + bodyA.id;\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Axes` module contains methods for creating and manipulating sets of axes.\n*\n* @class Axes\n*/\n\nvar Axes = {};\n\nmodule.exports = Axes;\n\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new set of axes from the given vertices.\n     * @method fromVertices\n     * @param {vertices} vertices\n     * @return {axes} A new axes from the given vertices\n     */\n    Axes.fromVertices = function(vertices) {\n        var axes = {};\n\n        // find the unique axes, using edge normal gradients\n        for (var i = 0; i < vertices.length; i++) {\n            var j = (i + 1) % vertices.length, \n                normal = Vector.normalise({ \n                    x: vertices[j].y - vertices[i].y, \n                    y: vertices[i].x - vertices[j].x\n                }),\n                gradient = (normal.y === 0) ? Infinity : (normal.x / normal.y);\n            \n            // limit precision\n            gradient = gradient.toFixed(3).toString();\n            axes[gradient] = normal;\n        }\n\n        return Common.values(axes);\n    };\n\n    /**\n     * Rotates a set of axes by the given angle.\n     * @method rotate\n     * @param {axes} axes\n     * @param {number} angle\n     */\n    Axes.rotate = function(axes, angle) {\n        if (angle === 0)\n            return;\n        \n        var cos = Math.cos(angle),\n            sin = Math.sin(angle);\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i],\n                xx;\n            xx = axis.x * cos - axis.y * sin;\n            axis.y = axis.x * sin + axis.y * cos;\n            axis.x = xx;\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Bodies` module contains factory methods for creating rigid body models \n* with commonly used body configurations (such as rectangles, circles and other polygons).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Bodies\n*/\n\n// TODO: true circle bodies\n\nvar Bodies = {};\n\nmodule.exports = Bodies;\n\nvar Vertices = __webpack_require__(3);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\nvar Bounds = __webpack_require__(1);\nvar Vector = __webpack_require__(2);\n\n(function() {\n\n    /**\n     * Creates a new rigid body model with a rectangle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method rectangle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {object} [options]\n     * @return {body} A new rectangle body\n     */\n    Bodies.rectangle = function(x, y, width, height, options) {\n        options = options || {};\n\n        var rectangle = { \n            label: 'Rectangle Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath('L 0 0 L ' + width + ' 0 L ' + width + ' ' + height + ' L 0 ' + height)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            rectangle.vertices = Vertices.chamfer(rectangle.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, rectangle, options));\n    };\n    \n    /**\n     * Creates a new rigid body model with a trapezoid hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method trapezoid\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} slope\n     * @param {object} [options]\n     * @return {body} A new trapezoid body\n     */\n    Bodies.trapezoid = function(x, y, width, height, slope, options) {\n        options = options || {};\n\n        slope *= 0.5;\n        var roof = (1 - (slope * 2)) * width;\n        \n        var x1 = width * slope,\n            x2 = x1 + roof,\n            x3 = x2 + x1,\n            verticesPath;\n\n        if (slope < 0.5) {\n            verticesPath = 'L 0 0 L ' + x1 + ' ' + (-height) + ' L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        } else {\n            verticesPath = 'L 0 0 L ' + x2 + ' ' + (-height) + ' L ' + x3 + ' 0';\n        }\n\n        var trapezoid = { \n            label: 'Trapezoid Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(verticesPath)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            trapezoid.vertices = Vertices.chamfer(trapezoid.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, trapezoid, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a circle hull. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method circle\n     * @param {number} x\n     * @param {number} y\n     * @param {number} radius\n     * @param {object} [options]\n     * @param {number} [maxSides]\n     * @return {body} A new circle body\n     */\n    Bodies.circle = function(x, y, radius, options, maxSides) {\n        options = options || {};\n\n        var circle = {\n            label: 'Circle Body',\n            circleRadius: radius\n        };\n        \n        // approximate circles with polygons until true circles implemented in SAT\n        maxSides = maxSides || 25;\n        var sides = Math.ceil(Math.max(10, Math.min(maxSides, radius)));\n\n        // optimisation: always use even number of sides (half the number of unique axes)\n        if (sides % 2 === 1)\n            sides += 1;\n\n        return Bodies.polygon(x, y, sides, radius, Common.extend({}, circle, options));\n    };\n\n    /**\n     * Creates a new rigid body model with a regular polygon hull with the given number of sides. \n     * The options parameter is an object that specifies any properties you wish to override the defaults.\n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method polygon\n     * @param {number} x\n     * @param {number} y\n     * @param {number} sides\n     * @param {number} radius\n     * @param {object} [options]\n     * @return {body} A new regular polygon body\n     */\n    Bodies.polygon = function(x, y, sides, radius, options) {\n        options = options || {};\n\n        if (sides < 3)\n            return Bodies.circle(x, y, radius, options);\n\n        var theta = 2 * Math.PI / sides,\n            path = '',\n            offset = theta * 0.5;\n\n        for (var i = 0; i < sides; i += 1) {\n            var angle = offset + (i * theta),\n                xx = Math.cos(angle) * radius,\n                yy = Math.sin(angle) * radius;\n\n            path += 'L ' + xx.toFixed(3) + ' ' + yy.toFixed(3) + ' ';\n        }\n\n        var polygon = { \n            label: 'Polygon Body',\n            position: { x: x, y: y },\n            vertices: Vertices.fromPath(path)\n        };\n\n        if (options.chamfer) {\n            var chamfer = options.chamfer;\n            polygon.vertices = Vertices.chamfer(polygon.vertices, chamfer.radius, \n                chamfer.quality, chamfer.qualityMin, chamfer.qualityMax);\n            delete options.chamfer;\n        }\n\n        return Body.create(Common.extend({}, polygon, options));\n    };\n\n    /**\n     * Utility to create a compound body based on set(s) of vertices.\n     * \n     * _Note:_ To optionally enable automatic concave vertices decomposition the [poly-decomp](https://github.com/schteppe/poly-decomp.js) \n     * package must be first installed and provided see `Common.setDecomp`, otherwise the convex hull of each vertex set will be used.\n     * \n     * The resulting vertices are reorientated about their centre of mass,\n     * and offset such that `body.position` corresponds to this point.\n     * \n     * The resulting offset may be found if needed by subtracting `body.bounds` from the original input bounds.\n     * To later move the centre of mass see `Body.setCentre`.\n     * \n     * Note that automatic conconcave decomposition results are not always optimal. \n     * For best results, simplify the input vertices as much as possible first.\n     * By default this function applies some addtional simplification to help.\n     * \n     * Some outputs may also require further manual processing afterwards to be robust.\n     * In particular some parts may need to be overlapped to avoid collision gaps.\n     * Thin parts and sharp points should be avoided or removed where possible.\n     *\n     * The options parameter object specifies any `Matter.Body` properties you wish to override the defaults.\n     * \n     * See the properties section of the `Matter.Body` module for detailed information on what you can pass via the `options` object.\n     * @method fromVertices\n     * @param {number} x\n     * @param {number} y\n     * @param {array} vertexSets One or more arrays of vertex points e.g. `[[{ x: 0, y: 0 }...], ...]`.\n     * @param {object} [options] The body options.\n     * @param {bool} [flagInternal=false] Optionally marks internal edges with `isInternal`.\n     * @param {number} [removeCollinear=0.01] Threshold when simplifying vertices along the same edge.\n     * @param {number} [minimumArea=10] Threshold when removing small parts.\n     * @param {number} [removeDuplicatePoints=0.01] Threshold when simplifying nearby vertices.\n     * @return {body}\n     */\n    Bodies.fromVertices = function(x, y, vertexSets, options, flagInternal, removeCollinear, minimumArea, removeDuplicatePoints) {\n        var decomp = Common.getDecomp(),\n            canDecomp,\n            body,\n            parts,\n            isConvex,\n            isConcave,\n            vertices,\n            i,\n            j,\n            k,\n            v,\n            z;\n\n        // check decomp is as expected\n        canDecomp = Boolean(decomp && decomp.quickDecomp);\n\n        options = options || {};\n        parts = [];\n\n        flagInternal = typeof flagInternal !== 'undefined' ? flagInternal : false;\n        removeCollinear = typeof removeCollinear !== 'undefined' ? removeCollinear : 0.01;\n        minimumArea = typeof minimumArea !== 'undefined' ? minimumArea : 10;\n        removeDuplicatePoints = typeof removeDuplicatePoints !== 'undefined' ? removeDuplicatePoints : 0.01;\n\n        // ensure vertexSets is an array of arrays\n        if (!Common.isArray(vertexSets[0])) {\n            vertexSets = [vertexSets];\n        }\n\n        for (v = 0; v < vertexSets.length; v += 1) {\n            vertices = vertexSets[v];\n            isConvex = Vertices.isConvex(vertices);\n            isConcave = !isConvex;\n\n            if (isConcave && !canDecomp) {\n                Common.warnOnce(\n                    'Bodies.fromVertices: Install the \\'poly-decomp\\' library and use Common.setDecomp or provide \\'decomp\\' as a global to decompose concave vertices.'\n                );\n            }\n\n            if (isConvex || !canDecomp) {\n                if (isConvex) {\n                    vertices = Vertices.clockwiseSort(vertices);\n                } else {\n                    // fallback to convex hull when decomposition is not possible\n                    vertices = Vertices.hull(vertices);\n                }\n\n                parts.push({\n                    position: { x: x, y: y },\n                    vertices: vertices\n                });\n            } else {\n                // initialise a decomposition\n                var concave = vertices.map(function(vertex) {\n                    return [vertex.x, vertex.y];\n                });\n\n                // vertices are concave and simple, we can decompose into parts\n                decomp.makeCCW(concave);\n                if (removeCollinear !== false)\n                    decomp.removeCollinearPoints(concave, removeCollinear);\n                if (removeDuplicatePoints !== false && decomp.removeDuplicatePoints)\n                    decomp.removeDuplicatePoints(concave, removeDuplicatePoints);\n\n                // use the quick decomposition algorithm (Bayazit)\n                var decomposed = decomp.quickDecomp(concave);\n\n                // for each decomposed chunk\n                for (i = 0; i < decomposed.length; i++) {\n                    var chunk = decomposed[i];\n\n                    // convert vertices into the correct structure\n                    var chunkVertices = chunk.map(function(vertices) {\n                        return {\n                            x: vertices[0],\n                            y: vertices[1]\n                        };\n                    });\n\n                    // skip small chunks\n                    if (minimumArea > 0 && Vertices.area(chunkVertices) < minimumArea)\n                        continue;\n\n                    // create a compound part\n                    parts.push({\n                        position: Vertices.centre(chunkVertices),\n                        vertices: chunkVertices\n                    });\n                }\n            }\n        }\n\n        // create body parts\n        for (i = 0; i < parts.length; i++) {\n            parts[i] = Body.create(Common.extend(parts[i], options));\n        }\n\n        // flag internal edges (coincident part edges)\n        if (flagInternal) {\n            var coincident_max_dist = 5;\n\n            for (i = 0; i < parts.length; i++) {\n                var partA = parts[i];\n\n                for (j = i + 1; j < parts.length; j++) {\n                    var partB = parts[j];\n\n                    if (Bounds.overlaps(partA.bounds, partB.bounds)) {\n                        var pav = partA.vertices,\n                            pbv = partB.vertices;\n\n                        // iterate vertices of both parts\n                        for (k = 0; k < partA.vertices.length; k++) {\n                            for (z = 0; z < partB.vertices.length; z++) {\n                                // find distances between the vertices\n                                var da = Vector.magnitudeSquared(Vector.sub(pav[(k + 1) % pav.length], pbv[z])),\n                                    db = Vector.magnitudeSquared(Vector.sub(pav[k], pbv[(z + 1) % pbv.length]));\n\n                                // if both vertices are very close, consider the edge concident (internal)\n                                if (da < coincident_max_dist && db < coincident_max_dist) {\n                                    pav[k].isInternal = true;\n                                    pbv[z].isInternal = true;\n                                }\n                            }\n                        }\n\n                    }\n                }\n            }\n        }\n\n        if (parts.length > 1) {\n            // create the parent body to be returned, that contains generated compound parts\n            body = Body.create(Common.extend({ parts: parts.slice(0) }, options));\n\n            // offset such that body.position is at the centre off mass\n            Body.setPosition(body, { x: x, y: y });\n\n            return body;\n        } else {\n            return parts[0];\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Mouse` module contains methods for creating and manipulating mouse inputs.\n*\n* @class Mouse\n*/\n\nvar Mouse = {};\n\nmodule.exports = Mouse;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a mouse input.\n     * @method create\n     * @param {HTMLElement} element\n     * @return {mouse} A new mouse\n     */\n    Mouse.create = function(element) {\n        var mouse = {};\n\n        if (!element) {\n            Common.log('Mouse.create: element was undefined, defaulting to document.body', 'warn');\n        }\n        \n        mouse.element = element || document.body;\n        mouse.absolute = { x: 0, y: 0 };\n        mouse.position = { x: 0, y: 0 };\n        mouse.mousedownPosition = { x: 0, y: 0 };\n        mouse.mouseupPosition = { x: 0, y: 0 };\n        mouse.offset = { x: 0, y: 0 };\n        mouse.scale = { x: 1, y: 1 };\n        mouse.wheelDelta = 0;\n        mouse.button = -1;\n        mouse.pixelRatio = parseInt(mouse.element.getAttribute('data-pixel-ratio'), 10) || 1;\n\n        mouse.sourceEvents = {\n            mousemove: null,\n            mousedown: null,\n            mouseup: null,\n            mousewheel: null\n        };\n        \n        mouse.mousemove = function(event) { \n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.sourceEvents.mousemove = event;\n        };\n        \n        mouse.mousedown = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                mouse.button = 0;\n                event.preventDefault();\n            } else {\n                mouse.button = event.button;\n            }\n\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mousedownPosition.x = mouse.position.x;\n            mouse.mousedownPosition.y = mouse.position.y;\n            mouse.sourceEvents.mousedown = event;\n        };\n        \n        mouse.mouseup = function(event) {\n            var position = Mouse._getRelativeMousePosition(event, mouse.element, mouse.pixelRatio),\n                touches = event.changedTouches;\n\n            if (touches) {\n                event.preventDefault();\n            }\n            \n            mouse.button = -1;\n            mouse.absolute.x = position.x;\n            mouse.absolute.y = position.y;\n            mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n            mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n            mouse.mouseupPosition.x = mouse.position.x;\n            mouse.mouseupPosition.y = mouse.position.y;\n            mouse.sourceEvents.mouseup = event;\n        };\n\n        mouse.mousewheel = function(event) {\n            mouse.wheelDelta = Math.max(-1, Math.min(1, event.wheelDelta || -event.detail));\n            event.preventDefault();\n        };\n\n        Mouse.setElement(mouse, mouse.element);\n\n        return mouse;\n    };\n\n    /**\n     * Sets the element the mouse is bound to (and relative to).\n     * @method setElement\n     * @param {mouse} mouse\n     * @param {HTMLElement} element\n     */\n    Mouse.setElement = function(mouse, element) {\n        mouse.element = element;\n\n        element.addEventListener('mousemove', mouse.mousemove);\n        element.addEventListener('mousedown', mouse.mousedown);\n        element.addEventListener('mouseup', mouse.mouseup);\n        \n        element.addEventListener('mousewheel', mouse.mousewheel);\n        element.addEventListener('DOMMouseScroll', mouse.mousewheel);\n\n        element.addEventListener('touchmove', mouse.mousemove);\n        element.addEventListener('touchstart', mouse.mousedown);\n        element.addEventListener('touchend', mouse.mouseup);\n    };\n\n    /**\n     * Clears all captured source events.\n     * @method clearSourceEvents\n     * @param {mouse} mouse\n     */\n    Mouse.clearSourceEvents = function(mouse) {\n        mouse.sourceEvents.mousemove = null;\n        mouse.sourceEvents.mousedown = null;\n        mouse.sourceEvents.mouseup = null;\n        mouse.sourceEvents.mousewheel = null;\n        mouse.wheelDelta = 0;\n    };\n\n    /**\n     * Sets the mouse position offset.\n     * @method setOffset\n     * @param {mouse} mouse\n     * @param {vector} offset\n     */\n    Mouse.setOffset = function(mouse, offset) {\n        mouse.offset.x = offset.x;\n        mouse.offset.y = offset.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n\n    /**\n     * Sets the mouse position scale.\n     * @method setScale\n     * @param {mouse} mouse\n     * @param {vector} scale\n     */\n    Mouse.setScale = function(mouse, scale) {\n        mouse.scale.x = scale.x;\n        mouse.scale.y = scale.y;\n        mouse.position.x = mouse.absolute.x * mouse.scale.x + mouse.offset.x;\n        mouse.position.y = mouse.absolute.y * mouse.scale.y + mouse.offset.y;\n    };\n    \n    /**\n     * Gets the mouse position relative to an element given a screen pixel ratio.\n     * @method _getRelativeMousePosition\n     * @private\n     * @param {} event\n     * @param {} element\n     * @param {number} pixelRatio\n     * @return {}\n     */\n    Mouse._getRelativeMousePosition = function(event, element, pixelRatio) {\n        var elementBounds = element.getBoundingClientRect(),\n            rootNode = (document.documentElement || document.body.parentNode || document.body),\n            scrollX = (window.pageXOffset !== undefined) ? window.pageXOffset : rootNode.scrollLeft,\n            scrollY = (window.pageYOffset !== undefined) ? window.pageYOffset : rootNode.scrollTop,\n            touches = event.changedTouches,\n            x, y;\n        \n        if (touches) {\n            x = touches[0].pageX - elementBounds.left - scrollX;\n            y = touches[0].pageY - elementBounds.top - scrollY;\n        } else {\n            x = event.pageX - elementBounds.left - scrollX;\n            y = event.pageY - elementBounds.top - scrollY;\n        }\n\n        return { \n            x: x / (element.clientWidth / (element.width || element.clientWidth) * pixelRatio),\n            y: y / (element.clientHeight / (element.height || element.clientHeight) * pixelRatio)\n        };\n    };\n\n})();\n\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Detector` module contains methods for detecting collisions given a set of pairs.\n*\n* @class Detector\n*/\n\n// TODO: speculative contacts\n\nvar Detector = {};\n\nmodule.exports = Detector;\n\nvar SAT = __webpack_require__(14);\nvar Pair = __webpack_require__(9);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    /**\n     * Finds all collisions given a list of pairs.\n     * @method collisions\n     * @param {pair[]} broadphasePairs\n     * @param {engine} engine\n     * @return {array} collisions\n     */\n    Detector.collisions = function(broadphasePairs, engine) {\n        var collisions = [],\n            pairsTable = engine.pairs.table;\n\n        for (var i = 0; i < broadphasePairs.length; i++) {\n            var bodyA = broadphasePairs[i][0], \n                bodyB = broadphasePairs[i][1];\n\n            if ((bodyA.isStatic || bodyA.isSleeping) && (bodyB.isStatic || bodyB.isSleeping))\n                continue;\n            \n            if (!Detector.canCollide(bodyA.collisionFilter, bodyB.collisionFilter))\n                continue;\n\n            // mid phase\n            if (Bounds.overlaps(bodyA.bounds, bodyB.bounds)) {\n                for (var j = bodyA.parts.length > 1 ? 1 : 0; j < bodyA.parts.length; j++) {\n                    var partA = bodyA.parts[j];\n\n                    for (var k = bodyB.parts.length > 1 ? 1 : 0; k < bodyB.parts.length; k++) {\n                        var partB = bodyB.parts[k];\n\n                        if ((partA === bodyA && partB === bodyB) || Bounds.overlaps(partA.bounds, partB.bounds)) {\n                            // find a previous collision we could reuse\n                            var pairId = Pair.id(partA, partB),\n                                pair = pairsTable[pairId],\n                                previousCollision;\n\n                            if (pair && pair.isActive) {\n                                previousCollision = pair.collision;\n                            } else {\n                                previousCollision = null;\n                            }\n\n                            // narrow phase\n                            var collision = SAT.collides(partA, partB, previousCollision);\n\n                            if (collision.collided) {\n                                collisions.push(collision);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns `true` if both supplied collision filters will allow a collision to occur.\n     * See `body.collisionFilter` for more information.\n     * @method canCollide\n     * @param {} filterA\n     * @param {} filterB\n     * @return {bool} `true` if collision can occur\n     */\n    Detector.canCollide = function(filterA, filterB) {\n        if (filterA.group === filterB.group && filterA.group !== 0)\n            return filterA.group > 0;\n\n        return (filterA.mask & filterB.category) !== 0 && (filterB.mask & filterA.category) !== 0;\n    };\n\n})();\n\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.SAT` module contains methods for detecting collisions using the Separating Axis Theorem.\n*\n* @class SAT\n*/\n\n// TODO: true circles and curves\n\nvar SAT = {};\n\nmodule.exports = SAT;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\n\n(function() {\n\n    /**\n     * Detect collision between two bodies using the Separating Axis Theorem.\n     * @method collides\n     * @param {body} bodyA\n     * @param {body} bodyB\n     * @param {collision} previousCollision\n     * @return {collision} collision\n     */\n    SAT.collides = function(bodyA, bodyB, previousCollision) {\n        var overlapAB,\n            overlapBA, \n            minOverlap,\n            collision,\n            canReusePrevCol = false;\n\n        if (previousCollision) {\n            // estimate total motion\n            var parentA = bodyA.parent,\n                parentB = bodyB.parent,\n                motion = parentA.speed * parentA.speed + parentA.angularSpeed * parentA.angularSpeed\n                       + parentB.speed * parentB.speed + parentB.angularSpeed * parentB.angularSpeed;\n\n            // we may be able to (partially) reuse collision result \n            // but only safe if collision was resting\n            canReusePrevCol = previousCollision && previousCollision.collided && motion < 0.2;\n\n            // reuse collision object\n            collision = previousCollision;\n        } else {\n            collision = { collided: false, bodyA: bodyA, bodyB: bodyB };\n        }\n\n        if (previousCollision && canReusePrevCol) {\n            // if we can reuse the collision result\n            // we only need to test the previously found axis\n            var axisBodyA = collision.axisBody,\n                axisBodyB = axisBodyA === bodyA ? bodyB : bodyA,\n                axes = [axisBodyA.axes[previousCollision.axisNumber]];\n\n            minOverlap = SAT._overlapAxes(axisBodyA.vertices, axisBodyB.vertices, axes);\n            collision.reused = true;\n\n            if (minOverlap.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n        } else {\n            // if we can't reuse a result, perform a full SAT test\n\n            overlapAB = SAT._overlapAxes(bodyA.vertices, bodyB.vertices, bodyA.axes);\n\n            if (overlapAB.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n\n            overlapBA = SAT._overlapAxes(bodyB.vertices, bodyA.vertices, bodyB.axes);\n\n            if (overlapBA.overlap <= 0) {\n                collision.collided = false;\n                return collision;\n            }\n\n            if (overlapAB.overlap < overlapBA.overlap) {\n                minOverlap = overlapAB;\n                collision.axisBody = bodyA;\n            } else {\n                minOverlap = overlapBA;\n                collision.axisBody = bodyB;\n            }\n\n            // important for reuse later\n            collision.axisNumber = minOverlap.axisNumber;\n        }\n\n        collision.bodyA = bodyA.id < bodyB.id ? bodyA : bodyB;\n        collision.bodyB = bodyA.id < bodyB.id ? bodyB : bodyA;\n        collision.collided = true;\n        collision.depth = minOverlap.overlap;\n        collision.parentA = collision.bodyA.parent;\n        collision.parentB = collision.bodyB.parent;\n        \n        bodyA = collision.bodyA;\n        bodyB = collision.bodyB;\n\n        // ensure normal is facing away from bodyA\n        if (Vector.dot(minOverlap.axis, Vector.sub(bodyB.position, bodyA.position)) < 0) {\n            collision.normal = {\n                x: minOverlap.axis.x,\n                y: minOverlap.axis.y\n            };\n        } else {\n            collision.normal = {\n                x: -minOverlap.axis.x,\n                y: -minOverlap.axis.y\n            };\n        }\n\n        collision.tangent = Vector.perp(collision.normal);\n\n        collision.penetration = collision.penetration || {};\n        collision.penetration.x = collision.normal.x * collision.depth;\n        collision.penetration.y = collision.normal.y * collision.depth; \n\n        // find support points, there is always either exactly one or two\n        var verticesB = SAT._findSupports(bodyA, bodyB, collision.normal),\n            supports = [];\n\n        // find the supports from bodyB that are inside bodyA\n        if (Vertices.contains(bodyA.vertices, verticesB[0]))\n            supports.push(verticesB[0]);\n\n        if (Vertices.contains(bodyA.vertices, verticesB[1]))\n            supports.push(verticesB[1]);\n\n        // find the supports from bodyA that are inside bodyB\n        if (supports.length < 2) {\n            var verticesA = SAT._findSupports(bodyB, bodyA, Vector.neg(collision.normal));\n                \n            if (Vertices.contains(bodyB.vertices, verticesA[0]))\n                supports.push(verticesA[0]);\n\n            if (supports.length < 2 && Vertices.contains(bodyB.vertices, verticesA[1]))\n                supports.push(verticesA[1]);\n        }\n\n        // account for the edge case of overlapping but no vertex containment\n        if (supports.length < 1)\n            supports = [verticesB[0]];\n        \n        collision.supports = supports;\n\n        return collision;\n    };\n\n    /**\n     * Find the overlap between two sets of vertices.\n     * @method _overlapAxes\n     * @private\n     * @param {} verticesA\n     * @param {} verticesB\n     * @param {} axes\n     * @return result\n     */\n    SAT._overlapAxes = function(verticesA, verticesB, axes) {\n        var projectionA = Vector._temp[0], \n            projectionB = Vector._temp[1],\n            result = { overlap: Number.MAX_VALUE },\n            overlap,\n            axis;\n\n        for (var i = 0; i < axes.length; i++) {\n            axis = axes[i];\n\n            SAT._projectToAxis(projectionA, verticesA, axis);\n            SAT._projectToAxis(projectionB, verticesB, axis);\n\n            overlap = Math.min(projectionA.max - projectionB.min, projectionB.max - projectionA.min);\n\n            if (overlap <= 0) {\n                result.overlap = overlap;\n                return result;\n            }\n\n            if (overlap < result.overlap) {\n                result.overlap = overlap;\n                result.axis = axis;\n                result.axisNumber = i;\n            }\n        }\n\n        return result;\n    };\n\n    /**\n     * Projects vertices on an axis and returns an interval.\n     * @method _projectToAxis\n     * @private\n     * @param {} projection\n     * @param {} vertices\n     * @param {} axis\n     */\n    SAT._projectToAxis = function(projection, vertices, axis) {\n        var min = Vector.dot(vertices[0], axis),\n            max = min;\n\n        for (var i = 1; i < vertices.length; i += 1) {\n            var dot = Vector.dot(vertices[i], axis);\n\n            if (dot > max) { \n                max = dot; \n            } else if (dot < min) { \n                min = dot; \n            }\n        }\n\n        projection.min = min;\n        projection.max = max;\n    };\n    \n    /**\n     * Finds supporting vertices given two bodies along a given direction using hill-climbing.\n     * @method _findSupports\n     * @private\n     * @param {} bodyA\n     * @param {} bodyB\n     * @param {} normal\n     * @return [vector]\n     */\n    SAT._findSupports = function(bodyA, bodyB, normal) {\n        var nearestDistance = Number.MAX_VALUE,\n            vertexToBody = Vector._temp[0],\n            vertices = bodyB.vertices,\n            bodyAPosition = bodyA.position,\n            distance,\n            vertex,\n            vertexA,\n            vertexB;\n\n        // find closest vertex on bodyB\n        for (var i = 0; i < vertices.length; i++) {\n            vertex = vertices[i];\n            vertexToBody.x = vertex.x - bodyAPosition.x;\n            vertexToBody.y = vertex.y - bodyAPosition.y;\n            distance = -Vector.dot(normal, vertexToBody);\n\n            if (distance < nearestDistance) {\n                nearestDistance = distance;\n                vertexA = vertex;\n            }\n        }\n\n        // find next closest vertex using the two connected to it\n        var prevIndex = vertexA.index - 1 >= 0 ? vertexA.index - 1 : vertices.length - 1;\n        vertex = vertices[prevIndex];\n        vertexToBody.x = vertex.x - bodyAPosition.x;\n        vertexToBody.y = vertex.y - bodyAPosition.y;\n        nearestDistance = -Vector.dot(normal, vertexToBody);\n        vertexB = vertex;\n\n        var nextIndex = (vertexA.index + 1) % vertices.length;\n        vertex = vertices[nextIndex];\n        vertexToBody.x = vertex.x - bodyAPosition.x;\n        vertexToBody.y = vertex.y - bodyAPosition.y;\n        distance = -Vector.dot(normal, vertexToBody);\n        if (distance < nearestDistance) {\n            vertexB = vertex;\n        }\n\n        return [vertexA, vertexB];\n    };\n\n})();\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Plugin` module contains functions for registering and installing plugins on modules.\n*\n* @class Plugin\n*/\n\nvar Plugin = {};\n\nmodule.exports = Plugin;\n\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    Plugin._registry = {};\n\n    /**\n     * Registers a plugin object so it can be resolved later by name.\n     * @method register\n     * @param plugin {} The plugin to register.\n     * @return {object} The plugin.\n     */\n    Plugin.register = function(plugin) {\n        if (!Plugin.isPlugin(plugin)) {\n            Common.warn('Plugin.register:', Plugin.toString(plugin), 'does not implement all required fields.');\n        }\n\n        if (plugin.name in Plugin._registry) {\n            var registered = Plugin._registry[plugin.name],\n                pluginVersion = Plugin.versionParse(plugin.version).number,\n                registeredVersion = Plugin.versionParse(registered.version).number;\n\n            if (pluginVersion > registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'was upgraded to', Plugin.toString(plugin));\n                Plugin._registry[plugin.name] = plugin;\n            } else if (pluginVersion < registeredVersion) {\n                Common.warn('Plugin.register:', Plugin.toString(registered), 'can not be downgraded to', Plugin.toString(plugin));\n            } else if (plugin !== registered) {\n                Common.warn('Plugin.register:', Plugin.toString(plugin), 'is already registered to different plugin object');\n            }\n        } else {\n            Plugin._registry[plugin.name] = plugin;\n        }\n\n        return plugin;\n    };\n\n    /**\n     * Resolves a dependency to a plugin object from the registry if it exists. \n     * The `dependency` may contain a version, but only the name matters when resolving.\n     * @method resolve\n     * @param dependency {string} The dependency.\n     * @return {object} The plugin if resolved, otherwise `undefined`.\n     */\n    Plugin.resolve = function(dependency) {\n        return Plugin._registry[Plugin.dependencyParse(dependency).name];\n    };\n\n    /**\n     * Returns a pretty printed plugin name and version.\n     * @method toString\n     * @param plugin {} The plugin.\n     * @return {string} Pretty printed plugin name and version.\n     */\n    Plugin.toString = function(plugin) {\n        return typeof plugin === 'string' ? plugin : (plugin.name || 'anonymous') + '@' + (plugin.version || plugin.range || '0.0.0');\n    };\n\n    /**\n     * Returns `true` if the object meets the minimum standard to be considered a plugin.\n     * This means it must define the following properties:\n     * - `name`\n     * - `version`\n     * - `install`\n     * @method isPlugin\n     * @param obj {} The obj to test.\n     * @return {boolean} `true` if the object can be considered a plugin otherwise `false`.\n     */\n    Plugin.isPlugin = function(obj) {\n        return obj && obj.name && obj.version && obj.install;\n    };\n\n    /**\n     * Returns `true` if a plugin with the given `name` been installed on `module`.\n     * @method isUsed\n     * @param module {} The module.\n     * @param name {string} The plugin name.\n     * @return {boolean} `true` if a plugin with the given `name` been installed on `module`, otherwise `false`.\n     */\n    Plugin.isUsed = function(module, name) {\n        return module.used.indexOf(name) > -1;\n    };\n\n    /**\n     * Returns `true` if `plugin.for` is applicable to `module` by comparing against `module.name` and `module.version`.\n     * If `plugin.for` is not specified then it is assumed to be applicable.\n     * The value of `plugin.for` is a string of the format `'module-name'` or `'module-name@version'`.\n     * @method isFor\n     * @param plugin {} The plugin.\n     * @param module {} The module.\n     * @return {boolean} `true` if `plugin.for` is applicable to `module`, otherwise `false`.\n     */\n    Plugin.isFor = function(plugin, module) {\n        var parsed = plugin.for && Plugin.dependencyParse(plugin.for);\n        return !plugin.for || (module.name === parsed.name && Plugin.versionSatisfies(module.version, parsed.range));\n    };\n\n    /**\n     * Installs the plugins by calling `plugin.install` on each plugin specified in `plugins` if passed, otherwise `module.uses`.\n     * For installing plugins on `Matter` see the convenience function `Matter.use`.\n     * Plugins may be specified either by their name or a reference to the plugin object.\n     * Plugins themselves may specify further dependencies, but each plugin is installed only once.\n     * Order is important, a topological sort is performed to find the best resulting order of installation.\n     * This sorting attempts to satisfy every dependency's requested ordering, but may not be exact in all cases.\n     * This function logs the resulting status of each dependency in the console, along with any warnings.\n     * - A green tick  indicates a dependency was resolved and installed.\n     * - An orange diamond  indicates a dependency was resolved but a warning was thrown for it or one if its dependencies.\n     * - A red cross  indicates a dependency could not be resolved.\n     * Avoid calling this function multiple times on the same module unless you intend to manually control installation order.\n     * @method use\n     * @param module {} The module install plugins on.\n     * @param [plugins=module.uses] {} The plugins to install on module (optional, defaults to `module.uses`).\n     */\n    Plugin.use = function(module, plugins) {\n        module.uses = (module.uses || []).concat(plugins || []);\n\n        if (module.uses.length === 0) {\n            Common.warn('Plugin.use:', Plugin.toString(module), 'does not specify any dependencies to install.');\n            return;\n        }\n\n        var dependencies = Plugin.dependencies(module),\n            sortedDependencies = Common.topologicalSort(dependencies),\n            status = [];\n\n        for (var i = 0; i < sortedDependencies.length; i += 1) {\n            if (sortedDependencies[i] === module.name) {\n                continue;\n            }\n\n            var plugin = Plugin.resolve(sortedDependencies[i]);\n\n            if (!plugin) {\n                status.push(' ' + sortedDependencies[i]);\n                continue;\n            }\n\n            if (Plugin.isUsed(module, plugin.name)) {\n                continue;\n            }\n\n            if (!Plugin.isFor(plugin, module)) {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'is for', plugin.for, 'but installed on', Plugin.toString(module) + '.');\n                plugin._warned = true;\n            }\n\n            if (plugin.install) {\n                plugin.install(module);\n            } else {\n                Common.warn('Plugin.use:', Plugin.toString(plugin), 'does not specify an install function.');\n                plugin._warned = true;\n            }\n\n            if (plugin._warned) {\n                status.push(' ' + Plugin.toString(plugin));\n                delete plugin._warned;\n            } else {\n                status.push(' ' + Plugin.toString(plugin));\n            }\n\n            module.used.push(plugin.name);\n        }\n\n        if (status.length > 0) {\n            Common.info(status.join('  '));\n        }\n    };\n\n    /**\n     * Recursively finds all of a module's dependencies and returns a flat dependency graph.\n     * @method dependencies\n     * @param module {} The module.\n     * @return {object} A dependency graph.\n     */\n    Plugin.dependencies = function(module, tracked) {\n        var parsedBase = Plugin.dependencyParse(module),\n            name = parsedBase.name;\n\n        tracked = tracked || {};\n\n        if (name in tracked) {\n            return;\n        }\n\n        module = Plugin.resolve(module) || module;\n\n        tracked[name] = Common.map(module.uses || [], function(dependency) {\n            if (Plugin.isPlugin(dependency)) {\n                Plugin.register(dependency);\n            }\n\n            var parsed = Plugin.dependencyParse(dependency),\n                resolved = Plugin.resolve(dependency);\n\n            if (resolved && !Plugin.versionSatisfies(resolved.version, parsed.range)) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(resolved), 'does not satisfy',\n                    Plugin.toString(parsed), 'used by', Plugin.toString(parsedBase) + '.'\n                );\n\n                resolved._warned = true;\n                module._warned = true;\n            } else if (!resolved) {\n                Common.warn(\n                    'Plugin.dependencies:', Plugin.toString(dependency), 'used by',\n                    Plugin.toString(parsedBase), 'could not be resolved.'\n                );\n\n                module._warned = true;\n            }\n\n            return parsed.name;\n        });\n\n        for (var i = 0; i < tracked[name].length; i += 1) {\n            Plugin.dependencies(tracked[name][i], tracked);\n        }\n\n        return tracked;\n    };\n\n    /**\n     * Parses a dependency string into its components.\n     * The `dependency` is a string of the format `'module-name'` or `'module-name@version'`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * This function can also handle dependencies that are already resolved (e.g. a module object).\n     * @method dependencyParse\n     * @param dependency {string} The dependency of the format `'module-name'` or `'module-name@version'`.\n     * @return {object} The dependency parsed into its components.\n     */\n    Plugin.dependencyParse = function(dependency) {\n        if (Common.isString(dependency)) {\n            var pattern = /^[\\w-]+(@(\\*|[\\^~]?\\d+\\.\\d+\\.\\d+(-[0-9A-Za-z-]+)?))?$/;\n\n            if (!pattern.test(dependency)) {\n                Common.warn('Plugin.dependencyParse:', dependency, 'is not a valid dependency string.');\n            }\n\n            return {\n                name: dependency.split('@')[0],\n                range: dependency.split('@')[1] || '*'\n            };\n        }\n\n        return {\n            name: dependency.name,\n            range: dependency.range || dependency.version\n        };\n    };\n\n    /**\n     * Parses a version string into its components.  \n     * Versions are strictly of the format `x.y.z` (as in [semver](http://semver.org/)).\n     * Versions may optionally have a prerelease tag in the format `x.y.z-alpha`.\n     * Ranges are a strict subset of [npm ranges](https://docs.npmjs.com/misc/semver#advanced-range-syntax).\n     * Only the following range types are supported:\n     * - Tilde ranges e.g. `~1.2.3`\n     * - Caret ranges e.g. `^1.2.3`\n     * - Greater than ranges e.g. `>1.2.3`\n     * - Greater than or equal ranges e.g. `>=1.2.3`\n     * - Exact version e.g. `1.2.3`\n     * - Any version `*`\n     * @method versionParse\n     * @param range {string} The version string.\n     * @return {object} The version range parsed into its components.\n     */\n    Plugin.versionParse = function(range) {\n        var pattern = /^(\\*)|(\\^|~|>=|>)?\\s*((\\d+)\\.(\\d+)\\.(\\d+))(-[0-9A-Za-z-]+)?$/;\n\n        if (!pattern.test(range)) {\n            Common.warn('Plugin.versionParse:', range, 'is not a valid version or range.');\n        }\n\n        var parts = pattern.exec(range);\n        var major = Number(parts[4]);\n        var minor = Number(parts[5]);\n        var patch = Number(parts[6]);\n\n        return {\n            isRange: Boolean(parts[1] || parts[2]),\n            version: parts[3],\n            range: range,\n            operator: parts[1] || parts[2] || '',\n            major: major,\n            minor: minor,\n            patch: patch,\n            parts: [major, minor, patch],\n            prerelease: parts[7],\n            number: major * 1e8 + minor * 1e4 + patch\n        };\n    };\n\n    /**\n     * Returns `true` if `version` satisfies the given `range`.\n     * See documentation for `Plugin.versionParse` for a description of the format.\n     * If a version or range is not specified, then any version (`*`) is assumed to satisfy.\n     * @method versionSatisfies\n     * @param version {string} The version string.\n     * @param range {string} The range string.\n     * @return {boolean} `true` if `version` satisfies `range`, otherwise `false`.\n     */\n    Plugin.versionSatisfies = function(version, range) {\n        range = range || '*';\n\n        var r = Plugin.versionParse(range),\n            v = Plugin.versionParse(version);\n\n        if (r.isRange) {\n            if (r.operator === '*' || version === '*') {\n                return true;\n            }\n\n            if (r.operator === '>') {\n                return v.number > r.number;\n            }\n\n            if (r.operator === '>=') {\n                return v.number >= r.number;\n            }\n\n            if (r.operator === '~') {\n                return v.major === r.major && v.minor === r.minor && v.patch >= r.patch;\n            }\n\n            if (r.operator === '^') {\n                if (r.major > 0) {\n                    return v.major === r.major && v.number >= r.number;\n                }\n\n                if (r.minor > 0) {\n                    return v.minor === r.minor && v.patch >= r.patch;\n                }\n\n                return v.patch === r.patch;\n            }\n        }\n\n        return version === range || version === '*';\n    };\n\n})();\n\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Render` module is a simple canvas based renderer for visualising instances of `Matter.Engine`.\n* It is intended for development and debugging purposes, but may also be suitable for simple games.\n* It includes a number of drawing options including wireframe, vector with support for sprites and viewports.\n*\n* @class Render\n*/\n\nvar Render = {};\n\nmodule.exports = Render;\n\nvar Common = __webpack_require__(0);\nvar Composite = __webpack_require__(5);\nvar Bounds = __webpack_require__(1);\nvar Events = __webpack_require__(4);\nvar Vector = __webpack_require__(2);\nvar Mouse = __webpack_require__(12);\n\n(function() {\n\n    var _requestAnimationFrame,\n        _cancelAnimationFrame;\n\n    if (typeof window !== 'undefined') {\n        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame\n                                      || function(callback){ window.setTimeout(function() { callback(Common.now()); }, 1000 / 60); };\n\n        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame\n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n    }\n\n    Render._goodFps = 30;\n    Render._goodDelta = 1000 / 60;\n\n    /**\n     * Creates a new renderer. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {render} A new renderer\n     */\n    Render.create = function(options) {\n        var defaults = {\n            controller: Render,\n            engine: null,\n            element: null,\n            canvas: null,\n            mouse: null,\n            frameRequestId: null,\n            timing: {\n                historySize: 60,\n                delta: 0,\n                deltaHistory: [],\n                lastTime: 0,\n                lastTimestamp: 0,\n                lastElapsed: 0,\n                timestampElapsed: 0,\n                timestampElapsedHistory: [],\n                engineDeltaHistory: [],\n                engineElapsedHistory: [],\n                elapsedHistory: []\n            },\n            options: {\n                width: 800,\n                height: 600,\n                pixelRatio: 1,\n                background: '#14151f',\n                wireframeBackground: '#14151f',\n                hasBounds: !!options.bounds,\n                enabled: true,\n                wireframes: true,\n                showSleeping: true,\n                showDebug: false,\n                showStats: false,\n                showPerformance: false,\n                showBroadphase: false,\n                showBounds: false,\n                showVelocity: false,\n                showCollisions: false,\n                showSeparations: false,\n                showAxes: false,\n                showPositions: false,\n                showAngleIndicator: false,\n                showIds: false,\n                showVertexNumbers: false,\n                showConvexHulls: false,\n                showInternalEdges: false,\n                showMousePosition: false\n            }\n        };\n\n        var render = Common.extend(defaults, options);\n\n        if (render.canvas) {\n            render.canvas.width = render.options.width || render.canvas.width;\n            render.canvas.height = render.options.height || render.canvas.height;\n        }\n\n        render.mouse = options.mouse;\n        render.engine = options.engine;\n        render.canvas = render.canvas || _createCanvas(render.options.width, render.options.height);\n        render.context = render.canvas.getContext('2d');\n        render.textures = {};\n\n        render.bounds = render.bounds || {\n            min: {\n                x: 0,\n                y: 0\n            },\n            max: {\n                x: render.canvas.width,\n                y: render.canvas.height\n            }\n        };\n\n        if (render.options.pixelRatio !== 1) {\n            Render.setPixelRatio(render, render.options.pixelRatio);\n        }\n\n        if (Common.isElement(render.element)) {\n            render.element.appendChild(render.canvas);\n        } else if (!render.canvas.parentNode) {\n            Common.log('Render.create: options.element was undefined, render.canvas was created but not appended', 'warn');\n        }\n\n        return render;\n    };\n\n    /**\n     * Continuously updates the render canvas on the `requestAnimationFrame` event.\n     * @method run\n     * @param {render} render\n     */\n    Render.run = function(render) {\n        (function loop(time){\n            render.frameRequestId = _requestAnimationFrame(loop);\n            \n            _updateTiming(render, time);\n\n            Render.world(render, time);\n\n            if (render.options.showStats || render.options.showDebug) {\n                Render.stats(render, render.context, time);\n            }\n\n            if (render.options.showPerformance || render.options.showDebug) {\n                Render.performance(render, render.context, time);\n            }\n        })();\n    };\n\n    /**\n     * Ends execution of `Render.run` on the given `render`, by canceling the animation frame request event loop.\n     * @method stop\n     * @param {render} render\n     */\n    Render.stop = function(render) {\n        _cancelAnimationFrame(render.frameRequestId);\n    };\n\n    /**\n     * Sets the pixel ratio of the renderer and updates the canvas.\n     * To automatically detect the correct ratio, pass the string `'auto'` for `pixelRatio`.\n     * @method setPixelRatio\n     * @param {render} render\n     * @param {number} pixelRatio\n     */\n    Render.setPixelRatio = function(render, pixelRatio) {\n        var options = render.options,\n            canvas = render.canvas;\n\n        if (pixelRatio === 'auto') {\n            pixelRatio = _getPixelRatio(canvas);\n        }\n\n        options.pixelRatio = pixelRatio;\n        canvas.setAttribute('data-pixel-ratio', pixelRatio);\n        canvas.width = options.width * pixelRatio;\n        canvas.height = options.height * pixelRatio;\n        canvas.style.width = options.width + 'px';\n        canvas.style.height = options.height + 'px';\n    };\n\n    /**\n     * Positions and sizes the viewport around the given object bounds.\n     * Objects must have at least one of the following properties:\n     * - `object.bounds`\n     * - `object.position`\n     * - `object.min` and `object.max`\n     * - `object.x` and `object.y`\n     * @method lookAt\n     * @param {render} render\n     * @param {object[]} objects\n     * @param {vector} [padding]\n     * @param {bool} [center=true]\n     */\n    Render.lookAt = function(render, objects, padding, center) {\n        center = typeof center !== 'undefined' ? center : true;\n        objects = Common.isArray(objects) ? objects : [objects];\n        padding = padding || {\n            x: 0,\n            y: 0\n        };\n\n        // find bounds of all objects\n        var bounds = {\n            min: { x: Infinity, y: Infinity },\n            max: { x: -Infinity, y: -Infinity }\n        };\n\n        for (var i = 0; i < objects.length; i += 1) {\n            var object = objects[i],\n                min = object.bounds ? object.bounds.min : (object.min || object.position || object),\n                max = object.bounds ? object.bounds.max : (object.max || object.position || object);\n\n            if (min && max) {\n                if (min.x < bounds.min.x)\n                    bounds.min.x = min.x;\n\n                if (max.x > bounds.max.x)\n                    bounds.max.x = max.x;\n\n                if (min.y < bounds.min.y)\n                    bounds.min.y = min.y;\n\n                if (max.y > bounds.max.y)\n                    bounds.max.y = max.y;\n            }\n        }\n\n        // find ratios\n        var width = (bounds.max.x - bounds.min.x) + 2 * padding.x,\n            height = (bounds.max.y - bounds.min.y) + 2 * padding.y,\n            viewHeight = render.canvas.height,\n            viewWidth = render.canvas.width,\n            outerRatio = viewWidth / viewHeight,\n            innerRatio = width / height,\n            scaleX = 1,\n            scaleY = 1;\n\n        // find scale factor\n        if (innerRatio > outerRatio) {\n            scaleY = innerRatio / outerRatio;\n        } else {\n            scaleX = outerRatio / innerRatio;\n        }\n\n        // enable bounds\n        render.options.hasBounds = true;\n\n        // position and size\n        render.bounds.min.x = bounds.min.x;\n        render.bounds.max.x = bounds.min.x + width * scaleX;\n        render.bounds.min.y = bounds.min.y;\n        render.bounds.max.y = bounds.min.y + height * scaleY;\n\n        // center\n        if (center) {\n            render.bounds.min.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.max.x += width * 0.5 - (width * scaleX) * 0.5;\n            render.bounds.min.y += height * 0.5 - (height * scaleY) * 0.5;\n            render.bounds.max.y += height * 0.5 - (height * scaleY) * 0.5;\n        }\n\n        // padding\n        render.bounds.min.x -= padding.x;\n        render.bounds.max.x -= padding.x;\n        render.bounds.min.y -= padding.y;\n        render.bounds.max.y -= padding.y;\n\n        // update mouse\n        if (render.mouse) {\n            Mouse.setScale(render.mouse, {\n                x: (render.bounds.max.x - render.bounds.min.x) / render.canvas.width,\n                y: (render.bounds.max.y - render.bounds.min.y) / render.canvas.height\n            });\n\n            Mouse.setOffset(render.mouse, render.bounds.min);\n        }\n    };\n\n    /**\n     * Applies viewport transforms based on `render.bounds` to a render context.\n     * @method startViewTransform\n     * @param {render} render\n     */\n    Render.startViewTransform = function(render) {\n        var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n            boundsHeight = render.bounds.max.y - render.bounds.min.y,\n            boundsScaleX = boundsWidth / render.options.width,\n            boundsScaleY = boundsHeight / render.options.height;\n\n        render.context.setTransform(\n            render.options.pixelRatio / boundsScaleX, 0, 0, \n            render.options.pixelRatio / boundsScaleY, 0, 0\n        );\n        \n        render.context.translate(-render.bounds.min.x, -render.bounds.min.y);\n    };\n\n    /**\n     * Resets all transforms on the render context.\n     * @method endViewTransform\n     * @param {render} render\n     */\n    Render.endViewTransform = function(render) {\n        render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n    };\n\n    /**\n     * Renders the given `engine`'s `Matter.World` object.\n     * This is the entry point for all rendering and should be called every time the scene changes.\n     * @method world\n     * @param {render} render\n     */\n    Render.world = function(render, time) {\n        var startTime = Common.now(),\n            engine = render.engine,\n            world = engine.world,\n            canvas = render.canvas,\n            context = render.context,\n            options = render.options,\n            timing = render.timing;\n\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world),\n            background = options.wireframes ? options.wireframeBackground : options.background,\n            bodies = [],\n            constraints = [],\n            i;\n\n        var event = {\n            timestamp: engine.timing.timestamp\n        };\n\n        Events.trigger(render, 'beforeRender', event);\n\n        // apply background if it has changed\n        if (render.currentBackground !== background)\n            _applyBackground(render, background);\n\n        // clear the canvas with a transparent fill, to allow the canvas background to show\n        context.globalCompositeOperation = 'source-in';\n        context.fillStyle = \"transparent\";\n        context.fillRect(0, 0, canvas.width, canvas.height);\n        context.globalCompositeOperation = 'source-over';\n\n        // handle bounds\n        if (options.hasBounds) {\n            // filter out bodies that are not in view\n            for (i = 0; i < allBodies.length; i++) {\n                var body = allBodies[i];\n                if (Bounds.overlaps(body.bounds, render.bounds))\n                    bodies.push(body);\n            }\n\n            // filter out constraints that are not in view\n            for (i = 0; i < allConstraints.length; i++) {\n                var constraint = allConstraints[i],\n                    bodyA = constraint.bodyA,\n                    bodyB = constraint.bodyB,\n                    pointAWorld = constraint.pointA,\n                    pointBWorld = constraint.pointB;\n\n                if (bodyA) pointAWorld = Vector.add(bodyA.position, constraint.pointA);\n                if (bodyB) pointBWorld = Vector.add(bodyB.position, constraint.pointB);\n\n                if (!pointAWorld || !pointBWorld)\n                    continue;\n\n                if (Bounds.contains(render.bounds, pointAWorld) || Bounds.contains(render.bounds, pointBWorld))\n                    constraints.push(constraint);\n            }\n\n            // transform the view\n            Render.startViewTransform(render);\n\n            // update mouse\n            if (render.mouse) {\n                Mouse.setScale(render.mouse, {\n                    x: (render.bounds.max.x - render.bounds.min.x) / render.options.width,\n                    y: (render.bounds.max.y - render.bounds.min.y) / render.options.height\n                });\n\n                Mouse.setOffset(render.mouse, render.bounds.min);\n            }\n        } else {\n            constraints = allConstraints;\n            bodies = allBodies;\n\n            if (render.options.pixelRatio !== 1) {\n                render.context.setTransform(render.options.pixelRatio, 0, 0, render.options.pixelRatio, 0, 0);\n            }\n        }\n\n        if (!options.wireframes || (engine.enableSleeping && options.showSleeping)) {\n            // fully featured rendering of bodies\n            Render.bodies(render, bodies, context);\n        } else {\n            if (options.showConvexHulls)\n                Render.bodyConvexHulls(render, bodies, context);\n\n            // optimised method for wireframes only\n            Render.bodyWireframes(render, bodies, context);\n        }\n\n        if (options.showBounds)\n            Render.bodyBounds(render, bodies, context);\n\n        if (options.showAxes || options.showAngleIndicator)\n            Render.bodyAxes(render, bodies, context);\n\n        if (options.showPositions)\n            Render.bodyPositions(render, bodies, context);\n\n        if (options.showVelocity)\n            Render.bodyVelocity(render, bodies, context);\n\n        if (options.showIds)\n            Render.bodyIds(render, bodies, context);\n\n        if (options.showSeparations)\n            Render.separations(render, engine.pairs.list, context);\n\n        if (options.showCollisions)\n            Render.collisions(render, engine.pairs.list, context);\n\n        if (options.showVertexNumbers)\n            Render.vertexNumbers(render, bodies, context);\n\n        if (options.showMousePosition)\n            Render.mousePosition(render, render.mouse, context);\n\n        Render.constraints(constraints, context);\n\n        if (options.showBroadphase)\n            Render.grid(render, engine.grid, context);\n\n        if (options.hasBounds) {\n            // revert view transforms\n            Render.endViewTransform(render);\n        }\n\n        Events.trigger(render, 'afterRender', event);\n\n        // log the time elapsed computing this update\n        timing.lastElapsed = Common.now() - startTime;\n    };\n\n    /**\n     * Renders statistics about the engine and world useful for debugging.\n     * @private\n     * @method stats\n     * @param {render} render\n     * @param {RenderingContext} context\n     * @param {Number} time\n     */\n    Render.stats = function(render, context, time) {\n        var engine = render.engine,\n            world = engine.world,\n            bodies = Composite.allBodies(world),\n            parts = 0,\n            width = 55,\n            height = 44,\n            x = 0,\n            y = 0;\n        \n        // count parts\n        for (var i = 0; i < bodies.length; i += 1) {\n            parts += bodies[i].parts.length;\n        }\n\n        // sections\n        var sections = {\n            'Part': parts,\n            'Body': bodies.length,\n            'Cons': Composite.allConstraints(world).length,\n            'Comp': Composite.allComposites(world).length,\n            'Pair': engine.pairs.list.length\n        };\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(x, y, width * 5.5, height);\n\n        context.font = '12px Arial';\n        context.textBaseline = 'top';\n        context.textAlign = 'right';\n\n        // sections\n        for (var key in sections) {\n            var section = sections[key];\n            // label\n            context.fillStyle = '#aaa';\n            context.fillText(key, x + width, y + 8);\n\n            // value\n            context.fillStyle = '#eee';\n            context.fillText(section, x + width, y + 26);\n\n            x += width;\n        }\n    };\n\n    /**\n     * Renders engine and render performance information.\n     * @private\n     * @method performance\n     * @param {render} render\n     * @param {RenderingContext} context\n     */\n    Render.performance = function(render, context) {\n        var engine = render.engine,\n            timing = render.timing,\n            deltaHistory = timing.deltaHistory,\n            elapsedHistory = timing.elapsedHistory,\n            timestampElapsedHistory = timing.timestampElapsedHistory,\n            engineDeltaHistory = timing.engineDeltaHistory,\n            engineElapsedHistory = timing.engineElapsedHistory,\n            lastEngineDelta = engine.timing.lastDelta;\n        \n        var deltaMean = _mean(deltaHistory),\n            elapsedMean = _mean(elapsedHistory),\n            engineDeltaMean = _mean(engineDeltaHistory),\n            engineElapsedMean = _mean(engineElapsedHistory),\n            timestampElapsedMean = _mean(timestampElapsedHistory),\n            rateMean = (timestampElapsedMean / deltaMean) || 0,\n            fps = (1000 / deltaMean) || 0;\n\n        var graphHeight = 4,\n            gap = 12,\n            width = 60,\n            height = 34,\n            x = 10,\n            y = 69;\n\n        // background\n        context.fillStyle = '#0e0f19';\n        context.fillRect(0, 50, gap * 4 + width * 5 + 22, height);\n\n        // show FPS\n        Render.status(\n            context, x, y, width, graphHeight, deltaHistory.length, \n            Math.round(fps) + ' fps', \n            fps / Render._goodFps,\n            function(i) { return (deltaHistory[i] / deltaMean) - 1; }\n        );\n\n        // show engine delta\n        Render.status(\n            context, x + gap + width, y, width, graphHeight, engineDeltaHistory.length,\n            lastEngineDelta.toFixed(2) + ' dt', \n            Render._goodDelta / lastEngineDelta,\n            function(i) { return (engineDeltaHistory[i] / engineDeltaMean) - 1; }\n        );\n\n        // show engine update time\n        Render.status(\n            context, x + (gap + width) * 2, y, width, graphHeight, engineElapsedHistory.length,\n            engineElapsedMean.toFixed(2) + ' ut', \n            1 - (engineElapsedMean / Render._goodFps),\n            function(i) { return (engineElapsedHistory[i] / engineElapsedMean) - 1; }\n        );\n\n        // show render time\n        Render.status(\n            context, x + (gap + width) * 3, y, width, graphHeight, elapsedHistory.length,\n            elapsedMean.toFixed(2) + ' rt', \n            1 - (elapsedMean / Render._goodFps),\n            function(i) { return (elapsedHistory[i] / elapsedMean) - 1; }\n        );\n\n        // show effective speed\n        Render.status(\n            context, x + (gap + width) * 4, y, width, graphHeight, timestampElapsedHistory.length, \n            rateMean.toFixed(2) + ' x', \n            rateMean * rateMean * rateMean,\n            function(i) { return (((timestampElapsedHistory[i] / deltaHistory[i]) / rateMean) || 0) - 1; }\n        );\n    };\n\n    /**\n     * Renders a label, indicator and a chart.\n     * @private\n     * @method status\n     * @param {RenderingContext} context\n     * @param {number} x\n     * @param {number} y\n     * @param {number} width\n     * @param {number} height\n     * @param {number} count\n     * @param {string} label\n     * @param {string} indicator\n     * @param {function} plotY\n     */\n    Render.status = function(context, x, y, width, height, count, label, indicator, plotY) {\n        // background\n        context.strokeStyle = '#888';\n        context.fillStyle = '#444';\n        context.lineWidth = 1;\n        context.fillRect(x, y + 7, width, 1);\n\n        // chart\n        context.beginPath();\n        context.moveTo(x, y + 7 - height * Common.clamp(0.4 * plotY(0), -2, 2));\n        for (var i = 0; i < width; i += 1) {\n            context.lineTo(x + i, y + 7 - (i < count ? height * Common.clamp(0.4 * plotY(i), -2, 2) : 0));\n        }\n        context.stroke();\n\n        // indicator\n        context.fillStyle = 'hsl(' + Common.clamp(25 + 95 * indicator, 0, 120) + ',100%,60%)';\n        context.fillRect(x, y - 7, 4, 4);\n\n        // label\n        context.font = '12px Arial';\n        context.textBaseline = 'middle';\n        context.textAlign = 'right';\n        context.fillStyle = '#eee';\n        context.fillText(label, x + width, y - 5);\n    };\n\n    /**\n     * Description\n     * @private\n     * @method constraints\n     * @param {constraint[]} constraints\n     * @param {RenderingContext} context\n     */\n    Render.constraints = function(constraints, context) {\n        var c = context;\n\n        for (var i = 0; i < constraints.length; i++) {\n            var constraint = constraints[i];\n\n            if (!constraint.render.visible || !constraint.pointA || !constraint.pointB)\n                continue;\n\n            var bodyA = constraint.bodyA,\n                bodyB = constraint.bodyB,\n                start,\n                end;\n\n            if (bodyA) {\n                start = Vector.add(bodyA.position, constraint.pointA);\n            } else {\n                start = constraint.pointA;\n            }\n\n            if (constraint.render.type === 'pin') {\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n            } else {\n                if (bodyB) {\n                    end = Vector.add(bodyB.position, constraint.pointB);\n                } else {\n                    end = constraint.pointB;\n                }\n\n                c.beginPath();\n                c.moveTo(start.x, start.y);\n\n                if (constraint.render.type === 'spring') {\n                    var delta = Vector.sub(end, start),\n                        normal = Vector.perp(Vector.normalise(delta)),\n                        coils = Math.ceil(Common.clamp(constraint.length / 5, 12, 20)),\n                        offset;\n\n                    for (var j = 1; j < coils; j += 1) {\n                        offset = j % 2 === 0 ? 1 : -1;\n\n                        c.lineTo(\n                            start.x + delta.x * (j / coils) + normal.x * offset * 4,\n                            start.y + delta.y * (j / coils) + normal.y * offset * 4\n                        );\n                    }\n                }\n\n                c.lineTo(end.x, end.y);\n            }\n\n            if (constraint.render.lineWidth) {\n                c.lineWidth = constraint.render.lineWidth;\n                c.strokeStyle = constraint.render.strokeStyle;\n                c.stroke();\n            }\n\n            if (constraint.render.anchors) {\n                c.fillStyle = constraint.render.strokeStyle;\n                c.beginPath();\n                c.arc(start.x, start.y, 3, 0, 2 * Math.PI);\n                c.arc(end.x, end.y, 3, 0, 2 * Math.PI);\n                c.closePath();\n                c.fill();\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method bodies\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodies = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            showInternalEdges = options.showInternalEdges || !options.wireframes,\n            body,\n            part,\n            i,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                if (!part.render.visible)\n                    continue;\n\n                if (options.showSleeping && body.isSleeping) {\n                    c.globalAlpha = 0.5 * part.render.opacity;\n                } else if (part.render.opacity !== 1) {\n                    c.globalAlpha = part.render.opacity;\n                }\n\n                if (part.render.sprite && part.render.sprite.texture && !options.wireframes) {\n                    // part sprite\n                    var sprite = part.render.sprite,\n                        texture = _getTexture(render, sprite.texture);\n\n                    c.translate(part.position.x, part.position.y);\n                    c.rotate(part.angle);\n\n                    c.drawImage(\n                        texture,\n                        texture.width * -sprite.xOffset * sprite.xScale,\n                        texture.height * -sprite.yOffset * sprite.yScale,\n                        texture.width * sprite.xScale,\n                        texture.height * sprite.yScale\n                    );\n\n                    // revert translation, hopefully faster than save / restore\n                    c.rotate(-part.angle);\n                    c.translate(-part.position.x, -part.position.y);\n                } else {\n                    // part polygon\n                    if (part.circleRadius) {\n                        c.beginPath();\n                        c.arc(part.position.x, part.position.y, part.circleRadius, 0, 2 * Math.PI);\n                    } else {\n                        c.beginPath();\n                        c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                        for (var j = 1; j < part.vertices.length; j++) {\n                            if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                                c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                            } else {\n                                c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                            }\n\n                            if (part.vertices[j].isInternal && !showInternalEdges) {\n                                c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                            }\n                        }\n\n                        c.lineTo(part.vertices[0].x, part.vertices[0].y);\n                        c.closePath();\n                    }\n\n                    if (!options.wireframes) {\n                        c.fillStyle = part.render.fillStyle;\n\n                        if (part.render.lineWidth) {\n                            c.lineWidth = part.render.lineWidth;\n                            c.strokeStyle = part.render.strokeStyle;\n                            c.stroke();\n                        }\n\n                        c.fill();\n                    } else {\n                        c.lineWidth = 1;\n                        c.strokeStyle = '#bbb';\n                        c.stroke();\n                    }\n                }\n\n                c.globalAlpha = 1;\n            }\n        }\n    };\n\n    /**\n     * Optimised method for drawing body wireframes in one pass\n     * @private\n     * @method bodyWireframes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyWireframes = function(render, bodies, context) {\n        var c = context,\n            showInternalEdges = render.options.showInternalEdges,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render all bodies\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = body.parts.length > 1 ? 1 : 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n\n                c.moveTo(part.vertices[0].x, part.vertices[0].y);\n\n                for (j = 1; j < part.vertices.length; j++) {\n                    if (!part.vertices[j - 1].isInternal || showInternalEdges) {\n                        c.lineTo(part.vertices[j].x, part.vertices[j].y);\n                    } else {\n                        c.moveTo(part.vertices[j].x, part.vertices[j].y);\n                    }\n\n                    if (part.vertices[j].isInternal && !showInternalEdges) {\n                        c.moveTo(part.vertices[(j + 1) % part.vertices.length].x, part.vertices[(j + 1) % part.vertices.length].y);\n                    }\n                }\n\n                c.lineTo(part.vertices[0].x, part.vertices[0].y);\n            }\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = '#bbb';\n        c.stroke();\n    };\n\n    /**\n     * Optimised method for drawing body convex hull wireframes in one pass\n     * @private\n     * @method bodyConvexHulls\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyConvexHulls = function(render, bodies, context) {\n        var c = context,\n            body,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        // render convex hulls\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible || body.parts.length === 1)\n                continue;\n\n            c.moveTo(body.vertices[0].x, body.vertices[0].y);\n\n            for (j = 1; j < body.vertices.length; j++) {\n                c.lineTo(body.vertices[j].x, body.vertices[j].y);\n            }\n\n            c.lineTo(body.vertices[0].x, body.vertices[0].y);\n        }\n\n        c.lineWidth = 1;\n        c.strokeStyle = 'rgba(255,255,255,0.2)';\n        c.stroke();\n    };\n\n    /**\n     * Renders body vertex numbers.\n     * @private\n     * @method vertexNumbers\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.vertexNumbers = function(render, bodies, context) {\n        var c = context,\n            i,\n            j,\n            k;\n\n        for (i = 0; i < bodies.length; i++) {\n            var parts = bodies[i].parts;\n            for (k = parts.length > 1 ? 1 : 0; k < parts.length; k++) {\n                var part = parts[k];\n                for (j = 0; j < part.vertices.length; j++) {\n                    c.fillStyle = 'rgba(255,255,255,0.2)';\n                    c.fillText(i + '_' + j, part.position.x + (part.vertices[j].x - part.position.x) * 0.8, part.position.y + (part.vertices[j].y - part.position.y) * 0.8);\n                }\n            }\n        }\n    };\n\n    /**\n     * Renders mouse position.\n     * @private\n     * @method mousePosition\n     * @param {render} render\n     * @param {mouse} mouse\n     * @param {RenderingContext} context\n     */\n    Render.mousePosition = function(render, mouse, context) {\n        var c = context;\n        c.fillStyle = 'rgba(255,255,255,0.8)';\n        c.fillText(mouse.position.x + '  ' + mouse.position.y, mouse.position.x + 5, mouse.position.y - 5);\n    };\n\n    /**\n     * Draws body bounds\n     * @private\n     * @method bodyBounds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyBounds = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.render.visible) {\n                var parts = bodies[i].parts;\n                for (var j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    var part = parts[j];\n                    c.rect(part.bounds.min.x, part.bounds.min.y, part.bounds.max.x - part.bounds.min.x, part.bounds.max.y - part.bounds.min.y);\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,255,255,0.08)';\n        } else {\n            c.strokeStyle = 'rgba(0,0,0,0.1)';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Draws body angle indicators and axes\n     * @private\n     * @method bodyAxes\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyAxes = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            part,\n            i,\n            j,\n            k;\n\n        c.beginPath();\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                parts = body.parts;\n\n            if (!body.render.visible)\n                continue;\n\n            if (options.showAxes) {\n                // render all axes\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        var axis = part.axes[k];\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo(part.position.x + axis.x * 20, part.position.y + axis.y * 20);\n                    }\n                }\n            } else {\n                for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                    part = parts[j];\n                    for (k = 0; k < part.axes.length; k++) {\n                        // render a single axis indicator\n                        c.moveTo(part.position.x, part.position.y);\n                        c.lineTo((part.vertices[0].x + part.vertices[part.vertices.length-1].x) / 2,\n                            (part.vertices[0].y + part.vertices[part.vertices.length-1].y) / 2);\n                    }\n                }\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'indianred';\n            c.lineWidth = 1;\n        } else {\n            c.strokeStyle = 'rgba(255, 255, 255, 0.4)';\n            c.globalCompositeOperation = 'overlay';\n            c.lineWidth = 2;\n        }\n\n        c.stroke();\n        c.globalCompositeOperation = 'source-over';\n    };\n\n    /**\n     * Draws body positions\n     * @private\n     * @method bodyPositions\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyPositions = function(render, bodies, context) {\n        var c = context,\n            engine = render.engine,\n            options = render.options,\n            body,\n            part,\n            i,\n            k;\n\n        c.beginPath();\n\n        // render current positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            // handle compound parts\n            for (k = 0; k < body.parts.length; k++) {\n                part = body.parts[k];\n                c.arc(part.position.x, part.position.y, 3, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'indianred';\n        } else {\n            c.fillStyle = 'rgba(0,0,0,0.5)';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render previous positions\n        for (i = 0; i < bodies.length; i++) {\n            body = bodies[i];\n            if (body.render.visible) {\n                c.arc(body.positionPrev.x, body.positionPrev.y, 2, 0, 2 * Math.PI, false);\n                c.closePath();\n            }\n        }\n\n        c.fillStyle = 'rgba(255,165,0,0.8)';\n        c.fill();\n    };\n\n    /**\n     * Draws body velocity\n     * @private\n     * @method bodyVelocity\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyVelocity = function(render, bodies, context) {\n        var c = context;\n\n        c.beginPath();\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (!body.render.visible)\n                continue;\n\n            c.moveTo(body.position.x, body.position.y);\n            c.lineTo(body.position.x + (body.position.x - body.positionPrev.x) * 2, body.position.y + (body.position.y - body.positionPrev.y) * 2);\n        }\n\n        c.lineWidth = 3;\n        c.strokeStyle = 'cornflowerblue';\n        c.stroke();\n    };\n\n    /**\n     * Draws body ids\n     * @private\n     * @method bodyIds\n     * @param {render} render\n     * @param {body[]} bodies\n     * @param {RenderingContext} context\n     */\n    Render.bodyIds = function(render, bodies, context) {\n        var c = context,\n            i,\n            j;\n\n        for (i = 0; i < bodies.length; i++) {\n            if (!bodies[i].render.visible)\n                continue;\n\n            var parts = bodies[i].parts;\n            for (j = parts.length > 1 ? 1 : 0; j < parts.length; j++) {\n                var part = parts[j];\n                c.font = \"12px Arial\";\n                c.fillStyle = 'rgba(255,255,255,0.5)';\n                c.fillText(part.id, part.position.x + 10, part.position.y - 10);\n            }\n        }\n    };\n\n    /**\n     * Description\n     * @private\n     * @method collisions\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.collisions = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render collision positions\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            for (j = 0; j < pair.activeContacts.length; j++) {\n                var contact = pair.activeContacts[j],\n                    vertex = contact.vertex;\n                c.rect(vertex.x - 1.5, vertex.y - 1.5, 3.5, 3.5);\n            }\n        }\n\n        if (options.wireframes) {\n            c.fillStyle = 'rgba(255,255,255,0.7)';\n        } else {\n            c.fillStyle = 'orange';\n        }\n        c.fill();\n\n        c.beginPath();\n\n        // render collision normals\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n\n            if (pair.activeContacts.length > 0) {\n                var normalPosX = pair.activeContacts[0].vertex.x,\n                    normalPosY = pair.activeContacts[0].vertex.y;\n\n                if (pair.activeContacts.length === 2) {\n                    normalPosX = (pair.activeContacts[0].vertex.x + pair.activeContacts[1].vertex.x) / 2;\n                    normalPosY = (pair.activeContacts[0].vertex.y + pair.activeContacts[1].vertex.y) / 2;\n                }\n\n                if (collision.bodyB === collision.supports[0].body || collision.bodyA.isStatic === true) {\n                    c.moveTo(normalPosX - collision.normal.x * 8, normalPosY - collision.normal.y * 8);\n                } else {\n                    c.moveTo(normalPosX + collision.normal.x * 8, normalPosY + collision.normal.y * 8);\n                }\n\n                c.lineTo(normalPosX, normalPosY);\n            }\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.7)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method separations\n     * @param {render} render\n     * @param {pair[]} pairs\n     * @param {RenderingContext} context\n     */\n    Render.separations = function(render, pairs, context) {\n        var c = context,\n            options = render.options,\n            pair,\n            collision,\n            corrected,\n            bodyA,\n            bodyB,\n            i,\n            j;\n\n        c.beginPath();\n\n        // render separations\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.bodyA;\n            bodyB = collision.bodyB;\n\n            var k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyB.isStatic) k = 0;\n\n            c.moveTo(bodyB.position.x, bodyB.position.y);\n            c.lineTo(bodyB.position.x - collision.penetration.x * k, bodyB.position.y - collision.penetration.y * k);\n\n            k = 1;\n\n            if (!bodyB.isStatic && !bodyA.isStatic) k = 0.5;\n            if (bodyA.isStatic) k = 0;\n\n            c.moveTo(bodyA.position.x, bodyA.position.y);\n            c.lineTo(bodyA.position.x + collision.penetration.x * k, bodyA.position.y + collision.penetration.y * k);\n        }\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,165,0,0.5)';\n        } else {\n            c.strokeStyle = 'orange';\n        }\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method grid\n     * @param {render} render\n     * @param {grid} grid\n     * @param {RenderingContext} context\n     */\n    Render.grid = function(render, grid, context) {\n        var c = context,\n            options = render.options;\n\n        if (options.wireframes) {\n            c.strokeStyle = 'rgba(255,180,0,0.1)';\n        } else {\n            c.strokeStyle = 'rgba(255,180,0,0.5)';\n        }\n\n        c.beginPath();\n\n        var bucketKeys = Common.keys(grid.buckets);\n\n        for (var i = 0; i < bucketKeys.length; i++) {\n            var bucketId = bucketKeys[i];\n\n            if (grid.buckets[bucketId].length < 2)\n                continue;\n\n            var region = bucketId.split(/C|R/);\n            c.rect(0.5 + parseInt(region[1], 10) * grid.bucketWidth,\n                0.5 + parseInt(region[2], 10) * grid.bucketHeight,\n                grid.bucketWidth,\n                grid.bucketHeight);\n        }\n\n        c.lineWidth = 1;\n        c.stroke();\n    };\n\n    /**\n     * Description\n     * @private\n     * @method inspector\n     * @param {inspector} inspector\n     * @param {RenderingContext} context\n     */\n    Render.inspector = function(inspector, context) {\n        var engine = inspector.engine,\n            selected = inspector.selected,\n            render = inspector.render,\n            options = render.options,\n            bounds;\n\n        if (options.hasBounds) {\n            var boundsWidth = render.bounds.max.x - render.bounds.min.x,\n                boundsHeight = render.bounds.max.y - render.bounds.min.y,\n                boundsScaleX = boundsWidth / render.options.width,\n                boundsScaleY = boundsHeight / render.options.height;\n\n            context.scale(1 / boundsScaleX, 1 / boundsScaleY);\n            context.translate(-render.bounds.min.x, -render.bounds.min.y);\n        }\n\n        for (var i = 0; i < selected.length; i++) {\n            var item = selected[i].data;\n\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.9)';\n            context.setLineDash([1,2]);\n\n            switch (item.type) {\n\n            case 'body':\n\n                // render body selections\n                bounds = item.bounds;\n                context.beginPath();\n                context.rect(Math.floor(bounds.min.x - 3), Math.floor(bounds.min.y - 3),\n                    Math.floor(bounds.max.x - bounds.min.x + 6), Math.floor(bounds.max.y - bounds.min.y + 6));\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            case 'constraint':\n\n                // render constraint selections\n                var point = item.pointA;\n                if (item.bodyA)\n                    point = item.pointB;\n                context.beginPath();\n                context.arc(point.x, point.y, 10, 0, 2 * Math.PI);\n                context.closePath();\n                context.stroke();\n\n                break;\n\n            }\n\n            context.setLineDash([]);\n            context.translate(-0.5, -0.5);\n        }\n\n        // render selection region\n        if (inspector.selectStart !== null) {\n            context.translate(0.5, 0.5);\n            context.lineWidth = 1;\n            context.strokeStyle = 'rgba(255,165,0,0.6)';\n            context.fillStyle = 'rgba(255,165,0,0.1)';\n            bounds = inspector.selectBounds;\n            context.beginPath();\n            context.rect(Math.floor(bounds.min.x), Math.floor(bounds.min.y),\n                Math.floor(bounds.max.x - bounds.min.x), Math.floor(bounds.max.y - bounds.min.y));\n            context.closePath();\n            context.stroke();\n            context.fill();\n            context.translate(-0.5, -0.5);\n        }\n\n        if (options.hasBounds)\n            context.setTransform(1, 0, 0, 1, 0, 0);\n    };\n\n    /**\n     * Updates render timing.\n     * @method _updateTiming\n     * @private\n     * @param {render} render\n     * @param {number} time\n     */\n    var _updateTiming = function(render, time) {\n        var engine = render.engine,\n            timing = render.timing,\n            historySize = timing.historySize,\n            timestamp = engine.timing.timestamp;\n\n        timing.delta = time - timing.lastTime || Render._goodDelta;\n        timing.lastTime = time;\n\n        timing.timestampElapsed = timestamp - timing.lastTimestamp || 0;\n        timing.lastTimestamp = timestamp;\n\n        timing.deltaHistory.unshift(timing.delta);\n        timing.deltaHistory.length = Math.min(timing.deltaHistory.length, historySize);\n\n        timing.engineDeltaHistory.unshift(engine.timing.lastDelta);\n        timing.engineDeltaHistory.length = Math.min(timing.engineDeltaHistory.length, historySize);\n\n        timing.timestampElapsedHistory.unshift(timing.timestampElapsed);\n        timing.timestampElapsedHistory.length = Math.min(timing.timestampElapsedHistory.length, historySize);\n\n        timing.engineElapsedHistory.unshift(engine.timing.lastElapsed);\n        timing.engineElapsedHistory.length = Math.min(timing.engineElapsedHistory.length, historySize);\n\n        timing.elapsedHistory.unshift(timing.lastElapsed);\n        timing.elapsedHistory.length = Math.min(timing.elapsedHistory.length, historySize);\n    };\n\n    /**\n     * Returns the mean value of the given numbers.\n     * @method _mean\n     * @private\n     * @param {Number[]} values\n     * @return {Number} the mean of given values\n     */\n    var _mean = function(values) {\n        var result = 0;\n        for (var i = 0; i < values.length; i += 1) {\n            result += values[i];\n        }\n        return (result / values.length) || 0;\n    };\n\n    /**\n     * @method _createCanvas\n     * @private\n     * @param {} width\n     * @param {} height\n     * @return canvas\n     */\n    var _createCanvas = function(width, height) {\n        var canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        canvas.oncontextmenu = function() { return false; };\n        canvas.onselectstart = function() { return false; };\n        return canvas;\n    };\n\n    /**\n     * Gets the pixel ratio of the canvas.\n     * @method _getPixelRatio\n     * @private\n     * @param {HTMLElement} canvas\n     * @return {Number} pixel ratio\n     */\n    var _getPixelRatio = function(canvas) {\n        var context = canvas.getContext('2d'),\n            devicePixelRatio = window.devicePixelRatio || 1,\n            backingStorePixelRatio = context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio\n                                      || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio\n                                      || context.backingStorePixelRatio || 1;\n\n        return devicePixelRatio / backingStorePixelRatio;\n    };\n\n    /**\n     * Gets the requested texture (an Image) via its path\n     * @method _getTexture\n     * @private\n     * @param {render} render\n     * @param {string} imagePath\n     * @return {Image} texture\n     */\n    var _getTexture = function(render, imagePath) {\n        var image = render.textures[imagePath];\n\n        if (image)\n            return image;\n\n        image = render.textures[imagePath] = new Image();\n        image.src = imagePath;\n\n        return image;\n    };\n\n    /**\n     * Applies the background to the canvas using CSS.\n     * @method applyBackground\n     * @private\n     * @param {render} render\n     * @param {string} background\n     */\n    var _applyBackground = function(render, background) {\n        var cssBackground = background;\n\n        if (/(jpg|gif|png)$/.test(background))\n            cssBackground = 'url(' + background + ')';\n\n        render.canvas.style.background = cssBackground;\n        render.canvas.style.backgroundSize = \"contain\";\n        render.currentBackground = background;\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired before rendering\n    *\n    * @event beforeRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after rendering\n    *\n    * @event afterRender\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A back-reference to the `Matter.Render` module.\n     *\n     * @property controller\n     * @type render\n     */\n\n    /**\n     * A reference to the `Matter.Engine` instance to be used.\n     *\n     * @property engine\n     * @type engine\n     */\n\n    /**\n     * A reference to the element where the canvas is to be inserted (if `render.canvas` has not been specified)\n     *\n     * @property element\n     * @type HTMLElement\n     * @default null\n     */\n\n    /**\n     * The canvas element to render to. If not specified, one will be created if `render.element` has been specified.\n     *\n     * @property canvas\n     * @type HTMLCanvasElement\n     * @default null\n     */\n\n    /**\n     * A `Bounds` object that specifies the drawing view region.\n     * Rendering will be automatically transformed and scaled to fit within the canvas size (`render.options.width` and `render.options.height`).\n     * This allows for creating views that can pan or zoom around the scene.\n     * You must also set `render.options.hasBounds` to `true` to enable bounded rendering.\n     *\n     * @property bounds\n     * @type bounds\n     */\n\n    /**\n     * The 2d rendering context from the `render.canvas` element.\n     *\n     * @property context\n     * @type CanvasRenderingContext2D\n     */\n\n    /**\n     * The sprite texture cache.\n     *\n     * @property textures\n     * @type {}\n     */\n\n    /**\n     * The mouse to render if `render.options.showMousePosition` is enabled.\n     *\n     * @property mouse\n     * @type mouse\n     * @default null\n     */\n\n    /**\n     * The configuration options of the renderer.\n     *\n     * @property options\n     * @type {}\n     */\n\n    /**\n     * The target width in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.width\n     * @type number\n     * @default 800\n     */\n\n    /**\n     * The target height in pixels of the `render.canvas` to be created.\n     * See also the `options.pixelRatio` property to change render quality.\n     *\n     * @property options.height\n     * @type number\n     * @default 600\n     */\n\n    /**\n     * The [pixel ratio](https://developer.mozilla.org/en-US/docs/Web/API/Window/devicePixelRatio) to use when rendering.\n     *\n     * @property options.pixelRatio\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A CSS background color string to use when `render.options.wireframes` is disabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.background\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A CSS background color string to use when `render.options.wireframes` is enabled.\n     * This may be also set to `'transparent'` or equivalent.\n     *\n     * @property options.wireframeBackground\n     * @type string\n     * @default '#14151f'\n     */\n\n    /**\n     * A flag that specifies if `render.bounds` should be used when rendering.\n     *\n     * @property options.hasBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable all debug information overlays together.  \n     * This includes and has priority over the values of:\n     *\n     * - `render.options.showStats`\n     * - `render.options.showPerformance`\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the engine stats info overlay.  \n     * From left to right, the values shown are:\n     *\n     * - body parts total\n     * - body total\n     * - constraints total\n     * - composites total\n     * - collision pairs total\n     *\n     * @property options.showStats\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable performance charts.  \n     * From left to right, the values shown are:\n     *\n     * - average render frequency (e.g. 60 fps)\n     * - exact engine delta time used for last update (e.g. 16.66ms)\n     * - average engine execution duration (e.g. 5.00ms)\n     * - average render execution duration (e.g. 0.40ms)\n     * - average effective play speed (e.g. '1.00x' is 'real-time')\n     *\n     * Each value is recorded over a fixed sample of past frames (60 frames).\n     *\n     * A chart shown below each value indicates the variance from the average over the sample.\n     * The more stable or fixed the value is the flatter the chart will appear.\n     *\n     * @property options.showPerformance\n     * @type boolean\n     * @default false\n     */\n    \n    /**\n     * A flag to enable or disable rendering entirely.\n     *\n     * @property options.enabled\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to toggle wireframe rendering otherwise solid fill rendering is used.\n     *\n     * @property options.wireframes\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable sleeping bodies indicators.\n     *\n     * @property options.showSleeping\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A flag to enable or disable the debug information overlay.\n     *\n     * @property options.showDebug\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision broadphase debug overlay.\n     *\n     * @property options.showBroadphase\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body bounds debug overlay.\n     *\n     * @property options.showBounds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body velocity debug overlay.\n     *\n     * @property options.showVelocity\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body collisions debug overlay.\n     *\n     * @property options.showCollisions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the collision resolver separations debug overlay.\n     *\n     * @property options.showSeparations\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body axes debug overlay.\n     *\n     * @property options.showAxes\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body positions debug overlay.\n     *\n     * @property options.showPositions\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body angle debug overlay.\n     *\n     * @property options.showAngleIndicator\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body and part ids debug overlay.\n     *\n     * @property options.showIds\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body vertex numbers debug overlay.\n     *\n     * @property options.showVertexNumbers\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body convex hulls debug overlay.\n     *\n     * @property options.showConvexHulls\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the body internal edges debug overlay.\n     *\n     * @property options.showInternalEdges\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A flag to enable or disable the mouse position debug overlay.\n     *\n     * @property options.showMousePosition\n     * @type boolean\n     * @default false\n     */\n\n})();\n\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports) {\n\n/**\n* The `Matter.Contact` module contains methods for creating and manipulating collision contacts.\n*\n* @class Contact\n*/\n\nvar Contact = {};\n\nmodule.exports = Contact;\n\n(function() {\n\n    /**\n     * Creates a new contact.\n     * @method create\n     * @param {vertex} vertex\n     * @return {contact} A new contact\n     */\n    Contact.create = function(vertex) {\n        return {\n            id: Contact.id(vertex),\n            vertex: vertex,\n            normalImpulse: 0,\n            tangentImpulse: 0\n        };\n    };\n    \n    /**\n     * Generates a contact id.\n     * @method id\n     * @param {vertex} vertex\n     * @return {string} Unique contactID\n     */\n    Contact.id = function(vertex) {\n        return vertex.body.id + '_' + vertex.index;\n    };\n\n})();\n\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Engine` module contains methods for creating and manipulating engines.\n* An engine is a controller that manages updating the simulation of the world.\n* See `Matter.Runner` for an optional game loop utility.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Engine\n*/\n\nvar Engine = {};\n\nmodule.exports = Engine;\n\nvar Sleeping = __webpack_require__(7);\nvar Resolver = __webpack_require__(19);\nvar Detector = __webpack_require__(13);\nvar Pairs = __webpack_require__(20);\nvar Grid = __webpack_require__(21);\nvar Events = __webpack_require__(4);\nvar Composite = __webpack_require__(5);\nvar Constraint = __webpack_require__(8);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\n\n(function() {\n\n    /**\n     * Creates a new engine. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {object} [options]\n     * @return {engine} engine\n     */\n    Engine.create = function(options) {\n        options = options || {};\n\n        var defaults = {\n            positionIterations: 6,\n            velocityIterations: 4,\n            constraintIterations: 2,\n            enableSleeping: false,\n            events: [],\n            plugin: {},\n            grid: null,\n            gravity: {\n                x: 0,\n                y: 1,\n                scale: 0.001\n            },\n            timing: {\n                timestamp: 0,\n                timeScale: 1,\n                lastDelta: 0,\n                lastElapsed: 0\n            }\n        };\n\n        var engine = Common.extend(defaults, options);\n\n        engine.world = options.world || Composite.create({ label: 'World' });\n        engine.grid = Grid.create(options.grid || options.broadphase);\n        engine.pairs = Pairs.create();\n\n        // temporary back compatibility\n        engine.world.gravity = engine.gravity;\n        engine.broadphase = engine.grid;\n        engine.metrics = {};\n        \n        return engine;\n    };\n\n    /**\n     * Moves the simulation forward in time by `delta` ms.\n     * The `correction` argument is an optional `Number` that specifies the time correction factor to apply to the update.\n     * This can help improve the accuracy of the simulation in cases where `delta` is changing between updates.\n     * The value of `correction` is defined as `delta / lastDelta`, i.e. the percentage change of `delta` over the last step.\n     * Therefore the value is always `1` (no correction) when `delta` constant (or when no correction is desired, which is the default).\n     * See the paper on <a href=\"http://lonesock.net/article/verlet.html\">Time Corrected Verlet</a> for more information.\n     *\n     * Triggers `beforeUpdate` and `afterUpdate` events.\n     * Triggers `collisionStart`, `collisionActive` and `collisionEnd` events.\n     * @method update\n     * @param {engine} engine\n     * @param {number} [delta=16.666]\n     * @param {number} [correction=1]\n     */\n    Engine.update = function(engine, delta, correction) {\n        var startTime = Common.now();\n\n        delta = delta || 1000 / 60;\n        correction = correction || 1;\n\n        var world = engine.world,\n            timing = engine.timing,\n            grid = engine.grid,\n            gridPairs = [],\n            i;\n\n        // increment timestamp\n        timing.timestamp += delta * timing.timeScale;\n        timing.lastDelta = delta * timing.timeScale;\n\n        // create an event object\n        var event = {\n            timestamp: timing.timestamp\n        };\n\n        Events.trigger(engine, 'beforeUpdate', event);\n\n        // get lists of all bodies and constraints, no matter what composites they are in\n        var allBodies = Composite.allBodies(world),\n            allConstraints = Composite.allConstraints(world);\n\n        // if sleeping enabled, call the sleeping controller\n        if (engine.enableSleeping)\n            Sleeping.update(allBodies, timing.timeScale);\n\n        // applies gravity to all bodies\n        Engine._bodiesApplyGravity(allBodies, engine.gravity);\n\n        // update all body position and rotation by integration\n        Engine._bodiesUpdate(allBodies, delta, timing.timeScale, correction, world.bounds);\n\n        // update all constraints (first pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, timing.timeScale);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // broadphase pass: find potential collision pairs\n\n        // if world is dirty, we must flush the whole grid\n        if (world.isModified)\n            Grid.clear(grid);\n\n        // update the grid buckets based on current bodies\n        Grid.update(grid, allBodies, engine, world.isModified);\n        gridPairs = grid.pairsList;\n\n        // clear all composite modified flags\n        if (world.isModified) {\n            Composite.setModified(world, false, false, true);\n        }\n\n        // narrowphase pass: find actual collisions, then create or update collision pairs\n        var collisions = Detector.collisions(gridPairs, engine);\n\n        // update collision pairs\n        var pairs = engine.pairs,\n            timestamp = timing.timestamp;\n        Pairs.update(pairs, collisions, timestamp);\n        Pairs.removeOld(pairs, timestamp);\n\n        // wake up bodies involved in collisions\n        if (engine.enableSleeping)\n            Sleeping.afterCollisions(pairs.list, timing.timeScale);\n\n        // trigger collision events\n        if (pairs.collisionStart.length > 0)\n            Events.trigger(engine, 'collisionStart', { pairs: pairs.collisionStart });\n\n        // iteratively resolve position between collisions\n        Resolver.preSolvePosition(pairs.list);\n        for (i = 0; i < engine.positionIterations; i++) {\n            Resolver.solvePosition(pairs.list, timing.timeScale);\n        }\n        Resolver.postSolvePosition(allBodies);\n\n        // update all constraints (second pass)\n        Constraint.preSolveAll(allBodies);\n        for (i = 0; i < engine.constraintIterations; i++) {\n            Constraint.solveAll(allConstraints, timing.timeScale);\n        }\n        Constraint.postSolveAll(allBodies);\n\n        // iteratively resolve velocity between collisions\n        Resolver.preSolveVelocity(pairs.list);\n        for (i = 0; i < engine.velocityIterations; i++) {\n            Resolver.solveVelocity(pairs.list, timing.timeScale);\n        }\n\n        // trigger collision events\n        if (pairs.collisionActive.length > 0)\n            Events.trigger(engine, 'collisionActive', { pairs: pairs.collisionActive });\n\n        if (pairs.collisionEnd.length > 0)\n            Events.trigger(engine, 'collisionEnd', { pairs: pairs.collisionEnd });\n\n        // clear force buffers\n        Engine._bodiesClearForces(allBodies);\n\n        Events.trigger(engine, 'afterUpdate', event);\n\n        // log the time elapsed computing this update\n        engine.timing.lastElapsed = Common.now() - startTime;\n\n        return engine;\n    };\n    \n    /**\n     * Merges two engines by keeping the configuration of `engineA` but replacing the world with the one from `engineB`.\n     * @method merge\n     * @param {engine} engineA\n     * @param {engine} engineB\n     */\n    Engine.merge = function(engineA, engineB) {\n        Common.extend(engineA, engineB);\n        \n        if (engineB.world) {\n            engineA.world = engineB.world;\n\n            Engine.clear(engineA);\n\n            var bodies = Composite.allBodies(engineA.world);\n\n            for (var i = 0; i < bodies.length; i++) {\n                var body = bodies[i];\n                Sleeping.set(body, false);\n                body.id = Common.nextId();\n            }\n        }\n    };\n\n    /**\n     * Clears the engine including the world, pairs and broadphase.\n     * @method clear\n     * @param {engine} engine\n     */\n    Engine.clear = function(engine) {\n        var world = engine.world,\n            bodies = Composite.allBodies(world);\n\n        Pairs.clear(engine.pairs);\n        Grid.clear(engine.grid);\n        Grid.update(engine.grid, bodies, engine, true);\n    };\n\n    /**\n     * Zeroes the `body.force` and `body.torque` force buffers.\n     * @method _bodiesClearForces\n     * @private\n     * @param {body[]} bodies\n     */\n    Engine._bodiesClearForces = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            // reset force buffers\n            body.force.x = 0;\n            body.force.y = 0;\n            body.torque = 0;\n        }\n    };\n\n    /**\n     * Applys a mass dependant force to all given bodies.\n     * @method _bodiesApplyGravity\n     * @private\n     * @param {body[]} bodies\n     * @param {vector} gravity\n     */\n    Engine._bodiesApplyGravity = function(bodies, gravity) {\n        var gravityScale = typeof gravity.scale !== 'undefined' ? gravity.scale : 0.001;\n\n        if ((gravity.x === 0 && gravity.y === 0) || gravityScale === 0) {\n            return;\n        }\n        \n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            // apply gravity\n            body.force.y += body.mass * gravity.y * gravityScale;\n            body.force.x += body.mass * gravity.x * gravityScale;\n        }\n    };\n\n    /**\n     * Applys `Body.update` to all given `bodies`.\n     * @method _bodiesUpdate\n     * @private\n     * @param {body[]} bodies\n     * @param {number} deltaTime \n     * The amount of time elapsed between updates\n     * @param {number} timeScale\n     * @param {number} correction \n     * The Verlet correction factor (deltaTime / lastDeltaTime)\n     * @param {bounds} worldBounds\n     */\n    Engine._bodiesUpdate = function(bodies, deltaTime, timeScale, correction, worldBounds) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isStatic || body.isSleeping)\n                continue;\n\n            Body.update(body, deltaTime, timeScale, correction);\n        }\n    };\n\n    /**\n     * A deprecated alias for `Runner.run`, use `Matter.Runner.run(engine)` instead and see `Matter.Runner` for more information.\n     * @deprecated use Matter.Runner.run(engine) instead\n     * @method run\n     * @param {engine} engine\n     */\n\n    /**\n    * Fired just before an update\n    *\n    * @event beforeUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update and all collision events\n    *\n    * @event afterUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have started to collide in the current tick (if any)\n    *\n    * @event collisionStart\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that are colliding in the current tick (if any)\n    *\n    * @event collisionActive\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine update, provides a list of all pairs that have ended collision in the current tick (if any)\n    *\n    * @event collisionEnd\n    * @param {} event An event object\n    * @param {} event.pairs List of affected pairs\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * An integer `Number` that specifies the number of position iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property positionIterations\n     * @type number\n     * @default 6\n     */\n\n    /**\n     * An integer `Number` that specifies the number of velocity iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     *\n     * @property velocityIterations\n     * @type number\n     * @default 4\n     */\n\n    /**\n     * An integer `Number` that specifies the number of constraint iterations to perform each update.\n     * The higher the value, the higher quality the simulation will be at the expense of performance.\n     * The default value of `2` is usually very adequate.\n     *\n     * @property constraintIterations\n     * @type number\n     * @default 2\n     */\n\n    /**\n     * A flag that specifies whether the engine should allow sleeping via the `Matter.Sleeping` module.\n     * Sleeping can improve stability and performance, but often at the expense of accuracy.\n     *\n     * @property enableSleeping\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * An `Object` containing properties regarding the timing systems of the engine. \n     *\n     * @property timing\n     * @type object\n     */\n\n    /**\n     * A `Number` that specifies the global scaling factor of time for all bodies.\n     * A value of `0` freezes the simulation.\n     * A value of `0.1` gives a slow-motion effect.\n     * A value of `1.2` gives a speed-up effect.\n     *\n     * @property timing.timeScale\n     * @type number\n     * @default 1\n     */\n\n    /**\n     * A `Number` that specifies the current simulation-time in milliseconds starting from `0`. \n     * It is incremented on every `Engine.update` by the given `delta` argument. \n     *\n     * @property timing.timestamp\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the total execution time elapsed during the last `Engine.update` in milliseconds.\n     * It is updated by timing from the start of the last `Engine.update` call until it ends.\n     *\n     * This value will also include the total execution time of all event handlers directly or indirectly triggered by the engine update.\n     *\n     * @property timing.lastElapsed\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Number` that represents the `delta` value used in the last engine update.\n     *\n     * @property timing.lastDelta\n     * @type number\n     * @default 0\n     */\n\n    /**\n     * A `Matter.Grid` instance.\n     *\n     * @property grid\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * Replaced by and now alias for `engine.grid`.\n     *\n     * @deprecated use `engine.grid`\n     * @property broadphase\n     * @type grid\n     * @default a Matter.Grid instance\n     */\n\n    /**\n     * The root `Matter.Composite` instance that will contain all bodies, constraints and other composites to be simulated by this engine.\n     *\n     * @property world\n     * @type composite\n     * @default a Matter.Composite instance\n     */\n\n    /**\n     * An object reserved for storing plugin-specific properties.\n     *\n     * @property plugin\n     * @type {}\n     */\n\n    /**\n     * The gravity to apply on all bodies in `engine.world`.\n     *\n     * @property gravity\n     * @type object\n     */\n\n    /**\n     * The gravity x component.\n     *\n     * @property gravity.x\n     * @type object\n     * @default 0\n     */\n\n    /**\n     * The gravity y component.\n     *\n     * @property gravity.y\n     * @type object\n     * @default 1\n     */\n\n    /**\n     * The gravity scale factor.\n     *\n     * @property gravity.scale\n     * @type object\n     * @default 0.001\n     */\n\n})();\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Resolver` module contains methods for resolving collision pairs.\n*\n* @class Resolver\n*/\n\nvar Resolver = {};\n\nmodule.exports = Resolver;\n\nvar Vertices = __webpack_require__(3);\nvar Vector = __webpack_require__(2);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    Resolver._restingThresh = 4;\n    Resolver._restingThreshTangent = 6;\n    Resolver._positionDampen = 0.9;\n    Resolver._positionWarming = 0.8;\n    Resolver._frictionNormalMultiplier = 5;\n\n    /**\n     * Prepare pairs for position solving.\n     * @method preSolvePosition\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolvePosition = function(pairs) {\n        var i,\n            pair,\n            activeCount;\n\n        // find total contacts on each body\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive)\n                continue;\n            \n            activeCount = pair.activeContacts.length;\n            pair.collision.parentA.totalContacts += activeCount;\n            pair.collision.parentB.totalContacts += activeCount;\n        }\n    };\n\n    /**\n     * Find a solution for pair positions.\n     * @method solvePosition\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Resolver.solvePosition = function(pairs, timeScale) {\n        var i,\n            pair,\n            collision,\n            bodyA,\n            bodyB,\n            normal,\n            bodyBtoA,\n            contactShare,\n            positionImpulse,\n            contactCount = {},\n            tempA = Vector._temp[0],\n            tempB = Vector._temp[1],\n            tempC = Vector._temp[2],\n            tempD = Vector._temp[3];\n\n        // find impulses required to resolve penetration\n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n\n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n\n            // get current separation between body edges involved in collision\n            bodyBtoA = Vector.sub(Vector.add(bodyB.positionImpulse, bodyB.position, tempA), \n                Vector.add(bodyA.positionImpulse, \n                    Vector.sub(bodyB.position, collision.penetration, tempB), tempC), tempD);\n\n            pair.separation = Vector.dot(normal, bodyBtoA);\n        }\n        \n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n\n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n            positionImpulse = (pair.separation - pair.slop) * timeScale;\n\n            if (bodyA.isStatic || bodyB.isStatic)\n                positionImpulse *= 2;\n            \n            if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                contactShare = Resolver._positionDampen / bodyA.totalContacts;\n                bodyA.positionImpulse.x += normal.x * positionImpulse * contactShare;\n                bodyA.positionImpulse.y += normal.y * positionImpulse * contactShare;\n            }\n\n            if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                contactShare = Resolver._positionDampen / bodyB.totalContacts;\n                bodyB.positionImpulse.x -= normal.x * positionImpulse * contactShare;\n                bodyB.positionImpulse.y -= normal.y * positionImpulse * contactShare;\n            }\n        }\n    };\n\n    /**\n     * Apply position resolution.\n     * @method postSolvePosition\n     * @param {body[]} bodies\n     */\n    Resolver.postSolvePosition = function(bodies) {\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            // reset contact count\n            body.totalContacts = 0;\n\n            if (body.positionImpulse.x !== 0 || body.positionImpulse.y !== 0) {\n                // update body geometry\n                for (var j = 0; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n                    Vertices.translate(part.vertices, body.positionImpulse);\n                    Bounds.update(part.bounds, part.vertices, body.velocity);\n                    part.position.x += body.positionImpulse.x;\n                    part.position.y += body.positionImpulse.y;\n                }\n\n                // move the body without changing velocity\n                body.positionPrev.x += body.positionImpulse.x;\n                body.positionPrev.y += body.positionImpulse.y;\n\n                if (Vector.dot(body.positionImpulse, body.velocity) < 0) {\n                    // reset cached impulse if the body has velocity along it\n                    body.positionImpulse.x = 0;\n                    body.positionImpulse.y = 0;\n                } else {\n                    // warm the next iteration\n                    body.positionImpulse.x *= Resolver._positionWarming;\n                    body.positionImpulse.y *= Resolver._positionWarming;\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare pairs for velocity solving.\n     * @method preSolveVelocity\n     * @param {pair[]} pairs\n     */\n    Resolver.preSolveVelocity = function(pairs) {\n        var i,\n            j,\n            pair,\n            contacts,\n            collision,\n            bodyA,\n            bodyB,\n            normal,\n            tangent,\n            contact,\n            contactVertex,\n            normalImpulse,\n            tangentImpulse,\n            offset,\n            impulse = Vector._temp[0],\n            tempA = Vector._temp[1];\n        \n        for (i = 0; i < pairs.length; i++) {\n            pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            contacts = pair.activeContacts;\n            collision = pair.collision;\n            bodyA = collision.parentA;\n            bodyB = collision.parentB;\n            normal = collision.normal;\n            tangent = collision.tangent;\n\n            // resolve each contact\n            for (j = 0; j < contacts.length; j++) {\n                contact = contacts[j];\n                contactVertex = contact.vertex;\n                normalImpulse = contact.normalImpulse;\n                tangentImpulse = contact.tangentImpulse;\n\n                if (normalImpulse !== 0 || tangentImpulse !== 0) {\n                    // total impulse from contact\n                    impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\n                    impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\n                    \n                    // apply impulse from contact\n                    if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                        offset = Vector.sub(contactVertex, bodyA.position, tempA);\n                        bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\n                        bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\n                        bodyA.anglePrev += Vector.cross(offset, impulse) * bodyA.inverseInertia;\n                    }\n\n                    if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                        offset = Vector.sub(contactVertex, bodyB.position, tempA);\n                        bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\n                        bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\n                        bodyB.anglePrev -= Vector.cross(offset, impulse) * bodyB.inverseInertia;\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Find a solution for pair velocities.\n     * @method solveVelocity\n     * @param {pair[]} pairs\n     * @param {number} timeScale\n     */\n    Resolver.solveVelocity = function(pairs, timeScale) {\n        var timeScaleSquared = timeScale * timeScale,\n            impulse = Vector._temp[0],\n            tempA = Vector._temp[1],\n            tempB = Vector._temp[2],\n            tempC = Vector._temp[3],\n            tempD = Vector._temp[4],\n            tempE = Vector._temp[5];\n        \n        for (var i = 0; i < pairs.length; i++) {\n            var pair = pairs[i];\n            \n            if (!pair.isActive || pair.isSensor)\n                continue;\n            \n            var collision = pair.collision,\n                bodyA = collision.parentA,\n                bodyB = collision.parentB,\n                normal = collision.normal,\n                tangent = collision.tangent,\n                contacts = pair.activeContacts,\n                contactShare = 1 / contacts.length;\n\n            // update body velocities\n            bodyA.velocity.x = bodyA.position.x - bodyA.positionPrev.x;\n            bodyA.velocity.y = bodyA.position.y - bodyA.positionPrev.y;\n            bodyB.velocity.x = bodyB.position.x - bodyB.positionPrev.x;\n            bodyB.velocity.y = bodyB.position.y - bodyB.positionPrev.y;\n            bodyA.angularVelocity = bodyA.angle - bodyA.anglePrev;\n            bodyB.angularVelocity = bodyB.angle - bodyB.anglePrev;\n\n            // resolve each contact\n            for (var j = 0; j < contacts.length; j++) {\n                var contact = contacts[j],\n                    contactVertex = contact.vertex,\n                    offsetA = Vector.sub(contactVertex, bodyA.position, tempA),\n                    offsetB = Vector.sub(contactVertex, bodyB.position, tempB),\n                    velocityPointA = Vector.add(bodyA.velocity, Vector.mult(Vector.perp(offsetA), bodyA.angularVelocity), tempC),\n                    velocityPointB = Vector.add(bodyB.velocity, Vector.mult(Vector.perp(offsetB), bodyB.angularVelocity), tempD), \n                    relativeVelocity = Vector.sub(velocityPointA, velocityPointB, tempE),\n                    normalVelocity = Vector.dot(normal, relativeVelocity);\n\n                var tangentVelocity = Vector.dot(tangent, relativeVelocity),\n                    tangentSpeed = Math.abs(tangentVelocity),\n                    tangentVelocityDirection = Common.sign(tangentVelocity);\n\n                // raw impulses\n                var normalImpulse = (1 + pair.restitution) * normalVelocity,\n                    normalForce = Common.clamp(pair.separation + normalVelocity, 0, 1) * Resolver._frictionNormalMultiplier;\n\n                // coulomb friction\n                var tangentImpulse = tangentVelocity,\n                    maxFriction = Infinity;\n\n                if (tangentSpeed > pair.friction * pair.frictionStatic * normalForce * timeScaleSquared) {\n                    maxFriction = tangentSpeed;\n                    tangentImpulse = Common.clamp(\n                        pair.friction * tangentVelocityDirection * timeScaleSquared,\n                        -maxFriction, maxFriction\n                    );\n                }\n\n                // modify impulses accounting for mass, inertia and offset\n                var oAcN = Vector.cross(offsetA, normal),\n                    oBcN = Vector.cross(offsetB, normal),\n                    share = contactShare / (bodyA.inverseMass + bodyB.inverseMass + bodyA.inverseInertia * oAcN * oAcN  + bodyB.inverseInertia * oBcN * oBcN);\n\n                normalImpulse *= share;\n                tangentImpulse *= share;\n\n                // handle high velocity and resting collisions separately\n                if (normalVelocity < 0 && normalVelocity * normalVelocity > Resolver._restingThresh * timeScaleSquared) {\n                    // high normal velocity so clear cached contact normal impulse\n                    contact.normalImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // impulse constraint tends to 0\n                    var contactNormalImpulse = contact.normalImpulse;\n                    contact.normalImpulse = Math.min(contact.normalImpulse + normalImpulse, 0);\n                    normalImpulse = contact.normalImpulse - contactNormalImpulse;\n                }\n\n                // handle high velocity and resting collisions separately\n                if (tangentVelocity * tangentVelocity > Resolver._restingThreshTangent * timeScaleSquared) {\n                    // high tangent velocity so clear cached contact tangent impulse\n                    contact.tangentImpulse = 0;\n                } else {\n                    // solve resting collision constraints using Erin Catto's method (GDC08)\n                    // tangent impulse tends to -tangentSpeed or +tangentSpeed\n                    var contactTangentImpulse = contact.tangentImpulse;\n                    contact.tangentImpulse = Common.clamp(contact.tangentImpulse + tangentImpulse, -maxFriction, maxFriction);\n                    tangentImpulse = contact.tangentImpulse - contactTangentImpulse;\n                }\n\n                // total impulse from contact\n                impulse.x = (normal.x * normalImpulse) + (tangent.x * tangentImpulse);\n                impulse.y = (normal.y * normalImpulse) + (tangent.y * tangentImpulse);\n                \n                // apply impulse from contact\n                if (!(bodyA.isStatic || bodyA.isSleeping)) {\n                    bodyA.positionPrev.x += impulse.x * bodyA.inverseMass;\n                    bodyA.positionPrev.y += impulse.y * bodyA.inverseMass;\n                    bodyA.anglePrev += Vector.cross(offsetA, impulse) * bodyA.inverseInertia;\n                }\n\n                if (!(bodyB.isStatic || bodyB.isSleeping)) {\n                    bodyB.positionPrev.x -= impulse.x * bodyB.inverseMass;\n                    bodyB.positionPrev.y -= impulse.y * bodyB.inverseMass;\n                    bodyB.anglePrev -= Vector.cross(offsetB, impulse) * bodyB.inverseInertia;\n                }\n            }\n        }\n    };\n\n})();\n\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Pairs` module contains methods for creating and manipulating collision pair sets.\n*\n* @class Pairs\n*/\n\nvar Pairs = {};\n\nmodule.exports = Pairs;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\n\n(function() {\n    \n    Pairs._pairMaxIdleLife = 1000;\n\n    /**\n     * Creates a new pairs structure.\n     * @method create\n     * @param {object} options\n     * @return {pairs} A new pairs structure\n     */\n    Pairs.create = function(options) {\n        return Common.extend({ \n            table: {},\n            list: [],\n            collisionStart: [],\n            collisionActive: [],\n            collisionEnd: []\n        }, options);\n    };\n\n    /**\n     * Updates pairs given a list of collisions.\n     * @method update\n     * @param {object} pairs\n     * @param {collision[]} collisions\n     * @param {number} timestamp\n     */\n    Pairs.update = function(pairs, collisions, timestamp) {\n        var pairsList = pairs.list,\n            pairsTable = pairs.table,\n            collisionStart = pairs.collisionStart,\n            collisionEnd = pairs.collisionEnd,\n            collisionActive = pairs.collisionActive,\n            collision,\n            pairId,\n            pair,\n            i;\n\n        // clear collision state arrays, but maintain old reference\n        collisionStart.length = 0;\n        collisionEnd.length = 0;\n        collisionActive.length = 0;\n\n        for (i = 0; i < pairsList.length; i++) {\n            pairsList[i].confirmedActive = false;\n        }\n\n        for (i = 0; i < collisions.length; i++) {\n            collision = collisions[i];\n\n            if (collision.collided) {\n                pairId = Pair.id(collision.bodyA, collision.bodyB);\n\n                pair = pairsTable[pairId];\n                \n                if (pair) {\n                    // pair already exists (but may or may not be active)\n                    if (pair.isActive) {\n                        // pair exists and is active\n                        collisionActive.push(pair);\n                    } else {\n                        // pair exists but was inactive, so a collision has just started again\n                        collisionStart.push(pair);\n                    }\n\n                    // update the pair\n                    Pair.update(pair, collision, timestamp);\n                    pair.confirmedActive = true;\n                } else {\n                    // pair did not exist, create a new pair\n                    pair = Pair.create(collision, timestamp);\n                    pairsTable[pairId] = pair;\n\n                    // push the new pair\n                    collisionStart.push(pair);\n                    pairsList.push(pair);\n                }\n            }\n        }\n\n        // deactivate previously active pairs that are now inactive\n        for (i = 0; i < pairsList.length; i++) {\n            pair = pairsList[i];\n            if (pair.isActive && !pair.confirmedActive) {\n                Pair.setActive(pair, false, timestamp);\n                collisionEnd.push(pair);\n            }\n        }\n    };\n    \n    /**\n     * Finds and removes pairs that have been inactive for a set amount of time.\n     * @method removeOld\n     * @param {object} pairs\n     * @param {number} timestamp\n     */\n    Pairs.removeOld = function(pairs, timestamp) {\n        var pairsList = pairs.list,\n            pairsTable = pairs.table,\n            indexesToRemove = [],\n            pair,\n            collision,\n            pairIndex,\n            i;\n\n        for (i = 0; i < pairsList.length; i++) {\n            pair = pairsList[i];\n            collision = pair.collision;\n            \n            // never remove sleeping pairs\n            if (collision.bodyA.isSleeping || collision.bodyB.isSleeping) {\n                pair.timeUpdated = timestamp;\n                continue;\n            }\n\n            // if pair is inactive for too long, mark it to be removed\n            if (timestamp - pair.timeUpdated > Pairs._pairMaxIdleLife) {\n                indexesToRemove.push(i);\n            }\n        }\n\n        // remove marked pairs\n        for (i = 0; i < indexesToRemove.length; i++) {\n            pairIndex = indexesToRemove[i] - i;\n            pair = pairsList[pairIndex];\n            delete pairsTable[pair.id];\n            pairsList.splice(pairIndex, 1);\n        }\n    };\n\n    /**\n     * Clears the given pairs structure.\n     * @method clear\n     * @param {pairs} pairs\n     * @return {pairs} pairs\n     */\n    Pairs.clear = function(pairs) {\n        pairs.table = {};\n        pairs.list.length = 0;\n        pairs.collisionStart.length = 0;\n        pairs.collisionActive.length = 0;\n        pairs.collisionEnd.length = 0;\n        return pairs;\n    };\n\n})();\n\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Grid` module contains methods for creating and manipulating collision broadphase grid structures.\n*\n* @class Grid\n*/\n\nvar Grid = {};\n\nmodule.exports = Grid;\n\nvar Pair = __webpack_require__(9);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Creates a new grid.\n     * @method create\n     * @param {} options\n     * @return {grid} A new grid\n     */\n    Grid.create = function(options) {\n        var defaults = {\n            buckets: {},\n            pairs: {},\n            pairsList: [],\n            bucketWidth: 48,\n            bucketHeight: 48\n        };\n\n        return Common.extend(defaults, options);\n    };\n\n    /**\n     * The width of a single grid bucket.\n     *\n     * @property bucketWidth\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * The height of a single grid bucket.\n     *\n     * @property bucketHeight\n     * @type number\n     * @default 48\n     */\n\n    /**\n     * Updates the grid.\n     * @method update\n     * @param {grid} grid\n     * @param {body[]} bodies\n     * @param {engine} engine\n     * @param {boolean} forceUpdate\n     */\n    Grid.update = function(grid, bodies, engine, forceUpdate) {\n        var i, col, row,\n            world = engine.world,\n            buckets = grid.buckets,\n            bucket,\n            bucketId,\n            gridChanged = false;\n\n        for (i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n\n            if (body.isSleeping && !forceUpdate)\n                continue;\n\n            // temporary back compatibility bounds check\n            if (world.bounds && (body.bounds.max.x < world.bounds.min.x || body.bounds.min.x > world.bounds.max.x\n                || body.bounds.max.y < world.bounds.min.y || body.bounds.min.y > world.bounds.max.y))\n                continue;\n\n            var newRegion = Grid._getRegion(grid, body);\n\n            // if the body has changed grid region\n            if (!body.region || newRegion.id !== body.region.id || forceUpdate) {\n\n                if (!body.region || forceUpdate)\n                    body.region = newRegion;\n\n                var union = Grid._regionUnion(newRegion, body.region);\n\n                // update grid buckets affected by region change\n                // iterate over the union of both regions\n                for (col = union.startCol; col <= union.endCol; col++) {\n                    for (row = union.startRow; row <= union.endRow; row++) {\n                        bucketId = Grid._getBucketId(col, row);\n                        bucket = buckets[bucketId];\n\n                        var isInsideNewRegion = (col >= newRegion.startCol && col <= newRegion.endCol\n                                                && row >= newRegion.startRow && row <= newRegion.endRow);\n\n                        var isInsideOldRegion = (col >= body.region.startCol && col <= body.region.endCol\n                                                && row >= body.region.startRow && row <= body.region.endRow);\n\n                        // remove from old region buckets\n                        if (!isInsideNewRegion && isInsideOldRegion) {\n                            if (isInsideOldRegion) {\n                                if (bucket)\n                                    Grid._bucketRemoveBody(grid, bucket, body);\n                            }\n                        }\n\n                        // add to new region buckets\n                        if (body.region === newRegion || (isInsideNewRegion && !isInsideOldRegion) || forceUpdate) {\n                            if (!bucket)\n                                bucket = Grid._createBucket(buckets, bucketId);\n                            Grid._bucketAddBody(grid, bucket, body);\n                        }\n                    }\n                }\n\n                // set the new region\n                body.region = newRegion;\n\n                // flag changes so we can update pairs\n                gridChanged = true;\n            }\n        }\n\n        // update pairs list only if pairs changed (i.e. a body changed region)\n        if (gridChanged)\n            grid.pairsList = Grid._createActivePairsList(grid);\n    };\n\n    /**\n     * Clears the grid.\n     * @method clear\n     * @param {grid} grid\n     */\n    Grid.clear = function(grid) {\n        grid.buckets = {};\n        grid.pairs = {};\n        grid.pairsList = [];\n    };\n\n    /**\n     * Finds the union of two regions.\n     * @method _regionUnion\n     * @private\n     * @param {} regionA\n     * @param {} regionB\n     * @return {} region\n     */\n    Grid._regionUnion = function(regionA, regionB) {\n        var startCol = Math.min(regionA.startCol, regionB.startCol),\n            endCol = Math.max(regionA.endCol, regionB.endCol),\n            startRow = Math.min(regionA.startRow, regionB.startRow),\n            endRow = Math.max(regionA.endRow, regionB.endRow);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Gets the region a given body falls in for a given grid.\n     * @method _getRegion\n     * @private\n     * @param {} grid\n     * @param {} body\n     * @return {} region\n     */\n    Grid._getRegion = function(grid, body) {\n        var bounds = body.bounds,\n            startCol = Math.floor(bounds.min.x / grid.bucketWidth),\n            endCol = Math.floor(bounds.max.x / grid.bucketWidth),\n            startRow = Math.floor(bounds.min.y / grid.bucketHeight),\n            endRow = Math.floor(bounds.max.y / grid.bucketHeight);\n\n        return Grid._createRegion(startCol, endCol, startRow, endRow);\n    };\n\n    /**\n     * Creates a region.\n     * @method _createRegion\n     * @private\n     * @param {} startCol\n     * @param {} endCol\n     * @param {} startRow\n     * @param {} endRow\n     * @return {} region\n     */\n    Grid._createRegion = function(startCol, endCol, startRow, endRow) {\n        return { \n            id: startCol + ',' + endCol + ',' + startRow + ',' + endRow,\n            startCol: startCol, \n            endCol: endCol, \n            startRow: startRow, \n            endRow: endRow \n        };\n    };\n\n    /**\n     * Gets the bucket id at the given position.\n     * @method _getBucketId\n     * @private\n     * @param {} column\n     * @param {} row\n     * @return {string} bucket id\n     */\n    Grid._getBucketId = function(column, row) {\n        return 'C' + column + 'R' + row;\n    };\n\n    /**\n     * Creates a bucket.\n     * @method _createBucket\n     * @private\n     * @param {} buckets\n     * @param {} bucketId\n     * @return {} bucket\n     */\n    Grid._createBucket = function(buckets, bucketId) {\n        var bucket = buckets[bucketId] = [];\n        return bucket;\n    };\n\n    /**\n     * Adds a body to a bucket.\n     * @method _bucketAddBody\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketAddBody = function(grid, bucket, body) {\n        // add new pairs\n        for (var i = 0; i < bucket.length; i++) {\n            var bodyB = bucket[i];\n\n            if (body.id === bodyB.id || (body.isStatic && bodyB.isStatic))\n                continue;\n\n            // keep track of the number of buckets the pair exists in\n            // important for Grid.update to work\n            var pairId = Pair.id(body, bodyB),\n                pair = grid.pairs[pairId];\n\n            if (pair) {\n                pair[2] += 1;\n            } else {\n                grid.pairs[pairId] = [body, bodyB, 1];\n            }\n        }\n\n        // add to bodies (after pairs, otherwise pairs with self)\n        bucket.push(body);\n    };\n\n    /**\n     * Removes a body from a bucket.\n     * @method _bucketRemoveBody\n     * @private\n     * @param {} grid\n     * @param {} bucket\n     * @param {} body\n     */\n    Grid._bucketRemoveBody = function(grid, bucket, body) {\n        // remove from bucket\n        bucket.splice(Common.indexOf(bucket, body), 1);\n\n        // update pair counts\n        for (var i = 0; i < bucket.length; i++) {\n            // keep track of the number of buckets the pair exists in\n            // important for _createActivePairsList to work\n            var bodyB = bucket[i],\n                pairId = Pair.id(body, bodyB),\n                pair = grid.pairs[pairId];\n\n            if (pair)\n                pair[2] -= 1;\n        }\n    };\n\n    /**\n     * Generates a list of the active pairs in the grid.\n     * @method _createActivePairsList\n     * @private\n     * @param {} grid\n     * @return [] pairs\n     */\n    Grid._createActivePairsList = function(grid) {\n        var pairKeys,\n            pair,\n            pairs = [];\n\n        // grid.pairs is used as a hashmap\n        pairKeys = Common.keys(grid.pairs);\n\n        // iterate over grid.pairs\n        for (var k = 0; k < pairKeys.length; k++) {\n            pair = grid.pairs[pairKeys[k]];\n\n            // if pair exists in at least one bucket\n            // it is a pair that needs further collision testing so push it\n            if (pair[2] > 0) {\n                pairs.push(pair);\n            } else {\n                delete grid.pairs[pairKeys[k]];\n            }\n        }\n\n        return pairs;\n    };\n    \n})();\n\n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Matter = module.exports = __webpack_require__(23);\r\n\r\nMatter.Axes = __webpack_require__(10);\r\nMatter.Bodies = __webpack_require__(11);\r\nMatter.Body = __webpack_require__(6);\r\nMatter.Bounds = __webpack_require__(1);\r\nMatter.Common = __webpack_require__(0);\r\nMatter.Composite = __webpack_require__(5);\r\nMatter.Composites = __webpack_require__(24);\r\nMatter.Constraint = __webpack_require__(8);\r\nMatter.Contact = __webpack_require__(17);\r\nMatter.Detector = __webpack_require__(13);\r\nMatter.Engine = __webpack_require__(18);\r\nMatter.Events = __webpack_require__(4);\r\nMatter.Grid = __webpack_require__(21);\r\nMatter.Mouse = __webpack_require__(12);\r\nMatter.MouseConstraint = __webpack_require__(25);\r\nMatter.Pair = __webpack_require__(9);\r\nMatter.Pairs = __webpack_require__(20);\r\nMatter.Plugin = __webpack_require__(15);\r\nMatter.Query = __webpack_require__(26);\r\nMatter.Render = __webpack_require__(16);\r\nMatter.Resolver = __webpack_require__(19);\r\nMatter.Runner = __webpack_require__(27);\r\nMatter.SAT = __webpack_require__(14);\r\nMatter.Sleeping = __webpack_require__(7);\r\nMatter.Svg = __webpack_require__(28);\r\nMatter.Vector = __webpack_require__(2);\r\nMatter.Vertices = __webpack_require__(3);\r\nMatter.World = __webpack_require__(29);\r\n\r\n// temporary back compatibility\r\nMatter.Engine.run = Matter.Runner.run;\r\nMatter.Common.deprecated(Matter.Engine, 'run', 'Engine.run  use Matter.Runner.run(engine) instead');\r\n\n\n/***/ }),\n/* 23 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\r\n* The `Matter` module is the top level namespace. It also includes a function for installing plugins on top of the library.\r\n*\r\n* @class Matter\r\n*/\r\n\r\nvar Matter = {};\r\n\r\nmodule.exports = Matter;\r\n\r\nvar Plugin = __webpack_require__(15);\r\nvar Common = __webpack_require__(0);\r\n\r\n(function() {\r\n\r\n    /**\r\n     * The library name.\r\n     * @property name\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.name = 'matter-js';\r\n\r\n    /**\r\n     * The library version.\r\n     * @property version\r\n     * @readOnly\r\n     * @type {String}\r\n     */\r\n    Matter.version =  true ? \"0.17.1\" : undefined;\r\n\r\n    /**\r\n     * A list of plugin dependencies to be installed. These are normally set and installed through `Matter.use`.\r\n     * Alternatively you may set `Matter.uses` manually and install them by calling `Plugin.use(Matter)`.\r\n     * @property uses\r\n     * @type {Array}\r\n     */\r\n    Matter.uses = [];\r\n\r\n    /**\r\n     * The plugins that have been installed through `Matter.Plugin.install`. Read only.\r\n     * @property used\r\n     * @readOnly\r\n     * @type {Array}\r\n     */\r\n    Matter.used = [];\r\n\r\n    /**\r\n     * Installs the given plugins on the `Matter` namespace.\r\n     * This is a short-hand for `Plugin.use`, see it for more information.\r\n     * Call this function once at the start of your code, with all of the plugins you wish to install as arguments.\r\n     * Avoid calling this function multiple times unless you intend to manually control installation order.\r\n     * @method use\r\n     * @param ...plugin {Function} The plugin(s) to install on `base` (multi-argument).\r\n     */\r\n    Matter.use = function() {\r\n        Plugin.use(Matter, Array.prototype.slice.call(arguments));\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute before the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method before\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain before the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.before = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathBefore(Matter, path, func);\r\n    };\r\n\r\n    /**\r\n     * Chains a function to excute after the original function on the given `path` relative to `Matter`.\r\n     * See also docs for `Common.chain`.\r\n     * @method after\r\n     * @param {string} path The path relative to `Matter`\r\n     * @param {function} func The function to chain after the original\r\n     * @return {function} The chained function that replaced the original\r\n     */\r\n    Matter.after = function(path, func) {\r\n        path = path.replace(/^Matter./, '');\r\n        return Common.chainPathAfter(Matter, path, func);\r\n    };\r\n\r\n})();\r\n\n\n/***/ }),\n/* 24 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Composites` module contains factory methods for creating composite bodies\n* with commonly used configurations (such as stacks and chains).\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Composites\n*/\n\nvar Composites = {};\n\nmodule.exports = Composites;\n\nvar Composite = __webpack_require__(5);\nvar Constraint = __webpack_require__(8);\nvar Common = __webpack_require__(0);\nvar Body = __webpack_require__(6);\nvar Bodies = __webpack_require__(11);\nvar deprecated = Common.deprecated;\n\n(function() {\n\n    /**\n     * Create a new composite containing bodies created in the callback in a grid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method stack\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.stack = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\n        var stack = Composite.create({ label: 'Stack' }),\n            x = xx,\n            y = yy,\n            lastBody,\n            i = 0;\n\n        for (var row = 0; row < rows; row++) {\n            var maxHeight = 0;\n            \n            for (var column = 0; column < columns; column++) {\n                var body = callback(x, y, column, row, lastBody, i);\n                    \n                if (body) {\n                    var bodyHeight = body.bounds.max.y - body.bounds.min.y,\n                        bodyWidth = body.bounds.max.x - body.bounds.min.x; \n\n                    if (bodyHeight > maxHeight)\n                        maxHeight = bodyHeight;\n                    \n                    Body.translate(body, { x: bodyWidth * 0.5, y: bodyHeight * 0.5 });\n\n                    x = body.bounds.max.x + columnGap;\n\n                    Composite.addBody(stack, body);\n                    \n                    lastBody = body;\n                    i += 1;\n                } else {\n                    x += columnGap;\n                }\n            }\n            \n            y += maxHeight + rowGap;\n            x = xx;\n        }\n\n        return stack;\n    };\n    \n    /**\n     * Chains all bodies in the given composite together using constraints.\n     * @method chain\n     * @param {composite} composite\n     * @param {number} xOffsetA\n     * @param {number} yOffsetA\n     * @param {number} xOffsetB\n     * @param {number} yOffsetB\n     * @param {object} options\n     * @return {composite} A new composite containing objects chained together with constraints\n     */\n    Composites.chain = function(composite, xOffsetA, yOffsetA, xOffsetB, yOffsetB, options) {\n        var bodies = composite.bodies;\n        \n        for (var i = 1; i < bodies.length; i++) {\n            var bodyA = bodies[i - 1],\n                bodyB = bodies[i],\n                bodyAHeight = bodyA.bounds.max.y - bodyA.bounds.min.y,\n                bodyAWidth = bodyA.bounds.max.x - bodyA.bounds.min.x, \n                bodyBHeight = bodyB.bounds.max.y - bodyB.bounds.min.y,\n                bodyBWidth = bodyB.bounds.max.x - bodyB.bounds.min.x;\n        \n            var defaults = {\n                bodyA: bodyA,\n                pointA: { x: bodyAWidth * xOffsetA, y: bodyAHeight * yOffsetA },\n                bodyB: bodyB,\n                pointB: { x: bodyBWidth * xOffsetB, y: bodyBHeight * yOffsetB }\n            };\n            \n            var constraint = Common.extend(defaults, options);\n        \n            Composite.addConstraint(composite, Constraint.create(constraint));\n        }\n\n        composite.label += ' Chain';\n        \n        return composite;\n    };\n\n    /**\n     * Connects bodies in the composite with constraints in a grid pattern, with optional cross braces.\n     * @method mesh\n     * @param {composite} composite\n     * @param {number} columns\n     * @param {number} rows\n     * @param {boolean} crossBrace\n     * @param {object} options\n     * @return {composite} The composite containing objects meshed together with constraints\n     */\n    Composites.mesh = function(composite, columns, rows, crossBrace, options) {\n        var bodies = composite.bodies,\n            row,\n            col,\n            bodyA,\n            bodyB,\n            bodyC;\n        \n        for (row = 0; row < rows; row++) {\n            for (col = 1; col < columns; col++) {\n                bodyA = bodies[(col - 1) + (row * columns)];\n                bodyB = bodies[col + (row * columns)];\n                Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n            }\n\n            if (row > 0) {\n                for (col = 0; col < columns; col++) {\n                    bodyA = bodies[col + ((row - 1) * columns)];\n                    bodyB = bodies[col + (row * columns)];\n                    Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyA, bodyB: bodyB }, options)));\n\n                    if (crossBrace && col > 0) {\n                        bodyC = bodies[(col - 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n\n                    if (crossBrace && col < columns - 1) {\n                        bodyC = bodies[(col + 1) + ((row - 1) * columns)];\n                        Composite.addConstraint(composite, Constraint.create(Common.extend({ bodyA: bodyC, bodyB: bodyB }, options)));\n                    }\n                }\n            }\n        }\n\n        composite.label += ' Mesh';\n        \n        return composite;\n    };\n    \n    /**\n     * Create a new composite containing bodies created in the callback in a pyramid arrangement.\n     * This function uses the body's bounds to prevent overlaps.\n     * @method pyramid\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {function} callback\n     * @return {composite} A new composite containing objects created in the callback\n     */\n    Composites.pyramid = function(xx, yy, columns, rows, columnGap, rowGap, callback) {\n        return Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y, column, row, lastBody, i) {\n            var actualRows = Math.min(rows, Math.ceil(columns / 2)),\n                lastBodyWidth = lastBody ? lastBody.bounds.max.x - lastBody.bounds.min.x : 0;\n            \n            if (row > actualRows)\n                return;\n            \n            // reverse row order\n            row = actualRows - row;\n            \n            var start = row,\n                end = columns - 1 - row;\n\n            if (column < start || column > end)\n                return;\n            \n            // retroactively fix the first body's position, since width was unknown\n            if (i === 1) {\n                Body.translate(lastBody, { x: (column + (columns % 2 === 1 ? 1 : -1)) * lastBodyWidth, y: 0 });\n            }\n\n            var xOffset = lastBody ? column * lastBodyWidth : 0;\n            \n            return callback(xx + xOffset + column * columnGap, y, column, row, lastBody, i);\n        });\n    };\n\n    /**\n     * This has now moved to the [newtonsCradle example](https://github.com/liabru/matter-js/blob/master/examples/newtonsCradle.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to newtonsCradle example\n     * @method newtonsCradle\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} number\n     * @param {number} size\n     * @param {number} length\n     * @return {composite} A new composite newtonsCradle body\n     */\n    Composites.newtonsCradle = function(xx, yy, number, size, length) {\n        var newtonsCradle = Composite.create({ label: 'Newtons Cradle' });\n\n        for (var i = 0; i < number; i++) {\n            var separation = 1.9,\n                circle = Bodies.circle(xx + i * (size * separation), yy + length, size, \n                    { inertia: Infinity, restitution: 1, friction: 0, frictionAir: 0.0001, slop: 1 }),\n                constraint = Constraint.create({ pointA: { x: xx + i * (size * separation), y: yy }, bodyB: circle });\n\n            Composite.addBody(newtonsCradle, circle);\n            Composite.addConstraint(newtonsCradle, constraint);\n        }\n\n        return newtonsCradle;\n    };\n\n    deprecated(Composites, 'newtonsCradle', 'Composites.newtonsCradle  moved to newtonsCradle example');\n    \n    /**\n     * This has now moved to the [car example](https://github.com/liabru/matter-js/blob/master/examples/car.js), follow that instead as this function is deprecated here.\n     * @deprecated moved to car example\n     * @method car\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} width\n     * @param {number} height\n     * @param {number} wheelSize\n     * @return {composite} A new composite car body\n     */\n    Composites.car = function(xx, yy, width, height, wheelSize) {\n        var group = Body.nextGroup(true),\n            wheelBase = 20,\n            wheelAOffset = -width * 0.5 + wheelBase,\n            wheelBOffset = width * 0.5 - wheelBase,\n            wheelYOffset = 0;\n    \n        var car = Composite.create({ label: 'Car' }),\n            body = Bodies.rectangle(xx, yy, width, height, { \n                collisionFilter: {\n                    group: group\n                },\n                chamfer: {\n                    radius: height * 0.5\n                },\n                density: 0.0002\n            });\n    \n        var wheelA = Bodies.circle(xx + wheelAOffset, yy + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var wheelB = Bodies.circle(xx + wheelBOffset, yy + wheelYOffset, wheelSize, { \n            collisionFilter: {\n                group: group\n            },\n            friction: 0.8\n        });\n                    \n        var axelA = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelAOffset, y: wheelYOffset },\n            bodyA: wheelA,\n            stiffness: 1,\n            length: 0\n        });\n                        \n        var axelB = Constraint.create({\n            bodyB: body,\n            pointB: { x: wheelBOffset, y: wheelYOffset },\n            bodyA: wheelB,\n            stiffness: 1,\n            length: 0\n        });\n        \n        Composite.addBody(car, body);\n        Composite.addBody(car, wheelA);\n        Composite.addBody(car, wheelB);\n        Composite.addConstraint(car, axelA);\n        Composite.addConstraint(car, axelB);\n\n        return car;\n    };\n\n    deprecated(Composites, 'car', 'Composites.car  moved to car example');\n\n    /**\n     * This has now moved to the [softBody example](https://github.com/liabru/matter-js/blob/master/examples/softBody.js)\n     * and the [cloth example](https://github.com/liabru/matter-js/blob/master/examples/cloth.js), follow those instead as this function is deprecated here.\n     * @deprecated moved to softBody and cloth examples\n     * @method softBody\n     * @param {number} xx\n     * @param {number} yy\n     * @param {number} columns\n     * @param {number} rows\n     * @param {number} columnGap\n     * @param {number} rowGap\n     * @param {boolean} crossBrace\n     * @param {number} particleRadius\n     * @param {} particleOptions\n     * @param {} constraintOptions\n     * @return {composite} A new composite softBody\n     */\n    Composites.softBody = function(xx, yy, columns, rows, columnGap, rowGap, crossBrace, particleRadius, particleOptions, constraintOptions) {\n        particleOptions = Common.extend({ inertia: Infinity }, particleOptions);\n        constraintOptions = Common.extend({ stiffness: 0.2, render: { type: 'line', anchors: false } }, constraintOptions);\n\n        var softBody = Composites.stack(xx, yy, columns, rows, columnGap, rowGap, function(x, y) {\n            return Bodies.circle(x, y, particleRadius, particleOptions);\n        });\n\n        Composites.mesh(softBody, columns, rows, crossBrace, constraintOptions);\n\n        softBody.label = 'Soft Body';\n\n        return softBody;\n    };\n\n    deprecated(Composites, 'softBody', 'Composites.softBody  moved to softBody and cloth examples');\n})();\n\n\n/***/ }),\n/* 25 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.MouseConstraint` module contains methods for creating mouse constraints.\n* Mouse constraints are used for allowing user interaction, providing the ability to move bodies via the mouse or touch.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class MouseConstraint\n*/\n\nvar MouseConstraint = {};\n\nmodule.exports = MouseConstraint;\n\nvar Vertices = __webpack_require__(3);\nvar Sleeping = __webpack_require__(7);\nvar Mouse = __webpack_require__(12);\nvar Events = __webpack_require__(4);\nvar Detector = __webpack_require__(13);\nvar Constraint = __webpack_require__(8);\nvar Composite = __webpack_require__(5);\nvar Common = __webpack_require__(0);\nvar Bounds = __webpack_require__(1);\n\n(function() {\n\n    /**\n     * Creates a new mouse constraint.\n     * All properties have default values, and many are pre-calculated automatically based on other properties.\n     * See the properties section below for detailed information on what you can pass via the `options` object.\n     * @method create\n     * @param {engine} engine\n     * @param {} options\n     * @return {MouseConstraint} A new MouseConstraint\n     */\n    MouseConstraint.create = function(engine, options) {\n        var mouse = (engine ? engine.mouse : null) || (options ? options.mouse : null);\n\n        if (!mouse) {\n            if (engine && engine.render && engine.render.canvas) {\n                mouse = Mouse.create(engine.render.canvas);\n            } else if (options && options.element) {\n                mouse = Mouse.create(options.element);\n            } else {\n                mouse = Mouse.create();\n                Common.warn('MouseConstraint.create: options.mouse was undefined, options.element was undefined, may not function as expected');\n            }\n        }\n\n        var constraint = Constraint.create({ \n            label: 'Mouse Constraint',\n            pointA: mouse.position,\n            pointB: { x: 0, y: 0 },\n            length: 0.01, \n            stiffness: 0.1,\n            angularStiffness: 1,\n            render: {\n                strokeStyle: '#90EE90',\n                lineWidth: 3\n            }\n        });\n\n        var defaults = {\n            type: 'mouseConstraint',\n            mouse: mouse,\n            element: null,\n            body: null,\n            constraint: constraint,\n            collisionFilter: {\n                category: 0x0001,\n                mask: 0xFFFFFFFF,\n                group: 0\n            }\n        };\n\n        var mouseConstraint = Common.extend(defaults, options);\n\n        Events.on(engine, 'beforeUpdate', function() {\n            var allBodies = Composite.allBodies(engine.world);\n            MouseConstraint.update(mouseConstraint, allBodies);\n            MouseConstraint._triggerEvents(mouseConstraint);\n        });\n\n        return mouseConstraint;\n    };\n\n    /**\n     * Updates the given mouse constraint.\n     * @private\n     * @method update\n     * @param {MouseConstraint} mouseConstraint\n     * @param {body[]} bodies\n     */\n    MouseConstraint.update = function(mouseConstraint, bodies) {\n        var mouse = mouseConstraint.mouse,\n            constraint = mouseConstraint.constraint,\n            body = mouseConstraint.body;\n\n        if (mouse.button === 0) {\n            if (!constraint.bodyB) {\n                for (var i = 0; i < bodies.length; i++) {\n                    body = bodies[i];\n                    if (Bounds.contains(body.bounds, mouse.position) \n                            && Detector.canCollide(body.collisionFilter, mouseConstraint.collisionFilter)) {\n                        for (var j = body.parts.length > 1 ? 1 : 0; j < body.parts.length; j++) {\n                            var part = body.parts[j];\n                            if (Vertices.contains(part.vertices, mouse.position)) {\n                                constraint.pointA = mouse.position;\n                                constraint.bodyB = mouseConstraint.body = body;\n                                constraint.pointB = { x: mouse.position.x - body.position.x, y: mouse.position.y - body.position.y };\n                                constraint.angleB = body.angle;\n\n                                Sleeping.set(body, false);\n                                Events.trigger(mouseConstraint, 'startdrag', { mouse: mouse, body: body });\n\n                                break;\n                            }\n                        }\n                    }\n                }\n            } else {\n                Sleeping.set(constraint.bodyB, false);\n                constraint.pointA = mouse.position;\n            }\n        } else {\n            constraint.bodyB = mouseConstraint.body = null;\n            constraint.pointB = null;\n\n            if (body)\n                Events.trigger(mouseConstraint, 'enddrag', { mouse: mouse, body: body });\n        }\n    };\n\n    /**\n     * Triggers mouse constraint events.\n     * @method _triggerEvents\n     * @private\n     * @param {mouse} mouseConstraint\n     */\n    MouseConstraint._triggerEvents = function(mouseConstraint) {\n        var mouse = mouseConstraint.mouse,\n            mouseEvents = mouse.sourceEvents;\n\n        if (mouseEvents.mousemove)\n            Events.trigger(mouseConstraint, 'mousemove', { mouse: mouse });\n\n        if (mouseEvents.mousedown)\n            Events.trigger(mouseConstraint, 'mousedown', { mouse: mouse });\n\n        if (mouseEvents.mouseup)\n            Events.trigger(mouseConstraint, 'mouseup', { mouse: mouse });\n\n        // reset the mouse state ready for the next step\n        Mouse.clearSourceEvents(mouse);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired when the mouse has moved (or a touch moves) during the last step\n    *\n    * @event mousemove\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is down (or a touch has started) during the last step\n    *\n    * @event mousedown\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the mouse is up (or a touch has ended) during the last step\n    *\n    * @event mouseup\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user starts dragging a body\n    *\n    * @event startdrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired when the user ends dragging a body\n    *\n    * @event enddrag\n    * @param {} event An event object\n    * @param {mouse} event.mouse The engine's mouse instance\n    * @param {body} event.body The body that has stopped being dragged\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A `String` denoting the type of object.\n     *\n     * @property type\n     * @type string\n     * @default \"constraint\"\n     * @readOnly\n     */\n\n    /**\n     * The `Mouse` instance in use. If not supplied in `MouseConstraint.create`, one will be created.\n     *\n     * @property mouse\n     * @type mouse\n     * @default mouse\n     */\n\n    /**\n     * The `Body` that is currently being moved by the user, or `null` if no body.\n     *\n     * @property body\n     * @type body\n     * @default null\n     */\n\n    /**\n     * The `Constraint` object that is used to move the body during interaction.\n     *\n     * @property constraint\n     * @type constraint\n     */\n\n    /**\n     * An `Object` that specifies the collision filter properties.\n     * The collision filter allows the user to define which types of body this mouse constraint can interact with.\n     * See `body.collisionFilter` for more information.\n     *\n     * @property collisionFilter\n     * @type object\n     */\n\n})();\n\n\n/***/ }),\n/* 26 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Query` module contains methods for performing collision queries.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Query\n*/\n\nvar Query = {};\n\nmodule.exports = Query;\n\nvar Vector = __webpack_require__(2);\nvar SAT = __webpack_require__(14);\nvar Bounds = __webpack_require__(1);\nvar Bodies = __webpack_require__(11);\nvar Vertices = __webpack_require__(3);\n\n(function() {\n\n    /**\n     * Returns a list of collisions between `body` and `bodies`.\n     * @method collides\n     * @param {body} body\n     * @param {body[]} bodies\n     * @return {object[]} Collisions\n     */\n    Query.collides = function(body, bodies) {\n        var collisions = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var bodyA = bodies[i];\n            \n            if (Bounds.overlaps(bodyA.bounds, body.bounds)) {\n                for (var j = bodyA.parts.length === 1 ? 0 : 1; j < bodyA.parts.length; j++) {\n                    var part = bodyA.parts[j];\n\n                    if (Bounds.overlaps(part.bounds, body.bounds)) {\n                        var collision = SAT.collides(part, body);\n\n                        if (collision.collided) {\n                            collisions.push(collision);\n                            break;\n                        }\n                    }\n                }\n            }\n        }\n\n        return collisions;\n    };\n\n    /**\n     * Casts a ray segment against a set of bodies and returns all collisions, ray width is optional. Intersection points are not provided.\n     * @method ray\n     * @param {body[]} bodies\n     * @param {vector} startPoint\n     * @param {vector} endPoint\n     * @param {number} [rayWidth]\n     * @return {object[]} Collisions\n     */\n    Query.ray = function(bodies, startPoint, endPoint, rayWidth) {\n        rayWidth = rayWidth || 1e-100;\n\n        var rayAngle = Vector.angle(startPoint, endPoint),\n            rayLength = Vector.magnitude(Vector.sub(startPoint, endPoint)),\n            rayX = (endPoint.x + startPoint.x) * 0.5,\n            rayY = (endPoint.y + startPoint.y) * 0.5,\n            ray = Bodies.rectangle(rayX, rayY, rayLength, rayWidth, { angle: rayAngle }),\n            collisions = Query.collides(ray, bodies);\n\n        for (var i = 0; i < collisions.length; i += 1) {\n            var collision = collisions[i];\n            collision.body = collision.bodyB = collision.bodyA;            \n        }\n\n        return collisions;\n    };\n\n    /**\n     * Returns all bodies whose bounds are inside (or outside if set) the given set of bounds, from the given set of bodies.\n     * @method region\n     * @param {body[]} bodies\n     * @param {bounds} bounds\n     * @param {bool} [outside=false]\n     * @return {body[]} The bodies matching the query\n     */\n    Query.region = function(bodies, bounds, outside) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i],\n                overlaps = Bounds.overlaps(body.bounds, bounds);\n            if ((overlaps && !outside) || (!overlaps && outside))\n                result.push(body);\n        }\n\n        return result;\n    };\n\n    /**\n     * Returns all bodies whose vertices contain the given point, from the given set of bodies.\n     * @method point\n     * @param {body[]} bodies\n     * @param {vector} point\n     * @return {body[]} The bodies matching the query\n     */\n    Query.point = function(bodies, point) {\n        var result = [];\n\n        for (var i = 0; i < bodies.length; i++) {\n            var body = bodies[i];\n            \n            if (Bounds.contains(body.bounds, point)) {\n                for (var j = body.parts.length === 1 ? 0 : 1; j < body.parts.length; j++) {\n                    var part = body.parts[j];\n\n                    if (Bounds.contains(part.bounds, point)\n                        && Vertices.contains(part.vertices, point)) {\n                        result.push(body);\n                        break;\n                    }\n                }\n            }\n        }\n\n        return result;\n    };\n\n})();\n\n\n/***/ }),\n/* 27 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Runner` module is an optional utility which provides a game loop, \n* that handles continuously updating a `Matter.Engine` for you within a browser.\n* It is intended for development and debugging purposes, but may also be suitable for simple games.\n* If you are using your own game loop instead, then you do not need the `Matter.Runner` module.\n* Instead just call `Engine.update(engine, delta)` in your own loop.\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Runner\n*/\n\nvar Runner = {};\n\nmodule.exports = Runner;\n\nvar Events = __webpack_require__(4);\nvar Engine = __webpack_require__(18);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    var _requestAnimationFrame,\n        _cancelAnimationFrame;\n\n    if (typeof window !== 'undefined') {\n        _requestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame\n                                      || window.mozRequestAnimationFrame || window.msRequestAnimationFrame;\n   \n        _cancelAnimationFrame = window.cancelAnimationFrame || window.mozCancelAnimationFrame \n                                      || window.webkitCancelAnimationFrame || window.msCancelAnimationFrame;\n    }\n\n    if (!_requestAnimationFrame) {\n        var _frameTimeout;\n\n        _requestAnimationFrame = function(callback){ \n            _frameTimeout = setTimeout(function() { \n                callback(Common.now()); \n            }, 1000 / 60);\n        };\n\n        _cancelAnimationFrame = function() {\n            clearTimeout(_frameTimeout);\n        };\n    }\n\n    /**\n     * Creates a new Runner. The options parameter is an object that specifies any properties you wish to override the defaults.\n     * @method create\n     * @param {} options\n     */\n    Runner.create = function(options) {\n        var defaults = {\n            fps: 60,\n            correction: 1,\n            deltaSampleSize: 60,\n            counterTimestamp: 0,\n            frameCounter: 0,\n            deltaHistory: [],\n            timePrev: null,\n            timeScalePrev: 1,\n            frameRequestId: null,\n            isFixed: false,\n            enabled: true\n        };\n\n        var runner = Common.extend(defaults, options);\n\n        runner.delta = runner.delta || 1000 / runner.fps;\n        runner.deltaMin = runner.deltaMin || 1000 / runner.fps;\n        runner.deltaMax = runner.deltaMax || 1000 / (runner.fps * 0.5);\n        runner.fps = 1000 / runner.delta;\n\n        return runner;\n    };\n\n    /**\n     * Continuously ticks a `Matter.Engine` by calling `Runner.tick` on the `requestAnimationFrame` event.\n     * @method run\n     * @param {engine} engine\n     */\n    Runner.run = function(runner, engine) {\n        // create runner if engine is first argument\n        if (typeof runner.positionIterations !== 'undefined') {\n            engine = runner;\n            runner = Runner.create();\n        }\n\n        (function render(time){\n            runner.frameRequestId = _requestAnimationFrame(render);\n\n            if (time && runner.enabled) {\n                Runner.tick(runner, engine, time);\n            }\n        })();\n\n        return runner;\n    };\n\n    /**\n     * A game loop utility that updates the engine and renderer by one step (a 'tick').\n     * Features delta smoothing, time correction and fixed or dynamic timing.\n     * Consider just `Engine.update(engine, delta)` if you're using your own loop.\n     * @method tick\n     * @param {runner} runner\n     * @param {engine} engine\n     * @param {number} time\n     */\n    Runner.tick = function(runner, engine, time) {\n        var timing = engine.timing,\n            correction = 1,\n            delta;\n\n        // create an event object\n        var event = {\n            timestamp: timing.timestamp\n        };\n\n        Events.trigger(runner, 'beforeTick', event);\n\n        if (runner.isFixed) {\n            // fixed timestep\n            delta = runner.delta;\n        } else {\n            // dynamic timestep based on wall clock between calls\n            delta = (time - runner.timePrev) || runner.delta;\n            runner.timePrev = time;\n\n            // optimistically filter delta over a few frames, to improve stability\n            runner.deltaHistory.push(delta);\n            runner.deltaHistory = runner.deltaHistory.slice(-runner.deltaSampleSize);\n            delta = Math.min.apply(null, runner.deltaHistory);\n            \n            // limit delta\n            delta = delta < runner.deltaMin ? runner.deltaMin : delta;\n            delta = delta > runner.deltaMax ? runner.deltaMax : delta;\n\n            // correction for delta\n            correction = delta / runner.delta;\n\n            // update engine timing object\n            runner.delta = delta;\n        }\n\n        // time correction for time scaling\n        if (runner.timeScalePrev !== 0)\n            correction *= timing.timeScale / runner.timeScalePrev;\n\n        if (timing.timeScale === 0)\n            correction = 0;\n\n        runner.timeScalePrev = timing.timeScale;\n        runner.correction = correction;\n\n        // fps counter\n        runner.frameCounter += 1;\n        if (time - runner.counterTimestamp >= 1000) {\n            runner.fps = runner.frameCounter * ((time - runner.counterTimestamp) / 1000);\n            runner.counterTimestamp = time;\n            runner.frameCounter = 0;\n        }\n\n        Events.trigger(runner, 'tick', event);\n\n        // update\n        Events.trigger(runner, 'beforeUpdate', event);\n        Engine.update(engine, delta, correction);\n        Events.trigger(runner, 'afterUpdate', event);\n\n        Events.trigger(runner, 'afterTick', event);\n    };\n\n    /**\n     * Ends execution of `Runner.run` on the given `runner`, by canceling the animation frame request event loop.\n     * If you wish to only temporarily pause the engine, see `engine.enabled` instead.\n     * @method stop\n     * @param {runner} runner\n     */\n    Runner.stop = function(runner) {\n        _cancelAnimationFrame(runner.frameRequestId);\n    };\n\n    /**\n     * Alias for `Runner.run`.\n     * @method start\n     * @param {runner} runner\n     * @param {engine} engine\n     */\n    Runner.start = function(runner, engine) {\n        Runner.run(runner, engine);\n    };\n\n    /*\n    *\n    *  Events Documentation\n    *\n    */\n\n    /**\n    * Fired at the start of a tick, before any updates to the engine or timing\n    *\n    * @event beforeTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after engine timing updated, but just before update\n    *\n    * @event tick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired at the end of a tick, after engine update and after rendering\n    *\n    * @event afterTick\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired before update\n    *\n    * @event beforeUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /**\n    * Fired after update\n    *\n    * @event afterUpdate\n    * @param {} event An event object\n    * @param {number} event.timestamp The engine.timing.timestamp of the event\n    * @param {} event.source The source object of the event\n    * @param {} event.name The name of the event\n    */\n\n    /*\n    *\n    *  Properties Documentation\n    *\n    */\n\n    /**\n     * A flag that specifies whether the runner is running or not.\n     *\n     * @property enabled\n     * @type boolean\n     * @default true\n     */\n\n    /**\n     * A `Boolean` that specifies if the runner should use a fixed timestep (otherwise it is variable).\n     * If timing is fixed, then the apparent simulation speed will change depending on the frame rate (but behaviour will be deterministic).\n     * If the timing is variable, then the apparent simulation speed will be constant (approximately, but at the cost of determininism).\n     *\n     * @property isFixed\n     * @type boolean\n     * @default false\n     */\n\n    /**\n     * A `Number` that specifies the time step between updates in milliseconds.\n     * If `engine.timing.isFixed` is set to `true`, then `delta` is fixed.\n     * If it is `false`, then `delta` can dynamically change to maintain the correct apparent simulation speed.\n     *\n     * @property delta\n     * @type number\n     * @default 1000 / 60\n     */\n\n})();\n\n\n/***/ }),\n/* 28 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* The `Matter.Svg` module contains methods for converting SVG images into an array of vector points.\n*\n* To use this module you also need the SVGPathSeg polyfill: https://github.com/progers/pathseg\n*\n* See the included usage [examples](https://github.com/liabru/matter-js/tree/master/examples).\n*\n* @class Svg\n*/\n\nvar Svg = {};\n\nmodule.exports = Svg;\n\nvar Bounds = __webpack_require__(1);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * Converts an SVG path into an array of vector points.\n     * If the input path forms a concave shape, you must decompose the result into convex parts before use.\n     * See `Bodies.fromVertices` which provides support for this.\n     * Note that this function is not guaranteed to support complex paths (such as those with holes).\n     * You must load the `pathseg.js` polyfill on newer browsers.\n     * @method pathToVertices\n     * @param {SVGPathElement} path\n     * @param {Number} [sampleLength=15]\n     * @return {Vector[]} points\n     */\n    Svg.pathToVertices = function(path, sampleLength) {\n        if (typeof window !== 'undefined' && !('SVGPathSeg' in window)) {\n            Common.warn('Svg.pathToVertices: SVGPathSeg not defined, a polyfill is required.');\n        }\n\n        // https://github.com/wout/svg.topoly.js/blob/master/svg.topoly.js\n        var i, il, total, point, segment, segments, \n            segmentsQueue, lastSegment, \n            lastPoint, segmentIndex, points = [],\n            lx, ly, length = 0, x = 0, y = 0;\n\n        sampleLength = sampleLength || 15;\n\n        var addPoint = function(px, py, pathSegType) {\n            // all odd-numbered path types are relative except PATHSEG_CLOSEPATH (1)\n            var isRelative = pathSegType % 2 === 1 && pathSegType > 1;\n\n            // when the last point doesn't equal the current point add the current point\n            if (!lastPoint || px != lastPoint.x || py != lastPoint.y) {\n                if (lastPoint && isRelative) {\n                    lx = lastPoint.x;\n                    ly = lastPoint.y;\n                } else {\n                    lx = 0;\n                    ly = 0;\n                }\n\n                var point = {\n                    x: lx + px,\n                    y: ly + py\n                };\n\n                // set last point\n                if (isRelative || !lastPoint) {\n                    lastPoint = point;\n                }\n\n                points.push(point);\n\n                x = lx + px;\n                y = ly + py;\n            }\n        };\n\n        var addSegmentPoint = function(segment) {\n            var segType = segment.pathSegTypeAsLetter.toUpperCase();\n\n            // skip path ends\n            if (segType === 'Z') \n                return;\n\n            // map segment to x and y\n            switch (segType) {\n\n            case 'M':\n            case 'L':\n            case 'T':\n            case 'C':\n            case 'S':\n            case 'Q':\n                x = segment.x;\n                y = segment.y;\n                break;\n            case 'H':\n                x = segment.x;\n                break;\n            case 'V':\n                y = segment.y;\n                break;\n            }\n\n            addPoint(x, y, segment.pathSegType);\n        };\n\n        // ensure path is absolute\n        Svg._svgPathToAbsolute(path);\n\n        // get total length\n        total = path.getTotalLength();\n\n        // queue segments\n        segments = [];\n        for (i = 0; i < path.pathSegList.numberOfItems; i += 1)\n            segments.push(path.pathSegList.getItem(i));\n\n        segmentsQueue = segments.concat();\n\n        // sample through path\n        while (length < total) {\n            // get segment at position\n            segmentIndex = path.getPathSegAtLength(length);\n            segment = segments[segmentIndex];\n\n            // new segment\n            if (segment != lastSegment) {\n                while (segmentsQueue.length && segmentsQueue[0] != segment)\n                    addSegmentPoint(segmentsQueue.shift());\n\n                lastSegment = segment;\n            }\n\n            // add points in between when curving\n            // TODO: adaptive sampling\n            switch (segment.pathSegTypeAsLetter.toUpperCase()) {\n\n            case 'C':\n            case 'T':\n            case 'S':\n            case 'Q':\n            case 'A':\n                point = path.getPointAtLength(length);\n                addPoint(point.x, point.y, 0);\n                break;\n\n            }\n\n            // increment by sample value\n            length += sampleLength;\n        }\n\n        // add remaining segments not passed by sampling\n        for (i = 0, il = segmentsQueue.length; i < il; ++i)\n            addSegmentPoint(segmentsQueue[i]);\n\n        return points;\n    };\n\n    Svg._svgPathToAbsolute = function(path) {\n        // http://phrogz.net/convert-svg-path-to-all-absolute-commands\n        // Copyright (c) Gavin Kistner\n        // http://phrogz.net/js/_ReuseLicense.txt\n        // Modifications: tidy formatting and naming\n        var x0, y0, x1, y1, x2, y2, segs = path.pathSegList,\n            x = 0, y = 0, len = segs.numberOfItems;\n\n        for (var i = 0; i < len; ++i) {\n            var seg = segs.getItem(i),\n                segType = seg.pathSegTypeAsLetter;\n\n            if (/[MLHVCSQTA]/.test(segType)) {\n                if ('x' in seg) x = seg.x;\n                if ('y' in seg) y = seg.y;\n            } else {\n                if ('x1' in seg) x1 = x + seg.x1;\n                if ('x2' in seg) x2 = x + seg.x2;\n                if ('y1' in seg) y1 = y + seg.y1;\n                if ('y2' in seg) y2 = y + seg.y2;\n                if ('x' in seg) x += seg.x;\n                if ('y' in seg) y += seg.y;\n\n                switch (segType) {\n\n                case 'm':\n                    segs.replaceItem(path.createSVGPathSegMovetoAbs(x, y), i);\n                    break;\n                case 'l':\n                    segs.replaceItem(path.createSVGPathSegLinetoAbs(x, y), i);\n                    break;\n                case 'h':\n                    segs.replaceItem(path.createSVGPathSegLinetoHorizontalAbs(x), i);\n                    break;\n                case 'v':\n                    segs.replaceItem(path.createSVGPathSegLinetoVerticalAbs(y), i);\n                    break;\n                case 'c':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicAbs(x, y, x1, y1, x2, y2), i);\n                    break;\n                case 's':\n                    segs.replaceItem(path.createSVGPathSegCurvetoCubicSmoothAbs(x, y, x2, y2), i);\n                    break;\n                case 'q':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticAbs(x, y, x1, y1), i);\n                    break;\n                case 't':\n                    segs.replaceItem(path.createSVGPathSegCurvetoQuadraticSmoothAbs(x, y), i);\n                    break;\n                case 'a':\n                    segs.replaceItem(path.createSVGPathSegArcAbs(x, y, seg.r1, seg.r2, seg.angle, seg.largeArcFlag, seg.sweepFlag), i);\n                    break;\n                case 'z':\n                case 'Z':\n                    x = x0;\n                    y = y0;\n                    break;\n\n                }\n            }\n\n            if (segType == 'M' || segType == 'm') {\n                x0 = x;\n                y0 = y;\n            }\n        }\n    };\n\n})();\n\n/***/ }),\n/* 29 */\n/***/ (function(module, exports, __webpack_require__) {\n\n/**\n* This module has now been replaced by `Matter.Composite`.\n*\n* All usage should be migrated to the equivalent functions found on `Matter.Composite`.\n* For example `World.add(world, body)` now becomes `Composite.add(world, body)`.\n*\n* The property `world.gravity` has been moved to `engine.gravity`.\n*\n* For back-compatibility purposes this module will remain as a direct alias to `Matter.Composite` in the short term during migration.\n* Eventually this alias module will be marked as deprecated and then later removed in a future release.\n*\n* @class World\n*/\n\nvar World = {};\n\nmodule.exports = World;\n\nvar Composite = __webpack_require__(5);\nvar Common = __webpack_require__(0);\n\n(function() {\n\n    /**\n     * See above, aliases for back compatibility only\n     */\n    World.create = Composite.create;\n    World.add = Composite.add;\n    World.remove = Composite.remove;\n    World.clear = Composite.clear;\n    World.addComposite = Composite.addComposite;\n    World.addBody = Composite.addBody;\n    World.addConstraint = Composite.addConstraint;\n\n})();\n\n\n/***/ })\n/******/ ]);\n});"],"names":["render","_vm","this","_h","$createElement","_self","_c","_m","staticRenderFns","_v","staticClass","attrs","_m1","Matrix4","_obj","Object3D","_offset","Vector3","Geometry","uuid","MathUtils","name","type","vertices","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingBox","boundingSphere","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","matrix","normalMatrix","Matrix3","getNormalMatrix","i","il","length","vertex","applyMatrix4","face","normal","applyMatrix3","normalize","j","jl","vertexNormals","computeBoundingBox","computeBoundingSphere","angle","makeRotationX","makeRotationY","makeRotationZ","x","y","z","makeTranslation","makeScale","vector","lookAt","updateMatrix","geometry","scope","index","undefined","attributes","position","console","error","color","uv","uv2","count","push","fromBufferAttribute","Color","addFace","a","b","c","materialIndex","vertexColors","clone","Face3","Vector2","groups","group","start","getX","computeFaceNormals","getCenter","negate","translate","center","radius","s","set","cb","ab","f","fl","vA","vB","vC","subVectors","cross","copy","areaWeighted","Array","v","vl","add","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","computeVertexNormals","Box3","setFromPoints","Sphere","materialIndexOffset","isGeometry","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceVertexNormals","faceVertexColors","faceCopy","faceVertexUvs2","uvs2","uvsCopy","k","kl","mesh","isMesh","matrixAutoUpdate","merge","precisionPoints","verticesMap","unique","changes","precision","Math","pow","key","round","faceIndicesToRemove","indices","n","idx","splice","diff","points","l","point","_id","materialIndexSort","sort","newUvs1","newUvs2","uvs1","id","data","metadata","version","generator","parameters","normals","normalsHash","colorsHash","uvs","uvsHash","hasMaterial","hasFaceUv","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","r","g","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","value","enabled","hash","toString","getHex","source","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","DirectGeometry","fromGeometry","buffergeometry","BufferGeometry","positions","Float32Array","setAttribute","BufferAttribute","copyVector3sArray","copyColorsArray","copyVector2sArray","array","attribute","Float32BufferAttribute","morphAttributes","copyVector4sArray","warn","dispatchEvent","object","isPoints","isLine","copyArray","toBufferGeometry","EventDispatcher","prototype","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexUvs","computeGroups","isVector3","isArray","isColor","constructor","SVGLoader","manager","defaultDPI","defaultUnit","url","onLoad","onProgress","onError","loader","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","load","text","parse","e","itemError","parseNode","node","style","nodeType","transform","getNodeTransform","traverseChildNodes","nodeName","parseCSSStylesheet","parseStyle","hasAttribute","parsePathNode","parseRectNode","parsePolygonNode","parsePolylineNode","parseCircleNode","parseEllipseNode","parseLineNode","href","getAttributeNS","usedNodeId","substring","usedNode","viewportElement","getElementById","fill","setStyle","transformPath","currentTransform","paths","userData","nodes","childNodes","transformStack","pop","identity","ShapePath","control","firstPoint","isFirstPoint","doSetFirstPoint","d","getAttribute","commands","match","command","charAt","substr","trim","numbers","parseFloats","moveTo","lineTo","bezierCurveTo","getReflection","quadraticCurveTo","rx","ry","parseArcCommand","currentPath","autoClose","curves","currentPoint","sheet","cssRules","stylesheet","selectorList","selectorText","split","filter","Boolean","map","definitions","Object","fromEntries","entries","stylesheets","assign","x_axis_rotation","large_arc_flag","sweep_flag","end","PI","abs","dx2","dy2","x1p","cos","sin","y1p","rxs","rys","x1ps","y1ps","cr","sqrt","dq","pq","q","max","cxp","cyp","cx","cy","theta","svgAngle","delta","absellipse","ux","uy","vx","vy","dot","len","ang","acos","min","parseFloatWithUnits","w","h","bci","iterator","regex","replace","subpath","Path","absarc","subPaths","x1","y1","x2","y2","stylesheetStyles","classSelectors","addStyle","svgName","jsName","adjustFunction","startsWith","clamp","positive","input","flags","stride","TypeError","current","RE","SEPARATOR","WHITESPACE","DIGIT","SIGN","POINT","COMMA","EXP","FLAGS","SEP","INT","FLOAT","state","seenComma","number","exponent","result","throwSyntaxError","partial","SyntaxError","newNumber","Number","includes","test","units","unitConversion","string","theUnit","String","u","endsWith","scale","parseFloat","parseNodeTransform","premultiply","tempTransform0","tx","ty","transformsTexts","tIndex","transformText","openParPos","indexOf","closeParPos","transformType","tempTransform1","tempTransform2","rotate","tempTransform3","multiplyMatrices","scaleX","scaleY","tan","m","transfVec2","v2","tempV3","isRotated","isTransformRotated","subPath","curve","isLineCurve","v1","isCubicBezierCurve","v0","v3","isQuadraticBezierCurve","isEllipseCurve","tempV2","aX","aY","xRadius","getTransformScaleX","yRadius","getTransformScaleY","elements","te","xml","DOMParser","parseFromString","documentElement","fillOpacity","strokeOpacity","strokeWidth","strokeLineJoin","strokeLineCap","strokeMiterLimit","shapePath","BIGNUMBER","IntersectionLocationType","ORIGIN","DESTINATION","BETWEEN","LEFT","RIGHT","BEHIND","BEYOND","classifyResult","loc","t","findEdgeIntersection","a0","a1","b0","b1","x3","x4","y3","y4","nom1","nom2","denom","t1","t2","classifyPoint","toPrecision","p","edgeStart","edgeEnd","ax","ay","bx","by","sa","EPSILON","getIntersections","path1","path2","intersectionsRaw","intersections","path1EdgeStart","path1EdgeEnd","index2","path2EdgeStart","path2EdgeEnd","intersection","find","getScanlineIntersections","scanline","allIntersections","forEach","containsPoint","identifier","isCW","i1","i2","isHoleTo","simplePath","allPaths","scanlineMinX","scanlineMaxX","_fillRule","centerBoundingBox","scanlineIntersections","baseIntersections","otherIntersections","firstXOfPath","stack","isHole","isHoleFor","for","lastCWValue","simplePaths","getPoints","maxY","minY","maxX","minX","ShapeUtils","Box2","sp","isAHole","fillRule","shapesToReturn","amIAHole","shape","Shape","holes","hole","width","lineJoin","lineCap","miterLimit","strokeColor","arcDivisions","minDistance","pointsToStrokeWithBuffers","tempV2_1","tempV2_2","tempV2_3","tempV2_4","tempV2_5","tempV2_6","tempV2_7","lastPointL","lastPointR","point0L","point0R","currentPointL","currentPointR","nextPointL","nextPointR","innerPoint","outerPoint","removeDuplicatedPoints","numPoints","nextPoint","u1","innerSideModified","joinIsOnLeftSide","isMiter","isClosed","equals","previousPoint","strokeWidth2","deltaU","u0","initialJoinIsOnLeftSide","numVertices","currentCoordinate","currentCoordinateUV","getNormal","multiplyScalar","sub","iPoint","normal1","miterSide","setLength","miterLength2","segmentLengthPrev","divideScalar","segmentLengthNext","makeSegmentTriangles","makeSegmentWithBevelJoin","createSegmentTrianglesWithMiddleSection","makeCircularSector","miterFraction","addVertex","addCapGeometry","lastOuter","lastInner","toArray","p1","p2","rotateAround","addVectors","dupPoints","distanceTo","newPoints","Loader","buffer","directGeometry","fromDirectGeometry","_a","_b","Transform","camera","renderer","svg","isCCW","noHoles","svgLoader","shapes","toShapes","vector3","canvas","domElement","updateMatrixWorld","project","height","distanceFromCamera","tmpPlane","geo","PlaneBufferGeometry","mat","MeshBasicMaterial","transparent","opacity","Mesh","tmpRaycaster","Raycaster","tmpVector3","setRotationFromEuler","rotation","getWorldDirection","setFromCamera","intersects","intersectObjects","bufferGeometry","isBufferGeometry","fromBufferGeometry","CSGWrapper","meshA","meshB","meshC","toGeometry","doCSG","operation","bspA","CSG","fromMesh","bspB","bspC","toMesh","polygons","csg","Node","clipTo","invert","build","allPolygons","fromPolygons","flip","geom","fs","vs","polys","fm","Vertex","Polygon","_tmpm3","pos","toMatrix","ps","fvuv","pvs","pvlen","pv","fc","fuv","fnml","plane","inv","parseInt","REVISION","getInverse","decompose","tokens","currentOp","token","iEval","op","sourceMesh","nextPrim","currentPrim","doRemove","parent","remove","material","castShadow","receiveShadow","Vector","arguments","Error","plus","minus","times","dividedBy","negated","other","lerp","Plane","polygon","coplanarFront","coplanarBack","front","back","COPLANAR","FRONT","BACK","SPANNING","polygonType","types","ti","tj","vi","vj","interpolate","shared","unit","fromPoints","reverse","temp","slice","splitPolygon","clipPolygons","concat","bsp","ch2","durl","URL","createObjectURL","Blob","cwk","Worker","revokeObjectURL","encodeURI","wk","msg","transfer","onerror","onmessage","postMessage","u8","Uint8Array","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","revfl","fd","revfd","rev","hMap","cd","mb","co","le","rvb","sv","r_1","flt","fdt","flm","flrm","fdm","fdrm","bits","o","bits16","shft","slc","subarray","inflt","dat","buf","st","sl","noBuf","noSt","cbuf","bl","nbuf","final","bt","lm","dm","lbt","dbt","tbts","hLit","hcLen","tl","ldt","clt","clb","clbmsk","clm","lt","dt","lms","dms","lpos","sym","dsym","wbits","wbits16","hTree","et","i0","maxSym","tr","mbt","ln","lft","cst","i2_1","i2_2","i2_3","lc","cl","cli","cln","cls","clen","cf","wfblk","out","wblk","syms","lf","df","li","bs","dlt","mlb","ddt","mdb","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","ll","dl","flen","ftlen","dtlen","llm","lcts","it","clct","dst","deo","dflt","lvl","plvl","pre","post","lst","ceil","opt","msk_1","prev","head","bs1_1","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","maxd","ml","nl","mmd","md","pti","lin","din","crct","crc","adler","dopt","level","mem","log","mrg","wcln","fn","fnStr","td","ks","lastIndexOf","st_1","spInd","ch","cbfs","wrkr","fns","init","td_1","bInflt","inflateSync","pbf","gu8","bDflt","deflateSync","gze","gzh","gzhl","wbytes","guze","gzs","gzl","zle","zlh","zule","zlv","size","cbify","opts","err","terminate","consume","astrm","strm","ondata","ev","astrmify","call","b2","b4","b8","filename","mtime","floor","Date","now","charCodeAt","flg","zs","lv","AsyncCmpStrm","Deflate","chunk","AsyncDeflate","deflate","Inflate","bts","AsyncInflate","inflate","Gzip","raw","AsyncGzip","gzip","gzipSync","Gunzip","AsyncGunzip","gunzip","gunzipSync","Zlib","AsyncZlib","zlib","zlibSync","Unzlib","AsyncUnzlib","unzlib","unzlibSync","Decompress","G","I","Z","_this_1","apply","AsyncDecompress","decompress","decompressSync","fltn","val","TextEncoder","TextDecoder","tds","decode","stream","dutf8","fromCharCode","DecodeUTF8","np","EncodeUTF8","strToU8","str","latin1","ar_1","encode","ar","ai","strFromU8","ext","dbf","slzh","zh","fnl","es","z64e","sc","su","off","exfl","ex","wzh","ce","extra","col","exl","os","flag","compression","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","exf","wzf","ZipPassThrough","process","ZipDeflate","AsyncZipDeflate","Zip","file","com","comment","hl","header","chks","pAll","_i","chks_1","chk","ind","uf","nxt","dd","zip","keys","tot","slft","files","term","tAll","cbf","oe","cdl","badd","_loop_1","ms","cbl","zipSync","UnzipPassThrough","UnzipInflate","AsyncUnzipInflate","_","sz","Unzip","onfile","toAdd","is","oc","_loop_2","sig","this_1","bf","cmp_1","chks_2","unshift","d_1","sc_1","su_1","fn_1","file_1","ctr","chks_3","originalSize","state_1","register","decoder","unzip","_loop_3","c_1","no","infl","unzipSync","c_2","findSpan","U","low","high","mid","calcBasisFunctions","span","N","left","right","saved","rv","calcBSplinePoint","P","C","Vector4","Nj","wNj","calcBasisFunctionDerivatives","zeroArr","ders","ndu","s1","s2","rk","pk","j1","j2","calcBSplineDerivatives","nd","du","CK","nders","Pw","calcKoverI","nom","calcRationalCurveDerivatives","Pders","Aders","wders","calcNURBSDerivatives","fbxTree","connections","sceneGraph","NURBSCurve","degree","knots","controlPoints","startKnot","endKnot","optionalTarget","hpoint","NURBSUtils","tangent","Curve","FBXLoader","LoaderUtils","setResponseType","FBXBuffer","isFbxFormatBinary","BinaryParser","FBXText","convertArrayBufferToString","isFbxFormatASCII","getFbxVersion","TextParser","textureLoader","TextureLoader","resourcePath","setCrossOrigin","crossOrigin","FBXTreeParser","parseConnections","images","parseImages","textures","parseTextures","materials","parseMaterials","deformers","parseDeformers","geometryMap","GeometryParser","parseScene","connectionMap","Map","rawConnections","Connections","rawConnection","fromID","toID","relationship","has","parents","children","parentRelationship","ID","get","childRelationship","blobs","Objects","videoNodes","Video","nodeID","videoNode","RelativeFilename","Filename","arrayBufferContent","Content","ArrayBuffer","byteLength","base64Content","image","parseImage","content","fileName","extension","toLowerCase","getHandler","window","textureMap","textureNodes","Texture","texture","parseTexture","textureNode","loadTexture","attrName","wrapModeU","WrapModeU","wrapModeV","WrapModeV","valueU","valueV","wrapS","RepeatWrapping","ClampToEdgeWrapping","wrapT","values","Scaling","repeat","FileName","materialMap","materialNodes","Material","parseMaterial","materialNode","ShadingModel","parseParameters","MeshPhongMaterial","MeshLambertMaterial","setValues","BumpFactor","bumpScale","Diffuse","fromArray","DiffuseColor","DisplacementFactor","displacementScale","Emissive","emissive","EmissiveColor","EmissiveFactor","emissiveIntensity","Opacity","ReflectionFactor","reflectivity","Shininess","shininess","Specular","specular","SpecularColor","child","bumpMap","getTexture","aoMap","encoding","sRGBEncoding","displacementMap","emissiveMap","normalMap","envMap","mapping","EquirectangularReflectionMapping","specularMap","alphaMap","LayeredTexture","skeletons","DeformerNodes","Deformer","deformerNode","relationships","attrType","skeleton","parseSkeleton","geometryID","rawTargets","parseMorphTargets","deformerNodes","rawBones","boneNode","rawBone","weights","transformLink","TransformLink","Indexes","Weights","bones","rawMorphTargets","morphTargetNode","rawMorphTarget","initialWeight","DeformPercent","fullWeights","FullWeights","geoID","Group","modelMap","parseModels","modelNodes","Model","model","modelNode","setLookAtProperties","parentConnections","connection","bindSkeleton","createAmbientLight","traverse","transformData","parentMatrix","parentMatrixWorld","matrixWorld","generateTransform","updateWorldMatrix","animations","AnimationParser","isGroup","buildSkeleton","createCamera","createLight","createMesh","createCurve","Bone","PropertyBinding","getTransformData","bone","subBone","cameraAttribute","attr","NodeAttribute","CameraProjectionType","nearClippingPlane","NearPlane","farClippingPlane","FarPlane","innerWidth","innerHeight","AspectWidth","AspectHeight","aspect","fov","FieldOfView","focalLength","FocalLength","PerspectiveCamera","setFocalLength","OrthographicCamera","lightAttribute","LightType","intensity","Intensity","CastLightOnObject","distance","FarAttenuationEnd","EnableFarAttenuation","decay","PointLight","DirectionalLight","InnerAngle","penumbra","OuterAngle","SpotLight","CastShadows","FBX_Deformer","SkinnedMesh","normalizeSkinWeights","reduce","LineBasicMaterial","linewidth","Line","inheritType","InheritType","eulerOrder","getEulerOrder","RotationOrder","translation","Lcl_Translation","preRotation","PreRotation","Lcl_Rotation","postRotation","PostRotation","Lcl_Scaling","scalingOffset","ScalingOffset","scalingPivot","ScalingPivot","rotationOffset","RotationOffset","rotationPivot","RotationPivot","lookAtTarget","target","bindMatrices","parsePoseNodes","geoRelationships","geoConnParent","bind","Skeleton","BindPoseNode","Pose","NbPoseNodes","poseNodes","PoseNode","poseNode","Matrix","GlobalSettings","ambientColor","AmbientColor","AmbientLight","geoNodes","parseGeometry","geoNode","parseMeshGeometry","parseNurbsGeometry","GeometricTranslation","GeometricRotation","GeometricScaling","genGeometry","preTransform","geoInfo","parseGeoNode","buffers","genBuffers","positionAttribute","Uint16BufferAttribute","weightsIndices","vertexWeights","normalAttribute","applyNormalMatrix","uvBuffer","mappingType","prevMaterialIndex","startIndex","currentIndex","addGroup","lastGroup","lastIndex","addMorphTargets","vertexPositions","Vertices","vertexIndices","PolygonVertexIndex","LayerElementColor","parseVertexColors","LayerElementMaterial","parseMaterialIndices","LayerElementNormal","parseNormals","LayerElementUV","UV","parseUVs","weightTable","weight","polygonIndex","faceLength","displayedWeightsWarning","facePositionIndexes","faceColors","faceUVs","faceWeights","faceWeightIndices","vertexIndex","polygonVertexIndex","endOfFace","weightIndices","getData","wt","wIndex","Weight","weightIndex","currentWeight","comparedWeight","comparedWeightIndex","comparedWeightArray","tmp","genFace","parentGeo","parentGeoNode","morphTargetsRelative","rawTarget","morphGeoNode","genMorphGeometry","morphPositionsSparse","morphPositions","morphIndex","morphGeoInfo","morphBuffers","NormalNode","MappingInformationType","referenceType","ReferenceInformationType","Normals","indexBuffer","NormalIndex","NormalsIndex","dataSize","UVNode","UVIndex","ColorNode","Colors","ColorIndex","MaterialNode","materialIndexBuffer","Materials","materialIndices","order","Order","isNaN","KnotVector","pointsValues","Points","Form","animationClips","rawClips","parseClips","rawClip","clip","addClip","AnimationCurve","curveNodesMap","parseAnimationCurveNodes","parseAnimationCurves","layersMap","parseAnimationLayers","parseAnimStacks","rawCurveNodes","AnimationCurveNode","rawCurveNode","curveNode","rawCurves","animationCurve","KeyTime","convertFBXTimeToSeconds","KeyValueFloat","animationCurveID","animationCurveRelationship","rawLayers","AnimationLayer","layerCurveNodes","modelID","rawModel","modelName","initialPosition","initialRotation","initialScale","morph","deformerID","morpherID","morphName","rawStacks","AnimationStack","layer","tracks","rawTracks","generateTracks","AnimationClip","Quaternion","Euler","setFromQuaternion","T","positionTrack","generateVectorTrack","R","rotationTrack","generateRotationTrack","S","scaleTrack","morphTrack","generateMorphTrack","initialValue","getTimesForAllAxes","getKeyframeTrackValues","VectorKeyframeTrack","interpolateRotations","setFromEuler","quaternion","euler","quaternionValues","multiply","QuaternionKeyframeTrack","morphNum","getObjectByName","morphTargetDictionary","NumberKeyframeTrack","targetIndex","lastValue","currentValue","prevValue","xIndex","yIndex","zIndex","time","xValue","yValue","zValue","valuesSpan","absoluteSpan","numSubIntervals","step","nextValue","initialTime","timeSpan","interval","nextTime","interpolatedTimes","interpolatedValues","inject","nodeStack","currentIndent","currentProp","currentPropName","allNodes","FBXTree","line","matchComment","matchEmpty","matchBeginning","matchProperty","matchEnd","parseNodeBegin","parseNodeProperty","popStack","parseNodePropertyContinued","property","nodeAttrs","parseNodeAttr","currentNode","getCurrentNode","pushStack","contentLine","propName","propValue","parentName","connProps","from","to","rest","elem","append","setCurrentProp","parseNumberArray","parseNodeSpecialProperty","props","prop","innerPropName","innerPropType1","innerPropType2","innerPropFlag","innerPropValue","getPrevNode","reader","BinaryReader","skip","getUint32","endOfContent","getOffset","endOffset","getUint64","numProperties","nameLen","getUint8","getString","propertyList","parseProperty","singleProperty","subNode","parseSubNode","getBoolean","getFloat64","getFloat32","getInt32","getInt64","getArrayBuffer","getInt16","arrayLength","compressedLength","getBooleanArray","getFloat64Array","getFloat32Array","getInt32Array","getInt64Array","fflate","reader2","littleEndian","dv","DataView","offset","nullByte","CORRECT","cursor","read","num","versionRegExp","dataArray","infoObject","tempEuler","tempVec","lTranslationM","lPreRotationM","lRotationM","lPostRotationM","lScalingM","lScalingPivotM","lScalingOffsetM","lRotationOffsetM","lRotationPivotM","lParentGX","lParentLX","lGlobalT","setPosition","makeRotationFromEuler","lLRM","lParentGRM","extractRotation","lParentTM","copyPosition","lParentGRSM","lParentGSM","lLSM","lGlobalRS","lParentLSM","setFromMatrixScale","lParentLSM_inv","lParentGSM_noLocal","lRotationPivotM_inv","lScalingPivotM_inv","lTransform","lLocalTWithAllPivotAndOffsetInfo","lGlobalTranslation","enums","a2","GLTFLoader","dracoLoader","ktx2Loader","meshoptDecoder","pluginCallbacks","parser","GLTFMaterialsClearcoatExtension","GLTFTextureBasisUExtension","GLTFTextureWebPExtension","GLTFMaterialsSheenExtension","GLTFMaterialsTransmissionExtension","GLTFMaterialsVolumeExtension","GLTFMaterialsIorExtension","GLTFMaterialsSpecularExtension","GLTFLightsExtension","GLTFMeshoptCompression","itemStart","_onError","itemEnd","gltf","callback","extensions","plugins","magic","BINARY_EXTENSION_HEADER_MAGIC","EXTENSIONS","KHR_BINARY_GLTF","GLTFBinaryExtension","json","JSON","asset","GLTFParser","fileLoader","plugin","extensionsUsed","extensionName","extensionsRequired","KHR_MATERIALS_UNLIT","GLTFMaterialsUnlitExtension","KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS","GLTFMaterialsPbrSpecularGlossinessExtension","KHR_DRACO_MESH_COMPRESSION","GLTFDracoMeshCompressionExtension","KHR_TEXTURE_TRANSFORM","GLTFTextureTransformExtension","KHR_MESH_QUANTIZATION","GLTFMeshQuantizationExtension","setExtensions","setPlugins","Promise","resolve","reject","GLTFRegistry","objects","removeAll","KHR_LIGHTS_PUNCTUAL","KHR_MATERIALS_CLEARCOAT","KHR_MATERIALS_IOR","KHR_MATERIALS_SHEEN","KHR_MATERIALS_SPECULAR","KHR_MATERIALS_TRANSMISSION","KHR_MATERIALS_VOLUME","KHR_TEXTURE_BASISU","EXT_TEXTURE_WEBP","EXT_MESHOPT_COMPRESSION","cache","refs","uses","nodeDefs","nodeIndex","nodeLength","nodeDef","light","_addNodeRef","lightIndex","cacheKey","dependency","lightNode","lightDefs","lights","lightDef","range","spot","innerConeAngle","outerConeAngle","createUniqueName","self","_loadLight","then","_getNodeRef","materialParams","materialDef","pending","metallicRoughness","pbrMetallicRoughness","baseColorFactor","baseColorTexture","assignTexture","all","MeshPhysicalMaterial","clearcoatFactor","clearcoat","clearcoatTexture","clearcoatRoughnessFactor","clearcoatRoughness","clearcoatRoughnessTexture","clearcoatNormalTexture","clearcoatNormalScale","sheenColor","sheenRoughness","sheen","sheenColorFactor","sheenRoughnessFactor","sheenColorTexture","sheenRoughnessTexture","transmissionFactor","transmission","transmissionTexture","thickness","thicknessFactor","thicknessTexture","attenuationDistance","colorArray","attenuationColor","ior","specularIntensity","specularFactor","specularTexture","specularColorFactor","specularColor","specularColorTexture","textureIndex","textureDef","options","loadTextureImage","isSupported","uri","handler","detectSupport","Image","src","onload","bufferView","bufferViews","extensionDef","getDependency","supported","ready","res","byteOffset","byteStride","decodeGltfBuffer","mode","BINARY_EXTENSION_HEADER_LENGTH","BINARY_EXTENSION_CHUNK_TYPES","BIN","body","headerView","chunkContentsLength","chunkView","chunkIndex","chunkLength","chunkType","contentArray","preload","primitive","bufferViewIndex","gltfAttributeMap","threeAttributeMap","attributeNormalizedMap","attributeTypeMap","attributeName","threeAttributeName","ATTRIBUTES","accessorDef","accessors","componentType","WEBGL_COMPONENT_TYPES","normalized","decodeDracoFile","texCoord","needsUpdate","GLTFMeshStandardSGMaterial","params","isGLTFSpecularGlossinessMaterial","specularMapParsFragmentChunk","join","glossinessMapParsFragmentChunk","specularMapFragmentChunk","glossinessMapFragmentChunk","lightPhysicalFragmentChunk","uniforms","setHex","glossiness","glossinessMap","_extraUniforms","onBeforeCompile","shader","uniformName","fragmentShader","defineProperties","defines","USE_SPECULARMAP","USE_GLOSSINESSMAP","USE_UV","metalness","roughness","metalnessMap","roughnessMap","MeshStandardMaterial","specularGlossinessParams","pbrSpecularGlossiness","diffuseFactor","diffuseTexture","glossinessFactor","specularGlossinessTexture","specGlossMapDef","fog","lightMap","lightMapIntensity","aoMapIntensity","normalMapType","TangentSpaceNormalMap","normalScale","displacementBias","envMapIntensity","refractionRatio","GLTFCubicSplineInterpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","valueSize","Interpolant","beforeStart_","copySampleValue_","afterEnd_","interpolate_","t0","stride2","stride3","pp","ppp","offset1","offset0","s3","s0","p0","m0","m1","_q","GLTFCubicSplineQuaternionInterpolant","WEBGL_CONSTANTS","FLOAT_MAT3","FLOAT_MAT4","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","LINEAR","REPEAT","SAMPLER_2D","POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN","UNSIGNED_BYTE","UNSIGNED_SHORT","Int8Array","Int16Array","WEBGL_FILTERS","NearestFilter","LinearFilter","NearestMipmapNearestFilter","LinearMipmapNearestFilter","NearestMipmapLinearFilter","LinearMipmapLinearFilter","WEBGL_WRAPPINGS","MirroredRepeatWrapping","WEBGL_TYPE_SIZES","POSITION","NORMAL","TANGENT","TEXCOORD_0","TEXCOORD_1","COLOR_0","WEIGHTS_0","JOINTS_0","PATH_PROPERTIES","INTERPOLATION","CUBICSPLINE","InterpolateLinear","STEP","InterpolateDiscrete","ALPHA_MODES","OPAQUE","MASK","BLEND","createDefaultMaterial","depthTest","side","FrontSide","addUnknownExtensionsToUserData","knownExtensions","objectDef","gltfExtensions","assignExtrasToUserData","gltfDef","extras","targets","hasMorphPosition","hasMorphNormal","pendingPositionAccessors","pendingNormalAccessors","pendingAccessor","updateMorphTargets","meshDef","morphTargetInfluences","targetNames","createPrimitiveKey","primitiveDef","geometryKey","dracoExtension","createAttributesKey","attributesKey","getNormalizedComponentScale","associations","primitiveCache","meshCache","cameraCache","lightCache","textureCache","nodeNamesUsed","createImageBitmap","navigator","userAgent","ImageBitmapLoader","_invokeAll","_markDefs","beforeRoot","getDependencies","dependencies","scene","scenes","cameras","afterRoot","catch","skinDefs","skins","meshDefs","meshes","skinIndex","skinLength","joints","isBone","skin","isSkinnedMesh","ref","updateMappings","original","mappings","func","loadScene","loadNode","_invokeOne","loadMesh","loadAccessor","loadBufferView","loadBuffer","loadMaterial","loadSkin","loadAnimation","loadCamera","defs","def","bufferIndex","bufferDef","bufferViewDef","accessorIndex","sparse","pendingBufferViews","bufferAttribute","itemSize","TypedArray","elementBytes","BYTES_PER_ELEMENT","itemBytes","ibSlice","ibCacheKey","ib","InterleavedBuffer","InterleavedBufferAttribute","itemSizeIndices","SCALAR","TypedArrayIndices","byteOffsetIndices","byteOffsetValues","sparseIndices","sparseValues","setX","setY","setZ","setW","sampler","webkitURL","sourceURI","isObjectURL","blob","mimeType","promise","isImageBitmapLoader","imageBitmap","flipY","samplers","magFilter","minFilter","mapName","mapDef","gltfReference","extendTexture","useDerivativeTangents","useVertexColors","useFlatShading","pointsMaterial","PointsMaterial","sizeAttenuation","lineMaterial","cachedMaterial","flatShading","materialType","materialExtensions","sgExtension","getMaterialType","extendParams","kmuExtension","metallicFactor","roughnessFactor","metallicRoughnessTexture","extendMaterialParams","doubleSided","DoubleSide","alphaMode","depthWrite","alphaTest","alphaCutoff","normalTexture","occlusionTexture","strength","emissiveFactor","emissiveTexture","createMaterial","originalName","sanitizedName","primitives","createDracoPrimitive","decodePrimitive","addPrimitiveAttributes","cached","geometryPromise","meshIndex","loadGeometries","results","geometries","skinWeight","toTrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LineSegments","LineLoop","assignFinalMaterial","cameraIndex","cameraDef","yfov","aspectRatio","znear","zfar","xmag","ymag","skinDef","skinEntry","inverseBindMatrices","accessor","animationIndex","animationDef","pendingNodes","pendingInputAccessors","pendingOutputAccessors","pendingSamplers","pendingTargets","channels","channel","output","inputAccessors","outputAccessors","inputAccessor","outputAccessor","TypedKeyframeTrack","targetName","interpolation","outputArray","scaled","track","createInterpolant","interpolantType","getValueSize","isInterpolantFactoryMethodGLTFCubicSpline","meshPromise","createNodeMesh","createNodeAttachment","sceneIndex","sceneDef","nodeIds","buildNodeHierarchy","reduceAssociations","reducedAssociations","nodeId","parentObject","pendingJoints","jointNodes","boneInverses","jointNode","computeBounds","box","boxScale","maxDisplacement","expandByVector","sphere","assignAttributeAccessor","gltfAttributeName","setIndex","drawMode","getIndex","numberOfTriangles","newIndices","newGeometry","Loaders","textureAnisotropy","_fileLoader","_imgLoader","ImageLoader","_svgLoader","_textureLoader","_objectLoader","ObjectLoader","_gltfLoader","_fbxLoader","isModel","isTexture","parsed","isJSONArray","frames","jsonHash","frame","rotated","sourceSize","spriteSourceSize","trimmed","atlas","isBase64","anisotropy","objectLoader","gltfLoader","fbxLoader","fbx","PointLightHelper","SphereBufferGeometry","dispose","Lights","directionalLightHelper","helper","DirectionalLightHelper","spotLightHelper","SpotLightHelper","pointLightHelper","skyColor","groundColor","HemisphereLight","RectAreaLight","ExtendedMesh","worldTheta","phi","worldPhi","atan2","loggerCache","LOG_LIMIT","logger","DefaultMaterial","_defaultMaterial","Factories","isHeadless","defaultMaterial","planeConfig","materialConfig","makePlane","boxConfig","makeBox","sphereConfig","makeSphere","cylinder","cylinderConfig","makeCylinder","cone","coneConfig","makeCone","torus","torusConfig","makeTorus","extrude","extrudeConfig","makeExtrude","addMesh","existing","addExisting","addPlane","addBox","ground","groundConfig","addGround","addSphere","addCylinder","addCone","addTorus","addExtrude","addMaterial","obj","autoCenter","breakable","__rest","depth","bevelEnabled","ExtrudeBufferGeometry","widthSegments","heightSegments","phiStart","phiLength","thetaStart","thetaLength","BoxBufferGeometry","depthSegments","rotateX","THREE_Math","CylinderBufferGeometry","radiusTop","radiusBottom","radiusSegments","openEnded","ConeBufferGeometry","TorusBufferGeometry","tube","radialSegments","tubularSegments","arc","basic","MeshNormalMaterial","standard","lambert","phong","physical","MeshToonMaterial","toon","custom","HeightMap","config","heightMap","make","colorScale","document","createElement","ctx","getContext","drawImage","pixel","getImageData","getHighPoint","hex","WarpSpeed","physics","factories","features","Features","negativeFeatures","feature","hasNegativeFeatures","featuresToRemove","vertexShader","topColor","bottomColor","skyGeo","skyMat","ShaderMaterial","BackSide","sky","hemisphereLight","ambientLight","directionalLight","shadow","top","bottom","mapSize","addGrid","gridData","__loadPhysics","setRestitution","orbitControls","OrbitControls","Mixers","root","mixer","AnimationMixer","mixers","create","animationMixer","_mixers","update","Reflector","textureWidth","textureHeight","clipBias","ReflectorShader","reflectorPlane","reflectorWorldPosition","cameraWorldPosition","rotationMatrix","lookAtPosition","clipPlane","view","textureMatrix","virtualCamera","renderTarget","WebGLRenderTarget","UniformsUtils","onBeforeRender","setFromMatrixPosition","reflect","up","far","projectionMatrix","matrixWorldInverse","setFromNormalAndCoplanarPoint","constant","sign","outputEncoding","visible","currentRenderTarget","getRenderTarget","currentXrEnabled","xr","currentShadowAutoUpdate","shadowMap","autoUpdate","setRenderTarget","setMask","autoClear","clear","viewport","isReflector","Refractor","RefractorShader","refractor","refractorPlane","refractorWorldPosition","updateRefractorPlane","applyQuaternion","updateVirtualCamera","clipVector","updateTextureMatrix","isRefractor","Water","flowDirection","flowSpeed","WaterShader","flowMap","normalMap0","normalMap1","cycle","halfCycle","clock","Clock","reflector","updateFlow","getDelta","UniformsLib","USE_FLOWMAP","isWater","addWater","flowX","flowY","groundGeometry","groundMaterial","waterGeometry","water","Misc","textureCube","TextureCube","down","VRButton","button","showEnterVR","currentSession","onSessionStarted","session","addEventListener","onSessionEnded","setSession","textContent","removeEventListener","display","onmouseenter","onmouseleave","onclick","sessionInit","optionalFeatures","requestSession","disableButton","showWebXRNotFound","stylizeElement","element","padding","border","borderRadius","background","font","textAlign","outline","isSessionSupported","xrSessionIsGranted","click","message","isSecureContext","location","innerHTML","textDecoration","registerSessionGrantedListener","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","getOwnPropertyDescriptor","enumerable","_objectSpread2","defineProperty","getOwnPropertyDescriptors","Constants","Handedness","freeze","NONE","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","X_AXIS","Y_AXIS","STATE","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","fetchJsonFile","fetch","response","ok","statusText","fetchProfilesList","basePath","profileListFileName","profilesList","fetchProfile","xrInputSource","defaultProfile","getAssetPath","supportedProfilesList","profiles","some","profileId","supportedProfile","profilePath","deprecated","profile","layout","handedness","layouts","assetPath","defaultComponentValues","xAxis","yAxis","normalizeAxes","hypotenuse","normalizedXAxis","normalizedYAxis","VisualResponse","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","gamepad","buttons","gamepadButton","pressed","touched","axes","MotionController","assetUrl","layoutDescription","components","updateFromGamepad","gripSpace","targetRaySpace","component","DEFAULT_PROFILES_PATH","DEFAULT_PROFILE","XRControllerModel","motionController","force","valueNode","minNode","maxNode","MotionControllerConstants","slerpQuaternions","lerpVectors","findNodes","touchPointNode","sphereGeometry","SphereGeometry","addAssetSceneToControllerModel","controllerModel","XRControllerModelFactory","_assetCache","controller","event","targetRayMode","cachedAsset","WebXR","_renderer","_scene","_camera","cameraGroup","THREE","vrButton","cssText","appendChild","isPresenting","getController","controllerGrip","getControllerGrip","controllerModelFactory","createControllerModel","WebXRCamera","getCamera","HaveSomeFun","numberOfElements","Between","random","RandomPick","mass","Cameras","Perspective","Orthographic","near","Scene3D","sceneConfig","enableXR","__config","sceneKey","_deconstructor","autoStart","Plugins","misc","ws","webXR","destroy","warpSpeed","_isRunning","stop","_start","_preload","_create","setAnimationLoop","_update","rigidBodies","setSize","updateProjectionMatrix","ratio","setPixelRatio","_time","_delta","getElapsedTime","toFixed","updateDebugger","animationMixers","preRender","composer","postRender","PhysicsBody","ammo","Ammo","btVector3","btQuaternion","Events","eventEmitter","removeAllListeners","tmpBtVector3","tmpBtVector3_1","tmpBtQuaternion","getCollisionShape","_needUpdate","need","didUpdate","updateCallback","once","setupEventEmitter","_emitUpdateEvents","on","onUpdateEvent","collision","collisionCallback","onCollision","checkCollisions","collisionEvents","bodies","worldTransform","getMotionState","getWorldTransform","setWorldTransform","tmpEuler","tmpQuaternion","setValue","ammoQuat","setRotation","getRotation","q1","getOrigin","getLinearVelocity","getAngularVelocity","setLinearVelocity","velocity","setAngularVelocity","angularVelocity","applyCentralImpulse","applyCentralForce","applyCentralLocalForce","impulse","relativePosition","applyImpulse","applyLocalTorque","applyTorque","applyTorqueImpulse","setCollisionFlags","getCollisionFlags","setFriction","linear","angular","setDamping","setGravity","setLinearFactor","setAngularFactor","threshold","setCcdMotionThreshold","setCcdSweptSphereRadius","Shapes","factory","collisionFlags","translateX","Constraints","physicsWorld","lock","bodyA","bodyB","disableCollisionsBetweenLinkedBodies","fixed","pointToPoint","hinge","slider","spring","coneTwist","frameA","frameB","dof","centerVector","dx","dy","dz","transformB","btTransform","setIdentity","setOrigin","transformA","getCenterOfMassTransform","inverse","op_mul","zero","angularLowerLimit","angularUpperLimit","getTransform","constraint","btFixedConstraint","addConstraint","pivotA","pivotB","pivotV3","targetPivotV3","btPoint2PointConstraint","axisA","axisB","axisV3","targetAxisV3","btHingeConstraint","linearLowerLimit","lll","linearUpperLimit","lul","aul","rotationA","setEulerZYX","rotationB","btSliderConstraint","setLowerLinLimit","setUpperLinLimit","setLowerAngLimit","setUpperAngLimit","stiffness","damping","angularLock","enableSpring","btGeneric6DofSpringConstraint","setLinearLowerLimit","setLinearUpperLimit","setAngularLowerLimit","setAngularUpperLimit","toAmmoV3","setStiffness","rbAFrame","rbBFrame","btConeTwistConstraint","setAngularOnly","btGeneric6DofConstraint","createTorusShape","quat","SIMD_PI","subdivisions","gap","btHalfExtents","cylinderShape","btCylinderShape","setMargin","compoundShape","btCompoundShape","forward","addChildShape","CollisionEvents","object1","object2","eventCallback","AmmoDebugConstants","NoDebug","DrawWireframe","DrawAabb","DrawFeaturesText","DrawContactPoints","NoDeactivation","NoHelpText","DrawText","ProfileTimings","EnableSatComparison","DisableBulletLCP","EnableCCD","DrawConstraints","DrawConstraintLimits","FastWireframe","DrawNormals","DrawOnTop","MAX_DEBUG_DRAW_MODE","DebugDrawer","world","debugDrawMode","drawOnTop","maxBufferSize","setUsage","StaticDrawUsage","renderOrder","frustumCulled","debugDrawer","drawLine","drawContactPoint","reportErrorWarning","draw3dText","setDebugMode","getDebugMode","setDebugDrawer","debugDrawWorld","setDrawRange","heap","HEAPF32","fromX","fromY","fromZ","setXYZ","toX","toY","toZ","pointOnB","normalOnB","_lifeTime","warningString","hasOwnProperty","Pointer_stringify","warnedOnce","_location","_textString","debugMode","Visible","Deleted","_v1","_line3","Line3","_plane","_closestPoint","_triangle","Triangle","ConvexHull","tolerance","newFaces","assigned","VertexList","unassigned","makeEmpty","VertexNode","compute","distanceToPoint","ray","tNear","Infinity","tFar","vN","origin","vD","direction","at","intersectRay","outside","insertBefore","next","removeSubList","absorbingFace","faceVertices","removeAllVerticesFromFace","appendChain","nextVertex","addVertexToFace","isEmpty","first","maxDistance","maxFace","mark","minVertices","maxVertices","getComponent","setComponent","extremes","computeExtremes","closestPointToPoint","distanceToSquared","setFromCoplanarPoints","Face","getEdge","setTwin","activeFaces","eyeVertex","eyeFace","eyePoint","crossEdge","horizon","edge","deleteFaceVertices","twinEdge","twin","oppositeFace","computeHorizon","horizonEdge","tail","firstSideEdge","previousSideEdge","sideEdge","addAdjoiningFace","removeVertexFromFace","addNewFaces","resolveUnassignedPoints","computeInitialHull","nextVertexToAdd","addVertexToHull","reindexFaces","cleanup","midpoint","area","getMidpoint","getArea","e0","HalfEdge","e1","e2","ConvexGeometry","convexHull","newConvexGeometry","_newConvexGeometry","ConvexObjectBreaker","minSizeForBreak","smallDelta","tempLine1","tempPlane1","tempPlane2","tempPlane_Cut","tempCM1","tempCM2","tempVector3","tempVector3_2","tempVector3_3","tempVector3_P0","tempVector3_P1","tempVector3_P2","tempVector3_N0","tempVector3_N1","tempVector3_AB","tempVector3_CB","tempResultObjects","segments","prepareBreakableObject","ammoPhysicsData","subdivideByImpact","pointOfImpact","maxRadialIterations","maxRandomIterations","debris","maxTotalIterations","subdivideRadial","subObject","startAngle","endAngle","numIterations","applyAxisAngle","cutByPlane","obj1","obj2","coords","numFaces","getVertexIndex","faceIdx","vert","points1","points2","numPointPairs","n0","n1","c1","c2","coplanar","localPlane","transformPlaneToLocalSpace","va","vb","vc","segment","segmentState","mark0","mark1","intersectLine","segmentedObject1","segmentedObject2","newMass","radius1","numPoints1","radius2","numPoints2","numObjects","transformFreeVector","transformFreeVectorInverse","transformTiedVectorInverse","resultPlane","referencePoint","coplanarPoint","wasmSupported","WebAssembly","instantiate","module","Module","of","Instance","loadScriptAsync","doneCallback","tag","async","loadAmmoModule","PhysicsLoader","applyMixins","derivedCtor","constructors","getOwnPropertyNames","baseCtor","ClosestRayResultCallback","_btRayCallback","get_m_hitPointWorld","get_m_hitNormalWorld","rb","castObject","get_m_collisionObject","btRigidBody","threeObject","AllHitsRayResultCallback","hh","getHitPointsWorld","threeObjects","get_m_collisionObjects","_btRayFrom","_btRayTo","hasHit","rayTest","ClosestRaycaster","AllHitsRaycaster","require","createHACDShapes","createHullShape","createTriMeshShape","createVHACDShapes","iterateGeometries","AmmoPhysics","gravity","tmpVector3a","tmpMatrix4","tmpMatrix4a","emptyV3","impactPoint","impactNormal","isSoftBody","removeSoftBody","removeRigidBody","destructor","hasBody","setupPhysicsWorld","convexBreaker","objectsToRemove","numObjectsToRemove","constraints","softBodies","collisionConfiguration","btDefaultCollisionConfiguration","dispatcher","btCollisionDispatcher","broadphase","btDbvtBroadphase","solver","btSequentialImpulseConstraintSolver","btDiscreteDynamicsWorld","btSoftBodyRigidBodyCollisionConfiguration","softBodySolver","btDefaultSoftBodySolver","btSoftRigidDynamicsWorld","fragmentDepth","fractureImpulse","setTimeout","updatePhysics","detectCollisions","deltaTime","stepSimulation","maxSubSteps","fixedTimeStep","objThree","objPhys","emit","isKinematicObject","needUpdate","getWorldQuaternion","getWorldPosition","skipUpdate","isStaticObject","ignoreScale","getLocalScaling","compose","detectedCollisions","getDispatcher","numManifolds","getNumManifolds","contactManifold","getManifoldByIndexInternal","numContacts","getNumContacts","rb0","getBody0","rb1","getBody1","threeObject0","threeObject1","checkCollisions0","checkCollisions1","breakable0","breakable1","fractureImpulse0","fractureImpulse1","checkBreakable","contact","maxImpulse","contactPoint","getContactPoint","getDistance","getAppliedImpulse","get_m_positionWorldOnB","get_m_normalWorldOnB","names","combinedName","earlierDetectedCollisions","el","MAX_FRAGMENT_DEPTH","physicsBody","vel","angVel","fragment","createDebrisFromBreakableObject","removeDebris","obj0","enable","disable","setup","collider","addCollider","addConstraints","raycaster","defaultParams","axis","collisionShape","extractData","matrices","indexes","vertexArray","matrixArray","indexArray","complexShapes","btBoxShape","btSphereShape","btCylinderShapeX","btCylinderShapeZ","btConeShape","btConeShapeX","btConeShapeZ","btCapsuleShape","btCapsuleShapeX","btCapsuleShapeZ","concave","_compoundOffset","mergeCollisionShapesToCompoundShape","collisionShapes","_childOffset","margin","applyPosQuatScaleMargin","getWorldScale","compound","collisionGroup","collisionMask","addChildren","createCollisionShape","localTransform","rigidBody","collisionShapeToRigidBody","addRigidBodyToWorld","prepareThreeObjectForCollisionShape","cs","addRigidBody","ptr","localScale","setLocalScaling","disableDeactivation","motionState","btDefaultMotionState","localInertia","calculateLocalInertia","rbInfo","btRigidBodyConstructionInfo","setActivationState","ThreeGraphics","threeGraphicsConfig","alpha","antialias","usePhysics","VERSION","info","Project","projectConfig","firstSceneKey","plug","initializeScene","clientWidth","clientHeight","devicePixelRatio","maxTouchPoints","DigitalGlitch","Stats","Pass","container","addPanel","panel","dom","showPanel","preventDefault","beginTime","performance","prevTime","fpsPanel","Panel","msPanel","memory","memPanel","begin","usedJSHeapSize","jsHeapSizeLimit","setMode","fg","bg","PR","WIDTH","HEIGHT","TEXT_X","TEXT_Y","GRAPH_X","GRAPH_Y","GRAPH_WIDTH","GRAPH_HEIGHT","context","textBaseline","fillStyle","fillRect","fillText","globalAlpha","maxValue","debug","statistiques","stats","mouse","MainScene","blocks","addTower","block","raycast","rect","getBoundingClientRect","clientX","clientY","created","$","iterate","createProperty","stat","iterable","AS_ENTRIES","ArrayBufferViewCore","TYPED_ARRAYS_CONSTRUCTORS_REQUIRES_WRAPPERS","aTypedArrayConstructor","exportTypedArrayStaticMethod","TYPE","BOX","CYLINDER","SPHERE","CAPSULE","CONE","HULL","HACD","VHACD","MESH","HEIGHTFIELD","FIT","ALL","MANUAL","HEIGHTFIELD_DATA_TYPE","short","float","createCollisionShapes","createBoxShape","createCylinderShape","createCapsuleShape","createConeShape","createSphereShape","createHeightfieldTerrainShape","_setOptions","fit","halfExtents","_computeHalfExtents","_computeBounds","minHalfExtent","maxHalfExtent","_finishCollisionShape","_computeScale","cylinderAxis","sphereRadius","_computeRadius","bounds","btVertex","originalHull","btConvexHullShape","vertexCount","hullMaxVertices","isLastVertex","addPoint","getNumVertices","shapeHull","btShapeHull","buildHull","getPointer","getVertexPointer","triCount","hacd","SetCompacityWeight","compacityWeight","SetVolumeWeight","volumeWeight","SetNClusters","nClusters","SetNVerticesPerCH","nVerticesPerCH","SetConcavity","concavity","_malloc","triangles","SetPoints","SetTriangles","SetNPoints","SetNTriangles","pptr","tptr","HEAPF64","HEAP32","Compute","_free","GetNClusters","hull","nPoints","GetNPointsCH","nTriangles","GetNTrianglesCH","hullPoints","hullTriangles","GetCH","pi","px","py","pz","vhacd","Parameters","set_m_resolution","resolution","set_m_depth","set_m_concavity","set_m_planeDownsampling","planeDownsampling","set_m_convexhullDownsampling","convexhullDownsampling","set_m_alpha","set_m_beta","beta","set_m_gamma","gamma","set_m_pca","pca","set_m_mode","set_m_maxNumVerticesPerCH","maxNumVerticesPerCH","set_m_minVolumePerCH","minVolumePerCH","set_m_convexhullApproximation","convexhullApproximation","set_m_oclAcceleration","oclAcceleration","nHulls","GetNConvexHulls","GetConvexHull","get_m_nPoints","get_m_points","bta","btb","btc","triMesh","btTriangleMesh","bi","ci","addTriangle","setScaling","btBvhTriangleMeshShape","btConvexTriangleMeshShape","resources","heightfieldDistance","heightfieldData","heightScale","upAxis","hdt","heightDataType","PHY_SHORT","PHY_FLOAT","flipQuadEdges","heightStickLength","heightStickWidth","minHeight","POSITIVE_INFINITY","maxHeight","NEGATIVE_INFINITY","btHeightfieldTerrainShape","includeInvisible","object3D","maxRadiusSq","cz","_iterateVertices","clampScalar","minZ","maxZ","exports","define","modules","installedModules","__webpack_require__","moduleId","getter","Symbol","toStringTag","__esModule","ns","Common","_nextId","_seed","_nowStartTime","_warnedOnce","_decomp","extend","deep","argsStart","deepClone","parts","shuffle","choose","choices","isElement","HTMLElement","isFunction","isPlainObject","isString","webkitNow","_seededRandom","colorToNumber","colorString","logLevel","warnOnce","warning","chain","nextId","haystack","needle","list","mapped","topologicalSort","graph","visited","_topologicalSort","neighbors","neighbor","funcs","_chained","lastResult","args","chainPathBefore","base","chainPathAfter","setDecomp","decomp","getDecomp","global","Bounds","contains","overlaps","boundsA","boundsB","shift","deltaX","deltaY","magnitude","magnitudeSquared","rotateAbout","normalise","vectorA","vectorB","cross3","vectorC","mult","scalar","div","perp","neg","_temp","isInternal","fromPath","pathPattern","centre","mean","average","signed","inertia","numerator","denominator","vertice","nextVertice","chamfer","quality","qualityMin","qualityMax","newVertices","prevVertex","currentRadius","prevNormal","nextNormal","diagonalRadius","radiusVector","midNormal","scaledVertex","clockwiseSort","vertexA","vertexB","isConvex","upper","lower","eventNames","events","callbacks","newCallbacks","trigger","eventClone","Composite","Body","isModified","composites","label","setModified","composite","updateParents","updateChildren","childComposite","addBody","addComposite","removeBody","removeConstraint","removeComposite","compositeA","compositeB","removeCompositeAt","removeBodyAt","removeConstraintAt","keepStatic","isStatic","allBodies","allConstraints","allComposites","move","rebase","recursive","Sleeping","Axes","_inertiaScale","_nextCollidingGroupId","_nextNonCollidingGroupId","_nextCategory","defaults","torque","positionImpulse","constraintImpulse","totalContacts","speed","angularSpeed","isSensor","isSleeping","motion","sleepThreshold","density","restitution","friction","frictionStatic","frictionAir","collisionFilter","category","mask","slop","timeScale","strokeStyle","lineWidth","sprite","xScale","yScale","xOffset","yOffset","circleRadius","positionPrev","anglePrev","_original","_initProperties","nextGroup","isNonColliding","nextCategory","defaultFillStyle","defaultStrokeStyle","defaultLineWidth","settings","setStatic","setMass","setDensity","setInertia","setVertices","setAngle","setVelocity","setParts","setCentre","part","inverseMass","inverseInertia","moment","fromVertices","autoHull","hullCentre","total","_totalProperties","relative","totalArea","totalInertia","correction","deltaTimeSquared","velocityPrevX","velocityPrevY","applyForce","properties","_motionWakeThreshold","_motionSleepThreshold","_minBias","timeFactor","minMotion","maxMotion","sleepCounter","afterCollisions","pairs","pair","isActive","sleepingBody","movingBody","wasSleeping","Constraint","_warming","_torqueDampen","_minLength","pointA","pointB","initialPointA","initialPointB","angularStiffness","angleA","angleB","anchors","preSolveAll","solveAll","fixedA","fixedB","solve","pointAWorld","pointBWorld","currentLength","share","normalVelocity","relativeVelocity","difference","massTotal","inertiaTotal","resistanceTotal","postSolveAll","Pair","Contact","timestamp","parentA","parentB","contacts","activeContacts","separation","confirmedActive","timeCreated","timeUpdated","supports","collided","support","contactId","setActive","gradient","xx","Bodies","rectangle","trapezoid","slope","verticesPath","roof","circle","maxSides","sides","yy","vertexSets","flagInternal","removeCollinear","minimumArea","removeDuplicatePoints","canDecomp","isConcave","quickDecomp","makeCCW","removeCollinearPoints","decomposed","chunkVertices","coincident_max_dist","partA","partB","pav","pbv","da","db","Mouse","absolute","mousedownPosition","mouseupPosition","wheelDelta","pixelRatio","sourceEvents","mousemove","mousedown","mouseup","mousewheel","_getRelativeMousePosition","touches","changedTouches","detail","setElement","clearSourceEvents","setOffset","setScale","elementBounds","rootNode","parentNode","scrollX","pageXOffset","scrollLeft","scrollY","pageYOffset","scrollTop","pageX","pageY","Detector","SAT","collisions","broadphasePairs","engine","pairsTable","table","canCollide","previousCollision","pairId","collides","filterA","filterB","overlapAB","overlapBA","minOverlap","canReusePrevCol","axisBodyA","axisBody","axisBodyB","axisNumber","_overlapAxes","reused","overlap","penetration","verticesB","_findSupports","verticesA","projectionA","projectionB","MAX_VALUE","_projectToAxis","projection","nearestDistance","vertexToBody","bodyAPosition","prevIndex","nextIndex","Plugin","_registry","isPlugin","registered","pluginVersion","versionParse","registeredVersion","dependencyParse","install","isUsed","used","isFor","versionSatisfies","use","sortedDependencies","status","_warned","tracked","parsedBase","resolved","pattern","exec","major","minor","patch","isRange","operator","prerelease","Render","_requestAnimationFrame","_cancelAnimationFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","msRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","msCancelAnimationFrame","_goodFps","_goodDelta","frameRequestId","timing","historySize","deltaHistory","lastTime","lastTimestamp","lastElapsed","timestampElapsed","timestampElapsedHistory","engineDeltaHistory","engineElapsedHistory","elapsedHistory","wireframeBackground","hasBounds","wireframes","showSleeping","showDebug","showStats","showPerformance","showBroadphase","showBounds","showVelocity","showCollisions","showSeparations","showAxes","showPositions","showAngleIndicator","showIds","showVertexNumbers","showConvexHulls","showInternalEdges","showMousePosition","_createCanvas","run","loop","_updateTiming","_getPixelRatio","viewHeight","viewWidth","outerRatio","innerRatio","startViewTransform","boundsWidth","boundsHeight","boundsScaleX","boundsScaleY","setTransform","endViewTransform","startTime","currentBackground","_applyBackground","globalCompositeOperation","enableSleeping","bodyConvexHulls","bodyWireframes","bodyBounds","bodyAxes","bodyPositions","bodyVelocity","bodyIds","separations","vertexNumbers","mousePosition","grid","sections","section","lastEngineDelta","lastDelta","deltaMean","_mean","elapsedMean","engineDeltaMean","engineElapsedMean","timestampElapsedMean","rateMean","fps","graphHeight","indicator","plotY","beginPath","stroke","closePath","coils","_getTexture","normalPosX","normalPosY","bucketKeys","buckets","bucketId","region","bucketWidth","bucketHeight","inspector","selected","item","setLineDash","selectStart","selectBounds","oncontextmenu","onselectstart","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","imagePath","cssBackground","backgroundSize","normalImpulse","tangentImpulse","Engine","Resolver","Pairs","Grid","positionIterations","velocityIterations","constraintIterations","metrics","gridPairs","_bodiesApplyGravity","_bodiesUpdate","pairsList","removeOld","collisionStart","preSolvePosition","solvePosition","postSolvePosition","preSolveVelocity","solveVelocity","collisionActive","collisionEnd","_bodiesClearForces","engineA","engineB","gravityScale","worldBounds","_restingThresh","_restingThreshTangent","_positionDampen","_positionWarming","_frictionNormalMultiplier","activeCount","bodyBtoA","contactShare","tempA","tempB","tempC","tempD","contactVertex","timeScaleSquared","tempE","offsetA","offsetB","velocityPointA","velocityPointB","tangentVelocity","tangentSpeed","tangentVelocityDirection","normalForce","maxFriction","oAcN","oBcN","contactNormalImpulse","contactTangentImpulse","_pairMaxIdleLife","pairIndex","indexesToRemove","forceUpdate","row","bucket","gridChanged","newRegion","_getRegion","union","_regionUnion","startCol","endCol","startRow","endRow","_getBucketId","isInsideNewRegion","isInsideOldRegion","_bucketRemoveBody","_createBucket","_bucketAddBody","_createActivePairsList","regionA","regionB","_createRegion","column","pairKeys","Matter","Composites","MouseConstraint","Query","Runner","Svg","World","before","after","columns","rows","columnGap","rowGap","lastBody","bodyHeight","bodyWidth","xOffsetA","yOffsetA","xOffsetB","yOffsetB","bodyAHeight","bodyAWidth","bodyBHeight","bodyBWidth","crossBrace","bodyC","pyramid","actualRows","lastBodyWidth","newtonsCradle","car","wheelSize","wheelBase","wheelAOffset","wheelBOffset","wheelYOffset","wheelA","wheelB","axelA","axelB","softBody","particleRadius","particleOptions","constraintOptions","mouseConstraint","_triggerEvents","mouseEvents","startPoint","endPoint","rayWidth","rayAngle","rayLength","rayX","rayY","_frameTimeout","clearTimeout","deltaSampleSize","counterTimestamp","frameCounter","timePrev","timeScalePrev","isFixed","runner","deltaMin","deltaMax","tick","pathToVertices","sampleLength","segmentsQueue","lastSegment","lastPoint","segmentIndex","lx","ly","pathSegType","isRelative","addSegmentPoint","segType","pathSegTypeAsLetter","toUpperCase","_svgPathToAbsolute","getTotalLength","pathSegList","numberOfItems","getItem","getPathSegAtLength","getPointAtLength","x0","y0","segs","seg","replaceItem","createSVGPathSegMovetoAbs","createSVGPathSegLinetoAbs","createSVGPathSegLinetoHorizontalAbs","createSVGPathSegLinetoVerticalAbs","createSVGPathSegCurvetoCubicAbs","createSVGPathSegCurvetoCubicSmoothAbs","createSVGPathSegCurvetoQuadraticAbs","createSVGPathSegCurvetoQuadraticSmoothAbs","createSVGPathSegArcAbs","r1","r2","largeArcFlag","sweepFlag","addListener","emitter","listener","EE","_events","_eventsCount","clearEvent","delete","version_1","handlers","ee","listeners","removeListener","__spreadArray","length_1"],"sourceRoot":""}